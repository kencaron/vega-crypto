!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="./",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,i){r.apply(this,[e,t,i].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){n(113),e.exports=n(64)},function(e,t,n){(function(e,r){"use strict";function i(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function a(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,n){if(a()<n)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):(null===t&&(t=new e(n)),t.length=n),t}function e(t,n,r){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,n,r);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return u(this,t,n,r)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?c(e,t,n):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t,n,r){return s(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function l(t,n){if(s(n),t=o(t,n<0?0:0|g(n)),!e.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)t[r]=0;return t}function c(t,n,r){if("string"==typeof r&&""!==r||(r="utf8"),!e.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|v(n,r);t=o(t,i);var a=t.write(n,r);return a!==i&&(t=t.slice(0,a)),t}function d(e,t){var n=t.length<0?0:0|g(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(t,n,r,i){if(n.byteLength,r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return n=void 0===r&&void 0===i?new Uint8Array(n):void 0===i?new Uint8Array(n,r):new Uint8Array(n,r,i),e.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=e.prototype):t=d(t,n),t}function p(t,n){if(e.isBuffer(n)){var r=0|g(n.length);return t=o(t,r),0===t.length?t:(n.copy(t,0,0,r),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||Z(n.length)?o(t,0):d(t,n);if("Buffer"===n.type&&K(n.data))return d(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function m(t){return+t!=t&&(t=0),e.alloc(+t)}function v(t,n){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(i)return V(t).length;n=(""+n).toLowerCase(),i=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return z(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(t,n,r,i,a){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=a?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(a)return-1;r=t.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof n&&(n=e.from(n,i)),e.isBuffer(n))return 0===n.length?-1:x(t,n,r,i,a);if("number"==typeof n)return n=255&n,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,n,r):Uint8Array.prototype.lastIndexOf.call(t,n,r):x(t,[n],r,i,a);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,r,i){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,u=e.length,s=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,n/=2}var f;if(i){var l=-1;for(f=n;f<u;f++)if(a(e,f)===a(t,l===-1?0:f-l)){if(l===-1&&(l=f),f-l+1===s)return l*o}else l!==-1&&(f-=f-l),l=-1}else for(n+s>u&&(n=u-s),f=n;f>=0;f--){for(var c=!0,d=0;d<s;d++)if(a(e,f+d)!==a(t,d)){c=!1;break}if(c)return f}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;e[n+o]=u}return o}function k(e,t,n,r){return X(V(t,e.length-n),e,n,r)}function M(e,t,n,r){return X(H(t),e,n,r)}function E(e,t,n,r){return M(e,t,n,r)}function O(e,t,n,r){return X(G(t),e,n,r)}function S(e,t,n,r){return X(Y(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,u=a>239?4:a>223?3:a>191?2:1;if(i+u<=n){var s,f,l,c;switch(u){case 1:a<128&&(o=a);break;case 2:s=e[i+1],128===(192&s)&&(c=(31&a)<<6|63&s,c>127&&(o=c));break;case 3:s=e[i+1],f=e[i+2],128===(192&s)&&128===(192&f)&&(c=(15&a)<<12|(63&s)<<6|63&f,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:s=e[i+1],f=e[i+2],l=e[i+3],128===(192&s)&&128===(192&f)&&128===(192&l)&&(c=(15&a)<<18|(63&s)<<12|(63&f)<<6|63&l,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=u}return R(r)}function R(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function z(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function D(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=W(e[a]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function P(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function $(t,n,r,i,a,o){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>a||n<o)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function q(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function j(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,i){return i||j(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,i){return i||j(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function I(e){if(e=B(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function B(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function H(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Y(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function G(e){return J.toByteArray(I(e))}function X(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Z(e){return e!==e}var J=n(69),Q=n(95),K=n(97);t.Buffer=e,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:i(),t.kMaxLength=a(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,n){return u(null,e,t,n)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,n){return f(null,e,t,n)},e.allocUnsafe=function(e){return l(null,e)},e.allocUnsafeSlow=function(e){return l(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,i=n.length,a=0,o=Math.min(r,i);a<o;++a)if(t[a]!==n[a]){r=t[a],i=n[a];break}return r<i?-1:i<r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!K(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var i=e.allocUnsafe(n),a=0;for(r=0;r<t.length;++r){var o=t[r];if(!e.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,a),a+=o.length}return i},e.byteLength=v,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):y.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,r,i,a){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),n<0||r>t.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&n>=r)return 0;if(i>=a)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,i>>>=0,a>>>=0,this===t)return 0;for(var o=a-i,u=r-n,s=Math.min(o,u),f=this.slice(i,a),l=t.slice(n,r),c=0;c<s;++c)if(f[c]!==l[c]){o=f[c],u=l[c];break}return o<u?-1:u<o?1:0},e.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},e.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return M(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<t&&(n=t);var i;if(e.TYPED_ARRAY_SUPPORT)i=this.subarray(t,n),i.__proto__=e.prototype;else{var a=n-t;i=new e(a,(void 0));for(var o=0;o<a;++o)i[o]=this[o+t]}return i},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},e.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||P(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},e.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t=0|t,n=0|n,!r){var i=Math.pow(2,8*n)-1;$(this,e,t,n,i,0)}var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t=0|t,n=0|n,!r){var i=Math.pow(2,8*n)-1;$(this,e,t,n,i,0)}var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},e.prototype.writeUInt8=function(t,n,r){return t=+t,n=0|n,r||$(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,r){return t=+t,n=0|n,r||$(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):L(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,r){return t=+t,n=0|n,r||$(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):L(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,r){return t=+t,n=0|n,r||$(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):q(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,r){return t=+t,n=0|n,r||$(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):q(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);$(this,e,t,n,i-1,-i)}var a=0,o=1,u=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===u&&0!==this[t+a-1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);$(this,e,t,n,i-1,-i)}var a=n-1,o=1,u=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===u&&0!==this[t+a+1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},e.prototype.writeInt8=function(t,n,r){return t=+t,n=0|n,r||$(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,r){return t=+t,n=0|n,r||$(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):L(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,r){return t=+t,n=0|n,r||$(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):L(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,r){return t=+t,n=0|n,r||$(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):q(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,r){return t=+t,n=0|n,r||$(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):q(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,i){if(r||(r=0),i||0===i||(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var a,o=i-r;if(this===t&&r<n&&n<i)for(a=o-1;a>=0;--a)t[a+n]=this[a+r];else if(o<1e3||!e.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+n]=this[a+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),n);return o},e.prototype.fill=function(t,n,r,i){if("string"==typeof t){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t=255&t);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var o;if("number"==typeof t)for(o=n;o<r;++o)this[o]=t;else{var u=e.isBuffer(t)?t:V(new e(t,i).toString()),s=u.length;for(o=0;o<r-n;++o)this[o+n]=u[o%s]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(1).Buffer,function(){return this}())},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function o(){g&&h&&(g=!1,h.length?p=h.concat(p):m=-1,p.length&&u())}function u(){if(!g){var e=i(o);g=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,g=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function f(){}var l,c,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var h,p=[],g=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||g||i(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=f,d.addListener=f,d.once=f,d.off=f,d.removeListener=f,d.removeAllListeners=f,d.emit=f,d.prependListener=f,d.prependOnceListener=f,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(13).EventEmitter,a=n(4);a(r,i),r.Readable=n(133),r.Writable=n(135),r.Duplex=n(131),r.Transform=n(134),r.PassThrough=n(132),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&f.pause&&f.pause()}function r(){f.readable&&f.resume&&f.resume()}function a(){l||(l=!0,e.end())}function o(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(s(),0===i.listenerCount(this,"error"))throw e}function s(){f.removeListener("data",n),e.removeListener("drain",r),f.removeListener("end",a),f.removeListener("close",o),f.removeListener("error",u),e.removeListener("error",u),f.removeListener("end",s),f.removeListener("close",s),e.removeListener("close",s)}var f=this;f.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(f.on("end",a),f.on("close",o));var l=!1;return f.on("error",u),e.on("error",u),f.on("end",s),f.on("close",s),e.on("close",s),e.emit("pipe",f),e}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function a(e){return null==e}function o(e){return"number"==typeof e}function u(e){return"string"==typeof e}function s(e){return"symbol"==typeof e}function f(e){return void 0===e}function l(e){return"[object RegExp]"===m(e)}function c(e){return"object"==typeof e&&null!==e}function d(e){return"[object Date]"===m(e)}function h(e){return"[object Error]"===m(e)||e instanceof Error}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=a,t.isNumber=o,t.isString=u,t.isSymbol=s,t.isUndefined=f,t.isRegExp=l,t.isObject=c,t.isDate=d,t.isError=h,t.isFunction=p,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(t,n(1).Buffer)},[144,52,31],[144,101,103],function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return function(t,n){return o(e(t),n)}}function n(e,t){return[e,t]}function r(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=M?10:a>=E?5:a>=O?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=M?10:a>=E?5:a>=O?2:1)}function i(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=M?i*=10:a>=E?i*=5:a>=O&&(i*=2),t<e?-i:i}function a(e){return e.length}var o=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},u=function(e){return 1===e.length&&(e=t(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}},s=u(o),f=s.right,l=s.left,c=function(e,t){null==t&&(t=n);for(var r=0,i=e.length-1,a=e[0],o=new Array(i<0?0:i);r<i;)o[r]=t(a,a=e[++r]);return o},d=function(e,t,r){var i,a,o,u,s=e.length,f=t.length,l=new Array(s*f);for(null==r&&(r=n),i=o=0;i<s;++i)for(u=e[i],a=0;a<f;++a,++o)l[o]=r(u,t[a]);return l},h=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},p=function(e){return null===e?NaN:+e},g=function(e,t){var n,r,i=e.length,a=0,o=-1,u=0,s=0;if(null==t)for(;++o<i;)isNaN(n=p(e[o]))||(r=n-u,u+=r/++a,s+=r*(n-u));else for(;++o<i;)isNaN(n=p(t(e[o],o,e)))||(r=n-u,u+=r/++a,s+=r*(n-u));if(a>1)return s/(a-1)},m=function(e,t){var n=g(e,t);return n?Math.sqrt(n):n},v=function(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},y=Array.prototype,b=y.slice,_=y.map,x=function(e){return function(){return e}},w=function(e){return e},k=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a},M=Math.sqrt(50),E=Math.sqrt(10),O=Math.sqrt(2),S=function(e,t,n){var i,a,o,u,s=-1;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),0===(u=r(e,t,n))||!isFinite(u))return[];if(u>0)for(e=Math.ceil(e/u),t=Math.floor(t/u),o=new Array(a=Math.ceil(t-e+1));++s<a;)o[s]=(e+s)*u;else for(e=Math.floor(e*u),t=Math.ceil(t*u),o=new Array(a=Math.ceil(e-t+1));++s<a;)o[s]=(e-s)/u;return i&&o.reverse(),o},A=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},C=function(){function e(e){var a,o,u=e.length,s=new Array(u);for(a=0;a<u;++a)s[a]=t(e[a],a,e);var l=n(s),c=l[0],d=l[1],h=r(s,c,d);Array.isArray(h)||(h=i(c,d,h),h=k(Math.ceil(c/h)*h,Math.floor(d/h)*h,h));for(var p=h.length;h[0]<=c;)h.shift(),--p;for(;h[p-1]>d;)h.pop(),--p;var g,m=new Array(p+1);for(a=0;a<=p;++a)g=m[a]=[],g.x0=a>0?h[a-1]:c,g.x1=a<p?h[a]:d;for(a=0;a<u;++a)o=s[a],c<=o&&o<=d&&m[f(h,o,0,p)].push(e[a]);return m}var t=w,n=v,r=A;return e.value=function(n){return arguments.length?(t="function"==typeof n?n:x(n),e):t},e.domain=function(t){return arguments.length?(n="function"==typeof t?t:x([t[0],t[1]]),e):n},e.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:x(Array.isArray(t)?b.call(t):t),e):r},e},R=function(e,t,n){if(null==n&&(n=p),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}},T=function(e,t,n){return e=_.call(e,p).sort(o),Math.ceil((n-t)/(2*(R(e,.75)-R(e,.25))*Math.pow(e.length,-1/3)))},z=function(e,t,n){return Math.ceil((n-t)/(3.5*m(e)*Math.pow(e.length,-1/3)))},D=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r},N=function(e,t){var n,r=e.length,i=r,a=-1,o=0;if(null==t)for(;++a<r;)isNaN(n=p(e[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=p(t(e[a],a,e)))?--i:o+=n;if(i)return o/i},P=function(e,t){var n,r=e.length,i=-1,a=[];if(null==t)for(;++i<r;)isNaN(n=p(e[i]))||a.push(n);else for(;++i<r;)isNaN(n=p(t(e[i],i,e)))||a.push(n);return R(a.sort(o),.5)},$=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n},L=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r>n&&(r=n);return r},q=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},j=function(e,t){if(n=e.length){var n,r,i=0,a=0,u=e[a];for(null==t&&(t=o);++i<n;)(t(r=e[i],u)<0||0!==t(u,u))&&(u=r,a=i);return 0===t(u,u)?a:void 0}},F=function(e,t,n){for(var r,i,a=(null==n?e.length:n)-(t=null==t?0:+t);a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},U=function(e,t){var n,r=e.length,i=-1,a=0;if(null==t)for(;++i<r;)(n=+e[i])&&(a+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(a+=n);return a},I=function(e){if(!(i=e.length))return[];for(var t=-1,n=L(e,a),r=new Array(n);++t<n;)for(var i,o=-1,u=r[t]=new Array(i);++o<i;)u[o]=e[o][t];return r},B=function(){return I(arguments)};e.bisect=f,e.bisectRight=f,e.bisectLeft=l,e.ascending=o,e.bisector=u,e.cross=d,e.descending=h,e.deviation=m,e.extent=v,e.histogram=C,e.thresholdFreedmanDiaconis=T,e.thresholdScott=z,e.thresholdSturges=A,e.max=D,e.mean=N,e.median=P,e.merge=$,e.min=L,e.pairs=c,e.permute=q,e.quantile=R,e.range=k,e.scan=j,e.shuffle=F,e.sum=U,e.ticks=S,e.tickIncrement=r,e.tickStep=i,e.transpose=I,e.variance=g,e.zip=B,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){}function n(e,n){var r=new t;if(e instanceof t)e.each(function(e,t){r.set(t,e)});else if(Array.isArray(e)){var i,a=-1,o=e.length;if(null==n)for(;++a<o;)r.set(a,e[a]);else for(;++a<o;)r.set(n(i=e[a],a,e),i)}else if(e)for(var u in e)r.set(u,e[u]);return r}function r(){return{}}function i(e,t,n){e[t]=n}function a(){return n()}function o(e,t,n){e.set(t,n)}function u(){}function s(e,t){var n=new u;if(e instanceof u)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}var f="$";t.prototype=n.prototype={constructor:t,has:function(e){return f+e in this},get:function(e){return this[f+e]},set:function(e,t){return this[f+e]=t,this},remove:function(e){var t=f+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===f&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===f&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===f&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===f&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===f&&++e;return e},empty:function(){for(var e in this)if(e[0]===f)return!1;return!0},each:function(e){for(var t in this)t[0]===f&&e(this[t],t.slice(1),this)}};var l=function(){function e(t,r,i,a){if(r>=l.length)return null!=u&&t.sort(u),null!=s?s(t):t;for(var o,f,c,d=-1,h=t.length,p=l[r++],g=n(),m=i();++d<h;)(c=g.get(o=p(f=t[d])+""))?c.push(f):g.set(o,[f]);return g.each(function(t,n){a(m,n,e(t,r,i,a))}),m}function t(e,n){if(++n>l.length)return e;var r,i=c[n-1];return null!=s&&n>=l.length?r=e.entries():(r=[],e.each(function(e,i){
r.push({key:i,values:t(e,n)})})),null!=i?r.sort(function(e,t){return i(e.key,t.key)}):r}var u,s,f,l=[],c=[];return f={object:function(t){return e(t,0,r,i)},map:function(t){return e(t,0,a,o)},entries:function(n){return t(e(n,0,a,o),0)},key:function(e){return l.push(e),f},sortKeys:function(e){return c[l.length-1]=e,f},sortValues:function(e){return u=e,f},rollup:function(e){return s=e,f}}},c=n.prototype;u.prototype=s.prototype={constructor:u,has:c.has,add:function(e){return e+="",this[f+e]=e,this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};var d=function(e){var t=[];for(var n in e)t.push(n);return t},h=function(e){var t=[];for(var n in e)t.push(e[n]);return t},p=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t};e.nest=l,e.set=s,e.map=n,e.keys=d,e.values=h,e.entries=p,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function n(){}function r(e){var t;return e=(e+"").trim().toLowerCase(),(t=$.exec(e))?(t=parseInt(t[1],16),new s(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=L.exec(e))?i(parseInt(t[1],16)):(t=q.exec(e))?new s(t[1],t[2],t[3],1):(t=j.exec(e))?new s(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=F.exec(e))?a(t[1],t[2],t[3],t[4]):(t=U.exec(e))?a(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=I.exec(e))?l(t[1],t[2]/100,t[3]/100,1):(t=B.exec(e))?l(t[1],t[2]/100,t[3]/100,t[4]):W.hasOwnProperty(e)?i(W[e]):"transparent"===e?new s(NaN,NaN,NaN,0):null}function i(e){return new s(e>>16&255,e>>8&255,255&e,1)}function a(e,t,n,r){return r<=0&&(e=t=n=NaN),new s(e,t,n,r)}function o(e){return e instanceof n||(e=r(e)),e?(e=e.rgb(),new s(e.r,e.g,e.b,e.opacity)):new s}function u(e,t,n,r){return 1===arguments.length?o(e):new s(e,t,n,null==r?1:r)}function s(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function f(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function l(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new h(e,t,n,r)}function c(e){if(e instanceof h)return new h(e.h,e.s,e.l,e.opacity);if(e instanceof n||(e=r(e)),!e)return new h;if(e instanceof h)return e;e=e.rgb();var t=e.r/255,i=e.g/255,a=e.b/255,o=Math.min(t,i,a),u=Math.max(t,i,a),s=NaN,f=u-o,l=(u+o)/2;return f?(s=t===u?(i-a)/f+6*(i<a):i===u?(a-t)/f+2:(t-i)/f+4,f/=l<.5?u+o:2-u-o,s*=60):f=l>0&&l<1?0:s,new h(s,f,l,e.opacity)}function d(e,t,n,r){return 1===arguments.length?c(e):new h(e,t,n,null==r?1:r)}function h(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function p(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function g(e){if(e instanceof y)return new y(e.l,e.a,e.b,e.opacity);if(e instanceof O){if(isNaN(e.h))return new y(e.l,0,0,e.opacity);var t=e.h*V;return new y(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof s||(e=o(e));var n,r,i=w(e.r),a=w(e.g),u=w(e.b),f=b((.2225045*i+.7168786*a+.0606169*u)/X);return i===a&&a===u?n=r=f:(n=b((.4360747*i+.3850649*a+.1430804*u)/G),r=b((.0139322*i+.0971045*a+.7141733*u)/Z)),new y(116*f-16,500*(n-f),200*(f-r),e.opacity)}function m(e,t){return new y(e,0,0,null==t?1:t)}function v(e,t,n,r){return 1===arguments.length?g(e):new y(e,t,n,null==r?1:r)}function y(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function b(e){return e>ee?Math.pow(e,1/3):e/K+J}function _(e){return e>Q?e*e*e:K*(e-J)}function x(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function w(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function k(e){if(e instanceof O)return new O(e.h,e.c,e.l,e.opacity);if(e instanceof y||(e=g(e)),0===e.a&&0===e.b)return new O(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*H;return new O(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function M(e,t,n,r){return 1===arguments.length?k(e):new O(n,t,e,null==r?1:r)}function E(e,t,n,r){return 1===arguments.length?k(e):new O(e,t,n,null==r?1:r)}function O(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function S(e){if(e instanceof C)return new C(e.h,e.s,e.l,e.opacity);e instanceof s||(e=o(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(se*r+oe*t-ue*n)/(se+oe-ue),a=r-i,u=(ae*(n-i)-re*a)/ie,f=Math.sqrt(u*u+a*a)/(ae*i*(1-i)),l=f?Math.atan2(u,a)*H-120:NaN;return new C(l<0?l+360:l,f,i,e.opacity)}function A(e,t,n,r){return 1===arguments.length?S(e):new C(e,t,n,null==r?1:r)}function C(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}var R=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e},T=.7,z=1/T,D="\\s*([+-]?\\d+)\\s*",N="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",P="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$=/^#([0-9a-f]{3})$/,L=/^#([0-9a-f]{6})$/,q=new RegExp("^rgb\\("+[D,D,D]+"\\)$"),j=new RegExp("^rgb\\("+[P,P,P]+"\\)$"),F=new RegExp("^rgba\\("+[D,D,D,N]+"\\)$"),U=new RegExp("^rgba\\("+[P,P,P,N]+"\\)$"),I=new RegExp("^hsl\\("+[N,P,P]+"\\)$"),B=new RegExp("^hsla\\("+[N,P,P,N]+"\\)$"),W={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R(n,r,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),R(s,u,t(n,{brighter:function(e){return e=null==e?z:Math.pow(z,e),new s(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new s(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+f(this.r)+f(this.g)+f(this.b)},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),R(h,d,t(n,{brighter:function(e){return e=null==e?z:Math.pow(z,e),new h(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new h(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new s(p(e>=240?e-240:e+120,i,r),p(e,i,r),p(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var V=Math.PI/180,H=180/Math.PI,Y=18,G=.96422,X=1,Z=.82521,J=4/29,Q=6/29,K=3*Q*Q,ee=Q*Q*Q;R(y,v,t(n,{brighter:function(e){return new y(this.l+Y*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new y(this.l-Y*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=G*_(t),e=X*_(e),n=Z*_(n),new s(x(3.1338561*t-1.6168667*e-.4906146*n),x(-.9787684*t+1.9161415*e+.033454*n),x(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),R(O,E,t(n,{brighter:function(e){return new O(this.h,this.c,this.l+Y*(null==e?1:e),this.opacity)},darker:function(e){return new O(this.h,this.c,this.l-Y*(null==e?1:e),this.opacity)},rgb:function(){return g(this).rgb()}}));var te=-.14861,ne=1.78277,re=-.29227,ie=-.90649,ae=1.97294,oe=ae*ie,ue=ae*ne,se=ne*re-ie*te;R(C,A,t(n,{brighter:function(e){return e=null==e?z:Math.pow(z,e),new C(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new C(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*V,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new s(255*(t+n*(te*r+ne*i)),255*(t+n*(re*r+ie*i)),255*(t+n*(ae*r)),this.opacity)}})),e.color=r,e.rgb=u,e.hsl=d,e.lab=v,e.hcl=E,e.lch=M,e.gray=m,e.cubehelix=A,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(10))}(this,function(e,t){"use strict";function n(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function r(e,t){return function(n){return e+n*t}}function i(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function a(e,t){var n=t-e;return n?r(e,n>180||n<-180?n-360*Math.round(n/360):n):A(isNaN(e)?t:e)}function o(e){return 1===(e=+e)?u:function(t,n){return n-t?i(t,n,e):A(isNaN(t)?n:t)}}function u(e,t){var n=t-e;return n?r(e,n):A(isNaN(e)?t:e)}function s(e){return function(n){var r,i,a=n.length,o=new Array(a),u=new Array(a),s=new Array(a);for(r=0;r<a;++r)i=t.rgb(n[r]),o[r]=i.r||0,u[r]=i.g||0,s[r]=i.b||0;return o=e(o),u=e(u),s=e(s),i.opacity=1,function(e){return i.r=o(e),i.g=u(e),i.b=s(e),i+""}}}function f(e){return function(){return e}}function l(e){return function(t){return e(t)+""}}function c(e){return"none"===e?I:(w||(w=document.createElement("DIV"),k=document.documentElement,M=document.defaultView),w.style.transform=e,e=M.getComputedStyle(k.appendChild(w),null).getPropertyValue("transform"),k.removeChild(w),e=e.slice(7,-1).split(","),B(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function d(e){return null==e?I:(E||(E=document.createElementNS("http://www.w3.org/2000/svg","g")),E.setAttribute("transform",e),(e=E.transform.baseVal.consolidate())?(e=e.matrix,B(e.a,e.b,e.c,e.d,e.e,e.f)):I)}function h(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function a(e,r,i,a,o,u){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:N(e,i)},{i:s-2,x:N(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}function o(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:N(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function u(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:N(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function s(e,t,n,r,a,o){if(e!==n||t!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:N(e,n)},{i:u-2,x:N(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),u(t.skewX,n.skewX,r,i),s(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t,n=-1,a=i.length;++n<a;)r[(t=i[n]).i]=t.x(e);return r.join("")}}}function p(e){return((e=Math.exp(e))+1/e)/2}function g(e){return((e=Math.exp(e))-1/e)/2}function m(e){return((e=Math.exp(2*e))-1)/(e+1)}function v(e){return function(n,r){var i=e((n=t.hsl(n)).h,(r=t.hsl(r)).h),a=u(n.s,r.s),o=u(n.l,r.l),s=u(n.opacity,r.opacity);return function(e){return n.h=i(e),n.s=a(e),n.l=o(e),n.opacity=s(e),n+""}}}function y(e,n){var r=u((e=t.lab(e)).l,(n=t.lab(n)).l),i=u(e.a,n.a),a=u(e.b,n.b),o=u(e.opacity,n.opacity);return function(t){return e.l=r(t),e.a=i(t),e.b=a(t),e.opacity=o(t),e+""}}function b(e){return function(n,r){var i=e((n=t.hcl(n)).h,(r=t.hcl(r)).h),a=u(n.c,r.c),o=u(n.l,r.l),s=u(n.opacity,r.opacity);return function(e){return n.h=i(e),n.c=a(e),n.l=o(e),n.opacity=s(e),n+""}}}function _(e){return function n(r){function i(n,i){var a=e((n=t.cubehelix(n)).h,(i=t.cubehelix(i)).h),o=u(n.s,i.s),s=u(n.l,i.l),f=u(n.opacity,i.opacity);return function(e){return n.h=a(e),n.s=o(e),n.l=s(Math.pow(e,r)),n.opacity=f(e),n+""}}return r=+r,i.gamma=n,i}(1)}function x(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}var w,k,M,E,O=function(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[i],o=e[i+1],u=i>0?e[i-1]:2*a-o,s=i<t-1?e[i+2]:2*o-a;return n((r-i/t)*t,u,a,o,s)}},S=function(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),a=e[(i+t-1)%t],o=e[i%t],u=e[(i+1)%t],s=e[(i+2)%t];return n((r-i/t)*t,a,o,u,s)}},A=function(e){return function(){return e}},C=function e(n){function r(e,n){var r=i((e=t.rgb(e)).r,(n=t.rgb(n)).r),a=i(e.g,n.g),o=i(e.b,n.b),s=u(e.opacity,n.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=s(t),e+""}}var i=o(n);return r.gamma=e,r}(1),R=s(O),T=s(S),z=function(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=j(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}},D=function(e,t){var n=new Date;return e=+e,t-=e,function(r){return n.setTime(e+t*r),n}},N=function(e,t){return e=+e,t-=e,function(n){return e+t*n}},P=function(e,t){var n,r={},i={};null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={});for(n in t)n in e?r[n]=j(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L=new RegExp($.source,"g"),q=function(e,t){var n,r,i,a=$.lastIndex=L.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=$.exec(e))&&(r=L.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:N(n,r)})),a=L.lastIndex;return a<t.length&&(i=t.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?l(s[0].x):f(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})},j=function(e,n){var r,i=typeof n;return null==n||"boolean"===i?A(n):("number"===i?N:"string"===i?(r=t.color(n))?(n=r,C):q:n instanceof t.color?C:n instanceof Date?D:Array.isArray(n)?z:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?P:N)(e,n)},F=function(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}},U=180/Math.PI,I={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},B=function(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*U,skewX:Math.atan(s)*U,scaleX:o,scaleY:u}},W=h(c,"px, ","px)","deg)"),V=h(d,", ",")",")"),H=Math.SQRT2,Y=2,G=4,X=1e-12,Z=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],u=t[0],s=t[1],f=t[2],l=u-i,c=s-a,d=l*l+c*c;if(d<X)r=Math.log(f/o)/H,n=function(e){return[i+e*l,a+e*c,o*Math.exp(H*e*r)]};else{var h=Math.sqrt(d),v=(f*f-o*o+G*d)/(2*o*Y*h),y=(f*f-o*o-G*d)/(2*f*Y*h),b=Math.log(Math.sqrt(v*v+1)-v),_=Math.log(Math.sqrt(y*y+1)-y);r=(_-b)/H,n=function(e){var t=e*r,n=p(b),u=o/(Y*h)*(n*m(H*t+b)-g(b));return[i+u*l,a+u*c,o*n/p(H*t+b)]}}return n.duration=1e3*r,n},J=v(a),Q=v(u),K=b(a),ee=b(u),te=_(a),ne=_(u),re=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};e.interpolate=j,e.interpolateArray=z,e.interpolateBasis=O,e.interpolateBasisClosed=S,e.interpolateDate=D,e.interpolateNumber=N,e.interpolateObject=P,e.interpolateRound=F,e.interpolateString=q,e.interpolateTransformCss=W,e.interpolateTransformSvg=V,e.interpolateZoom=Z,e.interpolateRgb=C,e.interpolateRgbBasis=R,e.interpolateRgbBasisClosed=T,e.interpolateHsl=J,e.interpolateHslLong=Q,e.interpolateLab=y,e.interpolateHcl=K,e.interpolateHclLong=ee,e.interpolateCubehelix=te,e.interpolateCubehelixLong=ne,e.piecewise=x,e.quantize=re,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,n,r,o){function u(t){return e(t=new Date((+t))),t}return u.floor=u,u.ceil=function(t){return e(t=new Date(t-1)),n(t,1),e(t),t},u.round=function(e){var t=u(e),n=u.ceil(e);return e-t<n-e?t:n},u.offset=function(e,t){return n(e=new Date((+e)),null==t?1:Math.floor(t)),e},u.range=function(t,r,i){var a,o=[];if(t=u.ceil(t),i=null==i?1:Math.floor(i),!(t<r&&i>0))return o;do o.push(a=new Date((+t))),n(t,i),e(t);while(a<t&&t<r);return o},u.filter=function(r){return t(function(t){if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){if(e>=e)if(t<0)for(;++t<=0;)for(;n(e,-1),!r(e););else for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(u.count=function(t,n){return i.setTime(+t),a.setTime(+n),e(i),e(a),Math.floor(r(i,a))},u.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?u.filter(o?function(t){return o(t)%e===0}:function(t){return u.count(0,t)%e===0}):u:null}),u}function n(e){return t(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*f)/d})}function r(e){return t(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/d})}var i=new Date,a=new Date,o=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):o:null};var u=o.range,s=1e3,f=6e4,l=36e5,c=864e5,d=6048e5,h=t(function(e){e.setTime(Math.floor(e/s)*s)},function(e,t){e.setTime(+e+t*s)},function(e,t){return(t-e)/s},function(e){return e.getUTCSeconds()}),p=h.range,g=t(function(e){e.setTime(Math.floor(e/f)*f)},function(e,t){e.setTime(+e+t*f)},function(e,t){return(t-e)/f},function(e){return e.getMinutes()}),m=g.range,v=t(function(e){var t=e.getTimezoneOffset()*f%l;t<0&&(t+=l),e.setTime(Math.floor((+e-t)/l)*l+t)},function(e,t){e.setTime(+e+t*l)},function(e,t){return(t-e)/l},function(e){return e.getHours()}),y=v.range,b=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*f)/c},function(e){return e.getDate()-1}),_=b.range,x=n(0),w=n(1),k=n(2),M=n(3),E=n(4),O=n(5),S=n(6),A=x.range,C=w.range,R=k.range,T=M.range,z=E.range,D=O.range,N=S.range,P=t(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),$=P.range,L=t(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});L.every=function(e){return isFinite(e=Math.floor(e))&&e>0?t(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var q=L.range,j=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*f)},function(e,t){return(t-e)/f},function(e){return e.getUTCMinutes()}),F=j.range,U=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*l)},function(e,t){return(t-e)/l},function(e){return e.getUTCHours()}),I=U.range,B=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/c},function(e){return e.getUTCDate()-1}),W=B.range,V=r(0),H=r(1),Y=r(2),G=r(3),X=r(4),Z=r(5),J=r(6),Q=V.range,K=H.range,ee=Y.range,te=G.range,ne=X.range,re=Z.range,ie=J.range,ae=t(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),oe=ae.range,ue=t(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ue.every=function(e){return isFinite(e=Math.floor(e))&&e>0?t(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var se=ue.range;e.timeInterval=t,e.timeMillisecond=o,e.timeMilliseconds=u,e.utcMillisecond=o,e.utcMilliseconds=u,e.timeSecond=h,e.timeSeconds=p,e.utcSecond=h,e.utcSeconds=p,e.timeMinute=g,e.timeMinutes=m,e.timeHour=v,e.timeHours=y,e.timeDay=b,e.timeDays=_,e.timeWeek=x,e.timeWeeks=A,e.timeSunday=x,e.timeSundays=A,e.timeMonday=w,e.timeMondays=C,e.timeTuesday=k,e.timeTuesdays=R,e.timeWednesday=M,e.timeWednesdays=T,e.timeThursday=E,e.timeThursdays=z,e.timeFriday=O,e.timeFridays=D,e.timeSaturday=S,e.timeSaturdays=N,e.timeMonth=P,e.timeMonths=$,e.timeYear=L,e.timeYears=q,e.utcMinute=j,e.utcMinutes=F,e.utcHour=U,e.utcHours=I,e.utcDay=B,e.utcDays=W,e.utcWeek=V,e.utcWeeks=Q,e.utcSunday=V,e.utcSundays=Q,e.utcMonday=H,e.utcMondays=K,e.utcTuesday=Y,e.utcTuesdays=ee,e.utcWednesday=G,e.utcWednesdays=te,e.utcThursday=X,e.utcThursdays=ne,e.utcFriday=Z,e.utcFridays=re,e.utcSaturday=J,e.utcSaturdays=ie,e.utcMonth=ae,e.utcMonths=oe,e.utcYear=ue,e.utcYears=se,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,s,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(a(n))for(u=Array.prototype.slice.call(arguments,1),f=n.slice(),i=f.length,s=0;s<i;s++)f[s].apply(this,u);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(u=o;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(function(t,r){function i(e,n){if(!(this instanceof i))return new i(e,n);if(!i.Promise)throw new Error("native promise missing, set Fetch.Promise to your favorite alternative");l.Promise=i.Promise;var r=this;return new i.Promise(function(l,g){var m=new h(e,n);if(!m.protocol||!m.hostname)throw new Error("only absolute urls are supported");if("http:"!==m.protocol&&"https:"!==m.protocol)throw new Error("only http(s) protocols are supported");var v;v="https:"===m.protocol?u.request:o.request;var y=new d(m.headers);m.compress&&y.set("accept-encoding","gzip,deflate"),y.has("user-agent")||y.set("user-agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),y.has("connection")||m.agent||y.set("connection","close"),y.has("accept")||y.set("accept","*/*"),!y.has("content-type")&&m.body&&"function"==typeof m.body.getBoundary&&y.set("content-type","multipart/form-data; boundary="+m.body.getBoundary()),!y.has("content-length")&&/post|put|patch|delete/i.test(m.method)&&("string"==typeof m.body?y.set("content-length",t.byteLength(m.body)):m.body&&"function"==typeof m.body.getLengthSync?m.body._lengthRetrievers&&0==m.body._lengthRetrievers.length?y.set("content-length",m.body.getLengthSync().toString()):m.body.hasKnownLength&&m.body.hasKnownLength()&&y.set("content-length",m.body.getLengthSync().toString()):void 0!==m.body&&null!==m.body||y.set("content-length","0")),m.headers=y.raw(),m.headers.host&&(m.headers.host=m.headers.host[0]);var b,_=v(m);m.timeout&&_.once("socket",function(e){b=setTimeout(function(){_.abort(),g(new p("network timeout at: "+m.url,"request-timeout"))},m.timeout)}),_.on("error",function(e){clearTimeout(b),g(new p("request to "+m.url+" failed, reason: "+e.message,"system",e))}),_.on("response",function(e){if(clearTimeout(b),r.isRedirect(e.statusCode)&&"manual"!==m.redirect)return"error"===m.redirect?void g(new p("redirect mode is set to error: "+m.url,"no-redirect")):m.counter>=m.follow?void g(new p("maximum redirect reached at: "+m.url,"max-redirect")):e.headers.location?(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==m.method)||(m.method="GET",delete m.body,delete m.headers["content-length"]),m.counter++,void l(i(a(m.url,e.headers.location),m))):void g(new p("redirect location header missing at: "+m.url,"invalid-redirect"));var t=new d(e.headers);"manual"===m.redirect&&t.has("location")&&t.set("location",a(m.url,t.get("location")));var n,o=e.pipe(new f.PassThrough),u={url:m.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:m.size,timeout:m.timeout};if(!m.compress||"HEAD"===m.method||!t.has("content-encoding")||204===e.statusCode||304===e.statusCode)return n=new c(o,u),void l(n);var h=t.get("content-encoding");if("gzip"==h||"x-gzip"==h)return o=o.pipe(s.createGunzip()),n=new c(o,u),void l(n);if("deflate"==h||"x-deflate"==h){var v=e.pipe(new f.PassThrough);return void v.once("data",function(e){o=8===(15&e[0])?o.pipe(s.createInflate()):o.pipe(s.createInflateRaw()),n=new c(o,u),l(n)})}n=new c(o,u),l(n)}),"string"==typeof m.body?(_.write(m.body),_.end()):m.body instanceof t?(_.write(m.body),_.end()):"object"==typeof m.body&&m.body.pipe?m.body.pipe(_):"object"==typeof m.body?(_.write(m.body.toString()),_.end()):_.end()})}var a=(n(16).parse,n(16).resolve),o=n(25),u=n(81),s=n(71),f=n(3),l=n(26),c=n(99),d=n(27),h=n(98),p=n(42);e.exports=i,e.exports.default=e.exports,i.prototype.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},i.Promise=r.Promise,i.Response=c,i.Headers=d,i.Request=h}).call(t,n(1).Buffer,function(){return this}())},function(e,t){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},i={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)},function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&f(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function a(e){return s(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function o(e,t){return i(e,!1,!0).resolve(t)}function u(e,t){return e?i(e,!1,!0).resolveObject(t):t}function s(e){return"string"==typeof e}function f(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function c(e){return null==e}var d=n(137);t.parse=i,
t.resolve=o,t.resolveObject=u,t.format=a,t.Url=r;var h=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(g),v=["'"].concat(m),y=["%","/","?",";","#"].concat(v),b=["/","?","#"],_=255,x=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},M={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=n(128);r.prototype.parse=function(e,t,n){if(!s(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e;r=r.trim();var i=h.exec(r);if(i){i=i[0];var a=i.toLowerCase();this.protocol=a,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===r.substr(0,2);!o||i&&M[i]||(r=r.substr(2),this.slashes=!0)}if(!M[i]&&(o||i&&!E[i])){for(var u=-1,f=0;f<b.length;f++){var l=r.indexOf(b[f]);l!==-1&&(u===-1||l<u)&&(u=l)}var c,p;p=u===-1?r.lastIndexOf("@"):r.lastIndexOf("@",u),p!==-1&&(c=r.slice(0,p),r=r.slice(p+1),this.auth=decodeURIComponent(c)),u=-1;for(var f=0;f<y.length;f++){var l=r.indexOf(y[f]);l!==-1&&(u===-1||l<u)&&(u=l)}u===-1&&(u=r.length),this.host=r.slice(0,u),r=r.slice(u),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var m=this.hostname.split(/\./),f=0,S=m.length;f<S;f++){var A=m[f];if(A&&!A.match(x)){for(var C="",R=0,T=A.length;R<T;R++)C+=A.charCodeAt(R)>127?"x":A[R];if(!C.match(x)){var z=m.slice(0,f),D=m.slice(f+1),N=A.match(w);N&&(z.push(N[1]),D.unshift(N[2])),D.length&&(r="/"+D.join(".")+r),this.hostname=z.join(".");break}}}if(this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var P=this.hostname.split("."),$=[],f=0;f<P.length;++f){var L=P[f];$.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(L):L)}this.hostname=$.join(".")}var q=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+q,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!k[a])for(var f=0,S=v.length;f<S;f++){var F=v[f],U=encodeURIComponent(F);U===F&&(U=escape(F)),r=r.split(F).join(U)}var I=r.indexOf("#");I!==-1&&(this.hash=r.substr(I),r=r.slice(0,I));var B=r.indexOf("?");if(B!==-1?(this.search=r.substr(B),this.query=r.substr(B+1),t&&(this.query=O.parse(this.query)),r=r.slice(0,B)):t&&(this.search="",this.query={}),r&&(this.pathname=r),E[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",L=this.search||"";this.path=q+L}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&f(this.query)&&Object.keys(this.query).length&&(a=O.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||E[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+i+n+o+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(s(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),E[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!E[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||M[e.protocol])n.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var a=n.pathname||"",o=n.search||"";n.path=a+o}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var u=n.pathname&&"/"===n.pathname.charAt(0),f=e.host||e.pathname&&"/"===e.pathname.charAt(0),d=f||u||n.host&&e.pathname,h=d,p=n.pathname&&n.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],g=n.protocol&&!E[n.protocol];if(g&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),d=d&&(""===i[0]||""===p[0])),f)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,p=i;else if(i.length)p||(p=[]),p.pop(),p=p.concat(i),n.search=e.search,n.query=e.query;else if(!c(e.search)){if(g){n.hostname=n.host=p.shift();var m=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var v=p.slice(-1)[0],y=(n.host||e.host)&&("."===v||".."===v)||""===v,b=0,_=p.length;_>=0;_--)v=p[_],"."==v?p.splice(_,1):".."===v?(p.splice(_,1),b++):b&&(p.splice(_,1),b--);if(!d&&!h)for(;b--;b)p.unshift("..");!d||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),y&&"/"!==p.join("/").substr(-1)&&p.push("");var x=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(g){n.hostname=n.host=x?"":p.length?p.shift():"";var m=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return d=d||n.host&&p.length,d&&!x&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){function r(e){return n(i(e))}function i(e){return a[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var a={"./vega":33,"./vega-core":54,"./vega-core.js":54,"./vega-core.min":55,"./vega-core.min.js":55,"./vega-schema":49,"./vega-schema.json":49,"./vega.js":33,"./vega.min":56,"./vega.min.js":56};r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=17},function(e,t){},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return new n(e)}function n(e){if(!(t=s.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function r(t){return l=v(t),e.format=l.format,e.formatPrefix=l.formatPrefix,l}var i=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},a=function(e){return e=i(Math.abs(e)),e?e[1]:NaN},o=function(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}},u=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},s=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;t.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var f,l,c=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e},d=function(e,t){var n=i(e,t);if(!n)return e+"";var r=n[0],a=n[1],o=a-(f=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+i(e,Math.max(0,t+o-1))[0]},h=function(e,t){var n=i(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array((-a)).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")},p={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return h(100*e,t)},r:h,s:d,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},g=function(e){return e},m=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],v=function(e){function n(e){function n(e){var t,n,u,s=w,h=k;if("c"===x)h=M(e)+h,e="";else{e=+e;var p=e<0;if(e=M(Math.abs(e),b),_&&(e=c(e)),p&&0===+e&&(p=!1),s=(p?"("===o?o:"-":"-"===o||"("===o?"":o)+s,h=("s"===x?m[8+f/3]:"")+h+(p&&"("===o?")":""),E)for(t=-1,n=e.length;++t<n;)if(u=e.charCodeAt(t),48>u||u>57){h=(46===u?l+e.slice(t+1):e.slice(t))+h,e=e.slice(0,t);break}}y&&!g&&(e=i(e,1/0));var O=s.length+e.length+h.length,S=O<v?new Array(v-O+1).join(r):"";switch(y&&g&&(e=i(S+e,S.length?v-h.length:1/0),S=""),a){case"<":e=s+e+h+S;break;case"=":e=s+S+e+h;break;case"^":e=S.slice(0,O=S.length>>1)+s+e+h+S.slice(O);break;default:e=S+s+e+h}return d(e)}e=t(e);var r=e.fill,a=e.align,o=e.sign,u=e.symbol,g=e.zero,v=e.width,y=e.comma,b=e.precision,_=e.trim,x=e.type;"n"===x?(y=!0,x="g"):p[x]||(null==b&&(b=12),_=!0,x="g"),(g||"0"===r&&"="===a)&&(g=!0,r="0",a="=");var w="$"===u?s[0]:"#"===u&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",k="$"===u?s[1]:/[%p]/.test(x)?h:"",M=p[x],E=/[defgprs%]/.test(x);return b=null==b?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),n.toString=function(){return e+""},n}function r(e,r){var i=n((e=t(e),e.type="f",e)),o=3*Math.max(-8,Math.min(8,Math.floor(a(r)/3))),u=Math.pow(10,-o),s=m[8+o/3];return function(e){return i(u*e)+s}}var i=e.grouping&&e.thousands?o(e.grouping,e.thousands):g,s=e.currency,l=e.decimal,d=e.numerals?u(e.numerals):g,h=e.percent||"%";return{format:n,formatPrefix:r}};r({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var y=function(e){return Math.max(0,-a(Math.abs(e)))},b=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(a(t)/3)))-a(Math.abs(e)))},_=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,a(t)-a(e))+1};e.formatDefaultLocale=r,e.formatLocale=v,e.formatSpecifier=t,e.precisionFixed=y,e.precisionPrefix=b,e.precisionRound=_,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new t}var r=Math.PI,i=2*r,a=1e-6,o=i-a;t.prototype=n.prototype={constructor:t,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,i,o){e=+e,t=+t,n=+n,i=+i,o=+o;var u=this._x1,s=this._y1,f=n-e,l=i-t,c=u-e,d=s-t,h=c*c+d*d;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>a)if(Math.abs(d*f-l*c)>a&&o){var p=n-u,g=i-s,m=f*f+l*l,v=p*p+g*g,y=Math.sqrt(m),b=Math.sqrt(h),_=o*Math.tan((r-Math.acos((m+h-v)/(2*y*b)))/2),x=_/b,w=_/y;Math.abs(x-1)>a&&(this._+="L"+(e+x*c)+","+(t+x*d)),this._+="A"+o+","+o+",0,0,"+ +(d*p>c*g)+","+(this._x1=e+w*f)+","+(this._y1=t+w*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,u,s,f){e=+e,t=+t,n=+n;var l=n*Math.cos(u),c=n*Math.sin(u),d=e+l,h=t+c,p=1^f,g=f?u-s:s-u;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+d+","+h:(Math.abs(this._x1-d)>a||Math.abs(this._y1-h)>a)&&(this._+="L"+d+","+h),n&&(g<0&&(g=g%i+i),g>o?this._+="A"+n+","+n+",0,1,"+p+","+(e-l)+","+(t-c)+"A"+n+","+n+",0,1,"+p+","+(this._x1=d)+","+(this._y1=h):g>a&&(this._+="A"+n+","+n+",0,"+ +(g>=r)+","+p+","+(this._x1=e+n*Math.cos(s))+","+(this._y1=t+n*Math.sin(s))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},e.path=n,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(12))}(this,function(e,t){"use strict";function n(e){if(0<=e.y&&e.y<100){var t=new Date((-1),e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){function a(e,t){return function(n){var r,i,a,o=[],u=-1,s=0,f=e.length;for(n instanceof Date||(n=new Date((+n)));++u<f;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(i=me[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function o(e,n){return function(a){var o,s,f=i(1900),l=u(f,e,a+="",0);if(l!=a.length)return null;if("Q"in f)return new Date(f.Q);if("p"in f&&(f.H=f.H%12+12*f.p),"V"in f){if(f.V<1||f.V>53)return null;"w"in f||(f.w=1),"Z"in f?(o=r(i(f.y)),s=o.getUTCDay(),o=s>4||0===s?t.utcMonday.ceil(o):t.utcMonday(o),o=t.utcDay.offset(o,7*(f.V-1)),f.y=o.getUTCFullYear(),f.m=o.getUTCMonth(),f.d=o.getUTCDate()+(f.w+6)%7):(o=n(i(f.y)),s=o.getDay(),o=s>4||0===s?t.timeMonday.ceil(o):t.timeMonday(o),o=t.timeDay.offset(o,7*(f.V-1)),f.y=o.getFullYear(),f.m=o.getMonth(),f.d=o.getDate()+(f.w+6)%7)}else("W"in f||"U"in f)&&("w"in f||(f.w="u"in f?f.u%7:"W"in f?1:0),s="Z"in f?r(i(f.y)).getUTCDay():n(i(f.y)).getDay(),f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(s+5)%7:f.w+7*f.U-(s+6)%7);return"Z"in f?(f.H+=f.Z/100|0,f.M+=f.Z%100,r(f)):n(f)}}function u(e,t,n,r){for(var i,a,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(i=t.charCodeAt(o++),37===i){if(i=t.charAt(o++),a=Je[i in me?t.charAt(o++):i],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function de(e,t,n){var r=je.exec(t.slice(n));return r?(e.p=Fe[r[0].toLowerCase()],n+r[0].length):-1}function he(e,t,n){var r=Be.exec(t.slice(n));return r?(e.w=We[r[0].toLowerCase()],n+r[0].length):-1}function pe(e,t,n){var r=Ue.exec(t.slice(n));return r?(e.w=Ie[r[0].toLowerCase()],n+r[0].length):-1}function ge(e,t,n){var r=Ye.exec(t.slice(n));return r?(e.m=Ge[r[0].toLowerCase()],n+r[0].length):-1}function ve(e,t,n){var r=Ve.exec(t.slice(n));return r?(e.m=He[r[0].toLowerCase()],n+r[0].length):-1}function ye(e,t,n){return u(e,Te,t,n)}function be(e,t,n){return u(e,ze,t,n)}function _e(e,t,n){return u(e,De,t,n)}function xe(e){return $e[e.getDay()]}function we(e){return Pe[e.getDay()]}function ke(e){return qe[e.getMonth()]}function Me(e){return Le[e.getMonth()]}function Ee(e){return Ne[+(e.getHours()>=12)]}function Oe(e){return $e[e.getUTCDay()]}function Se(e){return Pe[e.getUTCDay()]}function Ae(e){return qe[e.getUTCMonth()]}function Ce(e){return Le[e.getUTCMonth()]}function Re(e){return Ne[+(e.getUTCHours()>=12)]}var Te=e.dateTime,ze=e.date,De=e.time,Ne=e.periods,Pe=e.days,$e=e.shortDays,Le=e.months,qe=e.shortMonths,je=s(Ne),Fe=f(Ne),Ue=s(Pe),Ie=f(Pe),Be=s($e),We=f($e),Ve=s(Le),He=f(Le),Ye=s(qe),Ge=f(qe),Xe={a:xe,A:we,b:ke,B:Me,c:null,d:C,e:C,f:N,H:R,I:T,j:z,L:D,m:P,M:$,p:Ee,Q:le,s:ce,S:L,u:q,U:j,V:F,w:U,W:I,x:null,X:null,y:B,Y:W,Z:V,"%":fe},Ze={a:Oe,A:Se,b:Ae,B:Ce,c:null,d:H,e:H,f:J,H:Y,I:G,j:X,L:Z,m:Q,M:K,p:Re,Q:le,s:ce,S:ee,u:te,U:ne,V:re,w:ie,W:ae,x:null,X:null,y:oe,Y:ue,Z:se,"%":fe},Je={a:he,A:pe,b:ge,B:ve,c:ye,d:b,e:b,f:E,H:x,I:x,j:_,L:M,m:y,M:w,p:de,Q:S,s:A,S:k,u:c,U:d,V:h,w:l,W:p,x:be,X:_e,y:m,Y:g,Z:v,"%":O};return Xe.x=a(ze,Xe),Xe.X=a(De,Xe),Xe.c=a(Te,Xe),Ze.x=a(ze,Ze),Ze.X=a(De,Ze),Ze.c=a(Te,Ze),{format:function(e){var t=a(e+="",Xe);return t.toString=function(){return e},t},parse:function(e){var t=o(e+="",n);return t.toString=function(){return e},t},utcFormat:function(e){var t=a(e+="",Ze);return t.toString=function(){return e},t},utcParse:function(e){var t=o(e,r);return t.toString=function(){return e},t}}}function o(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function u(e){return e.replace(be,"\\$&")}function s(e){return new RegExp("^(?:"+e.map(u).join("|")+")","i")}function f(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function l(e,t,n){var r=ve.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function c(e,t,n){var r=ve.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function d(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function h(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function p(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function g(e,t,n){var r=ve.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function m(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function v(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function y(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function b(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function _(e,t,n){var r=ve.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function x(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function w(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function k(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function M(e,t,n){var r=ve.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function E(e,t,n){var r=ve.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function O(e,t,n){var r=ye.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function S(e,t,n){var r=ve.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function A(e,t,n){var r=ve.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function C(e,t){return o(e.getDate(),t,2)}function R(e,t){return o(e.getHours(),t,2)}function T(e,t){return o(e.getHours()%12||12,t,2)}function z(e,n){return o(1+t.timeDay.count(t.timeYear(e),e),n,3)}function D(e,t){return o(e.getMilliseconds(),t,3)}function N(e,t){return D(e,t)+"000"}function P(e,t){return o(e.getMonth()+1,t,2)}function $(e,t){return o(e.getMinutes(),t,2)}function L(e,t){return o(e.getSeconds(),t,2)}function q(e){var t=e.getDay();return 0===t?7:t}function j(e,n){return o(t.timeSunday.count(t.timeYear(e),e),n,2)}function F(e,n){var r=e.getDay();return e=r>=4||0===r?t.timeThursday(e):t.timeThursday.ceil(e),o(t.timeThursday.count(t.timeYear(e),e)+(4===t.timeYear(e).getDay()),n,2)}function U(e){return e.getDay()}function I(e,n){return o(t.timeMonday.count(t.timeYear(e),e),n,2)}function B(e,t){return o(e.getFullYear()%100,t,2)}function W(e,t){return o(e.getFullYear()%1e4,t,4)}function V(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function H(e,t){return o(e.getUTCDate(),t,2)}function Y(e,t){return o(e.getUTCHours(),t,2)}function G(e,t){return o(e.getUTCHours()%12||12,t,2)}function X(e,n){return o(1+t.utcDay.count(t.utcYear(e),e),n,3)}function Z(e,t){return o(e.getUTCMilliseconds(),t,3)}function J(e,t){return Z(e,t)+"000"}function Q(e,t){return o(e.getUTCMonth()+1,t,2)}function K(e,t){return o(e.getUTCMinutes(),t,2)}function ee(e,t){return o(e.getUTCSeconds(),t,2)}function te(e){var t=e.getUTCDay();return 0===t?7:t}function ne(e,n){return o(t.utcSunday.count(t.utcYear(e),e),n,2)}function re(e,n){var r=e.getUTCDay();return e=r>=4||0===r?t.utcThursday(e):t.utcThursday.ceil(e),o(t.utcThursday.count(t.utcYear(e),e)+(4===t.utcYear(e).getUTCDay()),n,2)}function ie(e){return e.getUTCDay()}function ae(e,n){return o(t.utcMonday.count(t.utcYear(e),e),n,2)}function oe(e,t){return o(e.getUTCFullYear()%100,t,2)}function ue(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function se(){return"+0000"}function fe(){return"%"}function le(e){return+e}function ce(e){return Math.floor(+e/1e3)}function de(t){return ge=a(t),e.timeFormat=ge.format,e.timeParse=ge.parse,e.utcFormat=ge.utcFormat,e.utcParse=ge.utcParse,ge}function he(e){return e.toISOString()}function pe(e){var t=new Date(e);return isNaN(t)?null:t}var ge,me={"-":"",_:" ",0:"0"},ve=/^\s*\d+/,ye=/^%/,be=/[\\^$*+?|[\]().{}]/g;de({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var _e="%Y-%m-%dT%H:%M:%S.%LZ",xe=Date.prototype.toISOString?he:e.utcFormat(_e),we=+new Date("2000-01-01T00:00:00.000Z")?pe:e.utcParse(_e);e.timeFormatDefaultLocale=de,e.timeFormatLocale=a,e.isoFormat=xe,e.isoParse=we,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){return v||(_(n),v=b.now()+y)}function n(){v=0}function r(){this._call=this._time=this._next=null}function i(e,t,n){var i=new r;return i.restart(e,t,n),i}function a(){t(),++d;for(var e,n=l;n;)(e=v-n._time)>=0&&n._call.call(null,e),n=n._next;--d}function o(){v=(m=b.now())+y,d=h=0;try{a()}finally{d=0,s(),v=0}}function u(){var e=b.now(),t=e-m;t>g&&(y-=t,m=e)}function s(){for(var e,t,n=l,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:l=t);c=e,f(r)}function f(e){if(!d){h&&(h=clearTimeout(h));var t=e-v;t>24?(e<1/0&&(h=setTimeout(o,e-b.now()-y)),p&&(p=clearInterval(p))):(p||(m=b.now(),p=setInterval(u,g)),d=1,_(o))}}var l,c,d=0,h=0,p=0,g=1e3,m=0,v=0,y=0,b="object"==typeof performance&&performance.now?performance:Date,_="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};r.prototype=i.prototype={constructor:r,restart:function(e,n,r){if("function"!=typeof e)throw new TypeError("callback is not a function");r=(null==r?t():+r)+(null==n?0:+n),this._next||c===this||(c?c._next=this:l=this,c=this),this._call=e,this._time=r,f()},stop:function(){this._call&&(this._call=null,this._time=1/0,f())}};var x=function(e,t,n){var i=new r;return t=null==t?0:+t,i.restart(function(n){i.stop(),e(n+t)},t,n),i},w=function(e,n,i){var a=new r,o=n;return null==n?(a.restart(e,n,i),a):(n=+n,i=null==i?t():+i,a.restart(function t(r){r+=o,a.restart(t,o+=n,i),e(r)},n,i),a)};e.now=t,e.timer=i,e.timerFlush=a,e.timeout=x,e.interval=w,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){(function(t){"use strict";function r(e,n,r,u){r=o(r||"UTF-8"),n=o(n||"UTF-8"),e=e||"";var f;if("UTF-8"!==r&&"string"==typeof e&&(e=new t(e,"binary")),r===n)f="string"==typeof e?new t(e):e;else if(s&&!u)try{f=i(e,n,r)}catch(l){console.error(l);try{f=a(e,n,r)}catch(l){console.error(l),f=e}}else try{f=a(e,n,r)}catch(l){console.error(l),f=e}return"string"==typeof f&&(f=new t(f,"utf-8")),f}function i(e,t,n){var r,i;return i=new s(n,t+"//TRANSLIT//IGNORE"),r=i.convert(e),r.slice(0,r.length)}function a(e,t,n){return"UTF-8"===t?u.decode(e,n):"UTF-8"===n?u.encode(e,t):u.encode(u.decode(e,n),t)}function o(e){return(e||"").toString().trim().replace(/^latin[\-_]?(\d+)$/i,"ISO-8859-$1").replace(/^win(?:dows)?[\-_]?(\d+)$/i,"WINDOWS-$1").replace(/^utf[\-_]?(\d+)$/i,"UTF-$1").replace(/^ks_c_5601\-1987$/i,"CP949").replace(/^us[\-_]?ascii$/i,"ASCII").toUpperCase()}var u=n(93),s=n(24);e.exports.convert=r}).call(t,n(1).Buffer)},function(e,t,n){"use strict";var r,i;try{r="iconv",i=n(74)(r).Iconv}catch(a){}e.exports=i},function(e,t,n){var r=e.exports,i=(n(13).EventEmitter,n(79)),a=n(16);r.request=function(e,t){"string"==typeof e&&(e=a.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.protocol||(e.scheme?e.protocol=e.scheme+":":e.protocol=window.location.protocol),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https:"==e.protocol?443:80);var n=new i(new o,e);return t&&n.on("response",t),n},r.get=function(e,t){e.method="GET";var n=r.request(e,t);return n.end(),n},r.Agent=function(){},r.Agent.defaultMaxSockets=4;var o=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var n=new window.ActiveXObject(e[t]);return function(){if(n){var r=n;return n=null,r}return new window.ActiveXObject(e[t])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();r.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,n){(function(t,r){function i(e,t){t=t||{},this.body=e,this.bodyUsed=!1,this.size=t.size||0,this.timeout=t.timeout||0,this._raw=[],this._abort=!1}var a=n(23).convert,o=n(96),u=n(3).PassThrough,s=n(42);e.exports=i,i.prototype.json=function(){var e=this;return this._decode().then(function(t){try{return JSON.parse(t.toString())}catch(n){return i.Promise.reject(new s("invalid json response body at "+e.url+" reason: "+n.message,"invalid-json"))}})},i.prototype.text=function(){return this._decode().then(function(e){return e.toString()})},i.prototype.buffer=function(){return this._decode()},i.prototype._decode=function(){var e=this;return this.bodyUsed?i.Promise.reject(new Error("body used already for: "+this.url)):(this.bodyUsed=!0,this._bytes=0,this._abort=!1,this._raw=[],new i.Promise(function(n,r){var i;return"string"==typeof e.body?(e._bytes=e.body.length,e._raw=[new t(e.body)],n(e._convert())):e.body instanceof t?(e._bytes=e.body.length,e._raw=[e.body],n(e._convert())):(e.timeout&&(i=setTimeout(function(){e._abort=!0,r(new s("response timeout at "+e.url+" over limit: "+e.timeout,"body-timeout"))},e.timeout)),e.body.on("error",function(t){r(new s("invalid response body at: "+e.url+" reason: "+t.message,"system",t))}),e.body.on("data",function(t){if(!e._abort&&null!==t){if(e.size&&e._bytes+t.length>e.size)return e._abort=!0,void r(new s("content size at "+e.url+" over limit: "+e.size,"max-size"));e._bytes+=t.length,e._raw.push(t)}}),void e.body.on("end",function(){e._abort||(clearTimeout(i),n(e._convert()))}))}))},i.prototype._convert=function(e){e=e||"utf-8";var n,r,i=this.headers.get("content-type"),o="utf-8";if(i){if(!/text\/html|text\/plain|\+xml|\/xml/i.test(i))return t.concat(this._raw);n=/charset=([^;]*)/i.exec(i)}if(!n&&this._raw.length>0){for(var u=0;u<this._raw.length&&(r+=this._raw[u].toString(),!(r.length>1024));u++);r=r.substr(0,1024)}return!n&&r&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(r)),!n&&r&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(r),n&&(n=/charset=(.*)/i.exec(n.pop()))),!n&&r&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(r)),n&&(o=n.pop(),"gb2312"!==o&&"gbk"!==o||(o="gb18030")),a(t.concat(this._raw),e,o)},i.prototype._clone=function(e){var t,n,r=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o(r)&&"function"!=typeof r.getBoundary&&(t=new u,n=new u,r.pipe(t),r.pipe(n),e.body=t,r=n),r},i.Promise=r.Promise}).call(t,n(1).Buffer,function(){return this}())},function(e,t){function n(e){var t=this;this._headers={},e instanceof n&&(e=e.raw());for(var r in e)e.hasOwnProperty(r)&&("string"==typeof e[r]?this.set(r,e[r]):"number"!=typeof e[r]||isNaN(e[r])?Array.isArray(e[r])&&e[r].forEach(function(e){t.append(r,e.toString())}):this.set(r,e[r].toString()))}e.exports=n,n.prototype.get=function(e){var t=this._headers[e.toLowerCase()];return t?t[0]:null},n.prototype.getAll=function(e){return this.has(e)?this._headers[e.toLowerCase()]:[]},n.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this._headers).forEach(function(n){this._headers[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},n.prototype.set=function(e,t){this._headers[e.toLowerCase()]=[t]},n.prototype.append=function(e,t){return this.has(e)?void this._headers[e.toLowerCase()].push(t):void this.set(e,t)},n.prototype.has=function(e){return this._headers.hasOwnProperty(e.toLowerCase())},n.prototype.delete=function(e){delete this._headers[e.toLowerCase()]},n.prototype.raw=function(){return this._headers}},function(e,t){e.exports=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]];
},function(e,t,n){!function(e,n){n(t)}(this,function(e){function t(e,t,n){this.nodeName=e,this.attributes=t,this.children=n,this.key=t&&t.key}function n(e,t){if(t)for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}function r(e){return n({},e)}function i(e,t){for(var n=t.split("."),r=0;r<n.length&&e;r++)e=e[n[r]];return e}function a(e,t){return[].slice.call(e,t)}function o(e){return"function"==typeof e}function u(e){return"string"==typeof e}function s(e){return void 0===e||null===e}function f(e){return e===!1||s(e)}function l(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}function c(e,n,r){var i,a,s,d=arguments.length;if(d>2){var h=typeof r;if(3===d&&"object"!==h&&"function"!==h)f(r)||(i=[String(r)]);else{i=[];for(var p=2;p<d;p++){var g=arguments[p];if(!f(g)){g.join?a=g:(a=Q)[0]=g;for(var m=0;m<a.length;m++){var v=a[m],y=!(f(v)||o(v)||v instanceof t);y&&!u(v)&&(v=String(v)),y&&s?i[i.length-1]+=v:f(v)||(i.push(v),s=y)}}}}}else if(n&&n.children)return c(e,n,n.children);n&&(n.children&&delete n.children,o(e)||("className"in n&&(n.class=n.className,delete n.className),s=n.class,s&&!u(s)&&(n.class=l(s))));var b=new t(e,n||void 0,i);return J.vnode&&J.vnode(b),b}function d(e,t){return c(e.nodeName,n(r(e.attributes),t),arguments.length>2?a(arguments,2):e.children)}function h(e,t,n){var r=t.split("."),a=r[0];return function(t){var f,l,c,d=t&&t.currentTarget||this,h=e.state,p=h;if(u(n)?(l=i(t,n),s(l)&&(d=d._component)&&(l=i(d,n))):l=d.nodeName?(d.nodeName+d.type).match(/^input(check|rad)/i)?d.checked:d.value:t,o(l)&&(l=l.call(d)),r.length>1){for(c=0;c<r.length-1;c++)p=p[r[c]]||(p[r[c]]={});p[r[c]]=l,l=h[a]}e.setState((f={},f[a]=l,f))}}function p(e){1===ne.push(e)&&(J.debounceRendering||Z)(g)}function g(){if(ne.length){var e,t=ne;for(ne=re,re=t;e=t.pop();)e._dirty&&I(e)}}function m(e){var t=e&&e.nodeName;return t&&o(t)&&!(t.prototype&&t.prototype.render)}function v(e,t){return e.nodeName(S(e),t||K)}function y(e,t){return e[ee]||(e[ee]=t||{})}function b(e){return e instanceof Text?3:e instanceof Element?1:0}function _(e){var t=e.parentNode;t&&t.removeChild(e)}function x(e,t,n,r,i){if(y(e)[t]=n,"key"!==t&&"children"!==t&&"innerHTML"!==t)if("class"!==t||i)if("style"===t){if((!n||u(n)||u(r))&&(e.style.cssText=n||""),n&&"object"==typeof n){if(!u(r))for(var a in r)a in n||(e.style[a]="");for(var a in n)e.style[a]="number"!=typeof n[a]||te[a]?n[a]:n[a]+"px"}}else if("dangerouslySetInnerHTML"===t)n&&(e.innerHTML=n.__html);else if(t.match(/^on/i)){var l=e._listeners||(e._listeners={});t=G(t.substring(2)),n?l[t]||e.addEventListener(t,k):l[t]&&e.removeEventListener(t,k),l[t]=n}else if("type"!==t&&!i&&t in e)w(e,t,s(n)?"":n),f(n)&&e.removeAttribute(t);else{var c=i&&t.match(/^xlink\:?(.+)/);f(n)?c?e.removeAttributeNS("http://www.w3.org/1999/xlink",G(c[1])):e.removeAttribute(t):"object"==typeof n||o(n)||(c?e.setAttributeNS("http://www.w3.org/1999/xlink",G(c[1]),n):e.setAttribute(t,n))}else e.className=n||""}function w(e,t,n){try{e[t]=n}catch(r){}}function k(e){return this._listeners[e.type](J.event&&J.event(e)||e)}function M(e){for(var t={},n=e.attributes.length;n--;)t[e.attributes[n].name]=e.attributes[n].value;return t}function E(e,t){return u(t)?3===b(e):u(t.nodeName)?O(e,t.nodeName):o(t.nodeName)?e._componentConstructor===t.nodeName||m(t):void 0}function O(e,t){return e.normalizedNodeName===t||G(e.nodeName)===G(t)}function S(e){var t=e.nodeName.defaultProps,i=r(t||e.attributes);return t&&n(i,e.attributes),e.children&&(i.children=e.children),i}function A(e){R(e);var t=G(e.nodeName),n=ie[t];n?n.push(e):ie[t]=[e]}function C(e,t){var n=G(e),r=ie[n]&&ie[n].pop()||(t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e));return y(r),r.normalizedNodeName=n,r}function R(e){_(e),1===b(e)&&(y(e,M(e)),e._component=e._componentConstructor=null)}function T(){for(var e;e=ae.pop();)e.componentDidMount&&e.componentDidMount()}function z(e,t,n,r,i,a,o){oe++;var u=D(e,t,n,r,a);return i&&u.parentNode!==i&&i.insertBefore(u,o||null),--oe||T(),u}function D(e,t,n,r,i){for(var a=t&&t.attributes;m(t);)t=v(t,n);if(s(t)&&(t="",i)){if(e){if(8===e.nodeType)return e;A(e)}return document.createComment(t)}if(u(t)){if(e){if(3===b(e)&&e.parentNode)return e.nodeValue=t,e;A(e)}return document.createTextNode(t)}var f,l=e,c=t.nodeName;if(o(c))return B(e,t,n,r);if(u(c)||(c=String(c)),f="svg"===G(c),f&&(ue=!0),e){if(!O(e,c)){for(l=C(c,ue);e.firstChild;)l.appendChild(e.firstChild);$(e)}}else l=C(c,ue);return t.children&&1===t.children.length&&"string"==typeof t.children[0]&&1===l.childNodes.length&&l.firstChild instanceof Text?l.firstChild.nodeValue=t.children[0]:(t.children||l.firstChild)&&N(l,t.children,n,r),L(l,t.attributes),a&&a.ref&&(l[ee].ref=a.ref)(l),f&&(ue=!1),l}function N(e,t,n,r){var i,a,o,u,f=e.childNodes,l=[],c={},d=0,h=0,p=f.length,g=0,m=t&&t.length;if(p)for(var v=0;v<p;v++){var y=f[v],b=m?(a=y._component)?a.__key:(a=y[ee])?a.key:null:null;b||0===b?(d++,c[b]=y):l[g++]=y}if(m)for(var v=0;v<m;v++){if(o=t[v],u=null,d&&o.attributes){var b=o.key;!s(b)&&b in c&&(u=c[b],c[b]=void 0,d--)}if(!u&&h<g)for(i=h;i<g;i++)if(a=l[i],a&&E(a,o)){u=a,l[i]=void 0,i===g-1&&g--,i===h&&h++;break}u=D(u,o,n,r),u!==f[v]&&e.insertBefore(u,f[v]||null)}if(d)for(var v in c)c[v]&&(l[h=g++]=c[v]);h<g&&P(l)}function P(e,t){for(var n=e.length;n--;){var r=e[n];r&&$(r,t)}}function $(e,t){var n=e._component;n?W(n,!t):(e[ee]&&e[ee].ref&&e[ee].ref(null),t||A(e),e.childNodes&&e.childNodes.length&&P(e.childNodes,t))}function L(e,t){var n=e[ee]||M(e);for(var r in n)t&&r in t||x(e,r,null,n[r],ue);if(t)for(var i in t)i in n&&t[i]==n[i]&&("value"!==i&&"checked"!==i||t[i]==e[i])||x(e,i,t[i],n[i],ue)}function q(e){var t=e.constructor.name,n=se[t];n?n.push(e):se[t]=[e]}function j(e,t,n){var r=new e(t,n),i=se[e.name];if(r.props=t,r.context=n,i)for(var a=i.length;a--;)if(i[a].constructor===e){r.nextBase=i[a].nextBase,i.splice(a,1);break}return r}function F(e){e._dirty||(e._dirty=!0,p(e))}function U(e,t,n,r,i){var a=e.base;e._disableRendering||(e._disableRendering=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,s(a)||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disableRendering=!1,0!==n&&(1!==n&&J.syncComponentUpdates===!1&&a?F(e):I(e,1,i)),e.__ref&&e.__ref(e))}function I(e,t,i){if(!e._disableRendering){var a,u,s=e.props,f=e.state,l=e.context,c=e.prevProps||s,d=e.prevState||f,h=e.prevContext||l,p=e.base,g=p||e.nextBase,y=g&&g.parentNode,b=g&&g._component,_=e._component;if(p&&(e.props=c,e.state=d,e.context=h,2!==t&&e.shouldComponentUpdate&&e.shouldComponentUpdate(s,f,l)===!1?a=!0:e.componentWillUpdate&&e.componentWillUpdate(s,f,l),e.props=s,e.state=f,e.context=l),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!a){for(e.render&&(u=e.render(s,f,l)),e.getChildContext&&(l=n(r(l),e.getChildContext()));m(u);)u=v(u,l);var x,w,k=u&&u.nodeName;if(o(k)&&k.prototype.render){var M=_,E=S(u);M&&M.constructor===k?U(M,E,1,l):(x=M,M=j(k,E,l),M._parentComponent=e,e._component=M,U(M,E,0,l),I(M,1)),w=M.base}else{var O=g;x=_,x&&(O=e._component=null),(g||1===t)&&(O&&(O._component=null),w=z(O,u,l,i||!p,y,!0,g&&g.nextSibling))}if(g&&w!==g&&(x||b!==e||_||!g.parentNode||(g._component=null,$(g))),x&&W(x,!0),e.base=w,w){for(var A=e,C=e;C=C._parentComponent;)A=C;w._component=A,w._componentConstructor=A.constructor}}!p||i?(ae.unshift(e),oe||T()):!a&&e.componentDidUpdate&&e.componentDidUpdate(c,d,h);var R,D=e._renderCallbacks;if(D)for(;R=D.pop();)R.call(e);return u}}function B(e,t,n,r){for(var i=e&&e._component,a=e,o=i&&e._componentConstructor===t.nodeName,u=o,s=S(t);i&&!u&&(i=i._parentComponent);)u=i.constructor===t.nodeName;return!u||r&&!i._component?(i&&!o&&(W(i,!0),e=a=null),i=j(t.nodeName,s,n),e&&!i.nextBase&&(i.nextBase=e),U(i,s,1,n,r),e=i.base,a&&e!==a&&(a._component=null,$(a))):(U(i,s,3,n,r),e=i.base),e}function W(e,t){var n=e.base;e._disableRendering=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var r=e._component;r?W(r,t):n&&(n[ee]&&n[ee].ref&&n[ee].ref(null),e.nextBase=n,t&&(_(n),q(e)),P(n.childNodes,!t)),e.__ref&&e.__ref(null),e.componentDidUnmount&&e.componentDidUnmount()}function V(e,t){this._dirty=!0,this._disableRendering=!1,this.prevState=this.prevProps=this.prevContext=this.base=this.nextBase=this._parentComponent=this._component=this.__ref=this.__key=this._linkedStates=this._renderCallbacks=null,this.context=t,this.props=e,this.state=this.getInitialState&&this.getInitialState()||{}}function H(e,t,n){return z(n,e,{},!1,t)}var Y={},G=function(e){return Y[e]||(Y[e]=e.toLowerCase())},X="undefined"!=typeof Promise&&Promise.resolve(),Z=X?function(e){X.then(e)}:setTimeout,J={vnode:s},Q=[],K={},ee="undefined"!=typeof Symbol?Symbol.for("preactattr"):"__preactattr_",te={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},ne=[],re=[],ie={},ae=[],oe=0,ue=!1,se={};n(V.prototype,{linkState:function(e,t){var n=this._linkedStates||(this._linkedStates={}),r=e+"|"+t;return n[r]||(n[r]=h(this,e,t))},setState:function(e,t){var i=this.state;this.prevState||(this.prevState=r(i)),n(i,o(e)?e(i,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),F(this)},forceUpdate:function(){I(this,2)},render:function(){return null}}),e.h=c,e.cloneElement=d,e.Component=V,e.render=H,e.rerender=g,e.options=J})},[146,6],[147,6,6],[143,138,4],function(e,t,n){(function(e){!function(e,n){n(t)}(this,function(t){"use strict";function r(e,t,n){return e.fields=t||[],e.fname=n,e}function i(e){return null==e?null:e.fname}function a(e){return null==e?null:e.fields}function o(e){throw Error(e)}function u(e){function t(){a.push(l+e.substring(n,r)),l="",n=r+1}var n,r,i,a=[],u=null,s=0,f=e.length,l="";for(e+="",n=r=0;r<f;++r)if(i=e[r],"\\"===i)l+=e.substring(n,r),n=++r;else if(i===u)t(),u=null,s=-1;else{if(u)continue;n===s&&'"'===i?(n=r+1,u=i):n===s&&"'"===i?(n=r+1,u=i):"."!==i||s?"["===i?(r>n&&t(),s=n=r+1):"]"===i&&(s||o("Access path missing open bracket: "+e),s>0&&t(),s=0,n=r+1):r>n?t():n=r+1}return s&&o("Access path missing closing bracket: "+e),u&&o("Access path missing closing quote: "+e),r>n&&(r++,t()),a}function s(e){return e===Object(e)}function f(e){return"string"==typeof e}function l(e){return iS(e)?"["+e.map(l)+"]":s(e)||f(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function c(e,t){var n=u(e),i="return _["+n.map(l).join("][")+"];";return r(Function("_",i),[e=1===n.length?n[0]:e],t||e)}function d(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function h(e){var t=e||dS;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=hS&&d("error","ERROR",arguments),this},warn:function(){return t>=pS&&d("warn","WARN",arguments),this},info:function(){return t>=gS&&d("log","INFO",arguments),this},debug:function(){return t>=mS&&d("log","DEBUG",arguments),this}}}function p(e){return e[e.length-1]}function g(e){return null==e||""===e?null:+e}function m(e){return function(t){return e*Math.exp(t)}}function v(e){return function(t){return Math.log(e*t)}}function y(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function b(e,t,n,r){var i=n(e[0]),a=n(p(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function _(e,t){return b(e,t,g,uS)}function x(e,t){var n=Math.sign(e[0]);return b(e,t,v(n),m(n))}function w(e,t,n){return b(e,t,y(n),y(1/n))}function k(e,t,n,r,i){var a=r(e[0]),o=r(p(e)),u=null!=t?r(t):(a+o)/2;return[i(u+(a-u)*n),i(u+(o-u)*n)]}function M(e,t,n){return k(e,t,n,g,uS)}function E(e,t,n){var r=Math.sign(e[0]);return k(e,t,n,v(r),m(r))}function O(e,t,n,r){return k(e,t,n,y(r),y(1/r))}function S(e){return null!=e?iS(e)?e:[e]:[]}function A(e){return"function"==typeof e}function C(e,t){var n,i,o,s,f,c,d,h,p,g=[],m=(e=S(e)).map(function(e,t){return null==e?null:(g.push(t),A(e)?e:u(e).map(l).join("]["))}),v=g.length-1,y=S(t),b="var u,v;return ";if(v<0)return null;for(i=0;i<=v;++i)n=g[i],o=m[n],A(o)?(c="f"+n,s="(u=this."+c+"(a))",f="(v=this."+c+"(b))",(d=d||{})[c]=o):(s="(u=a["+o+"])",f="(v=b["+o+"])"),c="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==y[n]?(p=1,h=-1):(p=-1,h=1),b+="("+s+"<"+f+"||u==null)&&v!=null?"+h+":(u>v||v==null)&&u!=null?"+p+":"+c+"!==u&&v===v?"+h+":v!==v&&u===u?"+p+(n<v?":":":0");return o=Function("a","b",b+";"),d&&(o=o.bind(d)),e=e.reduce(function(e,t){return A(t)?(a(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),r(o,Object.keys(e))}function R(e){return A(e)?e:function(){return e}}function T(e,t){function n(){t(i),r=i=null}var r,i;return function(t){i=t,r&&clearTimeout(r),r=setTimeout(n,e)}}function z(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function D(e,t){var n,r,i,a,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(r=e[u],null!=r&&r>=r){n=i=r;break}for(a=o=u;++u<s;)r=e[u],null!=r&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(r=t(e[u],u,e),null!=r&&r>=r){n=i=r;break}for(a=o=u;++u<s;)r=t(e[u],u,e),null!=r&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]}function N(e){function t(e){return i.hasOwnProperty(e)&&i[e]!==vS}var n,r,i={};return n={size:0,empty:0,object:i,has:t,get:function(e){return t(e)?i[e]:void 0},set:function(e,r){return t(e)||(++n.size,i[e]===vS&&--n.empty),i[e]=r,this},delete:function(e){return t(e)&&(--n.size,++n.empty,i[e]=vS),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(e){return arguments.length?(r=e,n):r},clean:function(){var e,t,a={},o=0;for(e in i)t=i[e],t===vS||r&&r(t)||(a[e]=t,++o);n.size=o,n.empty=0,n.object=i=a}},e&&Object.keys(e).forEach(function(t){n.set(t,e[t])}),n}function P(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}function $(e){return"boolean"==typeof e}function L(e){return"[object Date]"===Object.prototype.toString.call(e)}function q(e){return"number"==typeof e}function j(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function F(e,t){e&&(e=t?S(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):S(e));var n=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?l(e):u(e).map(l).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return r(n,e,"key")}function U(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),u=0,s=0,f=0;u<i&&s<a;++f)o[f]=e(t[u],n[s])>0?n[s++]:t[u++];for(;u<i;++u,++f)o[f]=t[u];for(;s<a;++s,++f)o[f]=n[s];return o}function I(e,t){for(var n="";--t>=0;)n+=e;return n}function B(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?I(i,o)+a:"center"===r?I(i,~~(o/2))+a+I(i,Math.ceil(o/2)):a+I(i,o)}function W(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}function V(e){return q(e)?e:L(e)?e:Date.parse(e)}function H(e,t){return t=t||V,null==e||""===e?null:t(e)}function Y(e){return null==e||""===e?null:e+""}function G(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function X(e,t,n,r){var i=null!=r?r:"",a=e+"",o=a.length,u=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function Z(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}function J(e){var t=e||uS,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0,(i=n.indexOf(e))>=0&&n.splice(i,1)),n},n}function Q(e){return!(!e||!K(e))}function K(e){return e[yS]}function ee(e,t){return e[yS]=t,e}function te(e){var t=e===Object(e)?e:{data:e};return K(t)?t:ee(t,bS++)}function ne(e){return re(e,te({}))}function re(e,t){for(var n in e)t[n]=e[n];return t}function ie(e,t){return ee(t,K(e))}function ae(e){return e&&e.constructor===oe}function oe(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:oe,insert:function(t){for(var n=S(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=A(e)?r:t,i=S(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(e,t,r){var a={field:t,value:R(r)};return A(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return A(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function s(e,t,n){n?e[t]=n(e):o.encode=t,a||(f[K(e)]=e)}var f,l,c,d,h,p,g;for(l=0,c=e.length;l<c;++l)o.add.push(te(e[l]));for(f={},l=0,c=t.length;l<c;++l)p=t[l],f[K(p)]=p;for(l=0,c=r.length;l<c;++l)h=r[l],u.forEach(function(e){h(e)&&(f[K(e)]=e)});for(g in f)o.rem.push(f[g]);for(f={},l=0,c=n.length;l<c;++l)d=n[l],s(d.tuple,d.field,d.value),o.modifies(d.field);for(l=0,c=i.length;l<c;++l)d=i[l],h=d.filter,u.forEach(function(e){h(e)&&s(e,d.field,d.value)}),o.modifies(d.field);if(a)o.mod=t.length||r.length?u.filter(function(e){return f.hasOwnProperty(K(e))}):u.slice();else for(g in f)o.mod.push(f[g]);return o}}}function ue(){Object.defineProperty(this,_S,{writable:!0,value:{}})}function se(e,t,n,r){this.id=++wS,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function fe(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function le(e,t,n,r){var i,a=1;return e instanceof se?i=e:e&&e.prototype instanceof se?i=new e:A(e)?i=new se(null,e):(a=0,i=new se(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i}function ce(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)}function de(e,t,n){this.id=++AS,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function he(e,t,n){return new de(e,t,n)}function pe(e,t,n,r){var i,a=this,o=he(n,r),u=function(e){e.dataflow=a;try{o.receive(e)}catch(t){a.error(t)}finally{a.run()}};i="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):S(e);for(var s=0,f=i.length;s<f;++s)i[s].addEventListener(t,u);return o}function ge(e){return{options:e||{},sanitize:ve,load:me,file:be,http:ye}}function me(e,t){var n=this;return n.sanitize(e,t).then(function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)})}function ve(e,t){return t=z({},this.options,t),new Promise(function(n,r){var i,a,o,u,s={href:null};return null==e||"string"!=typeof e?void r("Sanitize failure, invalid URI: "+l(e)):(a=RS.test(e),(u=t.baseURL)&&!a&&(we(e,"/")||"/"===u[u.length-1]||(e="/"+e),e=u+e),o=(i=we(e,TS))||"file"===t.mode||"http"!==t.mode&&!a&&xe(),i?e=e.slice(TS.length):we(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(s,"localFile",{value:!!o}),s.href=e,t.target&&(s.target=t.target+""),void n(s))})}function ye(e,t){return _e(e,z({},this.options.http,t)).then(function(e){if(!e.ok)throw e.status+""+e.statusText;return e.text()})}function be(e){return new Promise(function(t,n){var r=xe();r?r.readFile(e,function(e,r){e?n(e):t(r)}):n("No file system access for "+e)})}function _e(e,t){var r="function"==typeof fetch?fetch:n(14);return r?r(e,t):Promise.reject("No fetch method available.")}function xe(){var e=n(18);return e&&A(e.readFile)?e:null}function we(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function ke(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o=DS.slice();for(r=0,i=e.length;r<i;++r){for(n=t?e[r][t]:e[r],a=0;a<o.length;++a)Ee(n)&&!o[a](n)&&(o.splice(a,1),--a);if(0===o.length)return"string"}return NS[DS.indexOf(o[0])]}function Me(e,t){return t.reduce(function(t,n){return t[n]=ke(e,n),t},{})}function Ee(e){return null!=e&&e===e}function Oe(e){return"true"===e||"false"===e||e===!0||e===!1}function Se(e){return!isNaN(Date.parse(e))}function Ae(e){return!(isNaN(+e)||e instanceof Date)}function Ce(e){return Ae(e)&&(e=+e)===~~e}function Re(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function Te(e,t){var n=Re(e);return function(r,i){return t(n(r),i,e)}}function ze(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function De(e){function t(e,t){var r,i,a=n(e,function(e,n){return r?r(e,n-1):(i=e,void(r=t?Te(e,t):Re(e)))});return a.columns=i||[],a}function n(e,t){function n(){if(f)return $S;if(l)return l=!1,PS;var t,n,r=o;if(e.charCodeAt(r)===LS){for(;o++<a&&e.charCodeAt(o)!==LS||e.charCodeAt(++o)===LS;);return(t=o)>=a?f=!0:(n=e.charCodeAt(o++))===qS?l=!0:n===jS&&(l=!0,e.charCodeAt(o)===qS&&++o),e.slice(r+1,t-1).replace(/""/g,'"')}for(;o<a;){if((n=e.charCodeAt(t=o++))===qS)l=!0;else if(n===jS)l=!0,e.charCodeAt(o)===qS&&++o;else if(n!==s)continue;return e.slice(r,t)}return f=!0,e.slice(r,a)}var r,i=[],a=e.length,o=0,u=0,f=a<=0,l=!1;for(e.charCodeAt(a-1)===qS&&--a,e.charCodeAt(a-1)===jS&&--a;(r=n())!==$S;){for(var c=[];r!==PS&&r!==$S;)c.push(r),r=n();t&&null==(c=t(c,u++))||i.push(c)}return i}function r(t,n){return null==n&&(n=ze(t)),[n.map(o).join(e)].concat(t.map(function(t){return n.map(function(e){return o(t[e])}).join(e)})).join("\n")}function i(e){return e.map(a).join("\n")}function a(t){return t.map(o).join(e)}function o(e){return null==e?"":u.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var u=new RegExp('["'+e+"\n\r]"),s=e.charCodeAt(0);return{parse:t,parseRows:n,format:r,formatRows:i}}function Ne(e){return function(t,n){var r={delimiter:e};return Pe(t,n?z(n,r):r)}}function Pe(e,t){return t.header&&(e=t.header.map(l).join(t.delimiter)+"\n"+e),De(t.delimiter).parse(e+"")}function $e(t){return!("function"!=typeof e||!A(e.isBuffer))&&e.isBuffer(t)}function Le(e,t){var n=t&&t.property?c(t.property):uS;return s(e)&&!$e(e)?qe(n(e)):n(JSON.parse(e))}function qe(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}function je(e){return e}function Fe(e){if(null==e)return je;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,f=e.length,l=new Array(f);for(l[0]=(t+=e[0])*r+a,l[1]=(n+=e[1])*i+o;s<f;)l[s]=e[s],++s;return l}}function Ue(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Ie(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return Be(e,t)})}:Be(e,t)}function Be(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=We(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function We(e,t){function n(e,t){t.length&&t.pop();for(var n=f[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(s(n[r],r));e<0&&Ue(t,i)}function r(e){return s(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}function u(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(u)};case"Point":t=r(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(r);break;case"LineString":t=i(e.arcs);break;case"MultiLineString":t=e.arcs.map(i);break;case"Polygon":t=o(e.arcs);break;case"MultiPolygon":t=e.arcs.map(o);break;default:return null}return{type:n,coordinates:t}}var s=Fe(e.transform),f=e.arcs;return u(t)}function Ve(e,t){function n(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),u.push(r)}}var i={},a={},o={},u=[],s=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++s],t[s]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),u=i[0],s=i[1];if(t=o[u])if(delete o[t.end],t.push(e),t.end=s,r=a[s]){delete a[r.start];var f=r===t?t:t.concat(r);a[f.start=t.start]=o[f.end=r.end]=f}else a[t.start]=o[t.end]=t;else if(t=a[s])if(delete a[t.start],t.unshift(e),t.start=u,r=o[u]){delete o[r.end];var l=r===t?t:r.concat(t);a[l.start=r.start]=o[l.end=t.end]=l}else a[t.start]=o[t.end]=t;else t=[e],a[t.start=u]=o[t.end=s]=t}),r(o,a),r(a,o),t.forEach(function(e){i[e<0?~e:e]||u.push([e])}),u}function He(e){return We(e,Ye.apply(this,arguments))}function Ye(e,t,n){var r,i,a;if(arguments.length>1)r=Ge(e,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:Ve(e,r)}}function Ge(e,t,n){function r(e){var t=e<0?~e:e;(l[t]||(l[t]=[])).push({i:e,g:s})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}function o(e){e.forEach(a)}function u(e){switch(s=e,e.type){case"GeometryCollection":e.geometries.forEach(u);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":a(e.arcs);break;case"MultiPolygon":o(e.arcs)}}var s,f=[],l=[];return u(t),l.forEach(null==n?function(e){f.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&f.push(e[0].i)}),f}function Xe(e,t){var n,r,i;return e=Le(e,t),n=t&&(i=t.feature)?Ie:t&&(i=t.mesh)?He:o("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r):o("Invalid TopoJSON object: "+i),r&&r.features||[r]}function Ze(e,t){return arguments.length>1?(FS[e]=t,this):FS.hasOwnProperty(e)?FS[e]:null}function Je(e,t,n,r){function i(t){return e(t=new Date((+t))),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date((+e)),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,u=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return u;do u.push(o=new Date((+n))),t(n,a),e(n);while(o<n&&n<r);return u},i.filter=function(n){return Je(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(i.count=function(t,r){return US.setTime(+t),IS.setTime(+r),e(US),e(IS),Math.floor(n(US,IS))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}function Qe(e){return Je(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*VS)/GS})}function Ke(e){return Je(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/GS})}function et(e){if(0<=e.y&&e.y<100){var t=new Date((-1),e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tt(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nt(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function rt(e){function t(e,t){return function(n){var r,i,a,o=[],u=-1,s=0,f=e.length;for(n instanceof Date||(n=new Date((+n)));++u<f;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(i=vA[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function n(e,t){return function(n){var i,a,o=nt(1900),u=r(o,e,n+="",0);if(u!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=tt(nt(o.y)),a=i.getUTCDay(),i=a>4||0===a?sA.ceil(i):sA(i),i=oA.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(i=t(nt(o.y)),a=i.getDay(),i=a>4||0===a?eA.ceil(i):eA(i),i=QS.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?tt(nt(o.y)).getUTCDay():t(nt(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,tt(o)):t(o)}}function r(e,t,n,r){for(var i,a,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(i=t.charCodeAt(o++),37===i){if(i=t.charAt(o++),a=I[i in vA?t.charAt(o++):i],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function i(e,t,n){var r=R.exec(t.slice(n));return r?(e.p=T[r[0].toLowerCase()],n+r[0].length):-1}function a(e,t,n){var r=N.exec(t.slice(n));return r?(e.w=P[r[0].toLowerCase()],n+r[0].length):-1}function o(e,t,n){var r=z.exec(t.slice(n));return r?(e.w=D[r[0].toLowerCase()],n+r[0].length):-1}function u(e,t,n){var r=q.exec(t.slice(n));return r?(e.m=j[r[0].toLowerCase()],n+r[0].length):-1}function s(e,t,n){var r=$.exec(t.slice(n));return r?(e.m=L[r[0].toLowerCase()],n+r[0].length):-1}function f(e,t,n){return r(e,w,t,n)}function l(e,t,n){return r(e,k,t,n)}function c(e,t,n){return r(e,M,t,n)}function d(e){return S[e.getDay()]}function h(e){return O[e.getDay()]}function p(e){return C[e.getMonth()]}function g(e){return A[e.getMonth()]}function m(e){return E[+(e.getHours()>=12)]}function v(e){return S[e.getUTCDay()]}function y(e){return O[e.getUTCDay()]}function b(e){return C[e.getUTCMonth()]}function _(e){return A[e.getUTCMonth()]}function x(e){return E[+(e.getUTCHours()>=12)]}var w=e.dateTime,k=e.date,M=e.time,E=e.periods,O=e.days,S=e.shortDays,A=e.months,C=e.shortMonths,R=ot(E),T=ut(E),z=ot(O),D=ut(O),N=ot(S),P=ut(S),$=ot(A),L=ut(A),q=ot(C),j=ut(C),F={a:d,A:h,b:p,B:g,c:null,d:St,e:St,f:zt,H:At,I:Ct,j:Rt,L:Tt,m:Dt,M:Nt,p:m,Q:fn,s:ln,S:Pt,u:$t,U:Lt,V:qt,w:jt,W:Ft,x:null,X:null,y:Ut,Y:It,Z:Bt,"%":sn},U={a:v,A:y,b:b,B:_,c:null,d:Wt,e:Wt,f:Xt,H:Vt,I:Ht,j:Yt,L:Gt,m:Zt,M:Jt,p:x,Q:fn,s:ln,S:Qt,u:Kt,U:en,V:tn,w:nn,W:rn,x:null,X:null,y:an,Y:on,Z:un,"%":sn},I={a:a,A:o,b:u,B:s,c:f,d:vt,e:vt,f:kt,H:bt,I:bt,j:yt,L:wt,m:mt,M:_t,p:i,Q:Et,s:Ot,S:xt,u:ft,U:lt,V:ct,w:st,W:dt,x:l,X:c,y:pt,Y:ht,Z:gt,"%":Mt};return F.x=t(k,F),F.X=t(M,F),F.c=t(w,F),U.x=t(k,U),U.X=t(M,U),U.c=t(w,U),{format:function(e){var n=t(e+="",F);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",et);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",U);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,tt);return t.toString=function(){return e},t}}}function it(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function at(e){return e.replace(_A,"\\$&")}function ot(e){return new RegExp("^(?:"+e.map(at).join("|")+")","i")}function ut(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function st(e,t,n){var r=yA.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ft(e,t,n){var r=yA.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function lt(e,t,n){var r=yA.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ct(e,t,n){var r=yA.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function dt(e,t,n){var r=yA.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ht(e,t,n){var r=yA.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function pt(e,t,n){var r=yA.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function gt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function mt(e,t,n){var r=yA.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function vt(e,t,n){var r=yA.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function yt(e,t,n){var r=yA.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function bt(e,t,n){var r=yA.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _t(e,t,n){var r=yA.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function xt(e,t,n){var r=yA.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1;
}function wt(e,t,n){var r=yA.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function kt(e,t,n){var r=yA.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Mt(e,t,n){var r=bA.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Et(e,t,n){var r=yA.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Ot(e,t,n){var r=yA.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function St(e,t){return it(e.getDate(),t,2)}function At(e,t){return it(e.getHours(),t,2)}function Ct(e,t){return it(e.getHours()%12||12,t,2)}function Rt(e,t){return it(1+QS.count(rA(e),e),t,3)}function Tt(e,t){return it(e.getMilliseconds(),t,3)}function zt(e,t){return Tt(e,t)+"000"}function Dt(e,t){return it(e.getMonth()+1,t,2)}function Nt(e,t){return it(e.getMinutes(),t,2)}function Pt(e,t){return it(e.getSeconds(),t,2)}function $t(e){var t=e.getDay();return 0===t?7:t}function Lt(e,t){return it(KS.count(rA(e),e),t,2)}function qt(e,t){var n=e.getDay();return e=n>=4||0===n?tA(e):tA.ceil(e),it(tA.count(rA(e),e)+(4===rA(e).getDay()),t,2)}function jt(e){return e.getDay()}function Ft(e,t){return it(eA.count(rA(e),e),t,2)}function Ut(e,t){return it(e.getFullYear()%100,t,2)}function It(e,t){return it(e.getFullYear()%1e4,t,4)}function Bt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+it(t/60|0,"0",2)+it(t%60,"0",2)}function Wt(e,t){return it(e.getUTCDate(),t,2)}function Vt(e,t){return it(e.getUTCHours(),t,2)}function Ht(e,t){return it(e.getUTCHours()%12||12,t,2)}function Yt(e,t){return it(1+oA.count(cA(e),e),t,3)}function Gt(e,t){return it(e.getUTCMilliseconds(),t,3)}function Xt(e,t){return Gt(e,t)+"000"}function Zt(e,t){return it(e.getUTCMonth()+1,t,2)}function Jt(e,t){return it(e.getUTCMinutes(),t,2)}function Qt(e,t){return it(e.getUTCSeconds(),t,2)}function Kt(e){var t=e.getUTCDay();return 0===t?7:t}function en(e,t){return it(uA.count(cA(e),e),t,2)}function tn(e,t){var n=e.getUTCDay();return e=n>=4||0===n?fA(e):fA.ceil(e),it(fA.count(cA(e),e)+(4===cA(e).getUTCDay()),t,2)}function nn(e){return e.getUTCDay()}function rn(e,t){return it(sA.count(cA(e),e),t,2)}function an(e,t){return it(e.getUTCFullYear()%100,t,2)}function on(e,t){return it(e.getUTCFullYear()%1e4,t,4)}function un(){return"+0000"}function sn(){return"%"}function fn(e){return+e}function ln(e){return Math.floor(+e/1e3)}function cn(e){return dA=rt(e),hA=dA.format,pA=dA.parse,gA=dA.utcFormat,mA=dA.utcParse,dA}function dn(e){return e.toISOString()}function hn(e){var t=new Date(e);return isNaN(t)?null:t}function pn(e,t,n){t=t||{};var r=Ze(t.type||"json");return r||o("Unknown data format type: "+t.type),e=r(e,t),t.parse&&gn(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e}function gn(e,t,n){if(e.length){n=n||pA;var r,i,a,o,u,s,f,l=e.columns||Object.keys(e[0]);for("auto"===t&&(t=Me(e,l)),l=Object.keys(t),r=l.map(function(e){var r,i,a=t[e];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return r=a.split(/:(.+)?/,2),i=r[1],("'"===i[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?mA(i):n(i);if(!zS[a])throw Error("Illegal format pattern: "+e+":"+a);return zS[a]}),o=0,s=e.length,f=l.length;o<s;++o)for(i=e[o],u=0;u<f;++u)a=l[u],i[a]=r[u](i[a])}}function mn(e,t,n){return this.pulse(e,this.changeset().insert(pn(t,n)))}function vn(e){var t,n,r=new Promise(function(e,r){t=e,n=r});return r.requests=0,r.done=function(){0===--r.requests&&e.runAfter(function(){e._pending=null;try{e.run(),t(e)}catch(r){n(r)}})},e._pending=r}function yn(e,t,n){var r=this,i=r._pending||vn(r);i.requests+=1,r.loader().load(t,{context:"dataflow"}).then(function(t){r.ingest(e,t,n)},function(e){r.error("Loading failed",t,e)}).catch(function(e){r.error("Data ingestion failed",t,e)}).then(i.done,i.done)}function bn(e,t,n,r,i){var a=e instanceof se?xn:_n;return a(this,e,t,n,r,i),this}function _n(e,t,n,r,i,a){var o,u,s=z({},a,wA);A(n)||(n=R(n)),void 0===r?o=function(t){e.touch(n(t))}:A(r)?(u=new se(null,r,i,(!1)),o=function(t){var r,i=n(t);u.evaluate(t),ae(r=u.value)?e.pulse(i,r,a):e.update(i,r,s)}):o=function(t){e.update(n(t),r,s)},t.apply(o)}function xn(e,t,n,r,i,a){var o,u;void 0===r?u=n:(o=A(r)?r:R(r),r=n?function(e,t){var r=o(e,t);return n.skip()||(n.skip(r!==this.value).value=r),r}:o,u=new se(null,r,i,(!1)),u.modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),t.targets().add(u)}function wn(e){e.rank=++this._rank}function kn(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;--r>=0;)i.push(t=n[r]),t===e&&o("Cycle detected in dataflow graph.")}function Mn(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function En(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function On(e,t){var n=[];return Z(e,t,function(e){n.push(e)}),n}function Sn(e,t){var n={};return e.visit(t,function(e){n[K(e)]=1}),function(e){return n[K(e)]?null:e}}function An(e,t,n,r){var i,a,o,u,s,f=this,l=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n,o=0,u=n.length;o<u;++o)if(i=n[o],i.stamp===t){if(i.fields){a=f.fields||(f.fields={});for(s in i.fields)a[s]=1}i.changed(f.ADD)&&(l|=f.ADD),i.changed(f.REM)&&(l|=f.REM),i.changed(f.MOD)&&(l|=f.MOD)}this.changes=l}function Cn(e){var t,n,r,i,a=this,o=0,u=a.logLevel();if(a._pending)return a.info("Awaiting requests, delaying dataflow run."),0;if(a._pulse)return a.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!a._touched.length)return a.info("Dataflow invoked, but nothing to do."),0;a._pulse=new Mn(a,(++a._clock),e),u>=gS&&(r=Date.now(),a.debug("-- START PROPAGATION ("+a._clock+") -----")),a._touched.forEach(function(e){a._enqueue(e,!0)}),a._touched=J(oS);try{for(;a._heap.size()>0;)t=a._heap.pop(),t.rank===t.qrank?(n=t.run(a._getPulse(t,e)),u>=mS&&a.debug(t.id,n===kA?"STOP":n,t),n!==kA&&(a._pulse=n,t._targets&&t._targets.forEach(function(e){a._enqueue(e)})),++o):a._enqueue(t,!0)}catch(s){i=s}if(a._pulses={},a._pulse=null,u>=gS&&(r=Date.now()-r,a.info("> Pulse "+a._clock+": "+o+" operators; "+r+"ms")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,o,i)}catch(s){a.error(s)}if(a._postrun.length){var f=a._postrun;a._postrun=[],f.sort(function(e,t){return t.priority-e.priority}).forEach(function(e){Rn(a,e.callback)})}return o}function Rn(e,t){try{t(e)}catch(n){e.error(n)}}function Tn(){return this._pending||Promise.resolve(this.run())}function zn(e,t,n){this._pulse||t?this._postrun.push({priority:n||0,callback:e}):Rn(this,e)}function Dn(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Nn(e,t){var n,r=e.source,i=this._clock;return r&&iS(r)?(n=r.map(function(e){return e.pulse}),new An(this,i,n,t)):(n=this._pulses[e.id],r&&(r=r.pulse,r&&r!==kA?r.stamp===i&&n.target!==e?n=r:n.source=r.source:n.source=[]),n)}function Pn(e,t){var n=t||$A;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function $n(e,t,n){var r=n||$A;return(e.set(t)||r.force)&&this.touch(e,r),this}function Ln(e,t,n){this.touch(e,n||$A);var r=new Mn(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._pulses[e.id]=t.pulse(r,i),this}function qn(e){this.cmp=e,this.nodes=[]}function jn(e,t,n,r){var i,a,o;for(i=e[n];n>t&&(o=n-1>>1,a=e[o],r(i,a)<0);)e[n]=a,n=o;return e[n]=i}function Fn(e,t,n){for(var r,i=t,a=e.length,o=e[t],u=2*t+1;u<a;)r=u+1,r<a&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],t=u,u=2*t+1;return e[t]=o,jn(e,i,t,n)}function Un(){this._log=h(),this.logLevel(hS),this._clock=0,this._rank=0;try{this._loader=ge()}catch(e){}this._touched=J(oS),this._pulses={},this._pulse=null,this._heap=new qn(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function In(e){return function(){return this._log[e].apply(this,arguments)}}function Bn(e,t){se.call(this,e,null,t)}function Wn(e){var t=Vn(e);return t&&t.Definition||null}function Vn(e){return e=e&&e.toLowerCase(),FA.hasOwnProperty(e)?FA[e]:null}function Hn(e){return function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}}function Yn(e){return e&&e.length?1===e.length?e[0]:Hn(e):function(){return""}}function Gn(e,t,n){return n||e+(t?"_"+t:"")}function Xn(e,t){return UA[e](t)}function Zn(e){return function(t){var n=z({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function Jn(e,t){return e.idx-t.idx}function Qn(e,t){function n(e,r){function i(t){e[t]||n(e,e[t]=UA[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),e}var r,i=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{})),a=[];for(r in i)a.push(i[r]);return a.sort(Jn)}function Kn(e,t){var n=t||uS,r=Qn(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",u="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return r.forEach(function(e){i+=e.init,o+=e.add,u+=e.rem}),e.slice().sort(Jn).forEach(function(e){s+="t['"+e.out+"']="+e.set+";"}),s+="return t;",a=Function("cell",a),a.prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",u),a.prototype.set=Function("t",s),a.prototype.get=n,a.fields=e.map(function(e){return e.out}),a}function er(e){var t,n,r,i,a,o,u,s,f=e.maxbins||20,l=e.base||10,c=Math.log(l),d=e.divide||[5,2],h=e.extent[0],p=e.extent[1],g=p-h;if(e.step)t=e.step;else if(e.steps){for(a=g/f,o=0,u=e.steps.length;o<u&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(f)/c),r=e.minstep||0,t=Math.max(r,Math.pow(l,Math.round(Math.log(g)/c)-n));Math.ceil(g/t)>f;)t*=l;for(o=0,u=d.length;o<u;++o)a=t/d[o],a>=r&&g/a<=f&&(t=a)}return a=Math.log(t),i=a>=0?0:~~(-a/c)+1,s=Math.pow(l,-i-1),(e.nice||void 0===e.nice)&&(a=Math.floor(h/t+s)*t,h=h<a?a-t:a,p=Math.ceil(p/t)*t),{start:h,stop:p,step:t}}function tr(e,t){var n,r=[],i=e.length,a=-1;if(null==t)for(;++a<i;)isNaN(n=nr(e[a]))||r.push(n);else for(;++a<i;)isNaN(n=nr(t(e[a],a,e)))||r.push(n);return r}function nr(e){return null===e?NaN:+e}function rr(e){t.random=e}function ir(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ar(e){return 1===e.length&&(e=or(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}function or(e){return function(t,n){return ir(e(t),n)}}function ur(e){return null===e?NaN:+e}function sr(e,t){var n,r,i=e.length,a=0,o=-1,u=0,s=0;if(null==t)for(;++o<i;)isNaN(n=ur(e[o]))||(r=n-u,u+=r/++a,s+=r*(n-u));else for(;++o<i;)isNaN(n=ur(t(e[o],o,e)))||(r=n-u,u+=r/++a,s+=r*(n-u));if(a>1)return s/(a-1)}function fr(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}function lr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}function cr(e,t,n){var r,i,a,o,u=-1;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=dr(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++u<i;)a[u]=(e+u)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++u<i;)a[u]=(e-u)/o;return r&&a.reverse(),a}function dr(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=HA?10:a>=YA?5:a>=GA?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=HA?10:a>=YA?5:a>=GA?2:1)}function hr(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=HA?i*=10:a>=YA?i*=5:a>=GA&&(i*=2),t<e?-i:i}function pr(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function gr(e,t,n){if(null==n&&(n=ur),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function mr(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r}function vr(e,t){var n,r=e.length,i=r,a=-1,o=0;if(null==t)for(;++a<r;)isNaN(n=ur(e[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=ur(t(e[a],a,e)))?--i:o+=n;if(i)return o/i}function yr(e,t){var n,r=e.length,i=-1,a=[];if(null==t)for(;++i<r;)isNaN(n=ur(e[i]))||a.push(n);else for(;++i<r;)isNaN(n=ur(t(e[i],i,e)))||a.push(n);return gr(a.sort(ir),.5)}function br(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n}function _r(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r>n&&(r=n);return r}function xr(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r}function wr(e,t){var n,r=e.length,i=-1,a=0;if(null==t)for(;++i<r;)(n=+e[i])&&(a+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(a+=n);return a}function kr(e,n,r,i){var a,o,u,s,f=tr(e,i),l=f.length,c=n;for(u=0,s=Array(c);u<c;++u){for(a=0,o=0;o<l;++o)a+=f[~~(t.random()*l)];s[u]=a/l}return[gr(s.sort(ir),r/2),gr(s,1-r/2)]}function Mr(e,t){var n=tr(e,t);return[gr(n.sort(ir),.25),gr(n,.5),gr(n,.75)]}function Er(e,n){null==n&&(n=e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(r=e||0,a=i-r,o):r},o.max=function(e){return arguments.length?(i=e||0,a=i-r,o):i},o.sample=function(){return r+Math.floor(a*t.random())},o.pdf=function(e){return e===Math.floor(e)&&e>=r&&e<i?1/a:0},o.cdf=function(e){var t=Math.floor(e);return t<r?0:t>=i?1:(t-r+1)/a},o.icdf=function(e){return e>=0&&e<=1?r-1+Math.floor(e*a):NaN},o.min(e).max(n)}function Or(e,n){var r,i,a=NaN,o={};return o.mean=function(e){return arguments.length?(r=e||0,a=NaN,o):r},o.stdev=function(e){return arguments.length?(i=null==e?1:e,a=NaN,o):i},o.sample=function(){var e,n,o=0,u=0;if(a===a)return o=a,a=NaN,o;do o=2*t.random()-1,u=2*t.random()-1,e=o*o+u*u;while(0===e||e>1);return n=Math.sqrt(-2*Math.log(e)/e),a=r+u*n*i,r+o*n*i},o.pdf=function(e){var t=Math.exp(Math.pow(e-r,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*t},o.cdf=function(e){var t,n=(e-r)/i,a=Math.abs(n);if(a>37)t=0;else{var o,u=Math.exp(-a*a/2);a<7.07106781186547?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,t=u*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,t/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,t=u/o/2.506628274631)}return n>0?1-t:t},o.icdf=function(e){if(e<=0||e>=1)return NaN;var t=2*e-1,n=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*n)+Math.log(1-Math.pow(t,2))/2,o=Math.log(1-t*t)/n,u=(t>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return r+i*Math.SQRT2*u},o.mean(e).stdev(n)}function Sr(e,n){var r=Or(),i={},a=0;return i.data=function(t){return arguments.length?(e=t,a=t?t.length:0,i.bandwidth(n)):e},i.bandwidth=function(t){return arguments.length?(n=t,!n&&e&&(n=Ar(e)),i):n},i.sample=function(){return e[~~(t.random()*a)]+n*r.sample()},i.pdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.pdf((t-e[o])/n);return i/n/a},i.cdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.cdf((t-e[o])/n);return i/a},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)}function Ar(e){var t=e.length,n=Mr(e),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(sr(e)),r)*Math.pow(t,-.2)}function Cr(e,n){function r(e){var t,n=[],r=0;for(t=0;t<o;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<o;++t)n[t]/=r;return n}var i,a={},o=0;return a.weights=function(e){return arguments.length?(i=r(n=e||[]),a):n},a.distributions=function(t){return arguments.length?(t?(o=t.length,e=t):(o=0,e=[]),a.weights(n)):e},a.sample=function(){for(var n=t.random(),r=e[o-1],a=i[0],u=0;u<o-1;a+=i[++u])if(n<a){r=e[u];break}return r.sample()},a.pdf=function(t){for(var n=0,r=0;r<o;++r)n+=i[r]*e[r].pdf(t);return n},a.cdf=function(t){for(var n=0,r=0;r<o;++r)n+=i[r]*e[r].cdf(t);return n},a.icdf=function(){throw Error("Mixture icdf not supported.")},a.distributions(e).weights(n)}function Rr(e,n){null==n&&(n=null==e?1:e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(r=e||0,a=i-r,o):r},o.max=function(e){return arguments.length?(i=e||0,a=i-r,o):i},o.sample=function(){return r+a*t.random()},o.pdf=function(e){return e>=r&&e<=i?1/a:0},o.cdf=function(e){return e<r?0:e>i?1:(e-r)/a},o.icdf=function(e){return e>=0&&e<=1?r+e*a:NaN},o.min(e).max(n)}function Tr(e){this._key=e?c(e):K,this.reset()}function zr(e){Bn.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Dr(e){Bn.call(this,null,e)}function Nr(e,t,n){var r=e,i=t||[],a=n||[],o={},u=0;return{add:function(e){a.push(e)},remove:function(e){o[r(e)]=++u},size:function(){return i.length},data:function(e,t){return u&&(i=i.filter(function(e){return!o[r(e)]}),o={},u=0),t&&e&&i.sort(e),a.length&&(i=e?U(e,i,a.sort(e)):i.concat(a),a=[]),i}}}function Pr(e){Bn.call(this,[],e)}function $r(e){se.call(this,null,Lr,e)}function Lr(e){return this.value&&!e.modified()?this.value:C(e.fields,e.orders)}function qr(e){Bn.call(this,null,e)}function jr(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}function Fr(e){Bn.call(this,null,e)}function Ur(e,t,n,r){for(var i,a,o=[],u={},s=e.length,f=0;f<s;++f)for(u[t]=a=e[f],i=0;i<s;++i)u[n]=e[i],r(u)&&(o.push(te(u)),u={},u[t]=a);return o}function Ir(e,t){var n=e[rC];tC.hasOwnProperty(n)||o("Unknown distribution function: "+n);var r=tC[n]();for(var i in e)i===iC?r.data((e.from||t()).map(e[i])):i===nC?r[i](e[i].map(function(e){return Ir(e,t)})):typeof r[i]===rC&&r[i](e[i]);return r}function Br(e){Bn.call(this,null,e)}function Wr(e){return function(){return e.materialize(e.SOURCE).source}}function Vr(e){Bn.call(this,[+(1/0),-(1/0)],e)}function Hr(e,t){se.call(this,e),this.parent=t}function Yr(e){Bn.call(this,{},e),this._keys=N();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function Gr(e){se.call(this,null,Xr,e)}function Xr(e){return this.value&&!e.modified()?this.value:iS(e.name)?S(e.name).map(function(e){return c(e)}):c(e.name,e.as)}function Zr(e){Bn.call(this,N(),e)}function Jr(e,t){return e?e.map(function(e,n){return t[n]||i(e)}):null}function Qr(e){Bn.call(this,[],e)}function Kr(e){Bn.call(this,[],e)}function ei(e){Bn.call(this,null,e)}function ti(e){Bn.call(this,[],e)}function ni(e){Bn.call(this,[],e)}function ri(e){var t,n=e.method||mC.value;return null!=mC[n]?n===mC.value?(t=void 0!==e.value?e.value:0,function(){return t}):mC[n]:void o("Unrecognized imputation method: "+n)}function ii(e){var t=e.field;return function(e){return e?t(e):NaN}}function ai(e,t,n,r){var i,a,o,u,s,f,l,c,d=function(e){return e(c)},h=[],p=r?r.slice():[],g={},m={};for(p.forEach(function(e,t){g[e]=t+1}),u=0,l=e.length;u<l;++u)c=e[u],f=n(c),s=g[f]||(g[f]=p.push(f)),a=(i=t?t.map(d):vC)+"",(o=m[a])||(o=m[a]=[],h.push(o),o.values=i),o[s-1]=c;return h.domain=p,h}function oi(e){zr.call(this,e)}function ui(e){se.call(this,null,si,e)}function si(e){return this.value&&!e.modified()?this.value:F(e.fields,e.flat)}function fi(e){Bn.call(this,{},e)}function li(e){se.call(this,null,ci,e)}function ci(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=+(1/0),a=-(1/0),o=e.extents;for(t=0,n=o.length;t<n;++t)r=o[t],r[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function di(e){se.call(this,null,hi,e)}function hi(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function pi(e){Bn.call(this,null,e)}function gi(e){zr.call(this,e)}function mi(e,t){var n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",o=a(n).concat(a(r)),u=yi(n,e.limit||0,t);return{key:e.key,groupby:e.groupby,ops:u.map(function(){return i}),fields:u.map(function(e){return vi(e,n,r,o)}),as:u.map(function(e){return e+""}),modified:e.modified.bind(e)}}function vi(e,t,n,i){return r(function(r){return t(r)===e?n(r):NaN},i,e+"")}function yi(e,t,n){var r={},i=[];return n.visit(n.SOURCE,function(t){var n=e(t);r[n]||(r[n]=1,i.push(n))}),i.sort(function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)}),t?i.slice(0,t):i}function bi(e){Yr.call(this,e)}function _i(e){Bn.call(this,null,e)}function xi(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}function wi(e){Bn.call(this,null,e)}function ki(e){Bn.call(this,null,e)}function Mi(e){Bn.call(this,[],e),this.count=0}function Ei(e){Bn.call(this,null,e)}function Oi(e){Bn.call(this,null,e),this.modified(!0)}function Si(e){Bn.call(this,N(),e)}function Ai(e){Bn.call(this,null,e)}function Ci(e,t,n,r){var i=TC[e](t,n);return{init:i.init||sS,update:function(e,t){t[r]=i.next(e)}}}function Ri(e){function t(e){S(a(e)).forEach(function(e){d[e]=1})}var n=this,r=S(e.ops),u=S(e.fields),s=S(e.params),f=S(e.as),l=n.outputs=[],c=n.windows=[],d={},h={},p=!0,g=[],m=[];t(e.sort),r.forEach(function(e,n){var r=u[n],a=i(r),d=Gn(e,a,f[n]);if(t(r),l.push(d),TC.hasOwnProperty(e))c.push(Ci(e,u[n],s[n],d));else{if(null==r&&"count"!==e&&o("Null aggregate field specified."),"count"===e)return void g.push(d);p=!1;var v=h[a];v||(v=h[a]=[],v.field=r,m.push(v)),v.push(Xn(e,d))}}),(g.length||m.length)&&(n.cell=Ti(m,g,p)),n.inputs=Object.keys(d)}function Ti(e,t,n){e=e.map(function(e){return Kn(e,e.field)});var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var u=r.data=new Tr;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(u&&u.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<i;++e)a[e].init()},r}function zi(e){Bn.call(this,{},e),this._mlen=0,this._mods=[]}function Di(e,t,n){var r=n.sort,i=r&&!n.ignorePeers,a=n.frame||[null,0],o=e.data(r),u=o.length,s=0,f=i?ar(r):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||R(-1)};for(t.init();s<u;++s)Ni(l,a,s,u),i&&Pi(l,f),t.update(l,o[s])}function Ni(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Pi(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function $i(e){this.clear(),e&&this.union(e)}function Li(e,t){var n,r=[];return n={id:"gradient_"+vR++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}function qi(e){this.mark=e,this.bounds=this.bounds||new $i}function ji(e){qi.call(this,e),this.items=this.items||[]}function Fi(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}function Ui(){return"undefined"!=typeof Image?Image:null}function Ii(e,t){if(yR)try{return new yR(e,t)}catch(n){}return null}function Bi(){return yR&&yR.Image||null}function Wi(e,t){return Fi(e,t)||Ii(e,t)||null}function Vi(){return Ui()||Bi()||null}function Hi(e){this._pending=0,this._loader=e||ge()}function Yi(e){e._pending+=1}function Gi(e){e._pending-=1}function Xi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Zi(){return new Xi}function Ji(e){return function(){return e}}function Qi(e){return e>1?0:e<-1?zR:Math.acos(e)}function Ki(e){return e>=1?DR:e<=-1?-DR:Math.asin(e)}function ea(e){return e.innerRadius}function ta(e){return e.outerRadius}function na(e){return e.startAngle}function ra(e){return e.endAngle}function ia(e){return e&&e.padAngle}function aa(e,t,n,r,i,a,o,u){var s=n-e,f=r-t,l=o-i,c=u-a,d=(l*(t-a)-c*(e-i))/(c*s-l*f);return[e+d*s,t+d*f]}function oa(e,t,n,r,i,a,o){var u=e-n,s=t-r,f=(o?a:-a)/RR(u*u+s*s),l=f*s,c=-f*u,d=e+l,h=t+c,p=n+l,g=r+c,m=(d+p)/2,v=(h+g)/2,y=p-d,b=g-h,_=y*y+b*b,x=i-a,w=d*g-p*h,k=(b<0?-1:1)*RR(SR(0,x*x*_-w*w)),M=(w*b-y*k)/_,E=(-w*y-b*k)/_,O=(w*b+y*k)/_,S=(-w*y+b*k)/_,A=M-m,C=E-v,R=O-m,T=S-v;return A*A+C*C>R*R+T*T&&(M=O,E=S),{cx:M,cy:E,x01:-l,y01:-c,x11:M*(i/x-1),y11:E*(i/x-1)}}function ua(){function e(){var e,f,l=+t.apply(this,arguments),c=+n.apply(this,arguments),d=a.apply(this,arguments)-DR,h=o.apply(this,arguments)-DR,p=MR(h-d),g=h>d;if(s||(s=e=Zi()),c<l&&(f=c,c=l,l=f),c>TR)if(p>NR-TR)s.moveTo(c*OR(d),c*CR(d)),s.arc(0,0,c,d,h,!g),l>TR&&(s.moveTo(l*OR(h),l*CR(h)),s.arc(0,0,l,h,d,g));else{var m,v,y=d,b=h,_=d,x=h,w=p,k=p,M=u.apply(this,arguments)/2,E=M>TR&&(i?+i.apply(this,arguments):RR(l*l+c*c)),O=AR(MR(c-l)/2,+r.apply(this,arguments)),S=O,A=O;if(E>TR){var C=Ki(E/l*CR(M)),R=Ki(E/c*CR(M));(w-=2*C)>TR?(C*=g?1:-1,_+=C,x-=C):(w=0,_=x=(d+h)/2),(k-=2*R)>TR?(R*=g?1:-1,y+=R,b-=R):(k=0,y=b=(d+h)/2)}var T=c*OR(y),z=c*CR(y),D=l*OR(x),N=l*CR(x);if(O>TR){var P=c*OR(b),$=c*CR(b),L=l*OR(_),q=l*CR(_);if(p<zR){var j=w>TR?aa(T,z,L,q,P,$,D,N):[D,N],F=T-j[0],U=z-j[1],I=P-j[0],B=$-j[1],W=1/CR(Qi((F*I+U*B)/(RR(F*F+U*U)*RR(I*I+B*B)))/2),V=RR(j[0]*j[0]+j[1]*j[1]);S=AR(O,(l-V)/(W-1)),A=AR(O,(c-V)/(W+1))}}k>TR?A>TR?(m=oa(L,q,T,z,c,A,g),v=oa(P,$,D,N,c,A,g),s.moveTo(m.cx+m.x01,m.cy+m.y01),A<O?s.arc(m.cx,m.cy,A,ER(m.y01,m.x01),ER(v.y01,v.x01),!g):(s.arc(m.cx,m.cy,A,ER(m.y01,m.x01),ER(m.y11,m.x11),!g),s.arc(0,0,c,ER(m.cy+m.y11,m.cx+m.x11),ER(v.cy+v.y11,v.cx+v.x11),!g),s.arc(v.cx,v.cy,A,ER(v.y11,v.x11),ER(v.y01,v.x01),!g))):(s.moveTo(T,z),s.arc(0,0,c,y,b,!g)):s.moveTo(T,z),l>TR&&w>TR?S>TR?(m=oa(D,N,P,$,l,-S,g),v=oa(T,z,L,q,l,-S,g),s.lineTo(m.cx+m.x01,m.cy+m.y01),S<O?s.arc(m.cx,m.cy,S,ER(m.y01,m.x01),ER(v.y01,v.x01),!g):(s.arc(m.cx,m.cy,S,ER(m.y01,m.x01),ER(m.y11,m.x11),!g),s.arc(0,0,l,ER(m.cy+m.y11,m.cx+m.x11),ER(v.cy+v.y11,v.cx+v.x11),g),s.arc(v.cx,v.cy,S,ER(v.y11,v.x11),ER(v.y01,v.x01),!g))):s.arc(0,0,l,x,_,g):s.lineTo(D,N)}else s.moveTo(0,0);if(s.closePath(),e)return s=null,e+""||null}var t=ea,n=ta,r=Ji(0),i=null,a=na,o=ra,u=ia,s=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-zR/2;return[OR(r)*e,CR(r)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Ji(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Ji(+t),e):n},e.cornerRadius=function(t){return arguments.length?(r="function"==typeof t?t:Ji(+t),e):r},e.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Ji(+t),e):i},e.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:Ji(+t),e):a},e.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Ji(+t),e):o},e.padAngle=function(t){return arguments.length?(u="function"==typeof t?t:Ji(+t),e):u},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}function sa(e){this._context=e}function fa(e){return new sa(e)}function la(e){return e[0]}function ca(e){return e[1]}function da(){function e(e){var u,s,f,l=e.length,c=!1;for(null==i&&(o=a(f=Zi())),u=0;u<=l;++u)!(u<l&&r(s=e[u],u,e))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(s,u,e),+n(s,u,e));if(f)return o=null,f+""||null}var t=la,n=ca,r=Ji(!0),i=null,a=fa,o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Ji(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Ji(+t),e):n},e.defined=function(t){return arguments.length?(r="function"==typeof t?t:Ji(!!t),e):r},e.curve=function(t){return arguments.length?(a=t,null!=i&&(o=a(i)),e):a},e.context=function(t){return arguments.length?(null==t?i=o=null:o=a(i=t),e):i},e}function ha(){function e(e){var t,l,c,d,h,p=e.length,g=!1,m=new Array(p),v=new Array(p);for(null==u&&(f=s(h=Zi())),t=0;t<=p;++t){if(!(t<p&&o(d=e[t],t,e))===g)if(g=!g)l=t,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),c=t-1;c>=l;--c)f.point(m[c],v[c]);f.lineEnd(),f.areaEnd()}g&&(m[t]=+n(d,t,e),v[t]=+i(d,t,e),f.point(r?+r(d,t,e):m[t],a?+a(d,t,e):v[t]))}if(h)return f=null,h+""||null}function t(){return da().defined(o).curve(s).context(u)}var n=la,r=null,i=Ji(0),a=ca,o=Ji(!0),u=null,s=fa,f=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:Ji(+t),r=null,e):n},e.x0=function(t){return arguments.length?(n="function"==typeof t?t:Ji(+t),e):n},e.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Ji(+t),e):r},e.y=function(t){return arguments.length?(i="function"==typeof t?t:Ji(+t),a=null,e):i},e.y0=function(t){return arguments.length?(i="function"==typeof t?t:Ji(+t),e):i},e.y1=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:Ji(+t),e):a},e.lineX0=e.lineY0=function(){return t().x(n).y(i)},e.lineY1=function(){return t().x(n).y(a)},e.lineX1=function(){return t().x(r).y(i)},e.defined=function(t){return arguments.length?(o="function"==typeof t?t:Ji(!!t),e):o},e.curve=function(t){return arguments.length?(s=t,null!=u&&(f=s(u)),e):s},e.context=function(t){return arguments.length?(null==t?u=f=null:f=s(u=t),e):u},e}function pa(){function e(){var e;if(r||(r=e=Zi()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),e)return r=null,e+""||null}var t=Ji(PR),n=Ji(64),r=null;return e.type=function(n){return arguments.length?(t="function"==typeof n?n:Ji(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:Ji(+t),e):n},e.context=function(t){return arguments.length?(r=null==t?null:t,e):r},e}function ga(){}function ma(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function va(e){this._context=e}function ya(e){return new va(e)}function ba(e){this._context=e}function _a(e){return new ba(e)}function xa(e){this._context=e}function wa(e){return new xa(e)}function ka(e,t){this._basis=new va(e),this._beta=t}function Ma(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Ea(e,t){this._context=e,this._k=(1-t)/6}function Oa(e,t){this._context=e,this._k=(1-t)/6}function Sa(e,t){this._context=e,this._k=(1-t)/6}function Aa(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>TR){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>TR){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Ca(e,t){this._context=e,this._alpha=t}function Ra(e,t){this._context=e,this._alpha=t}function Ta(e,t){this._context=e,this._alpha=t}function za(e){this._context=e}function Da(e){return new za(e)}function Na(e){return e<0?-1:1}function Pa(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(Na(a)+Na(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function $a(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function La(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;
e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function qa(e){this._context=e}function ja(e){this._context=new Fa(e)}function Fa(e){this._context=e}function Ua(e){return new qa(e)}function Ia(e){return new ja(e)}function Ba(e){this._context=e}function Wa(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Va(e){return new Ba(e)}function Ha(e,t){this._context=e,this._t=t}function Ya(e){return new Ha(e,.5)}function Ga(e){return new Ha(e,0)}function Xa(e){return new Ha(e,1)}function Za(e,t,n){var r=WR.hasOwnProperty(e)&&WR[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function Ja(e){var t,n,r,i,a,o,u,s,f,l,c,d=[];for(t=e.slice().replace(HR[0],"###$1").split(HR[1]).slice(1),s=0,l=t.length;s<l;++s){for(n=t[s],r=n.slice(1).trim().replace(HR[2],"$1###$2").split(HR[3]),o=n.charAt(0),i=[o],f=0,c=r.length;f<c;++f)(a=+r[f])===a&&i.push(a);if(u=VR[o.toLowerCase()],i.length-1>u)for(f=1,c=i.length;f<c;f+=u)d.push([o].concat(i.slice(f,f+u)));else d.push(i)}return d}function Qa(e,t,n,r,i,a,o,u,s){var f=XR.call(arguments);if(YR[f])return YR[f];var l=o*(Math.PI/180),c=Math.sin(l),d=Math.cos(l);n=Math.abs(n),r=Math.abs(r);var h=d*(u-e)*.5+c*(s-t)*.5,p=d*(s-t)*.5-c*(u-e)*.5,g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);var m=d/n,v=c/n,y=-c/r,b=d/r,_=m*u+v*s,x=y*u+b*s,w=m*e+v*t,k=y*e+b*t,M=(w-_)*(w-_)+(k-x)*(k-x),E=1/M-.25;E<0&&(E=0);var O=Math.sqrt(E);a==i&&(O=-O);var S=.5*(_+w)-O*(k-x),A=.5*(x+k)+O*(w-_),C=Math.atan2(x-A,_-S),R=Math.atan2(k-A,w-S),T=R-C;T<0&&1===a?T+=2*Math.PI:T>0&&0===a&&(T-=2*Math.PI);for(var z=Math.ceil(Math.abs(T/(.5*Math.PI+.001))),D=[],N=0;N<z;++N){var P=C+N*T/z,$=C+(N+1)*T/z;D[N]=[S,A,P,$,n,r,c,d]}return YR[f]=D}function Ka(e){var t=XR.call(e);if(GR[t])return GR[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],f=e[7],l=f*o,c=-s*u,d=s*o,h=f*u,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*g,w=r+g+_*p,k=n+m,M=r+v,E=k+_*v,O=M-_*m;return GR[t]=[l*x+c*w,d*x+h*w,l*E+c*O,d*E+h*O,l*k+c*M,d*k+h*M]}function eo(e,t){var n=ZR[0]=e[0];if("a"===n||"A"===n)ZR[1]=t*e[1],ZR[2]=t*e[2],ZR[6]=t*e[6],ZR[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)ZR[r]=t*e[r];return ZR}function to(e,t,n,r,i){var a,o,u,s,f,l=null,c=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=eo(a,i)),a[0]){case"l":c+=a[1],d+=a[2],e.lineTo(c+n,d+r);break;case"L":c=a[1],d=a[2],e.lineTo(c+n,d+r);break;case"h":c+=a[1],e.lineTo(c+n,d+r);break;case"H":c=a[1],e.lineTo(c+n,d+r);break;case"v":d+=a[1],e.lineTo(c+n,d+r);break;case"V":d=a[1],e.lineTo(c+n,d+r);break;case"m":c+=a[1],d+=a[2],e.moveTo(c+n,d+r);break;case"M":c=a[1],d=a[2],e.moveTo(c+n,d+r);break;case"c":o=c+a[5],u=d+a[6],h=c+a[3],p=d+a[4],e.bezierCurveTo(c+a[1]+n,d+a[2]+r,h+n,p+r,o+n,u+r),c=o,d=u;break;case"C":c=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,c+n,d+r);break;case"s":o=c+a[3],u=d+a[4],h=2*c-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,c+a[1]+n,d+a[2]+r,o+n,u+r),h=c+a[1],p=d+a[2],c=o,d=u;break;case"S":o=a[3],u=a[4],h=2*c-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,u+r),c=o,d=u,h=a[1],p=a[2];break;case"q":o=c+a[3],u=d+a[4],h=c+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,u+r),c=o,d=u;break;case"Q":o=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),c=o,d=u,h=a[1],p=a[2];break;case"t":o=c+a[1],u=d+a[2],null===l[0].match(/[QqTt]/)?(h=c,p=d):"t"===l[0]?(h=2*c-s,p=2*d-f):"q"===l[0]&&(h=2*c-h,p=2*d-p),s=h,f=p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),c=o,d=u,h=c+a[1],p=d+a[2];break;case"T":o=a[1],u=a[2],h=2*c-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),c=o,d=u;break;case"a":no(e,c+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+c+n,a[7]+d+r]),c+=a[6],d+=a[7];break;case"A":no(e,c+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),c=a[6],d=a[7];break;case"z":case"Z":e.closePath()}l=a}}function no(e,t,n,r){for(var i=Qa(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=Ka(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}function ro(e){return KR.hasOwnProperty(e)?KR[e]:io(e)}function io(e){if(!eT.hasOwnProperty(e)){var t=Ja(e);eT[e]={draw:function(e,n){to(e,t,0,0,Math.sqrt(n)/2)}}}return eT[e]}function ao(e){return e.x}function oo(e){return e.y}function uo(e){return e.width}function so(e){return e.height}function fo(e){return function(){return e}}function lo(){function e(e,u,s){var f,l=null!=u?u:+t.call(this,e),c=null!=s?s:+n.call(this,e),d=+r.call(this,e),h=+i.call(this,e),p=+a.call(this,e);if(o||(o=f=Zi()),p<=0)o.rect(l,c,d,h);else{var g=l+d,m=c+h;o.moveTo(l+p,c),o.lineTo(g-p,c),o.quadraticCurveTo(g,c,g,c+p),o.lineTo(g,m-p),o.quadraticCurveTo(g,m,g-p,m),o.lineTo(l+p,m),o.quadraticCurveTo(l,m,l,m-p),o.lineTo(l,c+p),o.quadraticCurveTo(l,c,l+p,c),o.closePath()}if(f)return o=null,f+""||null}var t=ao,n=oo,r=uo,i=so,a=fo(0),o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:fo(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:fo(+t),e):n},e.width=function(t){return arguments.length?(r="function"==typeof t?t:fo(+t),e):r},e.height=function(t){return arguments.length?(i="function"==typeof t?t:fo(+t),e):i},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:fo(+t),e):a},e.context=function(t){return arguments.length?(o=null==t?null:t,e):o},e}function co(){function e(e,t,n){var r=n/2;if(o){var i=s-t,a=e-u;if(i||a){var c=Math.sqrt(i*i+a*a),d=(i/=c)*f,h=(a/=c)*f,p=Math.atan2(a,i);l.moveTo(u-d,s-h),l.lineTo(e-i*r,t-a*r),l.arc(e,t,r,p-tT,p),l.lineTo(u+d,s+h),l.arc(u,s,f,p,p+tT)}else l.arc(e,t,r,0,2*tT);l.closePath()}else o=1;u=e,s=t,f=r}function t(t){var u,s,f,c=t.length,d=!1;for(null==l&&(l=f=Zi()),u=0;u<=c;++u)!(u<c&&a(s=t[u],u,t))===d&&(d=!d)&&(o=0),d&&e(+n(s,u,t),+r(s,u,t),+i(s,u,t));if(f)return l=null,f+""||null}var n,r,i,a,o,u,s,f,l=null;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.context=function(e){return arguments.length?(l=null==e?null:e,t):l},t}function ho(e){return e.x||0}function po(e){return e.y||0}function go(e){return e.width||0}function mo(e){return e.size||1}function vo(e){return e.height||0}function yo(e){return(e.x||0)+(e.width||0)}function bo(e){return(e.y||0)+(e.height||0)}function _o(e){return e.startAngle||0}function xo(e){return e.endAngle||0}function wo(e){return e.padAngle||0}function ko(e){return e.innerRadius||0}function Mo(e){return e.outerRadius||0}function Eo(e){return e.cornerRadius||0}function Oo(e){return!(e.defined===!1)}function So(e){return null==e.size?64:e.size}function Ao(e){return ro(e.shape||"circle")}function Co(e,t){return nT.context(e)(t)}function Ro(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?iT:rT).curve(Za(r,n.orient,n.tension)).context(e)(t)}function To(e,t){var n=t[0],r=n.interpolate||"linear";return aT.curve(Za(r,n.orient,n.tension)).context(e)(t)}function zo(e,t,n,r){return oT.context(e)(t,n,r)}function Do(e,t){return(t.mark.shape||t.shape).context(e)(t)}function No(e,t){return uT.context(e)(t)}function Po(e,t){return sT.context(e)(t)}function $o(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e}function Lo(e){return BR=e,Lo}function qo(){}function jo(e,t){BR.add(e,t)}function Fo(e,t,n){for(var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,u=n.x1+t.x2*r,s=n.y1+t.y2*i,f=t.stops,l=0,c=f.length,d=e.createLinearGradient(a,o,u,s);l<c;++l)d.addColorStop(f[l].offset,f[l].color);return d}function Uo(e,t,n){return n.id?Fo(e,n,t.bounds):n}function Io(e,t,n){return n*=null==t.fillOpacity?1:t.fillOpacity,n>0&&(e.globalAlpha=n,e.fillStyle=Uo(e,t,t.fill),!0)}function Bo(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity,n>0&&(e.globalAlpha=n,e.strokeStyle=Uo(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||pT),e.lineDashOffset=t.strokeDashOffset||0),!0))}function Wo(e,t){return e.zindex-t.zindex||e.index-t.index}function Vo(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)t=i[n],t.index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(Wo)}function Ho(e,t){var n,r,i=e.items;if(i&&i.length){var a=Vo(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function Yo(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=Vo(e);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===a)for(i=e.items,r=i.length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function Go(e){return function(t,n,r){Ho(n,function(n){r&&!r.intersects(n.bounds)||Zo(e,t,n,n)})}}function Xo(e){return function(t,n,r){!n.items.length||r&&!r.intersects(n.bounds)||Zo(e,t,n.items[0],n.items)}}function Zo(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&Io(t,n,i)&&t.fill(),n.stroke&&Bo(t,n,i)&&t.stroke()))}function Jo(e){return e||(e=gT),function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,Yo(n,function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return e(t,n,r,i,a,o)?n:void 0})}}function Qo(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,f=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(f&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function Ko(e){return Jo(Qo(e))}function eu(e,t){return"translate("+e+","+t+")"}function tu(e){return eu(e.x||0,e.y||0)}function nu(e,t){function n(e,n){e("transform",tu(n)),e("d",t(null,n))}function r(e,n){return t(Lo(e),n),$o(e,n).translate(n.x||0,n.y||0)}function i(e,n){var r=n.x||0,i=n.y||0;e.translate(r,i),e.beginPath(),t(e,n),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:n,bound:r,draw:Go(i),pick:Ko(i)}}function ru(e,t){var n="horizontal"===e[0].orient?t[1]:t[0],r="horizontal"===e[0].orient?"y":"x",i=0,a=e.length;if(1===a)return e[0];for(;i<a;){var o=i+a>>>1;e[o][r]<n?i=o+1:a=o}return i=Math.max(0,i-1),a=Math.min(e.length-1,a),n-e[i][r]<e[a][r]-n?e[i]:e[a]}function iu(e,t){for(var n,r,i,a=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(e[o].defined!==!1&&(n=e[o].x-t[0],r=e[o].y-t[1],i=n*n+r*r,i<a))return e[o];return null}function au(e,t){for(var n,r,i,a=e.length;--a>=0;)if(e[a].defined!==!1&&(n=e[a].x-t[0],r=e[a].y-t[1],i=n*n+r*r,n=e[a].size||1,i<n*n))return e[a];return null}function ou(e,t,n){function r(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))}function i(e,n){var r=n.items;return 0===r.length?e:(t(Lo(e),r),$o(e,r[0]))}function a(e,n){e.beginPath(),t(e,n)}function o(e,t,n,r,i,a){var o=t.items,s=t.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,u(e,o,n,r)?o[0]:null)}var u=Qo(a);return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Xo(a),pick:o,tip:n}}function uu(){yT=1}function su(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+yT++),o=i.clipping[a]||(i.clipping[a]={id:a});return A(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function fu(e,t){e("transform",tu(t))}function lu(e,t){var n=t.stroke?bT:0;e("class","background"),e("d",zo(null,t,n,n))}function cu(e,t,n){var r=t.clip?su(n,t,t):null;e("clip-path",r)}function du(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&$o(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)}function hu(e,t){var n=t.stroke?bT:0;e.beginPath(),zo(e,t,n,n)}function pu(e,t,n){var r=this;Ho(t,function(t){var i,a=t.x||0,o=t.y||0,u=t.width||0,s=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&(i=null==t.opacity?1:t.opacity,i>0&&(hu(e,t),t.fill&&Io(e,t,i)&&e.fill(),t.stroke&&Bo(e,t,i)&&e.stroke())),t.clip&&(e.beginPath(),e.rect(0,0,u,s),e.clip()),n&&n.translate(-a,-o),Ho(t,function(t){r.draw(e,t,n)}),n&&n.translate(a,o),e.restore()})}function gu(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,u=n*e.pixelRatio,s=r*e.pixelRatio;return Yo(t,function(f){var l,c,d,h;if(h=f.bounds,!h||h.contains(i,a))return c=f.x||0,d=f.y||0,e.save(),e.translate(c,d),c=i-c,d=a-d,l=Yo(f,function(e){return mu(e,c,d)?o.pick(e,n,r,c,d):null}),!l&&t.interactive!==!1&&(f.fill||f.stroke)&&_T(e,f,u,s)&&(l=f),e.restore(),l||null})}function mu(e,t,n){return(e.interactive!==!1||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}function vu(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function yu(e,t){return"center"===e?t/2:"right"===e?t:0}function bu(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function _u(e,t,n){var r=vu(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,u=(null!=t.height?t.height:r.height)||0,s=t.aspect===!1?"none":"xMidYMid";i-=yu(t.align,o),a-=bu(t.baseline,u),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",eu(i,a)),e("width",o),e("height",u),e("preserveAspectRatio",s)}function xu(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=yu(t.align,a),i-=bu(t.baseline,o),e.set(r,i,r+a,i+o)}function wu(e,t,n){var r=this;Ho(t,function(t){if(!n||n.intersects(t.bounds)){var i,a,o,u,s=vu(t,r),f=t.x||0,l=t.y||0,c=(null!=t.width?t.width:s.width)||0,d=(null!=t.height?t.height:s.height)||0;f-=yu(t.align,c),l-=bu(t.baseline,d),t.aspect!==!1&&(a=s.width/s.height,o=t.width/t.height,a===a&&o===o&&a!==o&&(o<a?(u=c/a,l+=(d-u)/2,d=u):(u=d*a,f+=(c-u)/2,c=u))),s.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(s,f,l,c,d))}})}function ku(e,t){e("transform",tu(t)),e("d",t.path)}function Mu(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=Ja(n)).path=n),to(e,r,t.x,t.y)}function Eu(e,t){return Mu(Lo(e),t)?e.set(0,0,0,0):$o(e,t)}function Ou(e,t){e("d",zo(null,t))}function Su(e,t){var n,r;return $o(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Au(e,t){e.beginPath(),zo(e,t)}function Cu(e,t){e("transform",tu(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)}function Ru(e,t){var n,r;return $o(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)}function Tu(e,t,n){var r,i,a,o;return!(!t.stroke||!Bo(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),!0)}function zu(e,t,n){Ho(t,function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&Tu(e,t,r)&&e.stroke()}})}function Du(e,t,n,r){return!!e.isPointInStroke&&(Tu(e,t,1)&&e.isPointInStroke(n,r))}function Nu(e){return hT=qu(e),Pu(Fu(e))}function Pu(e){return~~(.8*e.length*hT)}function $u(e){return dT.font=Iu(e),Lu(Fu(e))}function Lu(e){return dT.measureText(e).width}function qu(e){return null!=e.fontSize?e.fontSize:11}function ju(e){dT=e&&(dT=Wi(1,1))?dT.getContext("2d"):null,CT.width=dT?$u:Nu}function Fu(e){var t=e.text;return null==t?"":e.limit>0?Uu(e):t+""}function Uu(e){var t,n=+e.limit,r=e.text+"";if(dT?(dT.font=Iu(e),t=Lu):(hT=qu(e),t=Pu),t(r)<n)return r;var i,a=e.ellipsis||"",o="rtl"===e.dir,u=0,s=r.length;if(n-=t(a),o){for(;u<s;)i=u+s>>>1,t(r.slice(i))>n?u=i+1:s=i;return a+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),t(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+a}function Iu(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/"/g,"'")),""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+qu(e)+"px "+(n||"sans-serif")}function Bu(e){var t=e.baseline,n=qu(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}function Wu(e,t){var n,r=t.dx||0,i=(t.dy||0)+Bu(t),a=t.x||0,o=t.y||0,u=t.angle||0,s=t.radius||0;s&&(n=(t.theta||0)-Math.PI/2,a+=s*Math.cos(n),o+=s*Math.sin(n)),e("text-anchor",RT[t.align]||"start"),u?(n=eu(a,o)+" rotate("+u+")",(r||i)&&(n+=" "+eu(r,i))):n=eu(a+r,o+i),e("transform",n)}function Vu(e,t,n){var r,i,a=CT.height(t),o=t.align,u=t.radius||0,s=t.x||0,f=t.y||0,l=t.dx||0,c=(t.dy||0)+Bu(t)-Math.round(.8*a);return u&&(i=(t.theta||0)-Math.PI/2,s+=u*Math.cos(i),f+=u*Math.sin(i)),r=CT.width(t),"center"===o?l-=r/2:"right"===o&&(l-=r),e.set(l+=s,c+=f,l+r,c+a),t.angle&&!n&&e.rotate(t.angle*Math.PI/180,s,f),e.expand(n||!r?0:1)}function Hu(e,t,n){Ho(t,function(t){var r,i,a,o,u,s;n&&!n.intersects(t.bounds)||(s=Fu(t))&&(r=null==t.opacity?1:t.opacity,0!==r&&(e.font=Iu(t),e.textAlign=t.align||"left",i=t.x||0,a=t.y||0,(o=t.radius)&&(u=(t.theta||0)-Math.PI/2,i+=o*Math.cos(u),a+=o*Math.sin(u)),t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*Math.PI/180),i=a=0),i+=t.dx||0,a+=(t.dy||0)+Bu(t),t.fill&&Io(e,t,r)&&e.fillText(s,i,a),t.stroke&&Bo(e,t,r)&&e.strokeText(s,i,a),t.angle&&e.restore()))})}function Yu(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Vu(TT,t,!0),u=-t.angle*Math.PI/180,s=Math.cos(u),f=Math.sin(u),l=t.x,c=t.y,d=s*i-f*a+(l-l*s+c*f),h=f*i+s*a+(c-l*f-c*s);return o.contains(d,h)}function Gu(e,t,n){var r=NT[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new $i),e,n)}function Xu(e,t,n){var r,i,a,o,u=NT[e.marktype],s=u.bound,f=e.items,l=f&&f.length;if(u.nested)return l?a=f[0]:(PT.mark=e,a=PT),o=Gu(a,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new $i,l)for(r=0,i=f.length;r<i;++r)t.union(Gu(f[r],s,n));return e.bounds=t}function Zu(e,t){return JSON.stringify(e,$T,t)}function Ju(e){var t="string"==typeof e?JSON.parse(e):e;return Qu(t)}function Qu(e){var t,n,r,i=e.marktype,a=e.items;if(a)for(n=0,r=a.length;n<r;++n)t=i?"mark":"group",a[n][t]=e,a[n].zindex&&(a[n][t].zdirty=!0),"group"===(i||t)&&Qu(a[n]);return i&&Xu(e),e}function Ku(e){arguments.length?this.root=Ju(e):(this.root=es({marktype:"group",name:"root",role:"frame"}),this.root.items=[new ji(this.root)])}function es(e,t){return{bounds:new $i,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function ts(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function ns(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function rs(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=ts(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function is(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function as(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function os(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function us(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=NT[o.marktype]).tip){for(a=os(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}function ss(e,t){this._active=null,this._handlers={},this._loader=e||ge(),this._tooltip=t||fs}function fs(e,t,n,r){e.element().setAttribute("title",r||"")}function ls(e){this._el=null,this._bgcolor=null,this._loader=new Hi(e)}function cs(e,t){ss.call(this,e,t),this._down=null,this._touch=null,this._first=!0}function ds(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function hs(e){return function(t){this.fire(e,t),this._active=null}}function ps(e,t){var n=t.clip;if(e.save(),e.beginPath(),A(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}function gs(){return"undefined"!=typeof window?window.devicePixelRatio||1:1}function ms(e,t,n,r,i){var a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,o=e.getContext("2d"),u=a?VT:i;return e.width=t*u,e.height=n*u,a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=u,o.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function vs(e){ls.call(this,e),this._redraw=!1,this._dirty=new $i}function ys(e,t,n){return t.expand(1).round(),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}function bs(e,t){if(null==t)return e;for(var n=GT.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}function _s(e,t){ss.call(this,e,t);var n=this;n._hrefHandler=xs(n,function(e,t){t&&t.href&&n.handleHref(e,t,t.href)}),n._tooltipHandler=xs(n,function(e,t){n.handleTooltip(e,t,e.type!==IT)})}function xs(e,t){return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,t.call(e._obj,n,i)}}function ws(e,t,n){var r,i,a="<"+e;if(t)for(r in t)i=t[r],null!=i&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function ks(e){return"</"+e+">"}function Ms(e){ls.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Es(e,t,n){var r,i,a;for(e=rs(e,n,"linearGradient",KT),e.setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)a=rs(e,r,"stop",KT),a.setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);is(e,r)}function Os(e,t,n){var r;e=rs(e,n,"clipPath",KT),e.setAttribute("id",t.id),t.path?(r=rs(e,0,"path",KT),r.setAttribute("d",t.path)):(r=rs(e,0,"rect",KT),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height))}function Ss(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function As(e,t,n){t=t.lastChild;var r,i=0;Ho(n,function(n){r=e.draw(t,n,r),++i}),is(t,1+i)}function Cs(e,t,n,r,i){var a,o=e._svg;if(!o&&(a=t.ownerDocument,o=ts(a,r,KT),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=ts(a,"path",KT);u.setAttribute("class","background"),o.appendChild(u),u.__data__=e;var s=ts(a,"g",KT);o.appendChild(s),s.__data__=e}return(o.ownerSVGElement!==i||Rs(e)&&o.previousSibling!==n)&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Rs(e){var t=e.mark||e.group;return t&&t.items.length>1}function Ts(e,t,n){t!==rz[e]&&(null!=t?n?nz.setAttributeNS(n,e,t):nz.setAttribute(e,t):n?nz.removeAttributeNS(n,e):nz.removeAttribute(e),rz[e]=t)}function zs(){var e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Ds(e){ls.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function Ns(e,t,n,r){uz[r||e]=t}function Ps(e,t,n,r){if(null==e)return"";var i,a,o,u,s,f="";for("bgrect"===n&&t.interactive===!1&&(f+="pointer-events: none; "),"text"===n&&(f+="font: "+Iu(e)+"; "),i=0,a=QT.length;i<a;++i)o=QT[i],u=JT[o],s=e[o],null==s?"fill"===u&&(f+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(s.id&&(r.gradient[s.id]=s,s="url(#"+s.id+")"),f+=u+": "+s+"; "):f+=u+": none; ";return f?'style="'+f.trim()+'"':null}function $s(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ls(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(hz[e]=t,this):hz[e]}function qs(e){var t=e.clip;if(A(t))t(Lo(pz.clear()));else{if(!t)return;pz.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(pz)}function js(e,t,n){return e===t||("path"===n?Fs(e,t):e instanceof Date&&t instanceof Date?+e===+t:q(e)&&q(t)?Math.abs(e-t)<=gz:e&&t&&(s(e)||s(t))?null!=e&&null!=t&&Us(e,t):e==t)}function Fs(e,t){return js(Ja(e),Ja(t))}function Us(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!js(e[n],t[n],n))return!1;return typeof e==typeof t}function Is(e){Bn.call(this,null,e)}function Bs(e,t,n){return t(e.bounds.clear(),e,n)}function Ws(e){Bn.call(this,0,e)}function Vs(e){var t=e._signals[vz];return t||(e._signals[vz]=t=e.add(0)),t}function Hs(e){Bn.call(this,null,e)}function Ys(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Gs(e){Bn.call(this,null,e)}function Xs(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function Zs(e){for(var t,n=1,r=e.length,i=e[0].bounds;n<r;i=t,++n)if(Xs(i,t=e[n].bounds))return!0}function Js(e){var t=e.bounds;return t.width()>1&&t.height()>1}function Qs(e,t,n){var r=e.range(),i=new $i;return t===$C||t===jC?i.set(r[0],-(1/0),r[1],+(1/0)):i.set(-(1/0),r[0],+(1/0),r[1]),i.expand(n||1),function(e){return i.encloses(e.bounds)}}function Ks(e){Bn.call(this,null,e)}function ef(e){for(var t,n,r=e.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(t=r[a],n=t.items,t.marktype===HC)switch(t.role){case YC:case JC:break;case QC:tf(n,o.rowheaders);break;case KC:tf(n,o.rowfooters);break;case tR:tf(n,o.colheaders);break;case nR:tf(n,o.colfooters);break;case eR:o.rowtitle=n[0];break;case rR:o.coltitle=n[0];break;default:tf(n,o.marks)}return o}function tf(e,t){for(var n=0,r=e.length;n<r;++n)t.push(e[n])}function nf(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function rf(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function af(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function of(e,t){return e.bounds[t]}function uf(e,t,n){var r=s(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function sf(e){return e<0?Math.ceil(-e):0}function ff(e,t,n){function r(e,t){return Math.floor(Math.min(e,t))}function i(e,t){return Math.ceil(Math.max(e,t))}var a,o,u,s,f,l,c,d,h,p,g,m,v=ef(t,n),y=v.marks,b=n.bounds===hR,_=b?nf:rf,x=new $i(0,0,0,0),w=uf(n.align,pR),k=uf(n.align,gR),M=uf(n.padding,pR),E=uf(n.padding,gR),O=n.offset,S=t.columns||n.columns||y.length,A=S<0?1:Math.ceil(y.length/S),C=A*S,R=[],T=[],z=0,D=0,N=[],P=[],$=0,L=0,q=y.length;for(o=0;o<S;++o)T[o]=0;for(o=0;o<A;++o)P[o]=0;for(o=0;o<q;++o)f=_(y[o]),u=o%S,s=~~(o/S),c=Math.ceil(_(y[o]).x2),d=Math.ceil(_(y[o]).y2),z=Math.max(z,c),$=Math.max($,d),T[u]=Math.max(T[u],c),P[s]=Math.max(P[s],d),R.push(M+sf(f.x1)),N.push(E+sf(f.y1)),e.dirty(y[o]);for(o=0;o<q;++o)o%S===0&&(R[o]=D),o<S&&(N[o]=L);if(w===dR)for(u=1;u<S;++u){for(m=0,o=u;o<q;o+=S)m<R[o]&&(m=R[o]);for(o=u;o<q;o+=S)R[o]=m+T[u-1]}else if(w===cR){for(m=0,o=0;o<q;++o)o%S&&m<R[o]&&(m=R[o]);for(o=0;o<q;++o)o%S&&(R[o]=m+z)}else for(w=!1,u=1;u<S;++u)for(o=u;o<q;o+=S)R[o]+=T[u-1];if(k===dR)for(s=1;s<A;++s){for(m=0,o=s*S,a=o+S;o<a;++o)m<N[o]&&(m=N[o]);for(o=s*S;o<a;++o)N[o]=m+P[s-1]}else if(k===cR){for(m=0,o=S;o<q;++o)m<N[o]&&(m=N[o]);for(o=S;o<q;++o)N[o]=m+$}else for(k=!1,s=1;s<A;++s)for(o=s*S,a=o+S;o<a;++o)N[o]+=P[s-1];for(h=0,o=0;o<q;++o)l=y[o],c=l.x||0,l.x=h=R[o]+(o%S?h:0),l.bounds.translate(h-c,0);for(u=0;u<S;++u)for(p=0,o=u;o<q;o+=S)l=y[o],d=l.y||0,l.y=p+=N[o],l.bounds.translate(0,p-d);if(uf(n.center,pR)&&A>1&&w)for(o=0;o<q;++o)l=y[o],f=w===cR?z:T[o%S],h=f-_(l).x2,h>0&&(l.x+=c=h/2,l.bounds.translate(c,0));if(uf(n.center,gR)&&1!==S&&k)for(o=0;o<q;++o)l=y[o],f=k===cR?$:P[~~(o/S)],p=f-_(l).y2,p>0&&(l.y+=d=p/2,l.bounds.translate(0,d));for(o=0;o<q;++o)y[o].mark.bounds.clear();for(o=0;o<q;++o)l=y[o],e.dirty(l),x.union(l.mark.bounds.union(l.bounds));_=b?af:of,g=uf(n.headerBand,gR,null),h=lf(e,v.rowheaders,y,S,A,-uf(O,"rowHeader"),r,0,_,"x1",0,S,1,g),g=uf(n.headerBand,pR,null),p=lf(e,v.colheaders,y,S,S,-uf(O,"columnHeader"),r,1,_,"y1",0,1,S,g),g=uf(n.footerBand,gR,null),lf(e,v.rowfooters,y,S,A,uf(O,"rowFooter"),i,0,_,"x2",S-1,S,1,g),g=uf(n.footerBand,pR,null),lf(e,v.colfooters,y,S,S,uf(O,"columnFooter"),i,1,_,"y2",C-S,1,S,g),v.rowtitle&&(m=h-uf(O,"rowTitle"),g=uf(n.titleBand,gR,.5),cf(e,v.rowtitle,m,0,x,g)),v.coltitle&&(m=p-uf(O,"columnTitle"),g=uf(n.titleBand,pR,.5),cf(e,v.coltitle,m,1,x,g))}function lf(e,t,n,r,i,a,o,u,s,f,l,c,d,h){var p,g,m,v,y,b,_,x,w,k=n.length,M=0,E=0;if(!k)return M;for(p=l;p<k;p+=c)n[p]&&(M=o(M,s(n[p],f)));if(!t.length)return M;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),M+=a,g=0,v=t.length;g<v;++g)e.dirty(t[g]),t[g].mark.bounds.clear();for(p=l,g=0,v=t.length;g<v;++g,p+=c){for(b=t[g],y=b.mark.bounds,m=p;m>=0&&null==(_=n[m]);m-=d);u?(x=null==h?_.x:Math.round(_.bounds.x1+h*_.bounds.width()),w=M):(x=M,w=null==h?_.y:Math.round(_.bounds.y1+h*_.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,e.dirty(b),E=o(E,y[f])}return E}function cf(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function df(e){Bn.call(this,null,e)}function hf(e,t,n){var r,i,a,o,u,s,f=t.items,l=Math.max(0,t.width||0),c=Math.max(0,t.height||0),d=(new $i).set(0,0,l,c),h=d.clone(),p=d.clone(),g=[];for(u=0,s=f.length;u<s;++u)switch(i=f[u],i.role){case YC:o=gf(i)?h:p,o.union(vf(e,i,l,c));break;case GC:r=i;break;case JC:g.push(i);break;case XC:case ZC:case QC:case KC:case eR:case tR:case nR:case rR:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}if(g.length)for(a={leftWidth:_f(e,g),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},u=0,s=g.length;u<s;++u)if(o=wf(e,g[u],a,h,p,l,c),n.autosize&&n.autosize.type===oR){var m=g[u].items[0].datum.orient;m===LC||m===qC?d.add(o.x1,0).add(o.x2,0):m!==$C&&m!==jC||d.add(0,o.y1).add(0,o.y2)}else d.union(o);d.union(h).union(p),r&&d.union(bf(e,r,l,c,d)),Mf(e,t,d,n)}function pf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function gf(e){var t=e.items[0].datum.orient;return t===LC||t===qC}function mf(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function vf(e,t,n,r){var i,a,o=t.items[0],u=o.datum,s=u.orient,f=mf(u),l=o.range,c=o.offset,d=o.position,h=o.minExtent,p=o.maxExtent,g=u.title&&o.items[f[2]].items[0],m=o.titlePadding,v=o.bounds,y=0,b=0;switch(Mz.clear().union(v),v.clear(),(i=f[0])>-1&&v.union(o.items[i].bounds),(i=f[1])>-1&&v.union(o.items[i].bounds),s){case $C:y=d||0,b=-c,a=Math.max(h,Math.min(p,-v.y1)),g&&(a=yf(g,a,m,0,-1,v)),v.add(0,-a).add(l,0);break;case LC:y=-c,b=d||0,a=Math.max(h,Math.min(p,-v.x1)),g&&(a=yf(g,a,m,1,-1,v)),v.add(-a,0).add(0,l);break;case qC:y=n+c,b=d||0,a=Math.max(h,Math.min(p,v.x2)),g&&(a=yf(g,a,m,1,1,v)),v.add(0,0).add(a,l);break;case jC:y=d||0,b=r+c,a=Math.max(h,Math.min(p,v.y2)),g&&(a=yf(g,a,m,0,1,v)),v.add(0,0).add(l,a);break;default:y=o.x,b=o.y}return $o(v.translate(y,b),o),pf(o,"x",y+kz)|pf(o,"y",b+kz)&&(o.bounds=Mz,e.dirty(o),o.bounds=v,e.dirty(o)),o.mark.bounds.clear().union(v)}function yf(e,t,n,r,i,a){var o=e.bounds,u=0,s=0;return e.auto?(t+=n,r?u=(e.x||0)-(e.x=i*t):s=(e.y||0)-(e.y=i*t),o.translate(-u,-s),e.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),t+=o.width()):(a.add(o.x1,0).add(o.x2,0),t+=o.height())):a.union(o),t}function bf(e,t,n,r,i){var a,o=t.items[0],u=o.orient,s=o.frame,f=o.anchor,l=o.offset,c=o.bounds,d=u===LC||u===qC,h=0,p=d?r:n,g=0,m=0;switch(s!==HC?u===LC?(h=i.y2,p=i.y1):u===qC?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):u===LC&&(h=r,p=0),a=f===WC?h:f===VC?p:(h+p)/2,Mz.clear().union(c),u){case $C:g=a,m=i.y1-l;break;case LC:g=i.x1-l,m=a;break;case qC:g=i.x2+l,m=a;break;case jC:g=a,m=i.y2+l;break;default:g=o.x,m=o.y}return c.translate(g-o.x,m-o.y),pf(o,"x",g)|pf(o,"y",m)&&(o.bounds=Mz,e.dirty(o),o.bounds=c,e.dirty(o)),t.bounds.clear().union(c)}function _f(e,t){return t.reduce(function(t,n){
var r=n.items[0];if(xf(e,r,r.items[0].items[0]),r.datum.orient===LC){var i=Mz.clear();r.items.forEach(function(e){i.union(e.bounds)}),t=Math.max(t,Math.round(i.width())+2*r.padding-1)}return t},0)}function xf(e,t,n){var r=t.padding-n.x,i=t.padding-n.y;if(t.datum.title){var a=t.items[1].items[0];i+=t.titlePadding+a.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),e.dirty(n))}function wf(e,t,n,r,i,a,o){var u,s,f,l=t.items[0],c=l.datum,d=c.orient,h=l.offset,p=l.bounds,g=0,m=0;switch(d===$C||d===jC?(f=i,g=n[d]):d!==LC&&d!==qC||(f=r,m=n[d]),Mz.clear().union(p),p.clear(),l.items.forEach(function(e){p.union(e.bounds)}),u=Math.round(p.width())+2*l.padding-1,s=Math.round(p.height())+2*l.padding-1,c.type===aR&&kf(l.items[0].items[0].items[0].items),d){case LC:g-=n.leftWidth+h-Math.floor(f.x1),n.left+=s+n.margin;break;case qC:g+=h+Math.ceil(f.x2),n.right+=s+n.margin;break;case $C:m-=s+h-Math.floor(f.y1),n.top+=u+n.margin;break;case jC:m+=h+Math.ceil(f.y2),n.bottom+=u+n.margin;break;case FC:g+=h,m+=h;break;case UC:g+=a-u-h,m+=h;break;case IC:g+=h,m+=o-s-h;break;case BC:g+=a-u-h,m+=o-s-h;break;default:g=l.x,m=l.y}return $o(p.set(g,m,g+u,m+s),l),pf(l,"x",g)|pf(l,"width",u)|pf(l,"y",m)|pf(l,"height",s)&&(l.bounds=Mz,e.dirty(l),l.bounds=p,e.dirty(l)),l.mark.bounds.clear().union(p)}function kf(e){var t=e.reduce(function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e},{});e.forEach(function(e){e.width=t[e.column],e.height=e.bounds.y2-e.y})}function Mf(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,u=e._height,s=e.padding();if(!(e._autosize<1)&&a){var f=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,Math.ceil(n.x2-f)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===iR&&(o-=s.left+s.right,u-=s.top+s.bottom),a===lR?(l=0,h=0,f=o,d=u):a===oR?(f=Math.max(0,o-l-c),d=Math.max(0,u-h-p)):a===uR?(f=Math.max(0,o-l-c),u=d+h+p):a===sR?(o=f+l+c,d=Math.max(0,u-h-p)):a===fR&&(o=f+l+c,u=d+h+p),e._resizeView(o,u,f,d,[l,h],i.resize)}}function Ef(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function Of(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function Sf(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}function Af(){}function Cf(e,t){var n=new Af;if(e instanceof Af)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function Rf(){function e(t,i,o,u){if(i>=a.length)return null!=n&&t.sort(n),null!=r?r(t):t;for(var s,f,l,c=-1,d=t.length,h=a[i++],p=Cf(),g=o();++c<d;)(l=p.get(s=h(f=t[c])+""))?l.push(f):p.set(s,[f]);return p.each(function(t,n){u(g,n,e(t,i,o,u))}),g}function t(e,n){if(++n>a.length)return e;var i,u=o[n-1];return null!=r&&n>=a.length?i=e.entries():(i=[],e.each(function(e,r){i.push({key:r,values:t(e,n)})})),null!=u?i.sort(function(e,t){return u(e.key,t.key)}):i}var n,r,i,a=[],o=[];return i={object:function(t){return e(t,0,Tf,zf)},map:function(t){return e(t,0,Df,Nf)},entries:function(n){return t(e(n,0,Df,Nf),0)},key:function(e){return a.push(e),i},sortKeys:function(e){return o[a.length-1]=e,i},sortValues:function(e){return n=e,i},rollup:function(e){return r=e,i}}}function Tf(){return{}}function zf(e,t,n){e[t]=n}function Df(){return Cf()}function Nf(e,t,n){e.set(t,n)}function Pf(){}function $f(e,t){var n=new Pf;if(e instanceof Pf)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}function Lf(e){function t(t){var a=t+"",o=n.get(a);if(!o){if(i!==Yz)return i;n.set(a,o=r.push(t))}return e[(o-1)%e.length]}var n=Cf(),r=[],i=Yz;return e=null==e?[]:Hz.call(e),t.domain=function(e){if(!arguments.length)return r.slice();r=[],n=Cf();for(var i,a,o=-1,u=e.length;++o<u;)n.has(a=(i=e[o])+"")||n.set(a,r.push(i));return t},t.range=function(n){return arguments.length?(e=Hz.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(i=e,t):i},t.copy=function(){return Lf().domain(r).range(e).unknown(i)},t}function qf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jf(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ff(){}function Uf(e){var t;return e=(e+"").trim().toLowerCase(),(t=Kz.exec(e))?(t=parseInt(t[1],16),new Hf(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=eD.exec(e))?If(parseInt(t[1],16)):(t=tD.exec(e))?new Hf(t[1],t[2],t[3],1):(t=nD.exec(e))?new Hf(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=rD.exec(e))?Bf(t[1],t[2],t[3],t[4]):(t=iD.exec(e))?Bf(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=aD.exec(e))?Gf(t[1],t[2]/100,t[3]/100,1):(t=oD.exec(e))?Gf(t[1],t[2]/100,t[3]/100,t[4]):uD.hasOwnProperty(e)?If(uD[e]):"transparent"===e?new Hf(NaN,NaN,NaN,0):null}function If(e){return new Hf(e>>16&255,e>>8&255,255&e,1)}function Bf(e,t,n,r){return r<=0&&(e=t=n=NaN),new Hf(e,t,n,r)}function Wf(e){return e instanceof Ff||(e=Uf(e)),e?(e=e.rgb(),new Hf(e.r,e.g,e.b,e.opacity)):new Hf}function Vf(e,t,n,r){return 1===arguments.length?Wf(e):new Hf(e,t,n,null==r?1:r)}function Hf(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Yf(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Gf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Jf(e,t,n,r)}function Xf(e){if(e instanceof Jf)return new Jf(e.h,e.s,e.l,e.opacity);if(e instanceof Ff||(e=Uf(e)),!e)return new Jf;if(e instanceof Jf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(o=t===a?(n-r)/u+6*(n<r):n===a?(r-t)/u+2:(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new Jf(o,u,s,e.opacity)}function Zf(e,t,n,r){return 1===arguments.length?Xf(e):new Jf(e,t,n,null==r?1:r)}function Jf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Qf(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Kf(e){if(e instanceof tl)return new tl(e.l,e.a,e.b,e.opacity);if(e instanceof sl){if(isNaN(e.h))return new tl(e.l,0,0,e.opacity);var t=e.h*sD;return new tl(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof Hf||(e=Wf(e));var n,r,i=al(e.r),a=al(e.g),o=al(e.b),u=nl((.2225045*i+.7168786*a+.0606169*o)/dD);return i===a&&a===o?n=r=u:(n=nl((.4360747*i+.3850649*a+.1430804*o)/cD),r=nl((.0139322*i+.0971045*a+.7141733*o)/hD)),new tl(116*u-16,500*(n-u),200*(u-r),e.opacity)}function el(e,t,n,r){return 1===arguments.length?Kf(e):new tl(e,t,n,null==r?1:r)}function tl(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function nl(e){return e>vD?Math.pow(e,1/3):e/mD+pD}function rl(e){return e>gD?e*e*e:mD*(e-pD)}function il(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function al(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ol(e){if(e instanceof sl)return new sl(e.h,e.c,e.l,e.opacity);if(e instanceof tl||(e=Kf(e)),0===e.a&&0===e.b)return new sl(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*fD;return new sl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ul(e,t,n,r){return 1===arguments.length?ol(e):new sl(e,t,n,null==r?1:r)}function sl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function fl(e){if(e instanceof cl)return new cl(e.h,e.s,e.l,e.opacity);e instanceof Hf||(e=Wf(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ED*r+kD*t-MD*n)/(ED+kD-MD),a=r-i,o=(wD*(n-i)-_D*a)/xD,u=Math.sqrt(o*o+a*a)/(wD*i*(1-i)),s=u?Math.atan2(o,a)*fD-120:NaN;return new cl(s<0?s+360:s,u,i,e.opacity)}function ll(e,t,n,r){return 1===arguments.length?fl(e):new cl(e,t,n,null==r?1:r)}function cl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function dl(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function hl(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return dl((n-r/t)*t,o,i,a,u)}}function pl(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return dl((n-r/t)*t,i,a,o,u)}}function gl(e){return function(){return e}}function ml(e,t){return function(n){return e+n*t}}function vl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yl(e,t){var n=t-e;return n?ml(e,n>180||n<-180?n-360*Math.round(n/360):n):gl(isNaN(e)?t:e)}function bl(e){return 1===(e=+e)?_l:function(t,n){return n-t?vl(t,n,e):gl(isNaN(t)?n:t)}}function _l(e,t){var n=t-e;return n?ml(e,n):gl(isNaN(e)?t:e)}function xl(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=Vf(t[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=e(a),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=u(e),r+""}}}function wl(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Cl(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function kl(e,t){var n=new Date;return e=+e,t-=e,function(r){return n.setTime(e+t*r),n}}function Ml(e,t){return e=+e,t-=e,function(n){return e+t*n}}function El(e,t){var n,r={},i={};null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={});for(n in t)n in e?r[n]=Cl(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function Ol(e){return function(){return e}}function Sl(e){return function(t){return e(t)+""}}function Al(e,t){var n,r,i,a=DD.lastIndex=ND.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=DD.exec(e))&&(r=ND.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:Ml(n,r)})),a=ND.lastIndex;return a<t.length&&(i=t.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?Sl(s[0].x):Ol(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})}function Cl(e,t){var n,r=typeof t;return null==t||"boolean"===r?gl(t):("number"===r?Ml:"string"===r?(n=Uf(t))?(t=n,RD):Al:t instanceof Uf?RD:t instanceof Date?kl:Array.isArray(t)?wl:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?El:Ml)(e,t)}function Rl(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}}function Tl(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*PD,skewX:Math.atan(s)*PD,scaleX:o,scaleY:u}}function zl(e){return"none"===e?$D:(OD||(OD=document.createElement("DIV"),SD=document.documentElement,AD=document.defaultView),OD.style.transform=e,e=AD.getComputedStyle(SD.appendChild(OD),null).getPropertyValue("transform"),SD.removeChild(OD),e=e.slice(7,-1).split(","),Tl(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function Dl(e){return null==e?$D:(CD||(CD=document.createElementNS("http://www.w3.org/2000/svg","g")),CD.setAttribute("transform",e),(e=CD.transform.baseVal.consolidate())?(e=e.matrix,Tl(e.a,e.b,e.c,e.d,e.e,e.f)):$D)}function Nl(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function a(e,r,i,a,o,u){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:Ml(e,i)},{i:s-2,x:Ml(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}function o(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Ml(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function u(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Ml(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function s(e,t,n,r,a,o){if(e!==n||t!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:Ml(e,n)},{i:u-2,x:Ml(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),u(t.skewX,n.skewX,r,i),s(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t,n=-1,a=i.length;++n<a;)r[(t=i[n]).i]=t.x(e);return r.join("")}}}function Pl(e){return((e=Math.exp(e))+1/e)/2}function $l(e){return((e=Math.exp(e))-1/e)/2}function Ll(e){return((e=Math.exp(2*e))-1)/(e+1)}function ql(e,t){var n,r,i=e[0],a=e[1],o=e[2],u=t[0],s=t[1],f=t[2],l=u-i,c=s-a,d=l*l+c*c;if(d<ID)r=Math.log(f/o)/jD,n=function(e){return[i+e*l,a+e*c,o*Math.exp(jD*e*r)]};else{var h=Math.sqrt(d),p=(f*f-o*o+UD*d)/(2*o*FD*h),g=(f*f-o*o-UD*d)/(2*f*FD*h),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/jD,n=function(e){var t=e*r,n=Pl(m),u=o/(FD*h)*(n*Ll(jD*t+m)-$l(m));return[i+u*l,a+u*c,o*n/Pl(jD*t+m)]}}return n.duration=1e3*r,n}function jl(e){return function(t,n){var r=e((t=Zf(t)).h,(n=Zf(n)).h),i=_l(t.s,n.s),a=_l(t.l,n.l),o=_l(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function Fl(e,t){var n=_l((e=el(e)).l,(t=el(t)).l),r=_l(e.a,t.a),i=_l(e.b,t.b),a=_l(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}}function Ul(e){return function(t,n){var r=e((t=ul(t)).h,(n=ul(n)).h),i=_l(t.c,n.c),a=_l(t.l,n.l),o=_l(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function Il(e){return function t(n){function r(t,r){var i=e((t=ll(t)).h,(r=ll(r)).h),a=_l(t.s,r.s),o=_l(t.l,r.l),u=_l(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}function Bl(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}function Wl(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function Vl(e){return function(){return e}}function Hl(e){return+e}function Yl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Vl(t)}function Gl(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}function Xl(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}function Zl(e,t,n,r){var i=e[0],a=e[1],o=t[0],u=t[1];return a<i?(i=n(a,i),o=r(u,o)):(i=n(i,a),o=r(o,u)),function(e){return o(i(e))}}function Jl(e,t,n,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),u=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<i;)a[u]=n(e[u],e[u+1]),o[u]=r(t[u],t[u+1]);return function(t){var n=WA(e,t,1,i)-1;return o[n](a[n](t))}}function Ql(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Kl(e,t){function n(){return i=Math.min(u.length,s.length)>2?Jl:Zl,a=o=null,r}function r(t){return(a||(a=i(u,s,l?Gl(e):e,f)))(+t)}var i,a,o,u=ZD,s=ZD,f=Cl,l=!1;return r.invert=function(e){return(o||(o=i(s,u,Yl,l?Xl(t):t)))(+e)},r.domain=function(e){return arguments.length?(u=Vz.call(e,Hl),n()):u.slice()},r.range=function(e){return arguments.length?(s=Hz.call(e),n()):s.slice()},r.rangeRound=function(e){return s=Hz.call(e),f=Rl,n()},r.clamp=function(e){return arguments.length?(l=!!e,n()):l},r.interpolate=function(e){return arguments.length?(f=e,n()):f},n()}function ec(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function tc(e){return e=ec(Math.abs(e)),e?e[1]:NaN}function nc(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function rc(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}function ic(e){return new ac(e)}function ac(e){if(!(t=JD.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function oc(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}function uc(e,t){var n=ec(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(QD=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ec(e,Math.max(0,t+a-1))[0]}function sc(e,t){var n=ec(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array((-i)).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function fc(e){return e}function lc(e){function t(e){function t(e){var t,i,u,l=v,x=y;if("c"===m)x=b(e)+x,e="";else{e=+e;var w=e<0;if(e=b(Math.abs(e),p),g&&(e=oc(e)),w&&0===+e&&(w=!1),l=(w?"("===f?f:"-":"-"===f||"("===f?"":f)+l,x=("s"===m?rN[8+QD/3]:"")+x+(w&&"("===f?")":""),_)for(t=-1,i=e.length;++t<i;)if(u=e.charCodeAt(t),48>u||u>57){x=(46===u?a+e.slice(t+1):e.slice(t))+x,e=e.slice(0,t);break}}h&&!c&&(e=r(e,1/0));var k=l.length+e.length+x.length,M=k<d?new Array(d-k+1).join(n):"";switch(h&&c&&(e=r(M+e,M.length?d-x.length:1/0),M=""),s){case"<":e=l+e+x+M;break;case"=":e=l+M+e+x;break;case"^":e=M.slice(0,k=M.length>>1)+l+e+x+M.slice(k);break;default:e=M+l+e+x}return o(e)}e=ic(e);var n=e.fill,s=e.align,f=e.sign,l=e.symbol,c=e.zero,d=e.width,h=e.comma,p=e.precision,g=e.trim,m=e.type;"n"===m?(h=!0,m="g"):nN[m]||(null==p&&(p=12),g=!0,m="g"),(c||"0"===n&&"="===s)&&(c=!0,n="0",s="=");var v="$"===l?i[0]:"#"===l&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===l?i[1]:/[%p]/.test(m)?u:"",b=nN[m],_=/[defgprs%]/.test(m);return p=null==p?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),t.toString=function(){return e+""},t}function n(e,n){var r=t((e=ic(e),e.type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(tc(n)/3))),a=Math.pow(10,-i),o=rN[8+i/3];return function(e){return r(a*e)+o}}var r=e.grouping&&e.thousands?nc(e.grouping,e.thousands):fc,i=e.currency,a=e.decimal,o=e.numerals?rc(e.numerals):fc,u=e.percent||"%";return{format:t,formatPrefix:n}}function cc(e){return KD=lc(e),eN=KD.format,tN=KD.formatPrefix,KD}function dc(e){return Math.max(0,-tc(Math.abs(e)))}function hc(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(tc(t)/3)))-tc(Math.abs(e)))}function pc(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tc(t)-tc(e))+1}function gc(e,t,n){var r,i=e[0],a=e[e.length-1],o=hr(i,a,null==t?10:t);switch(n=ic(null==n?",f":n),n.type){case"s":var u=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=hc(o,u))||(n.precision=r),tN(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=pc(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=dc(o))||(n.precision=r-2*("%"===n.type))}return eN(n)}function mc(e){var t=e.domain;return e.ticks=function(e){var n=t();return cr(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return gc(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,u=i[a],s=i[o];return s<u&&(r=u,u=s,s=r,r=a,a=o,o=r),r=dr(u,s,n),r>0?(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,r=dr(u,s,n)):r<0&&(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,r=dr(u,s,n)),r>0?(i[a]=Math.floor(u/r)*r,i[o]=Math.ceil(s/r)*r,t(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[o]=Math.floor(s*r)/r,t(i)),e},e}function vc(){var e=Kl(Yl,Ml);return e.copy=function(){return Ql(e,vc())},mc(e)}function yc(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=Vz.call(n,Hl),e):t.slice()},e.copy=function(){return yc().domain(t)},mc(e)}function bc(e,t){e=e.slice();var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function _c(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:Vl(t)}function xc(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function wc(e){return isFinite(e)?+("1e"+e):e<0?0:e}function kc(e){return 10===e?wc:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function Mc(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function Ec(e){return function(t){return-e(-t)}}function Oc(){function e(){return i=Mc(r),a=kc(r),n()[0]<0&&(i=Ec(i),a=Ec(a)),t}var t=Kl(_c,xc).domain([1,10]),n=t.domain,r=10,i=Mc(10),a=kc(10);return t.base=function(t){return arguments.length?(r=+t,e()):r},t.domain=function(t){return arguments.length?(n(t),e()):n()},t.ticks=function(e){var t,o=n(),u=o[0],s=o[o.length-1];(t=s<u)&&(d=u,u=s,s=d);var f,l,c,d=i(u),h=i(s),p=null==e?10:+e,g=[];if(!(r%1)&&h-d<p){if(d=Math.round(d)-1,h=Math.round(h)+1,u>0){for(;d<h;++d)for(l=1,f=a(d);l<r;++l)if(c=f*l,!(c<u)){if(c>s)break;g.push(c)}}else for(;d<h;++d)for(l=r-1,f=a(d);l>=1;--l)if(c=f*l,!(c<u)){if(c>s)break;g.push(c)}}else g=cr(d,h,Math.min(h-d,p)).map(a);return t?g.reverse():g},t.tickFormat=function(e,n){if(null==n&&(n=10===r?".0e":","),"function"!=typeof n&&(n=eN(n)),e===1/0)return n;null==e&&(e=10);var o=Math.max(1,r*e/t.ticks().length);return function(e){var t=e/a(Math.round(i(e)));return t*r<r-.5&&(t*=r),t<=o?n(e):""}},t.nice=function(){return n(bc(n(),{floor:function(e){return a(Math.floor(i(e)))},ceil:function(e){return a(Math.ceil(i(e)))}}))},t.copy=function(){return Ql(t,Oc().base(r))},t}function Sc(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function Ac(){function e(e,t){return(t=Sc(t,n)-(e=Sc(e,n)))?function(r){return(Sc(r,n)-e)/t}:Vl(t)}function t(e,t){return t=Sc(t,n)-(e=Sc(e,n)),function(r){return Sc(e+t*r,1/n)}}var n=1,r=Kl(e,t),i=r.domain;return r.exponent=function(e){return arguments.length?(n=+e,i(i())):n},r.copy=function(){return Ql(r,Ac().exponent(n))},mc(r)}function Cc(){return Ac().exponent(.5)}function Rc(){function e(){var e=0,a=Math.max(1,r.length);for(i=new Array(a-1);++e<a;)i[e-1]=gr(n,e/a);return t}function t(e){if(!isNaN(e=+e))return r[WA(i,e)]}var n=[],r=[],i=[];return t.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},t.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var r,i=0,a=t.length;i<a;++i)r=t[i],null==r||isNaN(r=+r)||n.push(r);return n.sort(ir),e()},t.range=function(t){return arguments.length?(r=Hz.call(t),e()):r.slice()},t.quantiles=function(){return i.slice()},t.copy=function(){return Rc().domain(n).range(r)},t}function Tc(){function e(e){if(e<=e)return o[WA(a,e,0,i)]}function t(){var t=-1;for(a=new Array(i);++t<i;)a[t]=((t+1)*r-(t-i)*n)/(i+1);return e}var n=0,r=1,i=1,a=[.5],o=[0,1];return e.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],t()):[n,r]},e.range=function(e){return arguments.length?(i=(o=Hz.call(e)).length-1,t()):o.slice()},e.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,a[0]]:t>=i?[a[i-1],r]:[a[t-1],a[t]]},e.copy=function(){return Tc().domain([n,r]).range(o)},mc(e)}function zc(){function e(e){if(e<=e)return n[WA(t,e,0,r)]}var t=[.5],n=[0,1],r=1;return e.domain=function(i){return arguments.length?(t=Hz.call(i),r=Math.min(t.length,n.length-1),e):t.slice()},e.range=function(i){return arguments.length?(n=Hz.call(i),r=Math.min(t.length,n.length-1),e):n.slice()},e.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},e.copy=function(){return zc().domain(t).range(n)},e}function Dc(e){return new Date(e)}function Nc(e){return e instanceof Date?+e:+new Date((+e))}function Pc(e,t,n,r,i,a,o,u,s){function f(u){return(o(u)<u?p:a(u)<u?g:i(u)<u?m:r(u)<u?v:t(u)<u?n(u)<u?y:b:e(u)<u?_:x)(u)}function l(t,n,r,i){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-n)/t,o=ar(function(e){return e[2]}).right(w,a);o===w.length?(i=hr(n/lN,r/lN,t),t=e):o?(o=w[a/w[o-1][2]<w[o][2]/a?o-1:o],i=o[1],t=o[0]):(i=Math.max(hr(n,r,t),1),t=u)}return null==i?t:t.every(i)}var c=Kl(Yl,Ml),d=c.invert,h=c.domain,p=s(".%L"),g=s(":%S"),m=s("%I:%M"),v=s("%I %p"),y=s("%a %d"),b=s("%b %d"),_=s("%B"),x=s("%Y"),w=[[o,1,iN],[o,5,5*iN],[o,15,15*iN],[o,30,30*iN],[a,1,aN],[a,5,5*aN],[a,15,15*aN],[a,30,30*aN],[i,1,oN],[i,3,3*oN],[i,6,6*oN],[i,12,12*oN],[r,1,uN],[r,2,2*uN],[n,1,sN],[t,1,fN],[t,3,3*fN],[e,1,lN]];return c.invert=function(e){return new Date(d(e))},c.domain=function(e){return arguments.length?h(Vz.call(e,Nc)):h().map(Dc)},c.ticks=function(e,t){var n,r=h(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=l(e,i,a,t),n=n?n.range(i,a+1):[],o?n.reverse():n},c.tickFormat=function(e,t){return null==t?f:s(t)},c.nice=function(e,t){var n=h();return(e=l(e,n[0],n[n.length-1],t))?h(bc(n,e)):c},c.copy=function(){return Ql(c,Pc(e,t,n,r,i,a,o,u,s))},c}function $c(){return Pc(rA,nA,KS,QS,JS,ZS,XS,BS,hA).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function Lc(){return Pc(cA,lA,uA,oA,aA,iA,XS,BS,gA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function qc(){function e(){var e=i().length,r=o[1]<o[0],c=o[r-0],d=o[1-r],h=Sf(e,s,f);t=(d-c)/(h||1),u&&(t=Math.floor(t)),c+=(d-c-t*(e-s))*l,n=t*(1-s),u&&(c=Math.round(c),n=Math.round(n));var p=lr(e).map(function(e){return c+t*e});return a(r?p.reverse():p)}var t,n,r=Lf().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,l=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s=f,e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},r.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],f=+e[1],l=o[1]<o[0],c=l?a().reverse():a(),d=c.length-1;if(s===s&&f===f&&(f<s&&(u=s,s=f,f=u),!(f<c[0]||s>o[1-l])))return t=Math.max(0,WA(c,s)-1),r=s===f?t:WA(c,f)-1,s-c[t]>n+1e-10&&++t,l&&(u=t,t=d-r,r=d-u),t>r?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return qc().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(l)},e()}function jc(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return jc(t())},e}function Fc(){return jc(qc().paddingInner(1))}function Uc(e){return cN.call(e,function(e){return+e})}function Ic(){function e(e){return n(e)}function t(e){r=Uc(e),n.domain([r[0],p(r)])}var n=vc(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var n=r.length,i=~~(n/(t||n));return i<2?e.domain():r.filter(function(e,t){return!(t%i)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return Ic().domain(e.domain()).range(e.range())},e}function Bc(){function e(e){return null==e||e!==e?void 0:n[(WA(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=Uc(n),e):t.slice()},e.range=function(t){return arguments.length?(n=dN.call(t),e):n.slice()},e.copy=function(){return Bc().domain(e.domain()).range(e.range())},e}function Wc(e){function t(){var e=r.domain();i=e[0],a=p(e)-i}function n(t){var n=(t-i)/a;return e(o?Math.max(0,Math.min(1,n)):n)}var r=vc(),i=0,a=1,o=!1;return n.clamp=function(e){return arguments.length?(o=!!e,n):o},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Wc().domain(r.domain()).clamp(o).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function Vc(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?Ef(n):n.invertExtent?Of(n):void 0),n.type=e,n}}function Hc(e,t){return arguments.length>1?(hN[e]=Vc(e,t),this):hN.hasOwnProperty(e)?hN[e]:void 0}function Yc(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Gc(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Xc(e){return TD(e[e.length-1])}function Zc(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return DP.h=360*e-100,DP.s=1.5-1.5*t,DP.l=.8-.9*t,DP+""}function Jc(e){var t;return e=(.5-e)*Math.PI,NP.r=255*(t=Math.sin(e))*t,NP.g=255*(t=Math.sin(e+PP))*t,NP.b=255*(t=Math.sin(e+$P))*t,NP+""}function Qc(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Kc(e,t){BP[e]=UP["interpolate"+t],IP[e]=UP["scheme"+t]}function ed(e,t){if(arguments.length>1)return BP[e]=t,this;var n=e.split("-");return e=n[0],n=+n[1]+1,n&&IP.hasOwnProperty(e)?IP[e][n-1]:!n&&BP.hasOwnProperty(e)?BP[e]:void 0}function td(e,t){var n=t[0],r=p(t)-n;return function(t){return e(n+t*r)}}function nd(e,t,n){var r=n-t;return r?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/r}:e.copy().domain([t,n]).range([0,1]).interpolate(rd):R(0)}function rd(e,t){var n=t-e;return function(t){return e+t*n}}function id(e,t){var n=XD[ad(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function ad(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}function od(e){return WP.hasOwnProperty(e)&&WP[e]}function ud(e){return VP.hasOwnProperty(e)&&VP[e]}function sd(e,t){var n;return s(t)&&(n=t.step,t=t.interval),f(t)&&(t="time"===e.type?od(t):"utc"===e.type?ud(t):o("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function fd(e,t,n){var r=e.range(),i=r[0],a=p(r);if(i>a&&(r=a,a=i,i=r),t=t.filter(function(t){return t=e(t),!(t<i||t>a)}),n>0&&t.length>1){for(var o=[t[0],p(t)];t.length>n&&t.length>=3;)t=t.filter(function(e,t){return!(t%2)});t.length<3&&(t=o)}return t}function ld(e,t){return e.ticks?e.ticks(t):e.domain()}function cd(e,t,n){var r=e.tickFormat?e.tickFormat(t,n):n?eN(n):String;return e.type===Sz?dd(r,hd(n)):r}function dd(e,t){return function(n){return e(n)?t(n):""}}function hd(e){var t=ic(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return pd(eN(t),eN(".1f")(1)[1])}return eN(t)}function pd(e,t){return function(n){var r,i,a=e(n),o=a.indexOf(t);if(o<0)return a;for(r=gd(a,o),i=r<a.length?a.slice(r):"";--r>o;)if("0"!==a[r]){++r;break}return a.slice(0,r)+i}}function gd(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}function md(e){Bn.call(this,null,e)}function vd(e){Bn.call(this,null,e)}function yd(){return te({})}function bd(e){return e.exit}function _d(e){Bn.call(this,null,e)}function xd(e,t){var n=QP[e.type];return n?n(e):ld(e,t)}function wd(e){var t=e.domain(),n=t[0],r=p(t),i=e.range().length,a=new Array(i),o=0;for(a[0]=-(1/0);++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=+(1/0),a}function kd(e){var t=[-(1/0)].concat(e.quantiles());return t.max=+(1/0),t}function Md(e){var t=[-(1/0)].concat(e.domain());return t.max=+(1/0),t}function Ed(e){var t=e.domain();return t.max=t.pop(),t}function Od(e,t,n){return n===XP&&QP[e.type]?Sd(t):n===ZP?Ad(t):Cd(t)}function Sd(e){return function(t,n,r){var i=r[n+1]||r.max||+(1/0),a=Rd(t,e),o=Rd(i,e);return a&&o?a+""+o:o?"< "+o:" "+a;
}}function Ad(e){return function(t,n){return n?e(t):null}}function Cd(e){return function(t){return e(t)}}function Rd(e,t){return isFinite(e)?t(e):null}function Td(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+p(t),a=i-r;if(e.type===qz){var o=n?a/n:.1;r-=o,i+=o,a=i-r}return function(e){return(e-r)/a}}function zd(e){Bn.call(this,[],e)}function Dd(e){return e.source.x}function Nd(e){return e.source.y}function Pd(e){return e.target.x}function $d(e){return e.target.y}function Ld(e){Bn.call(this,{},e)}function qd(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function jd(e,t,n,r){return qd(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function Fd(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2,u=180*Math.atan2(a,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+u+" 0 1 "+n+","+r}function Ud(e,t,n,r){return Fd(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function Id(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),u=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function Bd(e,t,n,r){return Id(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function Wd(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n}function Vd(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r}function Hd(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u}function Yd(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r}function Gd(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r}function Xd(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*i+","+t*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}function Zd(e){Bn.call(this,null,e)}function Jd(e){Bn.call(this,null,e),this.modified(!0)}function Qd(e,t,n){var r=Kd(e,t.domainRaw);if(r>-1)return r;var i,a,o=t.domain,u=e.type,s=t.zero||void 0===t.zero&&i$[u];return o?(a$[u]&&t.padding&&o[0]!==p(o)&&(o=eh(u,o,t.range,t.padding,t.exponent)),(s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(o=o.slice()).length-1||1,s&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[i]=t.domainMax),null!=t.domainMid&&(a=t.domainMid,(a<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a))),e.domain(o),u===Pz&&e.unknown(void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&sd(e,t.nice)||null),o.length):0}function Kd(e,t){return t?(e.domain(t),t.length):-1}function eh(e,t,n,r,i){var a=Math.abs(p(n)-n[0]),o=a/(a-2*r),u=e===Sz?E(t,null,o):e===Rz?O(t,null,o,.5):e===Az?O(t,null,o,i):M(t,null,o);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function th(e,t,n){var r=t.round||!1,i=t.range;if(null!=t.rangeStep)i=nh(e.type,t,n);else if(t.scheme){if(i=rh(e.type,t,n),A(i))return e.interpolator(i)}else if(i&&e.type===Uz)return e.interpolator(TD(ah(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate(id(t.interpolate,t.interpolateGamma)):A(e.round)?e.round(r):A(e.rangeRound)&&e.interpolate(r?Rl:Cl),i&&e.range(ah(i,t.reverse))}function nh(e,t,n){e!==Tz&&e!==Dz&&o("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===Dz?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Sf(n,i,r)]}function rh(e,t,n){var r,i=t.scheme.toLowerCase(),a=ed(i),u=t.schemeExtent;return a||o("Unrecognized scheme name: "+t.scheme),n=e===qz?n+1:e===Fz?n-1:e===$z||e===Lz?+t.schemeCount||r$:n,e===Uz?ih(a,u,t.reverse):!u&&(r=ed(i+"-"+n))?r:A(a)?oh(ih(a,u),n):e===Pz?a:a.slice(0,n)}function ih(e,t,n){return A(e)&&(t||n)?td(e,ah(t||[0,1],n)):e}function ah(e,t){return t?e.slice().reverse():e}function oh(e,t){for(var n=new Array(t),r=t+2,i=0;i<t;)n[i]=e(++i/r);return n}function uh(e){Bn.call(this,null,e)}function sh(e){Bn.call(this,null,e)}function fh(e,t,n,r,i){for(var a,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)a=e[s],a[r]=o,a[i]=o+=Math.abs(n(a))}function lh(e,t,n,r,i){for(var a,o=1/e.sum,u=0,s=e.length,f=0,l=0;f<s;++f)a=e[f],a[r]=u,a[i]=u=o*(l+=Math.abs(n(a)))}function ch(e,t,n,r,i){for(var a,o,u=0,s=0,f=e.length,l=0;l<f;++l)o=e[l],a=n(o),a<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function dh(e,t,n,r){var i,a,o,u,s,f,l,c,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)s=e[a],f=t.map(p),l=i[f],l||(i[f]=l=[],h.push(l)),l.push(s);for(f=0,d=0,u=h.length;f<u;++f){for(l=h[f],a=0,c=0,o=l.length;a<o;++a)c+=Math.abs(r(l[a]));l.sum=c,c>d&&(d=c),n&&l.sort(n)}return h.max=d,h}function hh(e,t){return e-t}function ph(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function gh(e){return function(){return e}}function mh(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=vh(e,t[r]))return n;return 0}function vh(e,t){for(var n=t[0],r=t[1],i=-1,a=0,o=e.length,u=o-1;a<o;u=a++){var s=e[a],f=s[0],l=s[1],c=e[u],d=c[0],h=c[1];if(yh(s,c,t))return 0;l>r!=h>r&&n<(d-f)*(r-l)/(h-l)+f&&(i=-i)}return i}function yh(e,t,n){var r;return bh(e,t,n)&&_h(e[r=+(e[0]===t[0])],n[r],t[r])}function bh(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function _h(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function xh(){}function wh(){function e(e){var n=u(e);if(Array.isArray(n))n=n.slice().sort(hh);else{var r=fr(e),i=r[0],a=r[1];n=hr(i,a,n),n=lr(Math.floor(i/n)*n,Math.floor(a/n)*n,n)}return n.map(function(n){return t(e,n)})}function t(e,t){var r=[],i=[];return n(e,t,function(n){s(n,e,t),ph(n)>0?r.push([n]):i.push(n)}),i.forEach(function(e){for(var t,n=0,i=r.length;n<i;++n)if(mh((t=r[n])[0],e)!==-1)return void t.push(e)}),{type:"MultiPolygon",value:t,coordinates:r}}function n(e,t,n){function i(e){var t,i,a=[e[0][0]+u,e[0][1]+s],o=[e[1][0]+u,e[1][1]+s],f=r(a),l=r(o);(t=p[f])?(i=h[l])?(delete p[t.end],delete h[i.start],t===i?(t.ring.push(o),n(t.ring)):h[t.start]=p[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete p[t.end],t.ring.push(o),p[t.end=l]=t):(t=h[l])?(i=p[f])?(delete h[t.start],delete p[i.end],t===i?(t.ring.push(o),n(t.ring)):h[i.start]=p[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(a),h[t.start=f]=t):h[f]=p[l]={start:f,end:l,ring:[a,o]}}var u,s,f,l,c,d,h=new Array,p=new Array;for(u=s=-1,l=e[0]>=t,p$[l<<1].forEach(i);++u<a-1;)f=l,l=e[u+1]>=t,p$[f|l<<1].forEach(i);for(p$[l<<0].forEach(i);++s<o-1;){for(u=-1,l=e[s*a+a]>=t,c=e[s*a]>=t,p$[l<<1|c<<2].forEach(i);++u<a-1;)f=l,l=e[s*a+a+u+1]>=t,d=c,c=e[s*a+u+1]>=t,p$[f|l<<1|c<<2|d<<3].forEach(i);p$[l|c<<3].forEach(i)}for(u=-1,c=e[s*a]>=t,p$[c<<2].forEach(i);++u<a-1;)d=c,c=e[s*a+u+1]>=t,p$[c<<2|d<<3].forEach(i);p$[c<<3].forEach(i)}function r(e){return 2*e[0]+e[1]*(a+1)*4}function i(e,t,n){e.forEach(function(e){var r,i=e[0],u=e[1],s=0|i,f=0|u,l=t[f*a+s];i>0&&i<a&&s===i&&(r=t[f*a+s-1],e[0]=i+(n-r)/(l-r)-.5),u>0&&u<o&&f===u&&(r=t[(f-1)*a+s],e[1]=u+(n-r)/(l-r)-.5)})}var a=1,o=1,u=pr,s=i;return e.contour=t,e.size=function(t){if(!arguments.length)return[a,o];var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!(n>0&&r>0))throw new Error("invalid size");return a=n,o=r,e},e.thresholds=function(t){return arguments.length?(u="function"==typeof t?t:gh(Array.isArray(t)?h$.call(t):t),e):u},e.smooth=function(t){return arguments.length?(s=t?i:xh,e):s===i},e}function kh(e,t,n){for(var r=e.width,i=e.height,a=(n<<1)+1,o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=e.data[u+o*r]),u>=n&&(u>=a&&(s-=e.data[u-a+o*r]),t.data[u-n+o*r]=s/Math.min(u+1,r-1+a-u,a))}function Mh(e,t,n){for(var r=e.width,i=e.height,a=(n<<1)+1,o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=e.data[o+u*r]),u>=n&&(u>=a&&(s-=e.data[o+(u-a)*r]),t.data[o+(u-n)*r]=s/Math.min(u+1,i-1+a-u,a))}function Eh(e){return e[0]}function Oh(e){return e[1]}function Sh(){function e(e){var n=new Float32Array(h*p),r=new Float32Array(h*p);e.forEach(function(e,t,r){var i=o(e,t,r)+d>>c,a=u(e,t,r)+d>>c;i>=0&&i<h&&a>=0&&a<p&&++n[i+a*h]}),kh({width:h,height:p,data:n},{width:h,height:p,data:r},l>>c),Mh({width:h,height:p,data:r},{width:h,height:p,data:n},l>>c),kh({width:h,height:p,data:n},{width:h,height:p,data:r},l>>c),Mh({width:h,height:p,data:r},{width:h,height:p,data:n},l>>c),kh({width:h,height:p,data:n},{width:h,height:p,data:r},l>>c),Mh({width:h,height:p,data:r},{width:h,height:p,data:n},l>>c);var i=g(n);if(!Array.isArray(i)){var a=mr(n);i=hr(0,a,i),i=lr(0,Math.floor(a/i)*i,i),i.shift()}return wh().thresholds(i).size([h,p])(n).map(t)}function t(e){return e.value*=Math.pow(2,-2*c),e.coordinates.forEach(n),e}function n(e){e.forEach(r)}function r(e){e.forEach(i)}function i(e){e[0]=e[0]*Math.pow(2,c)-d,e[1]=e[1]*Math.pow(2,c)-d}function a(){return d=3*l,h=s+2*d>>c,p=f+2*d>>c,e}var o=Eh,u=Oh,s=960,f=500,l=20,c=2,d=3*l,h=s+2*d>>c,p=f+2*d>>c,g=gh(20);return e.x=function(t){return arguments.length?(o="function"==typeof t?t:gh(+t),e):o},e.y=function(t){return arguments.length?(u="function"==typeof t?t:gh(+t),e):u},e.size=function(e){if(!arguments.length)return[s,f];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return s=t,f=n,a()},e.cellSize=function(e){if(!arguments.length)return 1<<c;if(!((e=+e)>=1))throw new Error("invalid cell size");return c=Math.floor(Math.log(e)/Math.LN2),a()},e.thresholds=function(t){return arguments.length?(g="function"==typeof t?t:gh(Array.isArray(t)?h$.call(t):t),e):g},e.bandwidth=function(e){if(!arguments.length)return Math.sqrt(l*(l+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return l=Math.round((Math.sqrt(4*e*e+1)-1)/2),a()},e}function Ah(e){Bn.call(this,null,e)}function Ch(e){return function(t){for(var n=fr(t),r=n[0],i=n[1]-r,a=[],o=1;o<=e;++o)a.push(r+i*o/(e+1));return a}}function Rh(e){Bn.call(this,null,e)}function Th(){return new zh}function zh(){this.reset()}function Dh(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}function Nh(e){return e>1?0:e<-1?nL:Math.acos(e)}function Ph(e){return e>1?rL:e<-1?-rL:Math.asin(e)}function $h(){}function Lh(e,t){e&&xL.hasOwnProperty(e.type)&&xL[e.type](e,t)}function qh(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function jh(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)qh(e[n],t,1);t.polygonEnd()}function Fh(e,t){e&&_L.hasOwnProperty(e.type)?_L[e.type](e,t):Lh(e,t)}function Uh(){ML.point=Bh}function Ih(){Wh(w$,k$)}function Bh(e,t){ML.point=Wh,w$=e,k$=t,e*=uL,t*=uL,M$=e,E$=cL(t=t/2+iL),O$=mL(t)}function Wh(e,t){e*=uL,t*=uL,t=t/2+iL;var n=e-M$,r=n>=0?1:-1,i=r*n,a=cL(t),o=mL(t),u=O$*o,s=E$*a+u*cL(i),f=u*r*mL(i);wL.add(lL(f,s)),M$=e,E$=a,O$=o}function Vh(e){return kL.reset(),Fh(e,ML),2*kL}function Hh(e){return[lL(e[1],e[0]),Ph(e[2])]}function Yh(e){var t=e[0],n=e[1],r=cL(n);return[r*cL(t),r*mL(t),mL(n)]}function Gh(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Xh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Zh(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Jh(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Qh(e){var t=yL(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Kh(e,t){P$.push($$=[S$=e,C$=e]),t<A$&&(A$=t),t>R$&&(R$=t)}function ep(e,t){var n=Yh([e*uL,t*uL]);if(N$){var r=Xh(N$,n),i=[r[1],-r[0],0],a=Xh(i,r);Qh(a),a=Hh(a);var o,u=e-T$,s=u>0?1:-1,f=a[0]*oL*s,l=sL(u)>180;l^(s*T$<f&&f<s*e)?(o=a[1]*oL,o>R$&&(R$=o)):(f=(f+360)%360-180,l^(s*T$<f&&f<s*e)?(o=-a[1]*oL,o<A$&&(A$=o)):(t<A$&&(A$=t),t>R$&&(R$=t))),l?e<T$?op(S$,e)>op(S$,C$)&&(C$=e):op(e,C$)>op(S$,C$)&&(S$=e):C$>=S$?(e<S$&&(S$=e),e>C$&&(C$=e)):e>T$?op(S$,e)>op(S$,C$)&&(C$=e):op(e,C$)>op(S$,C$)&&(S$=e)}else P$.push($$=[S$=e,C$=e]);t<A$&&(A$=t),t>R$&&(R$=t),N$=n,T$=e}function tp(){OL.point=ep}function np(){$$[0]=S$,$$[1]=C$,OL.point=Kh,N$=null}function rp(e,t){if(N$){var n=e-T$;EL.add(sL(n)>180?n+(n>0?360:-360):n)}else z$=e,D$=t;ML.point(e,t),ep(e,t)}function ip(){ML.lineStart()}function ap(){rp(z$,D$),ML.lineEnd(),sL(EL)>eL&&(S$=-(C$=180)),$$[0]=S$,$$[1]=C$,N$=null}function op(e,t){return(t-=e)<0?t+360:t}function up(e,t){return e[0]-t[0]}function sp(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function fp(e){var t,n,r,i,a,o,u;if(R$=C$=-(S$=A$=1/0),P$=[],Fh(e,OL),n=P$.length){for(P$.sort(up),t=1,r=P$[0],a=[r];t<n;++t)i=P$[t],sp(r,i[0])||sp(r,i[1])?(op(r[0],i[1])>op(r[0],r[1])&&(r[1]=i[1]),op(i[0],r[1])>op(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-(1/0),n=a.length-1,t=0,r=a[n];t<=n;r=i,++t)i=a[t],(u=op(r[1],i[0]))>o&&(o=u,S$=i[0],C$=r[1])}return P$=$$=null,S$===1/0||A$===1/0?[[NaN,NaN],[NaN,NaN]]:[[S$,A$],[C$,R$]]}function lp(e,t){e*=uL,t*=uL;var n=cL(t);cp(n*cL(e),n*mL(e),mL(t))}function cp(e,t,n){++L$,j$+=(e-j$)/L$,F$+=(t-F$)/L$,U$+=(n-U$)/L$}function dp(){SL.point=hp}function hp(e,t){e*=uL,t*=uL;var n=cL(t);Z$=n*cL(e),J$=n*mL(e),Q$=mL(t),SL.point=pp,cp(Z$,J$,Q$)}function pp(e,t){e*=uL,t*=uL;var n=cL(t),r=n*cL(e),i=n*mL(e),a=mL(t),o=lL(yL((o=J$*a-Q$*i)*o+(o=Q$*r-Z$*a)*o+(o=Z$*i-J$*r)*o),Z$*r+J$*i+Q$*a);q$+=o,I$+=o*(Z$+(Z$=r)),B$+=o*(J$+(J$=i)),W$+=o*(Q$+(Q$=a)),cp(Z$,J$,Q$)}function gp(){SL.point=lp}function mp(){SL.point=yp}function vp(){bp(G$,X$),SL.point=lp}function yp(e,t){G$=e,X$=t,e*=uL,t*=uL,SL.point=bp;var n=cL(t);Z$=n*cL(e),J$=n*mL(e),Q$=mL(t),cp(Z$,J$,Q$)}function bp(e,t){e*=uL,t*=uL;var n=cL(t),r=n*cL(e),i=n*mL(e),a=mL(t),o=J$*a-Q$*i,u=Q$*r-Z$*a,s=Z$*i-J$*r,f=yL(o*o+u*u+s*s),l=Ph(f),c=f&&-l/f;V$+=c*o,H$+=c*u,Y$+=c*s,q$+=l,I$+=l*(Z$+(Z$=r)),B$+=l*(J$+(J$=i)),W$+=l*(Q$+(Q$=a)),cp(Z$,J$,Q$)}function _p(e){L$=q$=j$=F$=U$=I$=B$=W$=V$=H$=Y$=0,Fh(e,SL);var t=V$,n=H$,r=Y$,i=t*t+n*n+r*r;return i<tL&&(t=I$,n=B$,r=W$,q$<eL&&(t=j$,n=F$,r=U$),i=t*t+n*n+r*r,i<tL)?[NaN,NaN]:[lL(n,t)*oL,Ph(r/yL(i))*oL]}function xp(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function wp(e,t){return[e>nL?e-aL:e<-nL?e+aL:e,t]}function kp(e,t,n){return(e%=aL)?t||n?xp(Ep(e),Op(t,n)):Ep(e):t||n?Op(t,n):wp}function Mp(e){return function(t,n){return t+=e,[t>nL?t-aL:t<-nL?t+aL:t,n]}}function Ep(e){var t=Mp(e);return t.invert=Mp(-e),t}function Op(e,t){function n(e,t){var n=cL(t),u=cL(e)*n,s=mL(e)*n,f=mL(t),l=f*r+u*i;return[lL(s*a-l*o,u*r-f*i),Ph(l*a+s*o)]}var r=cL(e),i=mL(e),a=cL(t),o=mL(t);return n.invert=function(e,t){var n=cL(t),u=cL(e)*n,s=mL(e)*n,f=mL(t),l=f*a-s*o;return[lL(s*a+f*o,u*r+l*i),Ph(l*r-u*i)]},n}function Sp(e){function t(t){return t=e(t[0]*uL,t[1]*uL),t[0]*=oL,t[1]*=oL,t}return e=kp(e[0]*uL,e[1]*uL,e.length>2?e[2]*uL:0),t.invert=function(t){return t=e.invert(t[0]*uL,t[1]*uL),t[0]*=oL,t[1]*=oL,t},t}function Ap(e,t,n,r,i,a){if(n){var o=cL(t),u=mL(t),s=r*n;null==i?(i=t+r*aL,a=t-s/2):(i=Cp(o,i),a=Cp(o,a),(r>0?i<a:i>a)&&(i+=r*aL));for(var f,l=i;r>0?l>a:l<a;l-=s)f=Hh([o,-u*cL(l),-u*mL(l)]),e.point(f[0],f[1])}}function Cp(e,t){t=Yh(t),t[0]-=e,Qh(t);var n=Nh(-t[1]);return((-t[2]<0?-n:n)+aL-eL)%aL}function Rp(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:$h,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Tp(e,t){return sL(e[0]-t[0])<eL&&sL(e[1]-t[1])<eL}function zp(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Dp(e,t,n,r,i){var a,o,u=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(Tp(r,o)){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);return void i.lineEnd()}u.push(n=new zp(r,e,null,(!0))),s.push(n.o=new zp(r,null,n,(!1))),u.push(n=new zp(o,e,null,(!1))),s.push(n.o=new zp(o,null,n,(!0)))}}),u.length){for(s.sort(t),Np(u),Np(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var f,l,c=u[0];;){for(var d=c,h=!0;d.v;)if((d=d.n)===c)return;f=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=f.length;a<o;++a)i.point((l=f[a])[0],l[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(f=d.p.z,a=f.length-1;a>=0;--a)i.point((l=f[a])[0],l[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,f=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Np(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Pp(e,t){var n=t[0],r=t[1],i=mL(r),a=[mL(n),-cL(n),0],o=0,u=0;$L.reset(),1===i?r=rL+eL:i===-1&&(r=-rL-eL);for(var s=0,f=e.length;s<f;++s)if(c=(l=e[s]).length)for(var l,c,d=l[c-1],h=d[0],p=d[1]/2+iL,g=mL(p),m=cL(p),v=0;v<c;++v,h=b,g=x,m=w,d=y){var y=l[v],b=y[0],_=y[1]/2+iL,x=mL(_),w=cL(_),k=b-h,M=k>=0?1:-1,E=M*k,O=E>nL,S=g*x;if($L.add(lL(S*M*mL(E),m*w+S*cL(E))),o+=O?k+M*aL:k,O^h>=n^b>=n){var A=Xh(Yh(d),Yh(y));Qh(A);var C=Xh(a,A);Qh(C);var R=(O^k>=0?-1:1)*Ph(C[2]);(r>R||r===R&&(A[0]||A[1]))&&(u+=O^k>=0?1:-1)}}return(o<-eL||o<eL&&$L<-eL)^1&u}function $p(e,t,n,r){return function(i){function a(t,n){e(t,n)&&i.point(t,n)}function o(e,t){g.point(e,t)}function u(){b.point=o,g.lineStart()}function s(){b.point=a,g.lineEnd()}function f(e,t){p.push([e,t]),v.point(e,t)}function l(){v.lineStart(),p=[]}function c(){f(p[0][0],p[0][1]),v.lineEnd();var e,t,n,r,a=v.clean(),o=m.result(),u=o.length;if(p.pop(),d.push(p),p=null,u)if(1&a){if(n=o[0],(t=n.length-1)>0){for(y||(i.polygonStart(),y=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else u>1&&2&a&&o.push(o.pop().concat(o.shift())),h.push(o.filter(Lp))}var d,h,p,g=t(i),m=Rp(),v=t(m),y=!1,b={point:a,lineStart:u,lineEnd:s,polygonStart:function(){b.point=f,b.lineStart=l,b.lineEnd=c,h=[],d=[]},polygonEnd:function(){b.point=a,b.lineStart=u,b.lineEnd=s,h=br(h);var e=Pp(d,r);h.length?(y||(i.polygonStart(),y=!0),Dp(h,qp,e,n,i)):e&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),h=d=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};return b}}function Lp(e){return e.length>1}function qp(e,t){return((e=e.x)[0]<0?e[1]-rL-eL:rL-e[1])-((t=t.x)[0]<0?t[1]-rL-eL:rL-t[1])}function jp(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var u=a>0?nL:-nL,s=sL(a-n);sL(s-nL)<eL?(e.point(n,r=(r+o)/2>0?rL:-rL),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(a,r),t=0):i!==u&&s>=nL&&(sL(n-i)<eL&&(n-=i*eL),sL(a-u)<eL&&(a-=u*eL),r=Fp(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=a,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Fp(e,t,n,r){var i,a,o=mL(e-n);return sL(o)>eL?fL((mL(t)*(a=cL(r))*mL(n)-mL(r)*(i=cL(t))*mL(e))/(i*a*o)):(t+r)/2}function Up(e,t,n,r){var i;if(null==e)i=n*rL,r.point(-nL,i),r.point(0,i),r.point(nL,i),r.point(nL,0),r.point(nL,-i),r.point(0,-i),r.point(-nL,-i),r.point(-nL,0),r.point(-nL,i);else if(sL(e[0]-t[0])>eL){var a=e[0]<t[0]?nL:-nL;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function Ip(e){function t(t,n,r,i){Ap(i,e,u,r,t,n)}function n(e,t){return cL(e)*cL(t)>o}function r(e){var t,r,o,u,l;return{lineStart:function(){u=o=!1,l=1},point:function(c,d){var h,p=[c,d],g=n(c,d),m=s?g?0:a(c,d):g?a(c+(c<0?nL:-nL),d):0;if(!t&&(u=o=g)&&e.lineStart(),g!==o&&(h=i(t,p),(!h||Tp(t,h)||Tp(p,h))&&(p[0]+=eL,p[1]+=eL,g=n(p[0],p[1]))),g!==o)l=0,g?(e.lineStart(),h=i(p,t),e.point(h[0],h[1])):(h=i(t,p),e.point(h[0],h[1]),e.lineEnd()),t=h;else if(f&&t&&s^g){var v;m&r||!(v=i(p,t,!0))||(l=0,s?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||t&&Tp(t,p)||e.point(p[0],p[1]),t=p,o=g,r=m},lineEnd:function(){o&&e.lineEnd(),t=null},clean:function(){return l|(u&&o)<<1}}}function i(e,t,n){var r=Yh(e),i=Yh(t),a=[1,0,0],u=Xh(r,i),s=Gh(u,u),f=u[0],l=s-f*f;if(!l)return!n&&e;var c=o*s/l,d=-o*f/l,h=Xh(a,u),p=Jh(a,c),g=Jh(u,d);Zh(p,g);var m=h,v=Gh(p,m),y=Gh(m,m),b=v*v-y*(Gh(p,p)-1);if(!(b<0)){var _=yL(b),x=Jh(m,(-v-_)/y);if(Zh(x,p),x=Hh(x),!n)return x;var w,k=e[0],M=t[0],E=e[1],O=t[1];M<k&&(w=k,k=M,M=w);var S=M-k,A=sL(S-nL)<eL,C=A||S<eL;if(!A&&O<E&&(w=E,E=O,O=w),C?A?E+O>0^x[1]<(sL(x[0]-k)<eL?E:O):E<=x[1]&&x[1]<=O:S>nL^(k<=x[0]&&x[0]<=M)){var R=Jh(m,(-v+_)/y);return Zh(R,p),[x,Hh(R)]}}}function a(t,n){var r=s?e:nL-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=cL(e),u=6*uL,s=o>0,f=sL(o)>eL;return $p(n,r,t,s?[0,-e]:[-nL,e-nL])}function Bp(e,t,n,r,i,a){var o,u=e[0],s=e[1],f=t[0],l=t[1],c=0,d=1,h=f-u,p=l-s;if(o=n-u,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>c&&(c=o)}if(o=i-u,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<d&&(d=o)}if(o=r-s,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>c&&(c=o)}if(o=a-s,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<d&&(d=o)}return c>0&&(e[0]=u+c*h,e[1]=s+c*p),d<1&&(t[0]=u+d*h,t[1]=s+d*p),!0}}}}}function Wp(e,t,n,r){function i(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function a(i,a,u,f){var l=0,c=0;if(null==i||(l=o(i,u))!==(c=o(a,u))||s(i,a)<0^u>0)do f.point(0===l||3===l?e:n,l>1?r:t);while((l=(l+u+4)%4)!==c);else f.point(a[0],a[1])}function o(r,i){return sL(r[0]-e)<eL?i>0?0:3:sL(r[0]-n)<eL?i>0?2:1:sL(r[1]-t)<eL?i>0?1:0:i>0?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){function s(e,t){i(e,t)&&O.point(e,t)}function f(){for(var t=0,n=0,i=m.length;n<i;++n)for(var a,o,u=m[n],s=1,f=u.length,l=u[0],c=l[0],d=l[1];s<f;++s)a=c,o=d,l=u[s],c=l[0],d=l[1],o<=r?d>r&&(c-a)*(r-o)>(d-o)*(e-a)&&++t:d<=r&&(c-a)*(r-o)<(d-o)*(e-a)&&--t;return t}function l(){O=S,g=[],m=[],E=!0}function c(){var e=f(),t=E&&e,n=(g=br(g)).length;(t||n)&&(o.polygonStart(),t&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),n&&Dp(g,u,e,a,o),o.polygonEnd()),O=o,g=m=v=null}function d(){A.point=p,m&&m.push(v=[]),M=!0,k=!1,x=w=NaN}function h(){g&&(p(y,b),_&&k&&S.rejoin(),g.push(S.result())),A.point=s,k&&O.lineEnd()}function p(a,o){var u=i(a,o);if(m&&v.push([a,o]),M)y=a,b=o,_=u,M=!1,u&&(O.lineStart(),O.point(a,o));else if(u&&k)O.point(a,o);else{var s=[x=Math.max(jL,Math.min(qL,x)),w=Math.max(jL,Math.min(qL,w))],f=[a=Math.max(jL,Math.min(qL,a)),o=Math.max(jL,Math.min(qL,o))];Bp(s,f,e,t,n,r)?(k||(O.lineStart(),O.point(s[0],s[1])),O.point(f[0],f[1]),u||O.lineEnd(),E=!1):u&&(O.lineStart(),O.point(a,o),E=!1)}x=a,w=o,k=u}var g,m,v,y,b,_,x,w,k,M,E,O=o,S=Rp(),A={point:s,lineStart:d,lineEnd:h,polygonStart:l,polygonEnd:c};return A}}function Vp(e,t,n){var r=lr(e,t-eL,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function Hp(e,t,n){var r=lr(e,t-eL,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Yp(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return lr(dL(a/m)*m,i,m).map(d).concat(lr(dL(f/v)*v,s,v).map(h)).concat(lr(dL(r/p)*p,n,p).filter(function(e){return sL(e%m)>eL}).map(l)).concat(lr(dL(u/g)*g,o,g).filter(function(e){return sL(e%v)>eL}).map(c))}var n,r,i,a,o,u,s,f,l,c,d,h,p=10,g=p,m=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(h(s).slice(1),d(i).reverse().slice(1),h(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],f=+t[0][1],s=+t[1][1],a>i&&(t=a,a=i,i=t),f>s&&(t=f,f=s,s=t),e.precision(y)):[[a,f],[i,s]]},e.extentMinor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.stepMinor=function(t){return arguments.length?(p=+t[0],g=+t[1],e):[p,g]},e.precision=function(t){return arguments.length?(y=+t,l=Vp(u,o,90),c=Hp(r,n,y),d=Vp(f,s,90),h=Hp(a,i,y),e):y},e.extentMajor([[-180,-90+eL],[180,90-eL]]).extentMinor([[-180,-80-eL],[180,80+eL]])}function Gp(e){return e}function Xp(){IL.point=Zp}function Zp(e,t){IL.point=Jp,AL=RL=e,CL=TL=t}function Jp(e,t){UL.add(TL*e-RL*t),RL=e,TL=t}function Qp(){Jp(AL,CL)}function Kp(e,t){e<BL&&(BL=e),e>VL&&(VL=e),t<WL&&(WL=t),t>HL&&(HL=t)}function eg(e,t){GL+=e,XL+=t,++ZL}function tg(){rq.point=ng}function ng(e,t){rq.point=rg,eg(NL=e,PL=t)}function rg(e,t){var n=e-NL,r=t-PL,i=yL(n*n+r*r);JL+=i*(NL+e)/2,QL+=i*(PL+t)/2,KL+=i,eg(NL=e,PL=t)}function ig(){rq.point=eg}function ag(){rq.point=ug}function og(){sg(zL,DL)}function ug(e,t){rq.point=sg,eg(zL=NL=e,DL=PL=t)}function sg(e,t){var n=e-NL,r=t-PL,i=yL(n*n+r*r);JL+=i*(NL+e)/2,QL+=i*(PL+t)/2,KL+=i,i=PL*e-NL*t,eq+=i*(NL+e),tq+=i*(PL+t),nq+=3*i,eg(NL=e,PL=t)}function fg(e){this._context=e}function lg(e,t){lq.point=cg,aq=uq=e,oq=sq=t}function cg(e,t){uq-=e,sq-=t,fq.add(yL(uq*uq+sq*sq)),uq=e,sq=t}function dg(){this._string=[]}function hg(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function pg(e,t){function n(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),Fh(e,r(i))),i.result()}var r,i,a=4.5;return n.area=function(e){return Fh(e,r(IL)),IL.result()},n.measure=function(e){return Fh(e,r(lq)),lq.result()},n.bounds=function(e){return Fh(e,r(YL)),YL.result()},n.centroid=function(e){return Fh(e,r(rq)),rq.result()},n.projection=function(t){return arguments.length?(r=null==t?(e=null,Gp):(e=t).stream,n):e},n.context=function(e){return arguments.length?(i=null==e?(t=null,new dg):new fg(t=e),"function"!=typeof a&&i.pointRadius(a),n):t},n.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),n):a},n.projection(e).context(t)}function gg(e){return function(t){var n=new mg;for(var r in e)n[r]=e[r];return n.stream=t,n}}function mg(){}function vg(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Fh(n,e.stream(YL)),t(YL.result()),null!=r&&e.clipExtent(r),e}function yg(e,t,n){return vg(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,u])},n)}function bg(e,t,n){return yg(e,[[0,0],t],n)}function _g(e,t,n){return vg(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])},n)}function xg(e,t,n){return vg(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])},n)}function wg(e,t){return+t?Mg(e,t):kg(e)}function kg(e){return gg({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Mg(e,t){function n(r,i,a,o,u,s,f,l,c,d,h,p,g,m){var v=f-r,y=l-i,b=v*v+y*y;if(b>4*t&&g--){var _=o+d,x=u+h,w=s+p,k=yL(_*_+x*x+w*w),M=Ph(w/=k),E=sL(sL(w)-1)<eL||sL(a-c)<eL?(a+c)/2:lL(x,_),O=e(E,M),S=O[0],A=O[1],C=S-r,R=A-i,T=y*C-v*R;(T*T/b>t||sL((v*C+y*R)/b-.5)>.3||o*d+u*h+s*p<dq)&&(n(r,i,a,o,u,s,S,A,E,_/=k,x/=k,w,g,m),m.point(S,A),n(S,A,E,_,x,w,f,l,c,d,h,p,g,m))}}return function(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function i(){v=NaN,w.point=a,t.lineStart()}function a(r,i){var a=Yh([r,i]),o=e(r,i);n(v,y,m,b,_,x,v=o[0],y=o[1],m=r,b=a[0],_=a[1],x=a[2],cq,t),t.point(v,y)}function o(){w.point=r,t.lineEnd()}function u(){i(),w.point=s,w.lineEnd=f}function s(e,t){a(l=e,t),c=v,d=y,h=b,p=_,g=x,w.point=a}function f(){n(v,y,m,b,_,x,c,d,l,h,p,g,cq,t),w.lineEnd=o,o()}var l,c,d,h,p,g,m,v,y,b,_,x,w={point:r,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),w.lineStart=u},polygonEnd:function(){t.polygonEnd(),w.lineStart=i}};return w}}function Eg(e){return gg({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Og(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r}function Sg(e,t,n,r){function i(e,r){return[u*e-s*r+t,n-s*e-u*r]}var a=cL(r),o=mL(r),u=a*e,s=o*e,f=a/e,l=o/e,c=(o*n-a*t)/e,d=(o*t+a*n)/e;return i.invert=function(e,t){return[f*e-l*t+c,d-l*e-f*t]},i}function Ag(e){return Cg(function(){return e})()}function Cg(e){function t(e){return d(e[0]*uL,e[1]*uL)}function n(e){return e=d.invert(e[0],e[1]),e&&[e[0]*oL,e[1]*oL]}function r(){var e=Sg(g,0,0,k).apply(null,a(y,b)),t=(k?Sg:Og)(g,m-e[0],v-e[1],k);return o=kp(_,x,w),c=xp(a,t),d=xp(o,c),l=wg(c,A),i()}function i(){return h=p=null,t}var a,o,u,s,f,l,c,d,h,p,g=150,m=480,v=250,y=0,b=0,_=0,x=0,w=0,k=0,M=null,E=LL,O=null,S=Gp,A=.5;return t.stream=function(e){return h&&p===e?h:h=hq(Eg(o)(E(l(S(p=e)))))},t.preclip=function(e){return arguments.length?(E=e,M=void 0,i()):E},t.postclip=function(e){return arguments.length?(S=e,O=u=s=f=null,i()):S},t.clipAngle=function(e){return arguments.length?(E=+e?Ip(M=e*uL):(M=null,LL),i()):M*oL},t.clipExtent=function(e){return arguments.length?(S=null==e?(O=u=s=f=null,Gp):Wp(O=+e[0][0],u=+e[0][1],s=+e[1][0],f=+e[1][1]),i()):null==O?null:[[O,u],[s,f]]},t.scale=function(e){return arguments.length?(g=+e,r()):g},t.translate=function(e){return arguments.length?(m=+e[0],v=+e[1],r()):[m,v]},t.center=function(e){return arguments.length?(y=e[0]%360*uL,b=e[1]%360*uL,r()):[y*oL,b*oL]},t.rotate=function(e){return arguments.length?(_=e[0]%360*uL,x=e[1]%360*uL,w=e.length>2?e[2]%360*uL:0,r()):[_*oL,x*oL,w*oL]},t.angle=function(e){return arguments.length?(k=e%360*uL,r()):k*oL},t.precision=function(e){return arguments.length?(l=wg(c,A=e*e),i()):yL(A)},t.fitExtent=function(e,n){return yg(t,e,n)},t.fitSize=function(e,n){return bg(t,e,n)},t.fitWidth=function(e,n){return _g(t,e,n)},t.fitHeight=function(e,n){return xg(t,e,n)},function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function Rg(e){var t=0,n=nL/3,r=Cg(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*uL,n=e[1]*uL):[t*oL,n*oL]},i}function Tg(e){function t(e,t){return[e*n,mL(t)/n]}var n=cL(e);return t.invert=function(e,t){return[e/n,Ph(t*n)]},t}function zg(e,t){function n(e,t){var n=yL(a-2*i*mL(t))/i;return[n*mL(e*=i),o-n*cL(e)]}var r=mL(e),i=(r+mL(t))/2;if(sL(i)<eL)return Tg(e);var a=1+r*(2*i-r),o=yL(a)/i;return n.invert=function(e,t){var n=o-t;return[lL(e,sL(n))/i*vL(n),Ph((a-(e*e+n*n)*i*i)/(2*i))]},n}function Dg(){return Rg(zg).scale(155.424).center([0,33.6442])}function Ng(){return Dg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Pg(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function $g(){function e(e){var t=e[0],n=e[1];return u=null,i.point(t,n),u||(a.point(t,n),u)||(o.point(t,n),u)}function t(){return n=r=null,e}var n,r,i,a,o,u,s=Ng(),f=Dg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Dg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){u=[e,t]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?f:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:s).invert(e)},e.stream=function(e){return n&&r===e?n:n=Pg([s.stream(r=e),f.stream(e),l.stream(e)])},e.precision=function(e){return arguments.length?(s.precision(e),f.precision(e),l.precision(e),t()):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),f.scale(.35*t),l.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(e){if(!arguments.length)return s.translate();var n=s.scale(),r=+e[0],u=+e[1];return i=s.translate(e).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(c),a=f.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+eL,u+.12*n+eL],[r-.214*n-eL,u+.234*n-eL]]).stream(c),o=l.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+eL,u+.166*n+eL],[r-.115*n-eL,u+.234*n-eL]]).stream(c),t()},e.fitExtent=function(t,n){return yg(e,t,n)},e.fitSize=function(t,n){return bg(e,t,n)},
e.fitWidth=function(t,n){return _g(e,t,n)},e.fitHeight=function(t,n){return xg(e,t,n)},e.scale(1070)}function Lg(e){return function(t,n){var r=cL(t),i=cL(n),a=e(r*i);return[a*i*mL(t),a*mL(n)]}}function qg(e){return function(t,n){var r=yL(t*t+n*n),i=e(r),a=mL(i),o=cL(i);return[lL(t*a,r*o),Ph(r&&n*a/r)]}}function jg(){return Ag(pq).scale(124.75).clipAngle(179.999)}function Fg(){return Ag(gq).scale(79.4188).clipAngle(179.999)}function Ug(e,t){return[e,pL(bL((rL+t)/2))]}function Ig(){return Bg(Ug).scale(961/aL)}function Bg(e){function t(){var t=nL*u(),o=a(Sp(a.rotate()).invert([0,0]));return f(null==l?[[o[0]-t,o[1]-t],[o[0]+t,o[1]+t]]:e===Ug?[[Math.max(o[0]-t,l),n],[Math.min(o[0]+t,r),i]]:[[l,Math.max(o[1]-t,n)],[r,Math.min(o[1]+t,i)]])}var n,r,i,a=Ag(e),o=a.center,u=a.scale,s=a.translate,f=a.clipExtent,l=null;return a.scale=function(e){return arguments.length?(u(e),t()):u()},a.translate=function(e){return arguments.length?(s(e),t()):s()},a.center=function(e){return arguments.length?(o(e),t()):o()},a.clipExtent=function(e){return arguments.length?(null==e?l=n=r=i=null:(l=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),t()):null==l?null:[[l,n],[r,i]]},t()}function Wg(e){return bL((rL+e)/2)}function Vg(e,t){function n(e,t){a>0?t<-rL+eL&&(t=-rL+eL):t>rL-eL&&(t=rL-eL);var n=a/gL(Wg(t),i);return[n*mL(i*e),a-n*cL(i*e)]}var r=cL(e),i=e===t?mL(e):pL(r/cL(t))/pL(Wg(t)/Wg(e)),a=r*gL(Wg(e),i)/i;return i?(n.invert=function(e,t){var n=a-t,r=vL(i)*yL(e*e+n*n);return[lL(e,sL(n))/i*vL(n),2*fL(gL(a/r,1/i))-rL]},n):Ug}function Hg(){return Rg(Vg).scale(109.5).parallels([30,30])}function Yg(e,t){return[e,t]}function Gg(){return Ag(Yg).scale(152.63)}function Xg(e,t){function n(e,t){var n=a-t,r=i*e;return[n*mL(r),a-n*cL(r)]}var r=cL(e),i=e===t?mL(e):(r-cL(t))/(t-e),a=r/i+e;return sL(i)<eL?Yg:(n.invert=function(e,t){var n=a-t;return[lL(e,sL(n))/i*vL(n),a-vL(i)*yL(e*e+n*n)]},n)}function Zg(){return Rg(Xg).scale(131.154).center([0,13.9389])}function Jg(e,t){var n=cL(t),r=cL(e)*n;return[n*mL(e)/r,mL(t)/r]}function Qg(){return Ag(Jg).scale(144.049).clipAngle(60)}function Kg(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?Gp:gg({point:function(i,a){this.stream.point(i*e+n,a*t+r)}})}function em(){function e(){return i=a=null,o}var t,n,r,i,a,o,u=1,s=0,f=0,l=1,c=1,d=Gp,h=null,p=Gp;return o={stream:function(e){return i&&a===e?i:i=d(p(a=e))},postclip:function(i){return arguments.length?(p=i,h=t=n=r=null,e()):p},clipExtent:function(i){return arguments.length?(p=null==i?(h=t=n=r=null,Gp):Wp(h=+i[0][0],t=+i[0][1],n=+i[1][0],r=+i[1][1]),e()):null==h?null:[[h,t],[n,r]]},scale:function(t){return arguments.length?(d=Kg((u=+t)*l,u*c,s,f),e()):u},translate:function(t){return arguments.length?(d=Kg(u*l,u*c,s=+t[0],f=+t[1]),e()):[s,f]},reflectX:function(t){return arguments.length?(d=Kg(u*(l=t?-1:1),u*c,s,f),e()):l<0},reflectY:function(t){return arguments.length?(d=Kg(u*l,u*(c=t?-1:1),s,f),e()):c<0},fitExtent:function(e,t){return yg(o,e,t)},fitSize:function(e,t){return bg(o,e,t)},fitWidth:function(e,t){return _g(o,e,t)},fitHeight:function(e,t){return xg(o,e,t)}}}function tm(e,t){return[cL(t)*mL(e),mL(t)]}function nm(){return Ag(tm).scale(249.5).clipAngle(90+eL)}function rm(e,t){var n=cL(t),r=1+cL(e)*n;return[n*mL(e)/r,mL(t)/r]}function im(){return Ag(rm).scale(250).clipAngle(142)}function am(e,t){return[pL(bL((rL+t)/2)),-e]}function om(){var e=Bg(am),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)}function um(e,t){return function n(){var r=t();return r.type=e,r.path=pg().projection(r),r.copy=r.copy||function(){var e=n();return vq.forEach(function(t){r.hasOwnProperty(t)&&e[t](r[t]())}),e.path.pointRadius(r.path.pointRadius()),e},r}}function sm(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(yq[e]=um(e,t),this):yq.hasOwnProperty(e)?yq[e]:null}function fm(e){return e&&e.path||mq}function lm(e){Bn.call(this,null,e)}function cm(e,t){var n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}function dm(e){Bn.call(this,null,e)}function hm(e){Bn.call(this,null,e)}function pm(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var i=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(i),a};return r.context=function(t){return e.context(t),r},r}function gm(e){Bn.call(this,[],e),this.generator=Yp()}function mm(e){Bn.call(this,null,e),this.modified(!0)}function vm(e,t){var n=_m(t.fit);t.extent?e.fitExtent(t.extent,n):t.size?e.fitSize(t.size,n):0}function ym(e){var t=sm((e||"mercator").toLowerCase());return t||o("Unrecognized projection type: "+e),t()}function bm(e,t,n){A(e[t])&&e[t](n)}function _m(e){return e=S(e),1===e.length?e[0]:{type:b$,features:e.reduce(function(e,t){return t&&t.type===b$?e.push.apply(e,t.features):iS(t)?e.push.apply(e,t):e.push(t),e},[])}}function xm(e,t){function n(){var n,i,a=r.length,o=0,u=0;for(n=0;n<a;++n)i=r[n],o+=i.x,u+=i.y;for(o=o/a-e,u=u/a-t,n=0;n<a;++n)i=r[n],i.x-=o,i.y-=u}var r;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){r=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n}function wm(e){return function(){return e}}function km(){return 1e-6*(Math.random()-.5)}function Mm(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Em(this.cover(t,n),t,n,e)}function Em(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,u,s,f,l,c,d,h=e._root,p={data:r},g=e._x0,m=e._y0,v=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((f=t>=(a=(g+v)/2))?g=a:v=a,(l=n>=(o=(m+y)/2))?m=o:y=o,i=h,!(h=h[c=l<<1|f]))return i[c]=p,e;if(u=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===u&&n===s)return p.next=h,i?i[c]=p:e._root=p,e;do i=i?i[c]=new Array(4):e._root=new Array(4),(f=t>=(a=(g+v)/2))?g=a:v=a,(l=n>=(o=(m+y)/2))?m=o:y=o;while((c=l<<1|f)===(d=(s>=o)<<1|u>=a));return i[d]=h,i[c]=p,e}function Om(e){var t,n,r,i,a=e.length,o=new Array(a),u=new Array(a),s=1/0,f=1/0,l=-(1/0),c=-(1/0);for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(o[n]=r,u[n]=i,r<s&&(s=r),r>l&&(l=r),i<f&&(f=i),i>c&&(c=i));for(l<s&&(s=this._x0,l=this._x1),c<f&&(f=this._y0,c=this._y1),this.cover(s,f).cover(l,c),n=0;n<a;++n)Em(this,o[n],u[n],e[n]);return this}function Sm(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{if(!(n>e||e>i||r>t||t>a))return this;var o,u,s=i-n,f=this._root;switch(u=(t<(r+a)/2)<<1|e<(n+i)/2){case 0:do o=new Array(4),o[u]=f,f=o;while(s*=2,i=n+s,a=r+s,e>i||t>a);break;case 1:do o=new Array(4),o[u]=f,f=o;while(s*=2,n=i-s,a=r+s,n>e||t>a);break;case 2:do o=new Array(4),o[u]=f,f=o;while(s*=2,i=n+s,r=a-s,e>i||r>t);break;case 3:do o=new Array(4),o[u]=f,f=o;while(s*=2,n=i-s,r=a-s,n>e||r>t)}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function Am(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Cm(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Rm(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Tm(e,t,n){var r,i,a,o,u,s,f,l=this._x0,c=this._y0,d=this._x1,h=this._y1,p=[],g=this._root;for(g&&p.push(new Rm(g,l,c,d,h)),null==n?n=1/0:(l=e-n,c=t-n,d=e+n,h=t+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(i=s.x0)>d||(a=s.y0)>h||(o=s.x1)<l||(u=s.y1)<c))if(g.length){var m=(i+o)/2,v=(a+u)/2;p.push(new Rm(g[3],m,v,o,u),new Rm(g[2],i,v,m,u),new Rm(g[1],m,a,o,v),new Rm(g[0],i,a,m,v)),(f=(t>=v)<<1|e>=m)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=s)}else{var y=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);l=e-x,c=t-x,d=e+x,h=t+x,r=g.data}}return r}function zm(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,u,s,f,l,c,d,h=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((f=a>=(u=(p+m)/2))?p=u:m=u,(l=o>=(s=(g+v)/2))?g=s:v=s,t=h,!(h=h[c=l<<1|f]))return this;if(!h.length)break;(t[c+1&3]||t[c+2&3]||t[c+3&3])&&(n=t,d=c)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[c]=i:delete t[c],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)}function Dm(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Nm(){return this._root}function Pm(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function $m(e){var t,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new Rm(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&s.length){var f=(r+a)/2,l=(i+o)/2;(n=s[3])&&u.push(new Rm(n,f,l,a,o)),(n=s[2])&&u.push(new Rm(n,r,l,f,o)),(n=s[1])&&u.push(new Rm(n,f,i,a,l)),(n=s[0])&&u.push(new Rm(n,r,i,f,l))}return this}function Lm(e){var t,n=[],r=[];for(this._root&&n.push(new Rm(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,u=t.y0,s=t.x1,f=t.y1,l=(o+s)/2,c=(u+f)/2;(a=i[0])&&n.push(new Rm(a,o,u,l,c)),(a=i[1])&&n.push(new Rm(a,l,u,s,c)),(a=i[2])&&n.push(new Rm(a,o,c,l,f)),(a=i[3])&&n.push(new Rm(a,l,c,s,f))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this}function qm(e){return e[0]}function jm(e){return arguments.length?(this._x=e,this):this._x}function Fm(e){return e[1]}function Um(e){return arguments.length?(this._y=e,this):this._y}function Im(e,t,n){var r=new Bm(null==t?qm:t,null==n?Fm:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Bm(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Wm(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}function Vm(e){return e.x+e.vx}function Hm(e){return e.y+e.vy}function Ym(e){function t(){function e(e,t,n,r,i){var a=e.data,u=e.r,h=c+u;{if(!a)return t>f+h||r<f-h||n>l+h||i<l-h;if(a.index>s.index){var p=f-a.x-a.vx,g=l-a.y-a.vy,m=p*p+g*g;m<h*h&&(0===p&&(p=km(),m+=p*p),0===g&&(g=km(),m+=g*g),m=(h-(m=Math.sqrt(m)))/m*o,s.vx+=(p*=m)*(h=(u*=u)/(d+u)),s.vy+=(g*=m)*h,a.vx-=p*(h=1-h),a.vy-=g*h)}}}for(var t,r,s,f,l,c,d,h=i.length,p=0;p<u;++p)for(r=Im(i,Vm,Hm).visitAfter(n),t=0;t<h;++t)s=i[t],c=a[s.index],d=c*c,f=s.x+s.vx,l=s.y+s.vy,r.visit(e)}function n(e){if(e.data)return e.r=a[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function r(){if(i){var t,n,r=i.length;for(a=new Array(r),t=0;t<r;++t)n=i[t],a[n.index]=+e(n,t,i)}}var i,a,o=1,u=1;return"function"!=typeof e&&(e=wm(null==e?1:+e)),t.initialize=function(e){i=e,r()},t.iterations=function(e){return arguments.length?(u=+e,t):u},t.strength=function(e){return arguments.length?(o=+e,t):o},t.radius=function(n){return arguments.length?(e="function"==typeof n?n:wm(+n),r(),t):e},t}function Gm(e){return e.index}function Xm(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Zm(e){function t(e){return 1/Math.min(f[e.source.index],f[e.target.index])}function n(t){for(var n=0,r=e.length;n<p;++n)for(var i,a,s,f,c,d,h,g=0;g<r;++g)i=e[g],a=i.source,s=i.target,f=s.x+s.vx-a.x-a.vx||km(),c=s.y+s.vy-a.y-a.vy||km(),d=Math.sqrt(f*f+c*c),d=(d-u[g])/d*t*o[g],f*=d,c*=d,s.vx-=f*(h=l[g]),s.vy-=c*h,a.vx+=f*(h=1-h),a.vy+=c*h}function r(){if(s){var t,n,r=s.length,d=e.length,h=Cf(s,c);for(t=0,f=new Array(r);t<d;++t)n=e[t],n.index=t,"object"!=typeof n.source&&(n.source=Xm(h,n.source)),"object"!=typeof n.target&&(n.target=Xm(h,n.target)),f[n.source.index]=(f[n.source.index]||0)+1,f[n.target.index]=(f[n.target.index]||0)+1;for(t=0,l=new Array(d);t<d;++t)n=e[t],l[t]=f[n.source.index]/(f[n.source.index]+f[n.target.index]);o=new Array(d),i(),u=new Array(d),a()}}function i(){if(s)for(var t=0,n=e.length;t<n;++t)o[t]=+d(e[t],t,e)}function a(){if(s)for(var t=0,n=e.length;t<n;++t)u[t]=+h(e[t],t,e)}var o,u,s,f,l,c=Gm,d=t,h=wm(30),p=1;return null==e&&(e=[]),n.initialize=function(e){s=e,r()},n.links=function(t){return arguments.length?(e=t,r(),n):e},n.id=function(e){return arguments.length?(c=e,n):c},n.iterations=function(e){return arguments.length?(p=+e,n):p},n.strength=function(e){return arguments.length?(d="function"==typeof e?e:wm(+e),i(),n):d},n.distance=function(e){return arguments.length?(h="function"==typeof e?e:wm(+e),a(),n):h},n}function Jm(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new Qm(r)}function Qm(e){this._=e}function Km(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function ev(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function tv(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Sq,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function nv(){return Pq||(qq(rv),Pq=Lq.now()+$q)}function rv(){Pq=0}function iv(){this._call=this._time=this._next=null}function av(e,t,n){var r=new iv;return r.restart(e,t,n),r}function ov(){nv(),++Rq;for(var e,t=Aq;t;)(e=Pq-t._time)>=0&&t._call.call(null,e),t=t._next;--Rq}function uv(){Pq=(Nq=Lq.now())+$q,Rq=Tq=0;try{ov()}finally{Rq=0,fv(),Pq=0}}function sv(){var e=Lq.now(),t=e-Nq;t>Dq&&($q-=t,Nq=e)}function fv(){for(var e,t,n=Aq,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Aq=t);Cq=e,lv(r)}function lv(e){if(!Rq){Tq&&(Tq=clearTimeout(Tq));var t=e-Pq;t>24?(e<1/0&&(Tq=setTimeout(uv,e-Lq.now()-$q)),zq&&(zq=clearInterval(zq))):(zq||(Nq=Lq.now(),zq=setInterval(sv,Dq)),Rq=1,qq(uv))}}function cv(e,t,n){var r=new iv,i=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?nv():+n,r.restart(function a(o){o+=i,r.restart(a,i+=t,n),e(o)},t,n),r)}function dv(e){return e.x}function hv(e){return e.y}function pv(e){function t(){n(),h.call("tick",a),o<u&&(d.stop(),h.call("end",a))}function n(){var t,n,r=e.length;for(o+=(f-o)*s,c.each(function(e){e(o)}),t=0;t<r;++t)n=e[t],null==n.fx?n.x+=n.vx*=l:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=l:(n.y=n.fy,n.vy=0)}function r(){for(var t,n=0,r=e.length;n<r;++n){if(t=e[n],t.index=n,isNaN(t.x)||isNaN(t.y)){var i=jq*Math.sqrt(n),a=n*Fq;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function i(t){return t.initialize&&t.initialize(e),t}var a,o=1,u=.001,s=1-Math.pow(u,1/300),f=0,l=.6,c=Cf(),d=av(t),h=Jm("tick","end");return null==e&&(e=[]),r(),a={tick:n,restart:function(){return d.restart(t),a},stop:function(){return d.stop(),a},nodes:function(t){return arguments.length?(e=t,r(),c.each(i),a):e},alpha:function(e){return arguments.length?(o=+e,a):o},alphaMin:function(e){return arguments.length?(u=+e,a):u},alphaDecay:function(e){return arguments.length?(s=+e,a):+s},alphaTarget:function(e){return arguments.length?(f=+e,a):f},velocityDecay:function(e){return arguments.length?(l=1-e,a):1-l},force:function(e,t){return arguments.length>1?(null==t?c.remove(e):c.set(e,i(t)),a):c.get(e)},find:function(t,n,r){var i,a,o,u,s,f=0,l=e.length;for(null==r?r=1/0:r*=r,f=0;f<l;++f)u=e[f],i=t-u.x,a=n-u.y,o=i*i+a*a,o<r&&(s=u,r=o);return s},on:function(e,t){return arguments.length>1?(h.on(e,t),a):h.on(e)}}}function gv(){function e(e){var t,u=i.length,s=Im(i,dv,hv).visitAfter(n);for(o=e,t=0;t<u;++t)a=i[t],s.visit(r)}function t(){if(i){var e,t,n=i.length;for(u=new Array(n),e=0;e<n;++e)t=i[e],u[t.index]=+s(t,e,i)}}function n(e){var t,n,r,i,a,o=0,s=0;if(e.length){for(r=i=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(o+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else{t=e,t.x=t.data.x,t.y=t.data.y;do o+=u[t.data.index];while(t=t.next)}e.value=o}function r(e,t,n,r){if(!e.value)return!0;var i=e.x-a.x,s=e.y-a.y,d=r-t,h=i*i+s*s;if(d*d/c<h)return h<l&&(0===i&&(i=km(),h+=i*i),0===s&&(s=km(),h+=s*s),h<f&&(h=Math.sqrt(f*h)),a.vx+=i*e.value*o/h,a.vy+=s*e.value*o/h),!0;if(!(e.length||h>=l)){(e.data!==a||e.next)&&(0===i&&(i=km(),h+=i*i),0===s&&(s=km(),h+=s*s),h<f&&(h=Math.sqrt(f*h)));do e.data!==a&&(d=u[e.data.index]*o/h,a.vx+=i*d,a.vy+=s*d);while(e=e.next)}}var i,a,o,u,s=wm(-30),f=1,l=1/0,c=.81;return e.initialize=function(e){i=e,t()},e.strength=function(n){return arguments.length?(s="function"==typeof n?n:wm(+n),t(),e):s},e.distanceMin=function(t){return arguments.length?(f=t*t,e):Math.sqrt(f)},e.distanceMax=function(t){return arguments.length?(l=t*t,e):Math.sqrt(l)},e.theta=function(t){return arguments.length?(c=t*t,e):Math.sqrt(c)},e}function mv(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)t=r[n],t.vx+=(a[n]-t.x)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=wm(.1);return"function"!=typeof e&&(e=wm(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:wm(+e),n(),t):o},t.x=function(r){return arguments.length?(e="function"==typeof r?r:wm(+r),n(),t):e},t}function vv(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)t=r[n],t.vy+=(a[n]-t.y)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=wm(.1);return"function"!=typeof e&&(e=wm(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:wm(+e),n(),t):o},t.y=function(r){return arguments.length?(e="function"==typeof r?r:wm(+r),n(),t):e},t}function yv(e){Bn.call(this,null,e)}function bv(e,t){return function(){e.touch(t).run()}}function _v(e,t){var n=pv(e),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},xv(n,t,!0).on("end",function(){r=!0})}function xv(e,t,n,r){var i,a,o,u,s=S(t.forces);for(i=0,a=Bq.length;i<a;++i)o=Bq[i],o!==Iq&&t.modified(o)&&e[o](t[o]);for(i=0,a=s.length;i<a;++i)u=Iq+i,o=n||t.modified(Iq,i)?kv(s[i]):r&&wv(s[i],r)?e.force(u):null,o&&e.force(u,o);for(a=e.numForces||0;i<a;++i)e.force(Iq+i,null);return e.numForces=s.length,e}function wv(e,t){var n,r;for(n in e)if(A(r=e[n])&&t.modified(a(r)))return 1;return 0}function kv(e){var t,n;Uq.hasOwnProperty(e.force)||o("Unrecognized force: "+e.force),t=Uq[e.force]();for(n in e)A(t[n])&&Mv(t[n],e[n],e);return t}function Mv(e,t,n){e(A(t)?function(e){return t(e,n)}:t)}function Ev(e,t,n){var r={};return e.each(function(e){var i=e.data;n(i)&&(r[t(i)]=e)}),e.lookup=r,e}function Ov(e,t){return e.parent===t.parent?1:2}function Sv(e){return e.reduce(Av,0)/e.length}function Av(e,t){return e+t.x}function Cv(e){return 1+e.reduce(Rv,0)}function Rv(e,t){return Math.max(e,t.y)}function Tv(e){for(var t;t=e.children;)e=t[0];return e}function zv(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Dv(){function e(e){var a,o=0;e.eachAfter(function(e){var n=e.children;n?(e.x=Sv(n),e.y=Cv(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)});var u=Tv(e),s=zv(e),f=u.x-t(u,s)/2,l=s.x+t(s,u)/2;return e.eachAfter(i?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*r}:function(t){t.x=(t.x-f)/(l-f)*n,t.y=(1-(e.y?t.y/e.y:1))*r})}var t=Ov,n=1,r=1,i=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(i=!1,n=+t[0],r=+t[1],e):i?null:[n,r]},e.nodeSize=function(t){return arguments.length?(i=!0,n=+t[0],r=+t[1],e):i?[n,r]:null},e}function Nv(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Pv(){return this.eachAfter(Nv)}function $v(e){var t,n,r,i,a=this,o=[a];do for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);while(o.length);return this}function Lv(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this}function qv(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this}function jv(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Fv(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Uv(e){for(var t=this,n=Iv(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Iv(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Bv(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Wv(){var e=[];return this.each(function(t){e.push(t)}),e}function Vv(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Hv(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function Yv(e,t){var n,r,i,a,o,u=new Qv(e),s=+e.value&&(u.value=e.value),f=[u];for(null==t&&(t=Xv);n=f.pop();)if(s&&(n.value=+n.data.value),(i=t(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)f.push(r=n.children[a]=new Qv(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(Jv)}function Gv(){return Yv(this).eachBefore(Zv)}function Xv(e){return e.children}function Zv(e){e.data=e.data.data}function Jv(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Qv(e){this.data=e,this.depth=this.height=0,this.parent=null}function Kv(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}function ey(e){for(var t,n,r=0,i=(e=Kv(Gq.call(e))).length,a=[];r<i;)t=e[r],n&&ry(n,t)?++r:(n=ay(a=ty(a,t)),r=0);return n}function ty(e,t){var n,r;if(iy(t,e))return[t];for(n=0;n<e.length;++n)if(ny(t,e[n])&&iy(uy(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ny(uy(e[n],e[r]),t)&&ny(uy(e[n],t),e[r])&&ny(uy(e[r],t),e[n])&&iy(sy(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ny(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function ry(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function iy(e,t){for(var n=0;n<t.length;++n)if(!ry(e,t[n]))return!1;return!0}function ay(e){switch(e.length){case 1:return oy(e[0]);case 2:return uy(e[0],e[1]);case 3:return sy(e[0],e[1],e[2])}}function oy(e){return{x:e.x,y:e.y,r:e.r}}function uy(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,u=t.r,s=a-n,f=o-r,l=u-i,c=Math.sqrt(s*s+f*f);return{x:(n+a+s/c*l)/2,y:(r+o+f/c*l)/2,r:(c+i+u)/2}}function sy(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,u=t.y,s=t.r,f=n.x,l=n.y,c=n.r,d=r-o,h=r-f,p=i-u,g=i-l,m=s-a,v=c-a,y=r*r+i*i-a*a,b=y-o*o-u*u+s*s,_=y-f*f-l*l+c*c,x=h*p-d*g,w=(p*_-g*b)/(2*x)-r,k=(g*m-p*v)/x,M=(h*b-d*_)/(2*x)-i,E=(d*v-h*m)/x,O=k*k+E*E-1,S=2*(a+w*k+M*E),A=w*w+M*M-a*a,C=-(O?(S+Math.sqrt(S*S-4*O*A))/(2*O):A/S);return{x:r+w+k*C,y:i+M+E*C,r:C}}function fy(e,t,n){var r,i,a,o,u=e.x-t.x,s=e.y-t.y,f=u*u+s*s;f?(i=t.r+n.r,i*=i,o=e.r+n.r,o*=o,i>o?(r=(f+o-i)/(2*f),a=Math.sqrt(Math.max(0,o/f-r*r)),n.x=e.x-r*u-a*s,n.y=e.y-r*s+a*u):(r=(f+i-o)/(2*f),a=Math.sqrt(Math.max(0,i/f-r*r)),n.x=t.x+r*u-a*s,n.y=t.y+r*s+a*u)):(n.x=t.x+n.r,n.y=t.y)}function ly(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function cy(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function dy(e){this._=e,this.next=null,this.previous=null}function hy(e){if(!(i=e.length))return 0;var t,n,r,i,a,o,u,s,f,l,c;if(t=e[0],t.x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;fy(n,t,r=e[2]),t=new dy(t),n=new dy(n),r=new dy(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(u=3;u<i;++u){fy(t._,n._,r=e[u]),r=new dy(r),s=n.next,f=t.previous,l=n._.r,c=t._.r;do if(l<=c){if(ly(s._,r._)){n=s,t.next=n,n.previous=t,--u;continue e}l+=s._.r,s=s.next}else{if(ly(f._,r._)){t=f,t.next=n,n.previous=t,--u;continue e}c+=f._.r,f=f.previous}while(s!==f.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=cy(t);(r=r.next)!==n;)(o=cy(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=ey(t),u=0;u<i;++u)t=e[u],t.x-=r.x,t.y-=r.y;return r.r}function py(e){return null==e?null:gy(e)}function gy(e){if("function"!=typeof e)throw new Error;return e}function my(){return 0}function vy(e){return function(){return e}}function yy(e){return Math.sqrt(e.value)}function by(){function e(e){return e.x=n/2,e.y=r/2,t?e.eachBefore(_y(t)).eachAfter(xy(i,.5)).eachBefore(wy(1)):e.eachBefore(_y(yy)).eachAfter(xy(my,1)).eachAfter(xy(i,e.r/Math.min(n,r))).eachBefore(wy(Math.min(n,r)/(2*e.r))),e}var t=null,n=1,r=1,i=my;return e.radius=function(n){return arguments.length?(t=py(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i="function"==typeof t?t:vy(+t),e):i},e}function _y(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function xy(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,u=e(n)*t||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=hy(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function wy(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function ky(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function My(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(r-t)/e.value;++u<s;)a=o[u],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*f}function Ey(){function e(e){var o=e.height+1;return e.x0=e.y0=i,e.x1=n,e.y1=r/o,e.eachBefore(t(r,o)),a&&e.eachBefore(ky),e}function t(e,t){return function(n){n.children&&My(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var r=n.x0,a=n.y0,o=n.x1-i,u=n.y1-i;o<r&&(r=o=(r+o)/2),u<a&&(a=u=(a+u)/2),n.x0=r,n.y0=a,n.x1=o,n.y1=u}}var n=1,r=1,i=0,a=!1;return e.round=function(t){return arguments.length?(a=!!t,e):a},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i=+t,e):i},e}function Oy(e){return e.id}function Sy(e){return e.parentId}function Ay(){function e(e){var r,i,a,o,u,s,f,l=e.length,c=new Array(l),d={};for(i=0;i<l;++i)r=e[i],u=c[i]=new Qv(r),null!=(s=t(r,i,e))&&(s+="")&&(f=Xq+(u.id=s),d[f]=f in d?Jq:u);for(i=0;i<l;++i)if(u=c[i],s=n(e[i],i,e),null!=s&&(s+="")){if(o=d[Xq+s],!o)throw new Error("missing: "+s);if(o===Jq)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error("multiple roots");a=u}if(!a)throw new Error("no root");if(a.parent=Zq,a.eachBefore(function(e){e.depth=e.parent.depth+1,--l}).eachBefore(Jv),a.parent=null,l>0)throw new Error("cycle");return a}var t=Oy,n=Sy;return e.id=function(n){return arguments.length?(t=gy(n),e):t},e.parentId=function(t){return arguments.length?(n=gy(t),e):n},e}function Cy(e,t){return e.parent===t.parent?1:2}function Ry(e){var t=e.children;return t?t[0]:e.t}function Ty(e){var t=e.children;return t?t[t.length-1]:e.t}function zy(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Dy(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Ny(e,t,n){return e.a.parent===t.parent?e.a:n}function Py(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function $y(e){for(var t,n,r,i,a,o=new Py(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)u.push(n=t.children[i]=new Py(r[i],i)),n.parent=t;return(o.parent=new Py(null,0)).children=[o],o}function Ly(){function e(e){var r=$y(e);if(r.eachAfter(t),r.parent.m=-r.z,r.eachBefore(n),s)e.eachBefore(i);else{var f=e,l=e,c=e;e.eachBefore(function(e){e.x<f.x&&(f=e),e.x>l.x&&(l=e),e.depth>c.depth&&(c=e)});var d=f===l?1:a(f,l)/2,h=d-f.x,p=o/(l.x+d+h),g=u/(c.depth||1);e.eachBefore(function(e){e.x=(e.x+h)*p,e.y=e.depth*g})}return e}function t(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t){Dy(e);var o=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+a(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+a(e._,i._));e.parent.A=r(e,i,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e,t,n){if(t){for(var r,i=e,o=e,u=t,s=i.parent.children[0],f=i.m,l=o.m,c=u.m,d=s.m;u=Ty(u),i=Ry(i),u&&i;)s=Ry(s),o=Ty(o),o.a=e,r=u.z+c-i.z-f+a(u._,i._),r>0&&(zy(Ny(u,e,n),e,r),f+=r,l+=r),c+=u.m,f+=i.m,d+=s.m,l+=o.m;u&&!Ty(o)&&(o.t=u,o.m+=c-l),i&&!Ry(s)&&(s.t=i,s.m+=f-d,n=e)}return n}function i(e){e.x*=o,e.y=e.depth*u}var a=Cy,o=1,u=1,s=null;return e.separation=function(t){return arguments.length?(a=t,e):a},e.size=function(t){return arguments.length?(s=!1,o=+t[0],u=+t[1],e):s?null:[o,u]},e.nodeSize=function(t){return arguments.length?(s=!0,o=+t[0],u=+t[1],e):s?[o,u]:null},e}function qy(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(i-n)/e.value;++u<s;)a=o[u],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*f}function jy(e,t,n,r,i,a){for(var o,u,s,f,l,c,d,h,p,g,m,v=[],y=t.children,b=0,_=0,x=y.length,w=t.value;b<x;){s=i-n,f=a-r;do l=y[_++].value;while(!l&&_<x);for(c=d=l,g=Math.max(f/s,s/f)/(w*e),m=l*l*g,p=Math.max(d/m,m/c);_<x;++_){if(l+=u=y[_].value,u<c&&(c=u),u>d&&(d=u),m=l*l*g,h=Math.max(d/m,m/c),h>p){l-=u;break}p=h}v.push(o={value:l,dice:s<f,children:y.slice(b,_)}),o.dice?My(o,n,r,i,w?r+=f*l/w:a):qy(o,n,r,w?n+=s*l/w:i,a),w-=l,b=_}return v}function Fy(){function e(e){return e.x0=e.y0=0,e.x1=i,e.y1=a,e.eachBefore(t),o=[0],r&&e.eachBefore(ky),e}function t(e){var t=o[e.depth],r=e.x0+t,i=e.y0+t,a=e.x1-t,d=e.y1-t;a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),e.x0=r,e.y0=i,e.x1=a,e.y1=d,e.children&&(t=o[e.depth+1]=u(e)/2,r+=c(e)-t,i+=s(e)-t,a-=f(e)-t,d-=l(e)-t,a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),n(e,r,i,a,d))}var n=Kq,r=!1,i=1,a=1,o=[0],u=my,s=my,f=my,l=my,c=my;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(i=+t[0],a=+t[1],e):[i,a]},e.tile=function(t){return arguments.length?(n=gy(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(u="function"==typeof t?t:vy(+t),e):u},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:vy(+t),e):s},e.paddingRight=function(t){return arguments.length?(f="function"==typeof t?t:vy(+t),e):f},e.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:vy(+t),e):l},e.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:vy(+t),e):c},e}function Uy(e,t,n,r,i){function a(e,t,n,r,i,o,u){if(e>=t-1){var f=s[e];return f.x0=r,f.y0=i,f.x1=o,f.y1=u,void 0}for(var c=l[e],d=n/2+c,h=e+1,p=t-1;h<p;){var g=h+p>>>1;l[g]<d?h=g+1:p=g}d-l[h-1]<l[h]-d&&e+1<h&&--h;var m=l[h]-c,v=n-m;if(o-r>u-i){var y=(r*v+o*m)/n;a(e,h,m,r,i,y,u),a(h,t,v,y,i,o,u)}else{var b=(i*v+u*m)/n;a(e,h,m,r,i,o,b),a(h,t,v,r,b,o,u)}}var o,u,s=e.children,f=s.length,l=new Array(f+1);for(l[0]=u=o=0;o<f;++o)l[o+1]=u+=s[o].value;a(0,f,e.value,t,n,r,i)}function Iy(e,t,n,r,i){(1&e.depth?qy:My)(e,t,n,r,i)}function By(e){Bn.call(this,null,e)}function Wy(e){return e.values}function Vy(e){Bn.call(this,null,e)}function Hy(e,t,n){for(var r,i=0,a=t.length;i<a;++i)r=t[i],r in n&&e[r](n[r])}function Yy(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}function Gy(e){Vy.call(this,e)}function Xy(e){Vy.call(this,e)}function Zy(e){Bn.call(this,null,e)}function Jy(e){Vy.call(this,e)}function Qy(e){Bn.call(this,[],e)}function Ky(e){Vy.call(this,e)}function eb(e){return function(){return e}}function tb(e){return e[0]}function nb(e){return e[1]}function rb(){this._=null}function ib(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ab(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,
r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ob(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ub(e){for(;e.L;)e=e.L;return e}function sb(e,t,n,r){var i=[null,null],a=_j.push(i)-1;return i.left=e,i.right=t,n&&lb(i,e,t,n),r&&lb(i,t,e,r),yj[e.index].halfedges.push(a),yj[t.index].halfedges.push(a),i}function fb(e,t,n){var r=[t,n];return r.left=e,r}function lb(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function cb(e,t,n,r,i){var a,o=e[0],u=e[1],s=o[0],f=o[1],l=u[0],c=u[1],d=0,h=1,p=l-s,g=c-f;if(a=t-s,p||!(a>0)){if(a/=p,p<0){if(a<d)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=r-s,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<h&&(h=a)}if(a=n-f,g||!(a>0)){if(a/=g,g<0){if(a<d)return;a<h&&(h=a)}else if(g>0){if(a>h)return;a>d&&(d=a)}if(a=i-f,g||!(a<0)){if(a/=g,g<0){if(a>h)return;a>d&&(d=a)}else if(g>0){if(a<d)return;a<h&&(h=a)}return!(d>0||h<1)||(d>0&&(e[0]=[s+d*p,f+d*g]),h<1&&(e[1]=[s+h*p,f+h*g]),!0)}}}}}function db(e,t,n,r,i){var a=e[1];if(a)return!0;var o,u,s=e[0],f=e.left,l=e.right,c=f[0],d=f[1],h=l[0],p=l[1],g=(c+h)/2,m=(d+p)/2;if(p===d){if(g<t||g>=r)return;if(c>h){if(s){if(s[1]>=i)return}else s=[g,n];a=[g,i]}else{if(s){if(s[1]<n)return}else s=[g,i];a=[g,n]}}else if(o=(c-h)/(p-d),u=m-o*g,o<-1||o>1)if(c>h){if(s){if(s[1]>=i)return}else s=[(n-u)/o,n];a=[(i-u)/o,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/o,i];a=[(n-u)/o,n]}else if(d<p){if(s){if(s[0]>=r)return}else s=[t,o*t+u];a=[r,o*r+u]}else{if(s){if(s[0]<t)return}else s=[r,o*r+u];a=[t,o*t+u]}return e[0]=s,e[1]=a,!0}function hb(e,t,n,r){for(var i,a=_j.length;a--;)db(i=_j[a],e,t,n,r)&&cb(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>kj||Math.abs(i[0][1]-i[1][1])>kj)||delete _j[a]}function pb(e){return yj[e.index]={site:e,halfedges:[]}}function gb(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function mb(e,t){return t[+(t.left!==e.site)]}function vb(e,t){return t[+(t.left===e.site)]}function yb(){for(var e,t,n,r,i=0,a=yj.length;i<a;++i)if((e=yj[i])&&(r=(t=e.halfedges).length)){var o=new Array(r),u=new Array(r);for(n=0;n<r;++n)o[n]=n,u[n]=gb(e,_j[t[n]]);for(o.sort(function(e,t){return u[t]-u[e]}),n=0;n<r;++n)u[n]=t[o[n]];for(n=0;n<r;++n)t[n]=u[n]}}function bb(e,t,n,r){var i,a,o,u,s,f,l,c,d,h,p,g,m=yj.length,v=!0;for(i=0;i<m;++i)if(a=yj[i]){for(o=a.site,s=a.halfedges,u=s.length;u--;)_j[s[u]]||s.splice(u,1);for(u=0,f=s.length;u<f;)h=vb(a,_j[s[u]]),p=h[0],g=h[1],l=mb(a,_j[s[++u%f]]),c=l[0],d=l[1],(Math.abs(p-c)>kj||Math.abs(g-d)>kj)&&(s.splice(u,0,_j.push(fb(o,h,Math.abs(p-e)<kj&&r-g>kj?[e,Math.abs(c-e)<kj?d:r]:Math.abs(g-r)<kj&&n-p>kj?[Math.abs(d-r)<kj?c:n,r]:Math.abs(p-n)<kj&&g-t>kj?[n,Math.abs(c-n)<kj?d:t]:Math.abs(g-t)<kj&&p-e>kj?[Math.abs(d-t)<kj?c:e,t]:null))-1),++f);f&&(v=!1)}if(v){var y,b,_,x=1/0;for(i=0,v=null;i<m;++i)(a=yj[i])&&(o=a.site,y=o[0]-e,b=o[1]-t,_=y*y+b*b,_<x&&(x=_,v=a));if(v){var w=[e,t],k=[e,r],M=[n,r],E=[n,t];v.halfedges.push(_j.push(fb(o=v.site,w,k))-1,_j.push(fb(o,k,M))-1,_j.push(fb(o,M,E))-1,_j.push(fb(o,E,w))-1)}}for(i=0;i<m;++i)(a=yj[i])&&(a.halfedges.length||delete yj[i])}function _b(){ib(this),this.x=this.y=this.arc=this.site=this.cy=null}function xb(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i[0],u=i[1],s=r[0]-o,f=r[1]-u,l=a[0]-o,c=a[1]-u,d=2*(s*c-f*l);if(!(d>=-Mj)){var h=s*s+f*f,p=l*l+c*c,g=(c*h-f*p)/d,m=(s*p-l*h)/d,v=xj.pop()||new _b;v.arc=e,v.site=i,v.x=g+o,v.y=(v.cy=m+u)+Math.sqrt(g*g+m*m),e.circle=v;for(var y=null,b=bj._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}bj.insert(y,v),y||(mj=v)}}}}function wb(e){var t=e.circle;t&&(t.P||(mj=t.N),bj.remove(t),xj.push(t),ib(t),e.circle=null)}function kb(){ib(this),this.edge=this.site=this.circle=null}function Mb(e){var t=wj.pop()||new kb;return t.site=e,t}function Eb(e){wb(e),vj.remove(e),wj.push(e),ib(e)}function Ob(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],a=e.P,o=e.N,u=[e];Eb(e);for(var s=a;s.circle&&Math.abs(n-s.circle.x)<kj&&Math.abs(r-s.circle.cy)<kj;)a=s.P,u.unshift(s),Eb(s),s=a;u.unshift(s),wb(s);for(var f=o;f.circle&&Math.abs(n-f.circle.x)<kj&&Math.abs(r-f.circle.cy)<kj;)o=f.N,u.push(f),Eb(f),f=o;u.push(f),wb(f);var l,c=u.length;for(l=1;l<c;++l)f=u[l],s=u[l-1],lb(f.edge,s.site,f.site,i);s=u[0],f=u[c-1],f.edge=sb(s.site,f.site,null,i),xb(s),xb(f)}function Sb(e){for(var t,n,r,i,a=e[0],o=e[1],u=vj._;u;)if(r=Ab(u,o)-a,r>kj)u=u.L;else{if(i=a-Cb(u,o),!(i>kj)){r>-kj?(t=u.P,n=u):i>-kj?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}pb(e);var s=Mb(e);if(vj.insert(t,s),t||n){if(t===n)return wb(t),n=Mb(t.site),vj.insert(s,n),s.edge=n.edge=sb(t.site,s.site),xb(t),void xb(n);if(!n)return void(s.edge=sb(t.site,s.site));wb(t),wb(n);var f=t.site,l=f[0],c=f[1],d=e[0]-l,h=e[1]-c,p=n.site,g=p[0]-l,m=p[1]-c,v=2*(d*m-h*g),y=d*d+h*h,b=g*g+m*m,_=[(m*y-h*b)/v+l,(d*b-g*y)/v+c];lb(n.edge,f,p,_),s.edge=sb(f,e,null,_),n.edge=sb(e,p,null,_),xb(t),xb(n)}}function Ab(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-(1/0);n=o.site;var u=n[0],s=n[1],f=s-t;if(!f)return u;var l=u-r,c=1/a-1/f,d=l/f;return c?(-d+Math.sqrt(d*d-2*c*(l*l/(-2*f)-s+f/2+i-a/2)))/c+r:(r+u)/2}function Cb(e,t){var n=e.N;if(n)return Ab(n,t);var r=e.site;return r[1]===t?r[0]:1/0}function Rb(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function Tb(e,t){return t[1]-e[1]||t[0]-e[0]}function zb(e,t){var n,r,i,a=e.sort(Tb).pop();for(_j=[],yj=new Array(e.length),vj=new rb,bj=new rb;;)if(i=mj,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(Sb(a),n=a[0],r=a[1]),a=e.pop();else{if(!i)break;Ob(i.arc)}if(yb(),t){var o=+t[0][0],u=+t[0][1],s=+t[1][0],f=+t[1][1];hb(o,u,s,f),bb(o,u,s,f)}this.edges=_j,this.cells=yj,vj=bj=_j=yj=null}function Db(){function e(e){return new zb(e.map(function(r,i){var a=[Math.round(t(r,i,e)/kj)*kj,Math.round(n(r,i,e)/kj)*kj];return a.index=i,a.data=r,a}),r)}var t=tb,n=nb,r=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(n){return arguments.length?(t="function"==typeof n?n:eb(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:eb(+t),e):n},e.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},e.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],e):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},e}function Nb(e){Bn.call(this,null,e)}function Pb(){function e(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(Cj<<5)/t,e.height=Rj/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function t(e,t,n){for(var r,i,a,o=t.x,u=t.y,s=Math.sqrt(f[0]*f[0]+f[1]*f[1]),c=l(f),h=d()<.5?1:-1,p=-h;(r=c(p+=h))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=s));)if(t.x=o+i,t.y=u+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>f[0]||t.y+t.y1>f[1])&&(!n||!Lb(t,e,f[0]))&&(!n||jb(t,n))){for(var g,m=t.sprite,v=t.width>>5,y=f[0]>>5,b=t.x-(v<<4),_=127&b,x=32-_,w=t.y1-t.y0,k=(t.y+t.y0)*y+(b>>5),M=0;M<w;M++){g=0;for(var E=0;E<=v;E++)e[k+E]|=g<<x|(E<v?(g=m[M*v+E])>>>_:0);k+=y}return t.sprite=null,!0}return!1}var n,r,i,a,o,u,s,f=[256,256],l=Fb,c=[],d=Math.random,h={};return h.layout=function(){for(var l=e(Wi()),h=Ib((f[0]>>5)*f[1]),p=null,g=c.length,m=-1,v=[],y=c.map(function(e){return{text:n(e),font:r(e),style:a(e),weight:o(e),rotate:u(e),size:~~i(e),padding:s(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size});++m<g;){var b=y[m];b.x=f[0]*(d()+.5)>>1,b.y=f[1]*(d()+.5)>>1,$b(l,b,y,m),b.hasText&&t(h,b,p)&&(v.push(b),p?qb(p,b):p=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=f[0]>>1,b.y-=f[1]>>1)}return v},h.words=function(e){return arguments.length?(c=e,h):c},h.size=function(e){return arguments.length?(f=[+e[0],+e[1]],h):f},h.font=function(e){return arguments.length?(r=Bb(e),h):r},h.fontStyle=function(e){return arguments.length?(a=Bb(e),h):a},h.fontWeight=function(e){return arguments.length?(o=Bb(e),h):o},h.rotate=function(e){return arguments.length?(u=Bb(e),h):u},h.text=function(e){return arguments.length?(n=Bb(e),h):n},h.spiral=function(e){return arguments.length?(l=Tj[e]||e,h):l},h.fontSize=function(e){return arguments.length?(i=Bb(e),h):i},h.padding=function(e){return arguments.length?(s=Bb(e),h):s},h.random=function(e){return arguments.length?(d=e,h):d},h}function $b(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(Cj<<5)/a,Rj/a);var o,u,s,f,l,c=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,s=t.size<<1,t.rotate){var g=Math.sin(t.rotate*Aj),m=Math.cos(t.rotate*Aj),v=o*m,y=o*g,b=s*m,_=s*g;o=Math.max(Math.abs(v+_),Math.abs(v-_))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(s>h&&(h=s),c+o>=Cj<<5&&(c=0,d+=h,h=0),d+s>=Rj)break;i.translate((c+(o>>1))/a,(d+(s>>1))/a),t.rotate&&i.rotate(t.rotate*Aj),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=s,t.xoff=c,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,c+=o}for(var x=i.getImageData(0,0,(Cj<<5)/a,Rj/a).data,w=[];--r>=0;)if(t=n[r],t.hasText){for(o=t.width,u=o>>5,s=t.y1-t.y0,f=0;f<s*u;f++)w[f]=0;if(c=t.xoff,null==c)return;d=t.yoff;var k=0,M=-1;for(l=0;l<s;l++){for(f=0;f<o;f++){var E=u*l+(f>>5),O=x[(d+l)*(Cj<<5)+(c+f)<<2]?1<<31-f%32:0;w[E]|=O,k|=O}k?M=l:(t.y0++,s--,l--,d++)}t.y1=t.y0+M,t.sprite=w.slice(0,(t.y1-t.y0)*u)}}}function Lb(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),u=127&o,s=32-u,f=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c=0;c<f;c++){r=0;for(var d=0;d<=a;d++)if((r<<s|(d<a?(r=i[c*a+d])>>>u:0))&t[l+d])return!0;l+=n}return!1}function qb(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function jb(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Fb(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function Ub(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t}return[r,i]}}function Ib(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Bb(e){return"function"==typeof e?e:function(){return e}}function Wb(e){Bn.call(this,Pb(),e)}function Vb(e,t){for(var n,r=+(1/0),i=-(1/0),a=0,o=t.length;a<o;++a)n=e(t[a]),n<r&&(r=n),n>i&&(i=n);return[r,i]}function Hb(e){return new Uint8Array(e)}function Yb(e){return new Uint16Array(e)}function Gb(e){return new Uint32Array(e)}function Xb(){var e=8,t=[],n=Gb(0),r=Jb(0,e),i=Jb(0,e);return{data:function(){return t},seen:function(){return n=Zb(n,t.length)},add:function(e){for(var n,r=0,i=t.length,a=e.length;r<a;++r)n=e[r],n._index=i++,t.push(n)},remove:function(e,n){var a,o,u,s=t.length,f=Array(s-e),l=t;for(o=0;!n[o]&&o<s;++o)f[o]=t[o],l[o]=o;for(u=o;o<s;++o)a=t[o],n[o]?l[o]=-1:(l[o]=u,r[u]=r[o],i[u]=i[o],f[u]=a,a._index=u++),r[o]=0;return t=f,l},size:function(){return t.length},curr:function(){return r},prev:function(){return i},reset:function(e){i[e]=r[e]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){var a=r.length;(t>a||n>e)&&(e=Math.max(n,e),r=Jb(t,e,r),i=Jb(t,e))}}}function Zb(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Jb(e,t,n){var r=(t<257?Hb:t<65537?Yb:Gb)(e);return n&&r.set(n),r}function Qb(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this,a=i.bisect(i.range,e.value),o=e.index,u=a[0],s=a[1],f=o.length;for(n=0;n<u;++n)t[o[n]]|=r;for(n=s;n<f;++n)t[o[n]]|=r;return i}}}function Kb(){function e(e,t,n){if(!t.length)return[];var r,u,s,f=o,l=t.length,c=Array(l),d=Gb(l);for(s=0;s<l;++s)c[s]=e(t[s]),d[s]=s;if(c=e_(c,d),f)r=a,u=i,a=Array(f+l),i=Gb(f+l),t_(n,r,u,f,c,d,l,a,i);else{if(n>0)for(s=0;s<l;++s)d[s]+=n;a=c,i=d}return o=f+l,{index:d,value:c}}function t(e,t){var n,r,u,s=o;for(r=0;!t[i[r]]&&r<s;++r);for(u=r;r<s;++r)t[n=i[r]]||(i[u]=n,a[u]=a[r],++u);o=s-e}function n(e){for(var t=0,n=o;t<n;++t)i[t]=e[i[t]]}function r(e,t){var n;return t?n=t.length:(t=a,n=o),[VA(t,e[0],0,n),WA(t,e[1],0,n)]}var i=Gb(0),a=[],o=0;return{insert:e,remove:t,bisect:r,reindex:n,index:function(){return i},size:function(){return o}}}function e_(e,t){return e.sort.call(t,function(t,n){var r=e[t],i=e[n];return r<i?-1:r>i?1:0}),xr(e,t)}function t_(e,t,n,r,i,a,o,u,s){var f,l=0,c=0;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(u[f]=t[l],s[f]=n[l++]):(u[f]=i[c],s[f]=a[c++]+e);for(;l<r;++l,++f)u[f]=t[l],s[f]=n[l];for(;c<o;++c,++f)u[f]=i[c],s[f]=a[c]+e}function n_(e){Bn.call(this,Xb(),e),this._indices=null,this._dims=null}function r_(e){Bn.call(this,null,e)}function i_(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:Fj,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var r=t.value,i=r?f(r)?r:r.user:Fj,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),e.add(null,function(e){var t=e.cursor,n=this.value;return f(t)||(n=t.item,t=t.user),a_(t&&t!==Fj?t:n||t),n},{cursor:t})}function a_(e){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=e)}function o_(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||o("Unrecognized data set: "+t),n[t]}function u_(e){return o_(this,e).values.value}function s_(e,t){ae(t)||o("Second argument to changes must be a changeset.");var n=o_(this,e);return n.modified=!0,this.pulse(n.input,t)}function f_(e,t){return s_.call(this,e,oe().insert(t))}function l_(e,t){return s_.call(this,e,oe().remove(t))}function c_(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function d_(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function h_(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function p_(e){var t=h_(e),n=c_(e),r=d_(e);e._renderer.background(e._background),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(function(t){try{t(n,r)}catch(i){e.error(i)}})}function g_(e,t,n){var r,i,a,o=e._renderer.canvas();return o&&(a=h_(e),i=t.changedTouches?t.changedTouches[0]:t,r=os(i,o),r[0]-=a[0],r[1]-=a[1]),t.dataflow=e,t.vega=m_(e,n,r),t.item=n,t}function m_(e,t,n){function r(e){var n,r=a;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(e){if(!e)return n;f(e)&&(e=r(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var a=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:R(e),item:R(t||{}),group:r,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}function v_(e){e=z({},e);var t=e.defaults;return t&&(iS(t.prevent)&&(t.prevent=G(t.prevent)),iS(t.allow)&&(t.allow=G(t.allow))),e}function y_(e,t){var n=e._eventConfig.defaults,r=n&&n.prevent,i=n&&n.allow;return r!==!1&&i!==!0&&(r===!0||i===!1||(r?r[t]:i?!i[t]:e.preventDefault()))}function b_(e,t,n){var r,i=this,a=new de(n),o=function(n,r){e===Uj&&y_(i,t)&&n.preventDefault();try{a.receive(g_(i,n,r))}catch(o){i.error(o)}finally{i.run()}};if(e===Ij)i.timer(o,t);else if(e===Uj)i.addEventListener(t,o,Wj);else if(e===Bj?"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a}function __(e){return e.item}function x_(e){var t=e.item.mark.source;return t.source||t}function w_(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function k_(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",__),x_,w_(e)),this.on(this.events("view","mouseout",__),x_,w_(t)),this}function M_(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=a.length;--e>=0;)for(n=a[e],t=n.sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this}function E_(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}function O_(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&(i.source=!0,e.signal(r.signal,t).run())}},r.debounce&&(i.update=T(r.debounce,i.update))),S_(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,function(){i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}}function S_(e,t,n,r){var i=E_("div",{class:Vj});i.appendChild(E_("span",{class:Hj},n.name||n.signal)),t.appendChild(i);var a=A_;switch(n.input){case"checkbox":a=C_;break;case"select":a=R_;break;case"radio":a=T_;break;case"range":a=z_}a(e,i,n,r)}function A_(e,t,n,r){var i=E_("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",function(){e.update(i.value)}),e.elements=[i],e.set=function(e){i.value=e}}function C_(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=E_("input",i);t.appendChild(a),a.addEventListener("change",function(){e.update(a.checked)}),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function R_(e,t,n,r){var i=E_("select",{name:n.signal});n.options.forEach(function(e){var t={value:e};D_(e,r)&&(t.selected=!0),i.appendChild(E_("option",t,e+""))}),t.appendChild(i),i.addEventListener("change",function(){e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(D_(n.options[t],e))return void(i.selectedIndex=t)}}function T_(e,t,n,r){var i=E_("span",{class:Yj});t.appendChild(i),e.elements=n.options.map(function(t){var a=Gj+n.signal+"-"+t,o={id:a,type:"radio",name:n.signal,value:t};D_(t,r)&&(o.checked=!0);var u=E_("input",o);return u.addEventListener("change",function(){e.update(t)}),i.appendChild(u),i.appendChild(E_("label",{for:a},t+"")),u}),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)D_(n[r].value,t)&&(n[r].checked=!0)}}function z_(e,t,n,r){function i(){f.textContent=s.value,e.update(+s.value)}r=void 0!==r?r:(+n.max+ +n.min)/2;var a=n.min||Math.min(0,+r)||0,o=n.max||Math.max(100,+r)||100,u=n.step||hr(a,o,100),s=E_("input",{type:"range",name:n.signal,min:a,max:o,step:u});s.value=r;var f=E_("label",{},+r);t.appendChild(s),t.appendChild(f),s.addEventListener("input",i),s.addEventListener("change",i),e.elements=[s],e.set=function(e){s.value=e,f.textContent=e}}function D_(e,t){return e===t||e+""==t+""}function N_(e,t,n,r,i){return t=t||new r(e.loader()),t.initialize(n,c_(e),d_(e),h_(e),i).background(e._background)}function P_(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function $_(e,t,n,r){var i=new r(e.loader(),P_(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,h_(e),e);return t&&t.handlers().forEach(function(e){i.on(e.type,e.handler)}),i}function L_(e,t){var n,r,i=this,a=i._renderType,o=Ls(a);return e=i._el=e?q_(i,e):null,o||i.error("Unrecognized renderer type: "+a),n=o.handler||cs,r=e?o.renderer:o.headless,i._renderer=r?N_(i,i._renderer,e,r):null,i._handler=$_(i,i._handler,e,n),i._redraw=!0,e&&(t=t?q_(i,t):e.appendChild(E_("div",{class:"vega-bindings"})),i._bind.forEach(function(e){e.param.element&&(e.element=q_(i,e.param.element))}),i._bind.forEach(function(e){O_(i,e.element||t,e)})),i}function q_(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}function j_(e,t,n){var r=Ls(t),i=r&&r.headless;return i?e.runAsync().then(function(){return N_(e,null,null,i,n).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)}function F_(e,t){return e!==dz.Canvas&&e!==dz.SVG&&e!==dz.PNG?Promise.reject("Unrecognized image type: "+e):j_(this,e,t).then(function(t){return e===dz.SVG?U_(t.svg(),"image/svg+xml"):t.canvas().toDataURL("image/png")})}function U_(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function I_(e){return j_(this,dz.Canvas,e).then(function(e){return e.canvas()})}function B_(e){return j_(this,dz.SVG,e).then(function(e){return e.svg()})}function W_(e,t){return e=e||t.autosize,s(e)?e:(e=e||"pad",{type:e})}function V_(e,t){return e=e||t.padding,s(e)?{top:H_(e.top),bottom:H_(e.bottom),left:H_(e.left),right:H_(e.right)}:Y_(H_(e))}function H_(e){return+e||0}function Y_(e){return{top:e,bottom:e,left:e,right:e}}function G_(e,t){o(e+' for "outer" push: '+l(t))}function X_(e,t){var n=e.name;if(e.push===Xj)t.signals[n]||G_("No prior signal definition",n),Zj.forEach(function(t){void 0!==e[t]&&G_("Invalid property ",t)});else{var r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Z_(e){this.type=e}function J_(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}function Q_(e,t){if(!e)throw new Error("ASSERT: "+t)}function K_(e){return e>=48&&e<=57}function ex(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function tx(e){return"01234567".indexOf(e)>=0}function nx(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function rx(e){return 10===e||13===e||8232===e||8233===e}function ix(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&NF.test(String.fromCharCode(e))}function ax(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&PF.test(String.fromCharCode(e))}function ox(){for(var e;Kj<eF&&(e=Qj.charCodeAt(Kj),nx(e)||rx(e));)++Kj}function ux(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)Kj<eF&&ex(Qj[Kj])?(r=Qj[Kj++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):Px({},wF,zF);return String.fromCharCode(i)}function sx(){var e,t,n,r;for(e=Qj[Kj],t=0,"}"===e&&Px({},wF,zF);Kj<eF&&(e=Qj[Kj++],ex(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&Px({},wF,zF),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function fx(){var e,t;for(e=Qj.charCodeAt(Kj++),t=String.fromCharCode(e),92===e&&(117!==Qj.charCodeAt(Kj)&&Px({},wF,zF),++Kj,e=ux("u"),e&&"\\"!==e&&ix(e.charCodeAt(0))||Px({},wF,zF),t=e);Kj<eF&&(e=Qj.charCodeAt(Kj),ax(e));)++Kj,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Qj.charCodeAt(Kj)&&Px({},wF,zF),++Kj,e=ux("u"),e&&"\\"!==e&&ax(e.charCodeAt(0))||Px({},wF,zF),t+=e);return t}function lx(){var e,t;for(e=Kj++;Kj<eF;){if(t=Qj.charCodeAt(Kj),92===t)return Kj=e,fx();if(!ax(t))break;++Kj}return Qj.slice(e,Kj)}function cx(){var e,t,n;return e=Kj,t=92===Qj.charCodeAt(Kj)?fx():lx(),n=1===t.length?iF:$F.hasOwnProperty(t)?aF:"null"===t?oF:"true"===t||"false"===t?nF:iF,{type:n,value:t,start:e,end:Kj}}function dx(){var e,t,n,r,i=Kj,a=Qj.charCodeAt(Kj),o=Qj[Kj];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Kj,{type:sF,value:String.fromCharCode(a),start:i,end:Kj};default:if(e=Qj.charCodeAt(Kj+1),61===e)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Kj+=2,{type:sF,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:Kj};case 33:case 61:return Kj+=2,61===Qj.charCodeAt(Kj)&&++Kj,{type:sF,value:Qj.slice(i,Kj),start:i,end:Kj}}}return r=Qj.substr(Kj,4),">>>="===r?(Kj+=4,{type:sF,value:r,start:i,end:Kj}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(Kj+=3,{type:sF,value:n,start:i,end:Kj}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(Kj+=2,{type:sF,value:t,start:i,end:Kj}):"<>=!+-*%&|^/".indexOf(o)>=0?(++Kj,{type:sF,value:o,start:i,end:Kj}):void Px({},wF,zF)))}function hx(e){for(var t="";Kj<eF&&ex(Qj[Kj]);)t+=Qj[Kj++];return 0===t.length&&Px({},wF,zF),ix(Qj.charCodeAt(Kj))&&Px({},wF,zF),{type:uF,value:parseInt("0x"+t,16),start:e,end:Kj}}function px(e){for(var t="0"+Qj[Kj++];Kj<eF&&tx(Qj[Kj]);)t+=Qj[Kj++];return(ix(Qj.charCodeAt(Kj))||K_(Qj.charCodeAt(Kj)))&&Px({},wF,zF),{type:uF,value:parseInt(t,8),octal:!0,start:e,end:Kj}}function gx(){var e,t,n;if(n=Qj[Kj],Q_(K_(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=Kj,e="","."!==n){if(e=Qj[Kj++],n=Qj[Kj],"0"===e){if("x"===n||"X"===n)return++Kj,hx(t);if(tx(n))return px(t);n&&K_(n.charCodeAt(0))&&Px({},wF,zF)}for(;K_(Qj.charCodeAt(Kj));)e+=Qj[Kj++];n=Qj[Kj]}if("."===n){for(e+=Qj[Kj++];K_(Qj.charCodeAt(Kj));)e+=Qj[Kj++];n=Qj[Kj]}if("e"===n||"E"===n)if(e+=Qj[Kj++],n=Qj[Kj],"+"!==n&&"-"!==n||(e+=Qj[Kj++]),K_(Qj.charCodeAt(Kj)))for(;K_(Qj.charCodeAt(Kj));)e+=Qj[Kj++];else Px({},wF,zF);return ix(Qj.charCodeAt(Kj))&&Px({},wF,zF),{type:uF,value:parseFloat(e),start:t,end:Kj}}function mx(){var e,t,n,r,i="",a=!1;for(e=Qj[Kj],Q_("'"===e||'"'===e,"String literal must starts with a quote"),t=Kj,++Kj;Kj<eF;){if(n=Qj[Kj++],n===e){e="";break}if("\\"===n)if(n=Qj[Kj++],n&&rx(n.charCodeAt(0)))"\r"===n&&"\n"===Qj[Kj]&&++Kj;else switch(n){case"u":case"x":"{"===Qj[Kj]?(++Kj,i+=sx()):i+=ux(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:tx(n)?(r="01234567".indexOf(n),0!==r&&(a=!0),Kj<eF&&tx(Qj[Kj])&&(a=!0,r=8*r+"01234567".indexOf(Qj[Kj++]),"0123".indexOf(n)>=0&&Kj<eF&&tx(Qj[Kj])&&(r=8*r+"01234567".indexOf(Qj[Kj++]))),i+=String.fromCharCode(r)):i+=n}else{if(rx(n.charCodeAt(0)))break;i+=n}}return""!==e&&Px({},wF,zF),{type:fF,value:i,octal:a,start:t,end:Kj}}function vx(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void Px({},AF)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{}catch(r){Px({},AF)}try{return new RegExp(e,t)}catch(i){return null}}function yx(){var e,t,n,r,i;for(e=Qj[Kj],Q_("/"===e,"Regular expression literal must start with a slash"),t=Qj[Kj++],n=!1,r=!1;Kj<eF;)if(e=Qj[Kj++],t+=e,"\\"===e)e=Qj[Kj++],rx(e.charCodeAt(0))&&Px({},CF),t+=e;else if(rx(e.charCodeAt(0)))Px({},CF);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||Px({},CF),i=t.substr(1,t.length-2),{value:i,literal:t}}function bx(){var e,t,n;for(t="",n="";Kj<eF&&(e=Qj[Kj],ax(e.charCodeAt(0)));)++Kj,"\\"===e&&Kj<eF?Px({},wF,zF):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Px({},AF,n),{value:n,literal:t}}function _x(){var e,t,n,r;return tF=null,ox(),e=Kj,t=yx(),n=bx(),r=vx(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Kj}}function xx(e){return e.type===iF||e.type===aF||e.type===nF||e.type===oF}function wx(){var e;return ox(),Kj>=eF?{type:rF,start:Kj,end:Kj}:(e=Qj.charCodeAt(Kj),ix(e)?cx():40===e||41===e||59===e?dx():39===e||34===e?mx():46===e?K_(Qj.charCodeAt(Kj+1))?gx():dx():K_(e)?gx():dx())}function kx(){var e;return e=tF,Kj=e.end,tF=wx(),Kj=e.end,e}function Mx(){var e;e=Kj,tF=wx(),Kj=e}function Ex(e){var t=new Z_(cF);return t.elements=e,t}function Ox(e,t,n){var r=new Z_("||"===e||"&&"===e?vF:dF);return r.operator=e,r.left=t,r.right=n,r}function Sx(e,t){var n=new Z_(hF);return n.callee=e,n.arguments=t,n}function Ax(e,t,n){var r=new Z_(pF);return r.test=e,r.consequent=t,r.alternate=n,r}function Cx(e){var t=new Z_(gF);return t.name=e,t}function Rx(e){var t=new Z_(mF);return t.value=e.value,t.raw=Qj.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Tx(e,t,n){var r=new Z_(yF);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function zx(e){var t=new Z_(bF);return t.properties=e,t}function Dx(e,t,n){var r=new Z_(_F);return r.key=t,r.value=n,r.kind=e,r}function Nx(e,t){var n=new Z_(xF);return n.operator=e,n.argument=t,n.prefix=!0,n}function Px(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return Q_(t<r.length,"Message reference must be in range"),r[t]});throw n=new Error(i),n.index=Kj,n.description=i,n}function $x(e){e.type===rF&&Px(e,SF),e.type===uF&&Px(e,kF),e.type===fF&&Px(e,MF),e.type===iF&&Px(e,EF),e.type===aF&&Px(e,OF),Px(e,wF,e.value)}function Lx(e){var t=kx();t.type===sF&&t.value===e||$x(t)}function qx(e){return tF.type===sF&&tF.value===e}function jx(e){return tF.type===aF&&tF.value===e}function Fx(){var e=[];for(Kj=tF.start,Lx("[");!qx("]");)qx(",")?(kx(),e.push(null)):(e.push(tw()),qx("]")||Lx(","));return kx(),Ex(e)}function Ux(){var e;return Kj=tF.start,e=kx(),e.type===fF||e.type===uF?(e.octal&&Px(e,RF),Rx(e)):Cx(e.value)}function Ix(){var e,t,n,r;return Kj=tF.start,e=tF,e.type===iF?(n=Ux(),Lx(":"),r=tw(),Dx("init",n,r)):e.type!==rF&&e.type!==sF?(t=Ux(),Lx(":"),r=tw(),Dx("init",t,r)):void $x(e)}function Bx(){var e,t,n,r=[],i={},a=String;for(Kj=tF.start,Lx("{");!qx("}");)e=Ix(),t=e.key.type===gF?e.key.name:a(e.key.value),n="$"+t,Object.prototype.hasOwnProperty.call(i,n)?Px({},TF):i[n]=!0,r.push(e),qx("}")||Lx(",");return Lx("}"),zx(r)}function Wx(){var e;return Lx("("),e=nw(),Lx(")"),e}function Vx(){var e,t,n;if(qx("("))return Wx();if(qx("["))return Fx();if(qx("{"))return Bx();if(e=tF.type,Kj=tF.start,e===iF||LF[tF.value])n=Cx(kx().value);else if(e===fF||e===uF)tF.octal&&Px(tF,RF),n=Rx(kx());else{if(e===aF)throw new Error(DF);e===nF?(t=kx(),t.value="true"===t.value,n=Rx(t)):e===oF?(t=kx(),t.value=null,n=Rx(t)):qx("/")||qx("/=")?(n=Rx(_x()),Mx()):$x(kx())}return n}function Hx(){var e=[];if(Lx("("),!qx(")"))for(;Kj<eF&&(e.push(tw()),!qx(")"));)Lx(",");return Lx(")"),e}function Yx(){var e;return Kj=tF.start,e=kx(),xx(e)||$x(e),Cx(e.value)}function Gx(){return Lx("."),Yx()}function Xx(){var e;return Lx("["),e=nw(),Lx("]"),e}function Zx(){var e,t,n;for(e=Vx();;)if(qx("."))n=Gx(),e=Tx(".",e,n);else if(qx("("))t=Hx(),e=Sx(e,t);else{if(!qx("["))break;n=Xx(),e=Tx("[",e,n)}return e}function Jx(){var e=Zx();if(tF.type===sF&&(qx("++")||qx("--")))throw new Error(DF);return e}function Qx(){var e,t;if(tF.type!==sF&&tF.type!==aF)t=Jx();else{if(qx("++")||qx("--"))throw new Error(DF);if(qx("+")||qx("-")||qx("~")||qx("!"))e=kx(),t=Qx(),t=Nx(e.value,t);else{if(jx("delete")||jx("void")||jx("typeof"))throw new Error(DF);t=Jx()}}return t}function Kx(e){var t=0;if(e.type!==sF&&e.type!==aF)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function ew(){var e,t,n,r,i,a,o,u,s,f;if(e=tF,s=Qx(),r=tF,i=Kx(r),0===i)return s;for(r.prec=i,kx(),t=[e,tF],o=Qx(),a=[s,r,o];(i=Kx(tF))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=Ox(u,s,o),a.push(n);r=kx(),r.prec=i,a.push(r),t.push(tF),n=Qx(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=Ox(a[f-1].value,a[f-2],n),
f-=2;return n}function tw(){var e,t,n;return e=ew(),qx("?")&&(kx(),t=tw(),Lx(":"),n=tw(),e=Ax(e,t,n)),e}function nw(){var e=tw();if(qx(","))throw new Error(DF);return e}function rw(e){Qj=e,Kj=0,eF=Qj.length,tF=null,Mx();var t=nw();if(tF.type!==rF)throw new Error("Unexpect token after expression.");return t}function iw(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&o("Missing arguments to clamp function."),t.length>3&&o("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),replace:n("replace",i),regexp:a,test:n("test",a),if:function(t){t.length<3&&o("Missing arguments to if function."),t.length>3&&o("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function aw(e){function t(e){if(f(e))return e;var t=g[e.type];return null==t&&o("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(c),fields:Object.keys(d)};return c={},d={},n}e=e||{};var r=e.whitelist?G(e.whitelist):{},i=e.blacklist?G(e.blacklist):{},a=e.constants||qF,u=(e.functions||iw)(t),s=e.globalvar,l=e.fieldvar,c={},d={},h=0,p=A(s)?s:function(e){return s+'["'+e+'"]'},g={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return h>0?t:i.hasOwnProperty(t)?o("Illegal identifier: "+t):a.hasOwnProperty(t)?a[t]:r.hasOwnProperty(t)?t:(c[t]=1,p(t))},MemberExpression:function(e){var n=!e.computed,r=t(e.object);n&&(h+=1);var i=t(e.property);return r===l&&(d[i]=1),n&&(h-=1),r+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&o("Illegal callee type: "+e.callee.type);var n=e.callee.name,r=e.arguments,i=u.hasOwnProperty(n)&&u[n];return i||o("Unrecognized function: "+n),A(i)?i(r):i+"("+r.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){h+=1;var n=t(e.key);return h-=1,n+":"+t(e.value)}};return n.functions=u,n.constants=a,n}function ow(e,t,n){var r=e+":"+n,i=jF[r];return i&&i[0]===t||(jF[r]=i=[t,t(n)]),i[1]}function uw(e,t){return ow("format",eN,t)(e)}function sw(e,t){return ow("timeFormat",hA,t)(e)}function fw(e,t){return ow("utcFormat",gA,t)(e)}function lw(e,t){return ow("timeParse",pA,t)(e)}function cw(e,t){return ow("utcParse",mA,t)(e)}function dw(e,t,n){return FF.setMonth(e),FF.setDate(t),sw(FF,n)}function hw(e){return dw(e,1,"%B")}function pw(e){return dw(e,1,"%b")}function gw(e){return dw(0,2+e,"%A")}function mw(e){return dw(0,2+e,"%a")}function vw(e){return 1+~~(new Date(e).getMonth()/3)}function yw(e){return 1+~~(new Date(e).getUTCMonth()/3)}function bw(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function _w(){return bw(this.context.dataflow,"warn",arguments)}function xw(){return bw(this.context.dataflow,"info",arguments)}function ww(){return bw(this.context.dataflow,"debug",arguments)}function kw(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Mw(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),r=a-i,r>=n-t?[t,n]:[Math.min(Math.max(i,t),n-r),Math.min(Math.max(a,r),n)]}function Ew(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function Ow(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}function Sw(){return UF?UF.screen:{}}function Aw(){return UF?[UF.innerWidth,UF.innerHeight]:[void 0,void 0]}function Cw(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Rw(e,t,n,r,i,a){var o,u,s=e[0],f=p(e);return f<s&&(o=s,s=f,f=o),o=Math.abs(t-s),u=Math.abs(f-t),o<u&&o<=n?r:u<=n?i:a}function Tw(){var e=[].slice.call(arguments);return e.unshift({}),z.apply(null,e)}function zw(e){return e[e.length-1]-e[0]||0}function Dw(e,t){var n;return A(e)?e:f(e)?(n=t.scales[e])&&n.value:void 0}function Nw(e,t,n){var r=VF+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(i){}}function Pw(e,t,n,r){if(t[0].type===IF)Nw(n,r,t[0].value);else if(t[0].type===BF)for(e in n.scales)Nw(n,r,e)}function $w(e,t){var n=Dw(e,(t||this).context);return n&&n.range?n.range():[]}function Lw(e,t){var n=Dw(e,(t||this).context);return n?n.domain():[]}function qw(e,t){var n=Dw(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function jw(e,t,n){return Sf(e||0,t||0,n||0)}function Fw(e,t){var n=Dw(e,(t||this).context);return n?n.copy():void 0}function Uw(e,t,n){var r=Dw(e,(n||this).context);return r?r(t):void 0}function Iw(e,t,n){var r=Dw(e,(n||this).context);return r?iS(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Bw(e,t,n,r,i){e=Dw(e,(i||this).context);var a=Li(t,n),o=e.domain(),u=o[0],s=o[o.length-1],f=nd(e,u,s);e.ticks&&(o=e.ticks(+r||15),u!==o[0]&&o.unshift(u),s!==o[o.length-1]&&o.push(s));for(var l=0,c=o.length;l<c;++l)a.stop(f(o[l]),e(o[l]));return a}function Ww(e,t){return function(n,r,i){if(n){var a=Dw(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}function Vw(e,t,n){var r=Dw(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}function Hw(e){var t=null;return function(n){return n?to(n,t=t||Ja(e)):e}}function Yw(e){var t=this.context.data[e];return t?t.values.value:[]}function Gw(e,t,n,r){t[0].type!==IF&&o("First argument to data functions must be a string literal.");var i=t[0].value,a=HF+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function Xw(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}function Zw(e,t,n,r){t[0].type!==IF&&o("First argument to indata must be a string literal."),t[1].type!==IF&&o("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,u=WF+a;r.hasOwnProperty(u)||(r[u]=n.getData(i).indataRef(n,a))}function Jw(e,t){var n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(lS).insert(t)),1}function Qw(e){return e.data}function Kw(e,t){var n=Yw.call(t,e);return n.root&&n.root.lookup||ZF}function ek(e,t,n){var r=Kw(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(Qw):void 0}function tk(e,t){var n=Kw(e,this)[t];return n?n.ancestors().map(Qw):void 0}function nk(e,t,n,r){var i,a=t[0],o=t[t.length-1];return a>o&&(i=a,a=o,o=i),n=void 0===n||n,r=void 0===r||r,(n?a<=e:a<e)&&(r?e<=o:e<o)}function rk(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e}function ik(e,t){return e===t||e!==e&&t!==t||!(!iS(e)||!iS(t)||e.length!==t.length)&&ak(e,t)}function ak(e,t){for(var n=0,r=e.length;n<r;++n)if(!ik(e[n],t[n]))return!1;return!0}function ok(e){return function(t){for(var n in e)if(!ik(t[n],e[n]))return!1;return!0}}function uk(e,t,n,r,i,a){var o,u,s=this.context.dataflow,f=this.context.data[e],l=f.input,c=f.changes,d=s.stamp();if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<d)&&(f.changes=c=s.changeset(),c.stamp=d,s.runAfter(function(){f.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(o=n===!0?lS:iS(n)||Q(n)?n:ok(n),c.remove(o)),t&&c.insert(t),r&&(o=ok(r),l.value.some(o)?c.remove(o):c.insert(r)),i)for(u in a)c.modify(i,u,a[u]);return 1}function sk(e,t){for(var n,r=t.fields,i=t.values,a=t.getter||(t.getter=[]),o=r.length,u=0;u<o;++u)if(a[u]=a[u]||c(r[u]),n=a[u](e),L(n)&&(n=g(n)),L(i[u])&&(i[u]=g(i[u])),t[JF+r[u]]){if(L(i[u][0])&&(i[u]=i[u].map(g)),!nk(n,i[u],!0,!1))return!1}else if(n!==i[u])return!1;return!0}function fk(e,t){for(var n,r,i,a=t.intervals,o=a.length,u=0;u<o;++u){if(r=a[u].extent,n=a[u].getter||(a[u].getter=c(a[u].field)),i=n(e),!r||r[0]===r[1])return!1;if(L(i)&&(i=g(i)),L(r[0])&&(r=a[u].extent=r.map(g)),q(r[0])&&!nk(i,r))return!1;if(f(r[0])&&r.indexOf(i)<0)return!1}return!0}function lk(e,t,n,r){for(var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=f?f[eU]&&f[eU].value:void 0,d=n===QF,h=l.length,p=0;p<h;++p)if(i=l[p],c&&d){if(a=a||{},o=a[u=i.unit]||0,o===-1)continue;if(s=r(t,i),a[u]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(u).count)return!1}else if(s=r(t,i),d^s)return s;return h&&d}function ck(e,t,n){return lk.call(this,e,t,n,sk)}function dk(e,t,n){return lk.call(this,e,t,n,fk)}function hk(e,t,n,r){t[0].type!==IF&&o("First argument to indata must be a string literal.");var i=t[0].value,a=t.length>=2&&t[t.length-1].value,u="unit",s=WF+u;a!==QF||r.hasOwnProperty(s)||(r[s]=n.getData(i).indataRef(n,u)),Gw(e,t,n,r)}function pk(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=f?f[eU]&&f[eU].value:void 0,d=l[0],h=0;if(d){for(i=t?d.encodings.length:d.fields.length;h<i;++h)if(t&&d.encodings[h]===t||n&&d.fields[h]===n){a=h,u=d[JF+d.fields[h]];break}return c&&1===c.size&&(r=KF),c&&r===QF?(s=l.reduce(function(e,t){var n=e[t.unit]||(e[t.unit]=[]);return n.push({unit:t.unit,value:t.values[a]}),e},{}),o=Object.keys(s).map(function(e){return{unit:e,value:u?vk(s[e],KF):mk(s[e],KF)}})):o=l.map(function(e){return{unit:e.unit,value:e.values[a]}}),u?vk(o,r):mk(o,r)}}function gk(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=l[0],d=0;if(c){for(i=c.intervals.length;d<i;++d)if(a=c.intervals[d],t&&a.encoding===t||n&&a.field===n){if(!a.extent)return;o=d,s=a.extent.length>2;break}return u=l.reduce(function(e,t){var n=t.intervals[o].extent,r=s?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return s?e.push.apply(e,r):e.push(r),e},[]),s?mk(u,r):vk(u,r)}}function mk(e,t){for(var n,r,i,a,o={},u=0,s={},f=[],l=0,c=e.length;l<c;++l)n=e[l],r=n.unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],t===QF&&i.count!==u||f.push(i.value);return f.length?f:void 0}function vk(e,t){for(var n,r,i,a,o=t===QF?bk:yk,u=0,s=e.length;u<s;++u)n=e[u].value,L(n[0])&&(n=n.map(g)),i=n[0],a=n[1],i>a&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!==+r[1]?r:void 0}function yk(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function bk(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function _k(e,t,n){return 1===arguments.length?tU[e]:(tU[e]=t,n&&(aU[e]=n),fU&&(fU.functions[e]=iU+e),this)}function xk(e){var t=iw(e);nU.forEach(function(e){t[e]=rU+e});for(var n in tU)t[n]=iU+n;return t}function wk(e,t,n){var r,i,a={};try{e=f(e)?e:l(e)+"",r=rw(e)}catch(u){o("Expression parse error: "+e)}return r.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,r=sU.visitors[n];r&&r(n,e.arguments,t,a)}}),i=fU(r),i.globals.forEach(function(e){var n=lU+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}}function kk(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Mk(e,t,n,r){return new kk(e,t,n,r)}function Ek(e,t){return Mk("operator",e,t)}function Ok(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Sk(e,t){return t?{$field:e,$name:t}:{$field:e}}function Ak(e,t){return{$compare:e,$order:t}}function Ck(e,t){var n={$key:e};return t&&(n.$flat=!0),n}function Rk(e){return s(e)?(e.order===pU?"-":"+")+Tk(e.op,e.field):""}function Tk(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function zk(e){return e&&e.signal}function Dk(e,t){return null!=e?e:t}function Nk(e){return e&&e.signal||e}function Pk(e,t){var n=e.merge?Lk:e.stream?qk:e.type?jk:o("Invalid stream specification: "+l(e));return n(e,t)}function $k(e){return e===gU?mU:e||mU}function Lk(e,t){var n=e.merge.map(function(e){return Pk(e,t)}),r=Fk({merge:n},e,t);return t.addStream(r).id}function qk(e,t){var n=Pk(e.stream,t),r=Fk({stream:n},e,t);return t.addStream(r).id}function jk(e,t){var n,r;return e.type===vU?(n=t.event(vU,e.throttle),e={between:e.between,filter:e.filter}):n=t.event($k(e.source),e.type),r=Fk({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function Fk(e,t,n){var r=t.between;return r&&(2!==r.length&&o('Stream "between" parameter must have 2 entries: '+l(t)),e.between=[Pk(r[0],n),Pk(r[1],n)]),r=t.filter?S(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Uk(t.marktype,t.markname,t.markrole)),t.source===gU&&r.push("inScope(event.item)"),r.length&&(e.filter=wk("("+r.join(")&&(")+")").$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Uk(e,t,n){var r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}function Ik(e,t,n){return oU=t||yU,uU=n||AU,Vk(e.trim()).map(Hk)}function Bk(e){return uU.hasOwnProperty(e)}function Wk(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Vk(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=Wk(e,i,MU,bU+xU,_U+wU),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function Hk(e){return"["===e[0]?Yk(e):Gk(e)}function Yk(e){var t,n,r=e.length,i=1;if(i=Wk(e,i,_U,bU,_U),i===r)throw"Empty between selector: "+e;if(t=Vk(e.substring(1,i)),2!==t.length)throw"Between selector must have two elements: "+e;if(e=e.slice(i+1).trim(),e[0]!==OU)throw"Expected '>' after between selector: "+e;return t=t.map(Hk),n=Hk(e.slice(1).trim()),n.between?{between:t,stream:n}:(n.between=t,n)}function Gk(e){var t,n,r={source:oU},i=[],a=[0,0],o=0,u=0,s=e.length,f=0;if(e[s-1]===wU){if(f=e.lastIndexOf(xU),!(f>=0))throw"Unmatched right brace: "+e;try{a=Xk(e.substring(f+1,s-1))}catch(l){throw"Invalid throttle specification: "+e}e=e.slice(0,f).trim(),s=e.length,f=0}if(!s)throw e;if(e[0]===EU&&(o=++f),t=Wk(e,f,kU),t<s&&(i.push(e.substring(u,t).trim()),u=f=++t),f=Wk(e,f,bU),f===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,f).trim()),n=[],u=++f,u===s)throw"Unmatched left bracket: "+e;for(;f<s;){if(f=Wk(e,f,_U),f===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,f).trim()),f<s-1&&e[++f]!==bU)throw"Expected left bracket: "+e;u=++f}if(!(s=i.length)||SU.test(i[s-1]))throw"Invalid event selector: "+e;return s>1?(r.type=i[1],o?r.markname=i[0].slice(1):Bk(i[0])?r.marktype=i[0]:r.source=i[0]):r.type=i[0],"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}function Xk(e){var t=e.split(MU);if(!e.length||t.length>2)throw e;return t.map(function(t){var n=+t;if(n!==n)throw e;return n})}function Zk(e,t,n){var r,i=e.events,a=e.update,u=e.encode,s=[],c="";i||o("Signal update missing events specification."),f(i)&&(i=Ik(i,t.isSubscope()?gU:mU)),i=S(i).filter(function(e){return e.signal||e.scale?(s.push(e),0):1}),i.length&&s.push(i.length>1?{merge:i}:i[0]),null!=u&&(a&&o("Signal encode and update are mutually exclusive."),a="encode(item(),"+l(u)+")"),c=f(a)?wk(a,t,CU):null!=a.expr?wk(a.expr,t,CU):null!=a.value?a.value:null!=a.signal?{$expr:"_.value",$params:{value:t.signalRef(a.signal)}}:o("Invalid signal update specification."),r={target:n,update:c},e.force&&(r.options={force:!0}),s.forEach(function(e){t.addUpdate(z(Jk(e,t),r))})}function Jk(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Pk(e,t)}}function Qk(e,t){var n=t.getSignal(e.name);if(e.update){var r=wk(e.update,t);n.update=r.$expr,n.params=r.$params}e.on&&e.on.forEach(function(e){Zk(e,t,n.id)})}function Kk(e){return function(t,n,r){return Mk(e,n,t||void 0,r)}}function eM(e){return uI.hasOwnProperty(e)}function tM(e){return aI.hasOwnProperty(e)}function nM(e){return oI.hasOwnProperty(e)}function rM(e){return"quantile"===e}function iM(e,t){var n=e.type||"linear";iI.hasOwnProperty(n)||o("Unrecognized scale type: "+l(n)),t.addScale(e.name,{type:n,domain:void 0})}function aM(e,t){var n,r=t.getScale(e.name).params;r.domain=fM(e.domain,e,t),null!=e.range&&(r.range=_M(e,t,r)),null!=e.interpolate&&bM(e.interpolate,r),null!=e.nice&&yM(e.nice,r);for(n in e)r.hasOwnProperty(n)||"name"===n||(r[n]=oM(e[n],t))}function oM(e,t){return s(e)?e.signal?t.signalRef(e.signal):o("Unsupported object: "+l(e)):e}function uM(e,t){return e.signal?t.signalRef(e.signal):e.map(function(e){return oM(e,t)})}function sM(e){o("Can not find data set: "+l(e))}function fM(e,t,n){return e?e.signal?n.signalRef(e.signal):(iS(e)?lM:e.fields?dM:cM)(e,t,n):void(null==t.domainMin&&null==t.domainMax||o("No scale domain defined for domainMin/domainMax to override."))}function lM(e,t,n){return e.map(function(e){return oM(e,n)})}function cM(e,t,n){var r=n.getData(e.data);return r||sM(e.data),eM(t.type)?r.valuesRef(n,e.field,gM(e.sort,!1)):rM(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function dM(e,t,n){var r=e.data,i=e.fields.reduce(function(e,t){return t=f(t)?{data:r,field:t}:iS(t)||t.signal?hM(t,n):t,e.push(t),e},[]);return(eM(t.type)?pM:rM(t.type)?mM:vM)(e,n,i)}function hM(e,t){var n="_:vega:_"+nI++,r=DU({});if(iS(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+l(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,QU({})]),{data:n,field:"data"}}function pM(e,t,n){var r,i,a,o;return r=n.map(function(e){var n=t.getData(e.data);return n||sM(e.data),n.countsRef(t,e.field)}),i=t.add(RU({groupby:dU,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:r})),a=t.add(DU({pulse:Ok(i)})),o=t.add(tI({field:dU,sort:t.sortRef(gM(e.sort,!0)),pulse:Ok(a)})),Ok(o)}function gM(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?o("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&o("Multiple domain scales support op count only."):o("No field provided for sort aggregate op: "+e.op):s(e)?e.field="key":e={field:"key"}),e}function mM(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||sM(e.data),n.domainRef(t,e.field)});return Ok(t.add(BU({values:r})))}function vM(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||sM(e.data),n.extentRef(t,e.field)});return Ok(t.add(IU({extents:r})))}function yM(e,t){t.nice=s(e)?{interval:oM(e.interval),step:oM(e.step)}:oM(e)}function bM(e,t){t.interpolate=oM(e.type||e),null!=e.gamma&&(t.interpolateGamma=oM(e.gamma))}function _M(e,t,n){var r=e.range,i=t.config.range;if(r.signal)return t.signalRef(r.signal);if(f(r)){if(i&&i.hasOwnProperty(r))return e=z({},e,{range:i[r]}),_M(e,t,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=eM(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:o("Unrecognized scale range value: "+l(r))}else{if(r.scheme)return n.scheme=oM(r.scheme,t),r.extent&&(n.schemeExtent=uM(r.extent,t)),void(r.count&&(n.schemeCount=oM(r.count,t)));if(r.step)return void(n.rangeStep=oM(r.step,t));if(eM(e.type)&&!iS(r))return fM(r,e,t);iS(r)||o("Unsupported range type: "+l(r))}return r.map(function(e){return oM(e,t)})}function xM(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=wM(e[r],r,t));t.addProjection(e.name,n)}function wM(e,t,n){return iS(e)?e.map(function(e){return wM(e,t,n)}):s(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:o("Unsupported parameter object: "+l(e)):e}function kM(e,t){var n="";return TI[t]?n:(e.x2&&(e.x?(zI[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(zI[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)}function MM(e,t,n,r){function i(e,i,a,o){var u=DM(null,i,t,n,r),s=DM(null,a,t,n,r),f=DM(null,o,t,n,r);return"this."+e+"("+[u,s,f].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null}function EM(e,t,n,r){var i=wk(e,t);return i.$fields.forEach(function(e){r[e]=1}),z(n,i.$params),i.$expr}function OM(e,t,n,r){return SM(s(e)?e:{datum:e},t,n,r)}function SM(e,t,n,r){var i,a,s;if(e.signal)i="datum",s=EM(e.signal,t,n,r);else if(e.group||e.parent){for(a=Math.max(1,e.level||1),i="item";a-- >0;)i+=".mark.group";e.parent?(s=e.parent,i+=".datum"):s=e.group}else e.datum?(i="datum",s=e.datum):o("Invalid field reference: "+l(e));return e.signal||(f(s)?(r[s]=1,s=u(s).map(l).join("][")):s=SM(s,t,n,r)),i+"["+s+"]"}function AM(e,t,n,r,i){var a,o,u,s=RM(e.scale,n,r,i);return null!=e.range?(a=+e.range,o=s+".range()",t=0===a?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=s+"("+t+")"),e.band&&(u=CM(e.scale,n))&&(o=s+".bandwidth",a=+e.band,a=o+"()"+(1===a?"":"*"+a),u<0&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+s+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t}function CM(e,t){if(!f(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}function RM(e,t,n,r){var i;if(f(e))i=VF+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=l(i);else{for(i in t.scales)n[VF+i]=t.scaleRef(i);i=l(VF)+"+"+(e.signal?"("+EM(e.signal,t,n,r)+")":OM(e,t,n,r))}return"_["+i+"]"}function TM(e,t,n,r){return"this.gradient("+RM(e.gradient,t,n,r)+","+l(e.start)+","+l(e.stop)+","+l(e.count)+")"}function zM(e,t,n,r){return s(e)?"("+DM(null,e,t,n,r)+")":e}function DM(e,t,n,r,i){if(null!=t.gradient)return TM(t,n,r,i);var a=t.signal?EM(t.signal,n,r,i):t.color?MM(t.color,n,r,i):null!=t.field?OM(t.field,n,r,i):void 0!==t.value?l(t.value):void 0;return null!=t.scale&&(a=AM(t,a,n,r,i)),void 0===a&&(a=null),null!=t.exponent&&(a="Math.pow("+a+","+zM(t.exponent,n,r,i)+")"),null!=t.mult&&(a+="*"+zM(t.mult,n,r,i)),null!=t.offset&&(a+="+"+zM(t.offset,n,r,i)),t.round&&(a="Math.round("+a+")"),a}function NM(e,t,n){return e+"["+l(t)+"]="+n+";"}function PM(e,t,n,r,i){var a="";return t.forEach(function(t){var o=DM(e,t,n,r,i);a+=t.test?EM(t.test,n,r,i)+"?"+o+":":o}),NM("o",e,a)}function $M(e,t,n,r){var i,a,o,u={},s="var o=item,datum=o.datum,$;";for(i in e)a=e[i],iS(a)?s+=PM(i,a,r,n,u):(o=DM(i,a,r,n,u),s+=NM("o",i,o));return s+=kM(e,t),s+="return 1;",{$expr:s,$fields:Object.keys(u),$output:Object.keys(e)}}function LM(e){return s(e)?z({},e):{value:e}}function qM(e,t,n){return null!=n?(e[t]=s(n)&&!iS(n)?n:{value:n},1):0}function jM(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=z(e[r]||{},t[r]));return e}function FM(e,t,n,r,i,a){var o,u;a=a||{},a.encoders={$encode:o={}},e=UM(e,t,n,r,i.config);for(u in e)o[u]=$M(e[u],t,a,i);return a}function UM(e,t,n,r,i){var a,o,u,s={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null),u=n===NI?i.group:n===DI?z({},i.mark,i[t]):null;for(a in u)o=BM(a,e)||("fill"===a||"stroke"===a)&&(BM("fill",e)||BM("stroke",e)),o||(s[a]=IM(u[a]));return S(r).forEach(function(t){var n=i.style&&i.style[t];for(var r in n)BM(r,e)||(s[r]=IM(n[r]))}),e=z({},e),e.enter=z(s,e.enter),e}function IM(e){return e&&e.signal?{signal:e.signal}:{value:e}}function BM(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function WM(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:jM(a,o,RI)}}function VM(e,t,n){return Dk(t[e],n[e])}function HM(e,t){return Dk(e.direction,t)===hI}function YM(e,t){return Dk(e.gradientLength,t.gradientLength||t.gradientWidth)}function GM(e,t){return Dk(e.gradientThickness,t.gradientThickness||t.gradientHeight)}function XM(e,t){return Dk(e.columns,Dk(t.columns,+HM(e,t.symbolDirection)))}function ZM(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function JM(e,t,n){var r=t.config.style[n];return r&&r[e]}function QM(e,t,n,r){var i,a,o,u,s,f,l={value:0},c=HM(e,n.gradientDirection),d=GM(e,n),h=YM(e,n),p={};return c?(o=[0,1],u=[0,0],s=d,f=h):(o=[0,0],u=[1,0],s=h,f=d),p.enter=i={opacity:l,x:l,y:l},qM(i,"stroke",VM("gradientStrokeColor",e,n)),qM(i,"strokeWidth",VM("gradientStrokeWidth",e,n)),p.exit={opacity:l},p.update=a={x:l,y:l,fill:{gradient:t,start:o,stop:u},opacity:{value:1}},i.width=a.width=LM(s),i.height=a.height=LM(f),WM(JI,VI,null,void 0,void 0,p,r)}function KM(e,t,n,r,i){var a,o,u,s,f,l,c={value:0},d=HM(e,n.gradientDirection),h=GM(e,n),p=YM(e,n),g={},m="";return d?(u="y",f="y2",s="x",l="width",m="1-"):(u="x",f="x2",s="y",l="height"),g.enter=a={opacity:c},qM(a,"stroke",VM("gradientStrokeColor",e,n)),qM(a,"strokeWidth",VM("gradientStrokeWidth",e,n)),g.exit={opacity:c},g.update=o={opacity:{value:1}},a.fill=o.fill={scale:t,field:wI},a[u]=o[u]={signal:m+"datum."+bI,mult:p},a[s]=o[s]={value:0},a[f]=o[f]={signal:m+"datum."+_I,mult:p},a[l]=o[l]=LM(h),WM(JI,BI,null,wI,i,g,r)}function eE(e,t,n,r){var i,a,o,u,s={value:0},f=HM(e,t.gradientDirection),l=LM(GM(e,t)),c=YM(e,t),d=VM("labelOverlap",e,t),h={},p="";return h.enter=i={opacity:s},qM(i,"fill",VM("labelColor",e,t)),qM(i,"font",VM("labelFont",e,t)),qM(i,"fontSize",VM("labelFontSize",e,t)),qM(i,"fontWeight",VM("labelFontWeight",e,t)),qM(i,"limit",Dk(e.labelLimit,t.gradientLabelLimit)),h.exit={opacity:s},h.update=a={opacity:{value:1},text:{field:vI}},f?(i.align={value:"left"},i.baseline=a.baseline={signal:nB},o="y",u="x",p="1-"):(i.align=a.align={signal:tB},i.baseline={value:"top"},o="x",u="y"),i[o]=a[o]={signal:p+"datum."+bI,mult:c},i[u]=a[u]=l,l.offset=Dk(e.labelOffset,t.gradientLabelOffset)||0,e=WM(eB,HI,kI,wI,r,h,n),d&&(e.overlap={method:d,order:"datum."+mI}),e}function tE(e,t,n,r,i,a,o,u){return{type:ZI,name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:u}}function nE(e,t,n,r,i){var a,o,u,s,f,l,c,d=n.entries,h=!(!d||!d.interactive),p=d?d.name:void 0,g=VM("clipHeight",e,t),m=VM("symbolOffset",e,t),v={data:"value"},y={},b=i+"?datum."+yI+":datum."+xI,_=g?LM(g):{field:xI},x="datum."+mI,w="max(1,"+i+")";return y={enter:a={opacity:rB},exit:{opacity:rB},update:o={opacity:{value:1}}},e.fill||(qM(a,"fill",t.symbolBaseFillColor),qM(a,"stroke",t.symbolBaseStrokeColor)),qM(a,"shape",VM("symbolType",e,t)),qM(a,"size",VM("symbolSize",e,t)),qM(a,"strokeWidth",VM("symbolStrokeWidth",e,t)),qM(a,"fill",VM("symbolFillColor",e,t)),qM(a,"stroke",VM("symbolStrokeColor",e,t)),a.x=o.x={signal:b,mult:.5,offset:m},_.mult=.5,a.y=o.y=_,CI.forEach(function(t){e[t]&&(o[t]=a[t]={scale:e[t],field:wI})}),s=WM(KI,YI,null,wI,v,y,n.symbols),g&&(s.clip=!0),y={enter:a={opacity:rB},exit:{opacity:rB},update:o={opacity:{value:1},text:{field:vI}}},qM(a,"align",VM("labelAlign",e,t)),qM(a,"baseline",VM("labelBaseline",e,t)),qM(a,"fill",VM("labelColor",e,t)),qM(a,"font",VM("labelFont",e,t)),qM(a,"fontSize",VM("labelFontSize",e,t)),qM(a,"fontWeight",VM("labelFontWeight",e,t)),qM(a,"limit",VM("labelLimit",e,t)),u=LM(m),u.offset=VM("labelOffset",e,t),a.x=o.x={signal:b,offset:u},a.y=o.y=_,f=WM(eB,HI,kI,wI,v,y,n.labels),y={enter:{width:rB,height:g?LM(g):rB,opacity:rB},exit:{opacity:rB},update:o={opacity:{value:1},row:{signal:null},column:{signal:null}}},HM(e,t.symbolDirection)?(l="ceil(item.mark.items.length/"+w+")",o.row.signal=x+"%"+l,o.column.signal="floor("+x+"/"+l+")",c={field:["row",x]}):(o.row.signal="floor("+x+"/"+w+")",o.column.signal=x+"%"+w,c={field:x}),o.column.signal=i+"?"+o.column.signal+":"+x,r={facet:{data:r,name:"value",groupby:mI}},e=tE(PI,null,p,r,h,jM(y,d,RI),[s,f]),e.sort=c,e}function rE(e,t){return{align:VM("gridAlign",e,t),center:{row:!0,column:!1},columns:XM(e,t),padding:{row:VM("rowPadding",e,t),column:VM("columnPadding",e,t)}}}function iE(e,t,n,r){var i,a={value:0},o={};return o.enter=i={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:a},qM(i,"align",VM("titleAlign",e,t)),qM(i,"baseline",VM("titleBaseline",e,t)),qM(i,"fill",VM("titleColor",e,t)),qM(i,"font",VM("titleFont",e,t)),qM(i,"fontSize",VM("titleFontSize",e,t)),qM(i,"fontWeight",VM("titleFontWeight",e,t)),qM(i,"limit",VM("titleLimit",e,t)),o.exit={opacity:a},o.update={opacity:{value:1},text:LM(e.title)},WM(eB,GI,MI,null,r,o,n)}function aE(e,t){var n;return s(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+oE(e.path)+")":e.sphere&&(n="geoShape("+oE(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function oE(e){return s(e)&&e.signal?e.signal:l(e)}function uE(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===ZI?PI:t||DI:t}function sE(e){return{marktype:e.type,name:e.name||void 0,role:e.role||uE(e),zindex:+e.zindex||void 0}}function fE(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function lE(e,t){var n=Wn(e.type);n||o("Unrecognized transform type: "+l(e.type));var r=Mk(n.type.toLowerCase(),null,cE(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function cE(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)r=e.params[i],o[r.name]=dE(r,t,n);return o}function dE(e,t,n){var r=e.type,i=t[e.name];return"index"===r?pE(e,t,n):void 0===i?void(e.required&&o("Missing required "+l(t.type)+" parameter: "+l(e.name))):"param"===r?gE(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!zk(i)?i.map(function(t){return hE(e,t,n)}):hE(e,i,n)}function hE(e,t,n){var r=e.type;if(zk(t))return _E(r)?o("Expression references can not be signals."):xE(r)?n.fieldRef(t):wE(r)?n.compareRef(t):n.signalRef(t.signal);var i=e.expr||xE(r);return i&&vE(t)?wk(t.expr,n):i&&yE(t)?Sk(t.field):_E(r)?wk(t,n):bE(r)?Ok(n.getData(t).values):xE(r)?Sk(t):wE(r)?n.compareRef(t):t}function pE(e,t,n){return f(t.from)||o('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function gE(e,t,n){var r=t[e.name];return e.array?(iS(r)||o("Expected an array of sub-parameters. Instead: "+l(r)),r.map(function(t){return mE(e,t,n)})):mE(e,r,n)}function mE(e,t,n){var r,i,a,u,s;for(u=0,s=e.params.length;u<s;++u){i=e.params[u];for(a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||o("Unsupported parameter: "+l(t)),r=z(cE(i,t,n),i.key),Ok(n.add(VU(r)))}function vE(e){return e&&e.expr}function yE(e){return e&&e.field}function bE(e){return"data"===e}function _E(e){return"expr"===e}function xE(e){return"field"===e}function wE(e){return"compare"===e}function kE(e,t,n){var r,i,a,u,s;return e?(r=e.facet)&&(t||o("Only group marks can be faceted."),null!=r.field?u=s=ME(r,n):(e.data?s=Ok(n.getData(e.data).aggregate):(a=lE(z({type:"aggregate",groupby:S(r.groupby)},r.aggregate),n),a.params.key=n.keyRef(r.groupby),a.params.pulse=ME(r,n),u=s=Ok(n.add(a))),i=n.keyRef(r.groupby,!0))):u=Ok(n.add(DU(null,[{}]))),u||(u=ME(e,n)),{key:i,pulse:u,parent:s}}function ME(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ok(t.getData(e.data).output);
}function EE(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function OE(e){return f(e)?e:null}function SE(e,t,n){var r,i=Tk(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function AE(e,t,n,r,i,a,o){var u,s,f=t[n]||(t[n]={}),l=Rk(a),c=OE(i);if(null!=c&&(e=t.scope,c+=l?"|"+l:"",u=f[c]),!u){var d=a?{field:dU,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:Ok(t.output)};l&&(d.sort=e.sortRef(a)),s=e.add(Mk(r,void 0,d)),o&&(t.index[i]=s),u=Ok(s),null!=c&&(f[c]=u)}return u}function CE(e,t,n){var r,i,a,u,s=e.from.facet,f=s.name,c=ME(s,t);s.name||o("Facet must have a name: "+l(s)),s.data||o("Facet must reference a data set: "+l(s)),s.field?u=t.add(HU({field:t.fieldRef(s.field),pulse:c})):s.groupby?u=t.add(LU({key:t.keyRef(s.groupby),group:Ok(t.proxy(n.parent)),pulse:c})):o("Facet must specify groupby or field: "+l(s)),r=t.fork(),i=r.add(DU()),a=r.add(QU({pulse:Ok(i)})),r.addData(f,new EE(r,i,i,a)),r.addSignal("parent",null),u.params.subflow={$subflow:eO(e,r).toRuntime()}}function RE(e,t,n){var r=t.add(HU({pulse:n.pulse})),i=t.fork();i.add(QU()),i.addSignal("parent",null),r.params.subflow={$subflow:eO(e,i).toRuntime()}}function TE(e,t,n){var r,i,a=e.remove,o=e.insert,u=e.toggle,s=e.modify,f=e.values,l=t.add(Ek());r="if("+e.trigger+',modify("'+n+'",'+[o,a,u,s,f].map(function(e){return null==e?"null":e}).join(",")+"),0)",i=wk(r,t),l.update=i.$expr,l.params=i.$params}function zE(e,t){var n,r,i,a,u,s,f,l,c,d,h,p,g,m=uE(e),v=e.type===ZI,y=e.from&&e.from.facet,b=e.layout||m===PI||m===NI,_=m===DI||b||y,x=e.overlap;i=kE(e.from,v,t),r=t.add(PU({key:i.key||(e.key?Sk(e.key):void 0),pulse:i.pulse,clean:!v})),c=Ok(r),r=a=t.add(DU({pulse:c})),r=t.add(UU({markdef:sE(e),interactive:fE(e.interactive,t),clip:aE(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ok(r)})),d=Ok(r),r=t.add($U(FM(e.encode,e.type,m,e.style,t,{pulse:d}))),r.params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=lE(e,t);(n.metadata.generates||n.metadata.changes)&&o("Mark transforms should not generate new data."),n.params.pulse=Ok(r),t.add(r=n)}),e.sort&&(r=t.add(KU({sort:t.compareRef(e.sort,!0),pulse:Ok(r)}))),h=Ok(r),(y||b)&&(b=t.add(eI({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:d,pulse:h})),p=Ok(b)),u=t.add(zU({mark:d,pulse:p||h})),g=Ok(u),v&&(_&&(n=t.operators,n.pop(),b&&n.pop()),t.pushState(h,p||g,c),y?CE(e,t,i):_?RE(e,t,i):eO(e,t),t.popState(),_&&(b&&n.push(b),n.push(u))),x&&(r={method:x.method===!0?"parity":x.method,pulse:g},x.order&&(r.sort=t.compareRef({field:x.order})),x.bound&&(r.boundScale=t.scaleRef(x.bound.scale),r.boundOrient=x.bound.orient,r.boundTolerance=x.bound.tolerance),g=Ok(t.add(WU(r)))),s=t.add(ZU({pulse:g})),f=t.add(QU({pulse:Ok(s)},void 0,t.parent())),null!=e.name&&(l=e.name,t.addData(l,new EE(t,a,s,f)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&o("Marks only support modify triggers."),TE(e,t,l)}))}function DE(e,t){var n,r,i,a,u,s,f,l,c,d=t.config.legend,h=e.encode||{},p=h.legend||{},g=p.name||void 0,m=p.interactive,v=p.style,y=CI.reduce(function(t,n){return t||e[n]},0);return y||o("Missing valid scale for legend."),u=NE(e,t.scaleType(y)),s={orient:VM("orient",e,d),title:null!=e.title,type:u},f=Ok(t.add(DU(null,[s]))),p=jM({enter:$E(e,d),update:{offset:LM(VM("offset",e,d)),padding:LM(VM("padding",e,d)),titlePadding:LM(VM("titlePadding",e,d))}},p,RI),n={enter:{x:{value:0},y:{value:0}}},l=Ok(t.add(FU(i={type:u,scale:t.scaleRef(y),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u===SI?(a=[QM(e,y,d,h.gradient),eE(e,d,h.labels,l)],i.count=i.count||t.signalRef("max(2,2*floor(("+Nk(YM(e,d))+")/100))")):u===AI?a=[KM(e,y,d,h.gradient,l),eE(e,d,h.labels,l)]:(r=rE(e,d),a=[nE(e,d,h,l,Nk(r.columns))],i.size=LE(e,t,a[0].marks)),a=[tE(WI,null,null,f,m,n,a,r)],s.title&&a.push(iE(e,d,h.title,f)),c=tE(II,v,g,f,m,p,a),e.zindex&&(c.zindex=e.zindex),zE(c,t)}function NE(e,t){var n=e.type||OI;return e.type||1!==PE(e)||!e.fill&&!e.stroke||(n=nM(t)?SI:tM(t)?AI:OI),n!==SI?n:tM(t)?AI:SI}function PE(e){return CI.reduce(function(t,n){return t+(e[n]?1:0)},0)}function $E(e,t){var n={},r=qM(n,"fill",VM("fillColor",e,t))+qM(n,"stroke",VM("strokeColor",e,t))+qM(n,"strokeWidth",VM("strokeWidth",e,t))+qM(n,"cornerRadius",VM("cornerRadius",e,t))+qM(n,"strokeDash",t.strokeDash);return r?n:void 0}function LE(e,t,n){var r,i,a,o;return a=ZM("strokeWidth",n[0].encode),i=e.size?'scale("'+e.size+'",datum)':ZM("size",n[0].encode,t),r=qE(n[1].encode,t,kI),o="max(ceil(sqrt("+Nk(i)+")+"+Nk(a)+"),"+Nk(r)+")",wk(o,t)}function qE(e,t,n){return ZM("fontSize",e)||JM("fontSize",t,n)}function jE(e,t,n){return'item.anchor==="'+pI+'"?'+e+':item.anchor==="'+gI+'"?'+t+":"+n}function FE(e,t){e=f(e)?{text:e}:e;var n,r,i,a=t.config.title,o=z({},e.encode);return n={orient:VM("orient",e,a)},r=Ok(t.add(DU(null,[n]))),o.name=e.name,o.interactive=e.interactive,i=UE(e,a,o,r),e.zindex&&(i.zindex=e.zindex),zE(i,t)}function UE(e,t,n,r){var i,a,o,u,s={value:0},f=e.text,l=VM("orient",e,t),c=VM("anchor",e,t),d=l===fI||l===sI?-1:1,h=l===sI||l===cI,p={group:h?"width":"height"},g={};return o={field:p,mult:{signal:oB}},u=d<0?s:h?{field:{group:"height"}}:{field:{group:"width"}},g.enter=i={opacity:s},qM(i,"fill",VM("color",e,t)),qM(i,"font",VM("font",e,t)),qM(i,"fontSize",VM("fontSize",e,t)),qM(i,"fontWeight",VM("fontWeight",e,t)),g.exit={opacity:s},g.update=a={opacity:{value:1},text:LM(f),anchor:LM(c),orient:LM(l),extent:{field:p},align:{signal:aB}},h?(a.x=o,a.y=u,a.angle=s,a.baseline={value:l===sI?cI:sI}):(a.x=u,a.y=o,a.angle={value:90*d},a.baseline={value:cI}),qM(a,"offset",VM("offset",e,t)||0),qM(a,"frame",VM("frame",e,t)),qM(a,"angle",VM("angle",e,t)),qM(a,"baseline",VM("baseline",e,t)),qM(a,"limit",VM("limit",e,t)),WM(eB,XI,e.style||EI,null,r,g,n)}function IE(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(lE(e,t))}),e.on&&e.on.forEach(function(n){TE(n,t,e.name)}),t.addDataPipeline(e.name,BE(e,t,n))}function BE(e,t,n){var r,i,a,o,u,s=[],f=null,l=!1,c=!1;for(e.values?s.push(f=WE({$ingest:e.values,$format:e.format})):e.url?s.push(f=WE({$request:e.url,$format:e.format})):e.source&&(f=r=S(e.source).map(function(e){return Ok(t.getData(e).output)}),s.push(null)),i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,f||u.source||s.push(f=WE()),s.push(o),u.generates&&(c=!0),u.modifies&&!c&&(l=!0),u.source?f=o:u.changes&&(f=null);return r&&(a=r.length-1,s[0]=XU({derive:l,pulse:a?r:r[0]}),(l||a)&&s.splice(1,0,WE())),f||s.push(WE()),s.push(QU({})),s}function WE(e){var t=DU({},e);return t.metadata={source:!0},t}function VE(e,t){var n=t.config,r=e.orient,i=r===sI||r===cI?n.axisX:n.axisY,a=n["axis"+r[0].toUpperCase()+r.slice(1)],o="band"===t.scaleType(e.scale)&&n.axisBand;return i||a||o?z({},n.axis,i,a,o):n.axis}function HE(e,t,n,r){var i,a,o,u,s,f=e.orient,l={value:0},c={};return c.enter=i={opacity:l},qM(i,"stroke",VM("domainColor",e,t)),qM(i,"strokeWidth",VM("domainWidth",e,t)),c.exit={opacity:l},c.update=a={opacity:{value:1}},f===sI||f===cI?(o="x",s="y"):(o="y",s="x"),u=o+"2",i[s]=l,a[o]=i[o]=YE(e,0),a[u]=i[u]=YE(e,1),WM(QI,LI,null,null,r,c,n)}function YE(e,t){return{scale:e.scale,range:t}}function GE(e,t,n,r){var i,a,o,u,s,f,l,c,d=e.orient,h=e.gridScale,p=d===fI||d===sI?1:-1,g=p*e.offset||0,m={value:0},v={};return v.enter=i={opacity:m},qM(i,"stroke",VM("gridColor",e,t)),qM(i,"strokeWidth",VM("gridWidth",e,t)),qM(i,"strokeDash",VM("gridDash",e,t)),v.exit=a={opacity:m},v.update=o={},qM(o,"opacity",VM("gridOpacity",e,t)),u={scale:e.scale,field:wI,band:VM("bandPosition",e,t),round:VM("tickRound",e,t),extra:VM("tickExtra",e,t),offset:VM("tickOffset",e,t)},d===sI||d===cI?(s="x",f="y",c="height"):(s="y",f="x",c="width"),l=f+"2",o[s]=i[s]=a[s]=u,h?(i[f]={scale:h,range:0,mult:p,offset:g},o[l]=i[l]={scale:h,range:1,mult:p,offset:g}):(i[f]={value:g},o[l]=i[l]={signal:c,mult:p,offset:g}),WM(QI,qI,null,wI,r,v,n)}function XE(e,t,n,r,i){var a,o,u,s,f,l=e.orient,c=l===fI||l===sI?-1:1,d={value:0},h={};return h.enter=a={opacity:d},qM(a,"stroke",VM("tickColor",e,t)),qM(a,"strokeWidth",VM("tickWidth",e,t)),h.exit=o={opacity:d},h.update=u={opacity:{value:1}},s=LM(i),s.mult=c,f={scale:e.scale,field:wI,band:VM("bandPosition",e,t),round:VM("tickRound",e,t),extra:VM("tickExtra",e,t),offset:VM("tickOffset",e,t)},l===sI||l===cI?(u.y=a.y=d,u.y2=a.y2=s,u.x=a.x=o.x=f):(u.x=a.x=d,u.x2=a.x2=s,u.y=a.y=o.y=f),WM(QI,FI,null,wI,r,h,n)}function ZE(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function JE(e,t,n,r,i){var a,o,u,s,f,l=e.orient,c=l===fI||l===sI?-1:1,d=e.scale,h=VM("labelBound",e,t),p=VM("labelFlush",e,t),g=null!=p&&p!==!1&&(p=+p)===p,m=+VM("labelFlushOffset",e,t),v=VM("labelOverlap",e,t),y={value:0},b={};return b.enter=a={opacity:y},qM(a,"angle",VM("labelAngle",e,t)),qM(a,"fill",VM("labelColor",e,t)),qM(a,"font",VM("labelFont",e,t)),qM(a,"fontSize",VM("labelFontSize",e,t)),qM(a,"fontWeight",VM("labelFontWeight",e,t)),qM(a,"limit",VM("labelLimit",e,t)),b.exit=o={opacity:y},b.update=u={opacity:{value:1},text:{field:vI}},s=LM(i),s.mult=c,s.offset=LM(VM("labelPadding",e,t)||0),s.offset.mult=c,f={scale:d,field:wI,band:.5,offset:VM("tickOffset",e,t)},l===sI||l===cI?(u.y=a.y=s,u.x=a.x=o.x=f,qM(u,"align",g?ZE(d,p,'"left"','"right"','"center"'):"center"),g&&m&&qM(u,"dx",ZE(d,p,-m,m,0)),qM(u,"baseline",l===sI?"bottom":"top")):(u.x=a.x=s,u.y=a.y=o.y=f,qM(u,"align",l===lI?"left":"right"),qM(u,"baseline",g?ZE(d,p,'"bottom"','"top"','"middle"'):"middle"),g&&m&&qM(u,"dy",ZE(d,p,m,-m,0))),e=WM(eB,jI,kI,wI,r,b,n),(v||h)&&(e.overlap={method:v,order:"datum.index",bound:h?{scale:d,orient:l,tolerance:+h}:null}),e}function QE(e,t,n,r){var i,a,o,u=e.orient,s=u===fI||u===sI?-1:1,f=u===sI||u===cI,l={};return l.enter=i={opacity:{value:0}},qM(i,"align",VM("titleAlign",e,t)),qM(i,"fill",VM("titleColor",e,t)),qM(i,"font",VM("titleFont",e,t)),qM(i,"fontSize",VM("titleFontSize",e,t)),qM(i,"fontWeight",VM("titleFontWeight",e,t)),qM(i,"limit",VM("titleLimit",e,t)),l.exit={opacity:{value:0}},l.update=a={opacity:{value:1},text:LM(e.title)},o={scale:e.scale,range:.5},f?(a.x=o,a.angle={value:0},a.baseline={value:u===sI?"bottom":"top"}):(a.y=o,a.angle={value:90*s},a.baseline={value:"bottom"}),qM(a,"angle",VM("titleAngle",e,t)),qM(a,"baseline",VM("titleBaseline",e,t)),!qM(a,"x",VM("titleX",e,t))&&f&&!BM("x",n)&&(l.enter.auto={value:!0}),!qM(a,"y",VM("titleY",e,t))&&!f&&!BM("y",n)&&(l.enter.auto={value:!0}),WM(eB,UI,MI,null,r,l,n)}function KE(e,t){var n,r,i,a,o,u,s=VE(e,t),f=e.encode||{},l=f.axis||{},c=l.name||void 0,d=l.interactive,h=l.style;return n={orient:e.orient,ticks:!!VM("ticks",e,s),labels:!!VM("labels",e,s),grid:!!VM("grid",e,s),domain:!!VM("domain",e,s),title:!!Dk(e.title,!1)},r=Ok(t.add(DU({},[n]))),l=jM({update:{range:{signal:'abs(span(range("'+e.scale+'")))'},offset:LM(Dk(e.offset,0)),position:LM(Dk(e.position,0)),titlePadding:LM(VM("titlePadding",e,s)),minExtent:LM(VM("minExtent",e,s)),maxExtent:LM(VM("maxExtent",e,s))}},f.axis,RI),i=Ok(t.add(TU({scale:t.scaleRef(e.scale),extra:t.property(VM("tickExtra",e,s)),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u=[],n.grid&&u.push(GE(e,s,f.grid,i)),n.ticks&&(a=VM("tickSize",e,s),u.push(XE(e,s,f.ticks,i,a))),n.labels&&(a=n.ticks?a:0,u.push(JE(e,s,f.labels,i,a))),n.domain&&u.push(HE(e,s,f.domain,r)),n.title&&u.push(QE(e,s,f.title,r)),o=tE($I,h,c,r,d,l,u),e.zindex&&(o.zindex=e.zindex),zE(o,t)}function eO(e,t,n){var r=S(e.signals),i=S(e.scales);return n||r.forEach(function(e){X_(e,t)}),S(e.projections).forEach(function(e){xM(e,t)}),i.forEach(function(e){iM(e,t)}),S(e.data).forEach(function(e){IE(e,t)}),i.forEach(function(e){aM(e,t)}),r.forEach(function(e){Qk(e,t)}),S(e.axes).forEach(function(e){KE(e,t)}),S(e.marks).forEach(function(e){zE(e,t)}),S(e.legends).forEach(function(e){DE(e,t)}),e.title&&FE(e.title,t),t.parseLambdas(),t}function tO(e,t){var n,r,i,a,o,u=t.config;return t.background=e.background||u.background,t.eventConfig=u.events,o=Ok(t.root=t.add(Ek())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",V_(e.padding,u)),t.addSignal("autosize",W_(e.autosize,u)),S(e.signals).forEach(function(e){uB[e.name]||X_(e,t)}),r=t.add(DU()),i=jM({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add($U(FM(i,ZI,NI,e.style,t,{pulse:Ok(r)}))),a=t.add(eI({layout:t.objectProperty(e.layout),legendMargin:u.legendMargin,autosize:t.signalRef("autosize"),mark:o,pulse:Ok(i)})),t.operators.pop(),t.pushState(Ok(i),Ok(a),null),eO(e,t,!0),t.operators.push(a),n=t.add(zU({mark:o,pulse:Ok(a)})),n=t.add(ZU({pulse:Ok(n)})),n=t.add(QU({pulse:Ok(n)})),t.addData("root",new EE(t,r,r,n)),t}function nO(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function rO(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function iO(e){return(iS(e)?aO:oO)(e)}function aO(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(r>0?",":"")+(s(t)?t.signal||iO(t):l(t));return n+"]"}function oO(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+l(t)+":"+(s(n)?n.signal||iO(n):l(n));return r+"}"}function uO(e){var t=sO();return(e||[]).forEach(function(e){var n,r,i;if(e)for(n in e)if("style"===n){i=t.style||(t.style={});for(n in e.style)i[n]=z(i[n]||{},e.style[n])}else r=e[n],t[n]=s(r)&&!iS(r)?z(s(t[n])?t[n]:{},r):r}),t}function sO(){return{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:dB},area:{fill:dB},image:null,line:{stroke:dB,strokeWidth:cB},path:{stroke:dB},rect:{fill:dB},rule:{stroke:hB},shape:{stroke:dB},symbol:{fill:dB,size:64},text:{fill:hB,font:fB,fontSize:11},style:{"guide-label":{fill:hB,font:fB,fontSize:10},"guide-title":{fill:hB,font:fB,fontSize:11,fontWeight:"bold"},"group-title":{fill:hB,font:fB,fontSize:13,fontWeight:"bold"},point:{size:lB,strokeWidth:cB,shape:"circle"},circle:{size:lB,strokeWidth:cB},square:{size:lB,strokeWidth:cB,shape:"square"},cell:{fill:"transparent",stroke:gB}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:pB,grid:!1,gridWidth:1,gridColor:gB,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:pB,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:gB,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:pB,titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function fO(e,t){return s(e)||o("Input Vega specification must be an object."),tO(e,new nO(uO([t,e.config]))).toRuntime()}function lO(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function cO(e,t){return lO(["_"],e,t)}function dO(e,t){return lO(["datum","_"],e,t)}function hO(e,t){return lO(["event"],e,t)}function pO(e,t){return lO(["_","event"],e,t)}function gO(e,t){return lO(["item","_"],e,t)}function mO(e,t,n){n=n||{};var r,i;for(r in e)i=e[r],i&&i.$expr&&i.$params&&mO(i.$params,t,n),n[r]=iS(i)?i.map(function(e){return vO(e,t)}):vO(i,t);return n}function vO(e,t){if(!e||!s(e))return e;for(var n,r=0,i=mB.length;r<i;++r)if(n=mB[r],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function yO(e,t){return t.get(e.$ref)||o("Operator not defined: "+e.$ref)}function bO(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=r(dO(e.$expr,t),e.$fields,e.$name))}function _O(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=F(e.$key,e.$flat))}function xO(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=c(e.$field,e.$name))}function wO(e,t){var n="c:"+e.$compare+"_"+e.$order,r=S(e.$compare).map(function(e){return e&&e.$tupleid?K:e});return t.fn[n]||(t.fn[n]=C(r,e.$order))}function kO(e,t){var n,i,a=e.$encode,o={};for(n in a)i=a[n],o[n]=r(gO(i.$expr,t),i.$fields),o[n].output=i.$output;return o}function MO(e,t){return t}function EO(e,t){var n=e.$subflow;return function(e,r,i){var a=NO(n,t.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}function OO(){return K}function SO(e){return(e+"").toLowerCase()}function AO(e){return"operator"===SO(e)}function CO(e){return"collect"===SO(e)}function RO(e,t){AO(e.type)||!e.type?t.operator(e,e.update?cO(e.update,t):null):t.transform(e,e.type)}function TO(e,t){var n,r;e.params&&((n=t.get(e.id))||o("Invalid operator id: "+e.id),r=mO(e.params,t),t.dataflow.connect(n,n.parameters(r)))}function zO(e,t){var n,r=null!=e.filter?hO(e.filter,t):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,r):e.merge&&(n=e.merge.map(t.get.bind(t)),i=n[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(t.get.bind(t)),i=i.between(n[0],n[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&o("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function DO(e,t){var n=s(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,u=void 0;r||o("Source not defined: "+e.source),i=e.target&&e.target.$expr?hO(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(u=mO(a.$params,t)),a=pO(a.$expr,t)),t.update(e,r,i,a,u)}function NO(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){RO(e,t)}),n.forEach(function(e){TO(e,t)}),(e.streams||[]).forEach(function(e){zO(e,t)}),(e.updates||[]).forEach(function(e){DO(e,t)}),t.resolve()}function PO(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n}function $O(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(function(e){n.update(t.signals[e],i[e],vB)}),Object.keys(r||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(lS).insert(r[e]))}),(e.subcontext||[]).forEach(function(e,n){var r=t.subcontext[n];r&&r.setState(e)})}function LO(e,t,n){return new qO(e,t,n)}function qO(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function jO(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function FO(e,t,n){var r=n||tU;return NO(t,LO(e,FA,r))}function UO(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===_B?r.left+r.right:0)}function IO(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===_B?r.top+r.bottom:0)}function BO(e){function t(){e._autosize=e._resize=1}var n=e._signals,r=n[yB],i=n[bB],a=n[_B];e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=UO(e,n.size),t()},{size:r}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=IO(e,n.size),t()},{size:i});var o=e.add(null,t,{pad:a});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}function WO(e,t,n,r,i,a){this.runAfter(function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(yB,n,xB),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(bB,r,xB),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter(function(){o.resize()})},!1,1)}function VO(e){return this._runtime.getState(e||{data:HO,signals:YO,recurse:!0})}function HO(e,t){return t.modified&&iS(t.input.value)&&e.indexOf("_:vega:_")}function YO(e,t){return!("parent"===e||t instanceof FA.proxy)}function GO(e){var t=this;return t.runAfter(function(){t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0})}),this}function XO(e,t){function n(t){e({timestamp:Date.now(),elapsed:t})}this._timers.push(cv(n,t))}function ZO(e,t,n,r){var i=e.element();i&&i.setAttribute("title",JO(r))}function JO(e){return null==e?"":iS(e)?KO(e):s(e)&&!L(e)?QO(e):e+""}function QO(e){return Object.keys(e).map(function(t){var n=e[t];return t+": "+(iS(n)?KO(n):eS(n))}).join("\n")}function KO(e){return"["+e.map(eS).join(", ")+"]"}function eS(e){return iS(e)?"[]":s(e)&&!L(e)?"{}":e}function tS(e,t){var n=this;t=t||{},Un.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||dz.Canvas,n._scenegraph=new Ku;var r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||ZO,n._redraw=!0,n._handler=(new cs).scene(r),n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[];var i=FO(n,e,t.functions);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:z({},e)}}),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._background=i.background||null,n._eventConfig=v_(i.eventConfig),n._width=n.width(),n._height=n.height(),n._viewWidth=UO(n,n._width),n._viewHeight=IO(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,BO(n),i_(n)}function nS(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:o("Unrecognized signal name: "+l(t))}function rS(e,t){var n=e._targets||[],r=n.filter(function(e){var n=e._update;return n&&n.handler===t});return r.length?r[0]:null}var iS=Array.isArray,aS=[],oS=c("id"),uS=r(function(e){return e},aS,"identity"),sS=r(function(){return 0},aS,"zero"),fS=r(function(){return 1},aS,"one"),lS=r(function(){return!0},aS,"true"),cS=r(function(){return!1},aS,"false"),dS=0,hS=1,pS=2,gS=3,mS=4,vS={},yS=Symbol("vega_id"),bS=1,_S="_:mod:_",xS=ue.prototype;xS.set=function(e,t,n,r){var i=this,a=i[e],o=i[_S];return null!=t&&t>=0?(a[t]!==n||r)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||r)&&(i[e]=n,o[e]=iS(n)?1+n.length:-1),i},xS.modified=function(e,t){var n,r=this[_S];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(iS(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&t>=0?t+1<r[e]||!!r[t+":"+e]:!!r[e]},xS.clear=function(){return this[_S]={},this};var wS=0,kS="pulse",MS=new ue,ES=1,OS=2,SS=se.prototype;SS.targets=function(){return this._targets||(this._targets=J(oS))},SS.set=function(e){return this.value!==e?(this.value=e,1):0},SS.skip=fe(ES),SS.modified=fe(OS),SS.parameters=function(e,t){function n(e,n,r){r instanceof se?(r!==s&&(t&&r.targets().add(s),c.push(r)),l.push({op:r,name:e,index:n})):f.set(e,n,r)}t=t!==!1;var r,i,a,u,s=this,f=s._argval=s._argval||new ue,l=s._argops=s._argops||[],c=[];for(r in e)if(i=e[r],r===kS)S(i).forEach(function(e){e instanceof se?e!==s&&(e.targets().add(s),c.push(e)):o("Pulse parameters must be operator instances.")}),s.source=i;else if(iS(i))for(f.set(r,-1,Array(a=i.length)),u=0;u<a;++u)n(r,u,i[u]);else n(r,-1,i);return this.marshall().clear(),c},SS.marshall=function(e){var t,n,r,i,a,o=this._argval||MS,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)t=u[n],i=t.op,a=i.modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);return o},SS.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},SS.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,this.pulse=t,t||e};var AS=0,CS=de.prototype;CS._filter=lS,CS._apply=uS,CS.targets=function(){return this._targets||(this._targets=J(oS))},CS.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},CS.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},CS.filter=function(e){var t=he(e);return this.targets().add(t),t},CS.apply=function(e){var t=he(null,e);return this.targets().add(t),t},CS.merge=function(){var e=he();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},CS.throttle=function(e){var t=-1;return this.filter(function(){var n=Date.now();return n-t>e?(t=n,1):0})},CS.debounce=function(e){var t=he();return this.targets().add(he(null,null,T(e,function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()}))),t},CS.between=function(e,t){var n=!1;return e.targets().add(he(null,null,function(){n=!0})),t.targets().add(he(null,null,function(){n=!1})),this.filter(function(){return n})};var RS=/^([A-Za-z]+:)?\/\//,TS="file://",zS={boolean:W,integer:g,number:g,date:H,string:Y,unknown:uS},DS=[Oe,Ce,Ae,Se],NS=["boolean","integer","number","date"],PS={},$S={},LS=34,qS=10,jS=13,FS=(De(","),De("\t"),{dsv:Pe,csv:Ne(","),tsv:Ne("\t"),json:Le,topojson:Xe}),US=new Date,IS=new Date,BS=Je(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});BS.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Je(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):BS:null};var WS=1e3,VS=6e4,HS=36e5,YS=864e5,GS=6048e5,XS=Je(function(e){e.setTime(Math.floor(e/WS)*WS)},function(e,t){e.setTime(+e+t*WS)},function(e,t){return(t-e)/WS},function(e){return e.getUTCSeconds()}),ZS=Je(function(e){e.setTime(Math.floor(e/VS)*VS)},function(e,t){e.setTime(+e+t*VS)},function(e,t){return(t-e)/VS},function(e){return e.getMinutes()}),JS=Je(function(e){var t=e.getTimezoneOffset()*VS%HS;t<0&&(t+=HS),e.setTime(Math.floor((+e-t)/HS)*HS+t)},function(e,t){e.setTime(+e+t*HS)},function(e,t){return(t-e)/HS},function(e){return e.getHours()}),QS=Je(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*VS)/YS},function(e){return e.getDate()-1}),KS=Qe(0),eA=Qe(1),tA=(Qe(2),Qe(3),Qe(4)),nA=(Qe(5),Qe(6),Je(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),rA=Je(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});rA.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Je(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var iA=Je(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*VS)},function(e,t){return(t-e)/VS},function(e){return e.getUTCMinutes()}),aA=Je(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*HS)},function(e,t){return(t-e)/HS},function(e){return e.getUTCHours()}),oA=Je(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/YS},function(e){return e.getUTCDate()-1}),uA=Ke(0),sA=Ke(1),fA=(Ke(2),Ke(3),Ke(4)),lA=(Ke(5),Ke(6),Je(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()})),cA=Je(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});cA.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Je(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var dA,hA,pA,gA,mA,vA={"-":"",_:" ",0:"0"},yA=/^\s*\d+/,bA=/^%/,_A=/[\\^$*+?|[\]().{}]/g;cn({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var xA="%Y-%m-%dT%H:%M:%S.%LZ",wA=(Date.prototype.toISOString?dn:gA(xA),+new Date("2000-01-01T00:00:00.000Z")?hn:mA(xA),{skip:!0}),kA={},MA=1,EA=2,OA=4,SA=MA|EA,AA=MA|OA,CA=MA|EA|OA,RA=8,TA=16,zA=32,DA=64,NA=Mn.prototype;NA.StopPropagation=kA,NA.ADD=MA,NA.REM=EA,NA.MOD=OA,NA.ADD_REM=SA,NA.ADD_MOD=AA,NA.ALL=CA,NA.REFLOW=RA,NA.SOURCE=TA,NA.NO_SOURCE=zA,NA.NO_FIELDS=DA,NA.fork=function(e){return new Mn(this.dataflow).init(this,e)},NA.clone=function(){var e=this.fork(CA);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(CA|TA)},NA.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?(e=new Mn(this.dataflow).init(this),e.add=e.source,e):e},NA.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||t&DA||(n.fields=e.fields),t&MA?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&EA?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&OA?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&zA?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},NA.runAfter=function(e){this.dataflow.runAfter(e)},NA.changed=function(e){var t=e||CA;return t&MA&&this.add.length||t&EA&&this.rem.length||t&OA&&this.mod.length},NA.reflow=function(e){if(e)return this.fork(CA).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(OA,Sn(this,MA))),this},NA.modifies=function(e){var t=S(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},NA.modified=function(e){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?iS(e)?e.some(function(e){
return t[e]}):t[e]:!!t)},NA.filter=function(e,t){var n=this;return e&MA&&(n.addF=En(n.addF,t)),e&EA&&(n.remF=En(n.remF,t)),e&OA&&(n.modF=En(n.modF,t)),e&TA&&(n.srcF=En(n.srcF,t)),n},NA.materialize=function(e){e=e||CA;var t=this;return e&MA&&t.addF&&(t.add=On(t.add,t.addF),t.addF=null),e&EA&&t.remF&&(t.rem=On(t.rem,t.remF),t.remF=null),e&OA&&t.modF&&(t.mod=On(t.mod,t.modF),t.modF=null),e&TA&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},NA.visit=function(e,t){var n,r,i=this,a=t;return e&TA?(Z(i.source,i.srcF,a),i):(e&MA&&Z(i.add,i.addF,a),e&EA&&Z(i.rem,i.remF,a),e&OA&&Z(i.mod,i.modF,a),e&RA&&(n=i.source)&&(r=i.add.length+i.mod.length,r===n.length||(r?Z(n,Sn(i,AA),a):Z(n,i.srcF,a))),i)};var PA=P(An,Mn);PA.fork=function(e){var t=new Mn(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,function(e){return t.add.push(e)}),e&t.REM&&this.visit(t.REM,function(e){return t.rem.push(e)}),e&t.MOD&&this.visit(t.MOD,function(e){return t.mod.push(e)})),t},PA.changed=function(e){return this.changes&e},PA.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?iS(e)?e.some(function(e){return n[e]}):n[e]:0},PA.filter=function(){o("MultiPulse does not support filtering.")},PA.materialize=function(){o("MultiPulse does not support materialization.")},PA.visit=function(e,t){var n=this,r=n.pulses,i=r.length,a=0;if(e&n.SOURCE)for(;a<i;++a)r[a].visit(e,t);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(e,t);return n};var $A={skip:!1,force:!1},LA=qn.prototype;LA.size=function(){return this.nodes.length},LA.clear=function(){return this.nodes=[],this},LA.peek=function(){return this.nodes[0]},LA.push=function(e){var t=this.nodes;return t.push(e),jn(t,0,t.length-1,this.cmp)},LA.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,Fn(t,0,this.cmp)):e=n,e},LA.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,Fn(t,0,this.cmp),n},LA.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,Fn(t,0,this.cmp)),e};var qA=Un.prototype;qA.stamp=function(){return this._clock},qA.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},qA.cleanThreshold=1e4,qA.add=le,qA.connect=ce,qA.rank=wn,qA.rerank=kn,qA.pulse=Ln,qA.touch=Pn,qA.update=$n,qA.changeset=oe,qA.ingest=mn,qA.request=yn,qA.events=pe,qA.on=bn,qA.run=Cn,qA.runAsync=Tn,qA.runAfter=zn,qA._enqueue=Dn,qA._getPulse=Nn,qA.error=In("error"),qA.warn=In("warn"),qA.info=In("info"),qA.debug=In("debug"),qA.logLevel=In("level");var jA=P(Bn,se);jA.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t},jA.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},jA.transform=function(){};var FA={},UA={values:Zn({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:Zn({name:"count",set:"cell.num"}),__count__:Zn({name:"count",set:"this.missing + this.valid"}),missing:Zn({name:"missing",set:"this.missing"}),valid:Zn({name:"valid",set:"this.valid"}),sum:Zn({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:Zn({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:Zn({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:Zn({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:Zn({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:Zn({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:Zn({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:Zn({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:Zn({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:Zn({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:Zn({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:Zn({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Zn({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Zn({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:Zn({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Zn({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Zn({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Zn({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},IA=Object.keys(UA);t.random=Math.random;var BA=ar(ir),WA=BA.right,VA=BA.left,HA=Math.sqrt(50),YA=Math.sqrt(10),GA=Math.sqrt(2),XA=Tr.prototype;XA.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},XA.add=function(e){this._add.push(e)},XA.rem=function(e){this._rem.push(e)},XA.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),f={};for(e=0;e<u;++e)f[a(i[e])]=1;for(e=0,t=0;e<o;++e)f[a(n=r[e])]?f[a(n)]=0:s[t++]=n;return this._rem=[],this._add=s},XA.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;--r>=0;)t=e(n[r])+"",i.hasOwnProperty(t)||(i[t]=1,++a);return a},XA.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=D(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},XA.argmin=function(e){return this.extent(e)[0]||{}},XA.argmax=function(e){return this.extent(e)[1]||{}},XA.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):+(1/0)},XA.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-(1/0)},XA.quartile=function(e){return this._get===e&&this._q||(this._q=Mr(this.values(),e),this._get=e),this._q},XA.q1=function(e){return this.quartile(e)[0]},XA.q2=function(e){return this.quartile(e)[1]},XA.q3=function(e){return this.quartile(e)[2]},XA.ci=function(e){return this._get===e&&this._ci||(this._ci=kr(this.values(),1e3,.05,e),this._get=e),this._ci},XA.ci0=function(e){return this.ci(e)[0]},XA.ci1=function(e){return this.ci(e)[1]},zr.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:IA},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var ZA=P(zr,Bn);ZA.transform=function(e,t){var n,r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),i.modifies(this._outputs),r._drop=e.drop!==!1,e.cross&&r._dims.length>1&&(r._drop=!1,this.cross()),r.changes(i)},ZA.cross=function(){function e(e){var t,n,r,u;for(t in e)for(r=e[t].tuple,n=0;n<o;++n)a[n][u=r[i[n]]]=u}function t(e,u,s){var f,l,c=i[s],d=a[s++];for(f in d)u[c]=d[f],l=e?e+"|"+f:f,s<o?t(l,u,s):r[l]||n.cell(l,u)}var n=this,r=n.value,i=n._dnames,a=i.map(function(){return{}}),o=i.length;e(n._prev),e(r),t("",{},0)},ZA.init=function(e){function t(e){for(var t,r=S(a(e)),i=0,o=r.length;i<o;++i)u[t=r[i]]||(u[t]=1,n.push(t))}var n=this._inputs=[],r=this._outputs=[],u={};this._dims=S(e.groupby),this._dnames=this._dims.map(function(e){var n=i(e);return t(e),r.push(n),n}),this.cellkey=e.key?e.key:Yn(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var s,f,l,c,d,h,p=e.fields||[null],g=e.ops||["count"],m=e.as||[],v=p.length,y={};for(v!==g.length&&o("Unmatched number of fields and aggregate ops."),h=0;h<v;++h)s=p[h],f=g[h],null==s&&"count"!==f&&o("Null aggregate field specified."),c=i(s),d=Gn(f,c,m[h]),r.push(d),"count"!==f?(l=y[c],l||(t(s),l=y[c]=[],l.field=s,this._measures.push(l)),"count"!==f&&(this._countOnly=!1),l.push(Xn(f,d))):this._counts.push(d);return this._measures=this._measures.map(function(e){return Kn(e,e.field)}),{}},ZA.cellkey=Yn(),ZA.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},ZA.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new Tr),n},ZA.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?ie(t.tuple,o):te(o)},ZA.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),t=a.agg,n=0,r=t.length;n<r;++n)t[n].add(t[n].get(e),e)},ZA.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),t=a.agg,n=0,r=t.length;n<r;++n)t[n].rem(t[n].get(e),e)},ZA.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(t=e.agg,n=0,r=t.length;n<r;++n)t[n].set(i);return i},ZA.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,f=e.add,l=e.rem,c=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||l.push(t.tuple);for(r=0,i=this._alen;r<i;++r)f.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)t=o[r],(0===t.num&&s?l:c).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e},Dr.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var JA=P(Dr,Bn);JA.transform=function(e,t){var n,r=this._bins(e),i=r.start,o=r.step,u=e.as||["bin0","bin1"],s=u[0],f=u[1];return e.modified()?(t=t.reflow(!0),n=t.SOURCE):n=t.modified(a(e.field))?t.ADD_MOD:t.ADD,t.visit(n,function(e){var t=r(e);e[s]=t,e[f]=null==t?null:i+o*(1+(t-i)/o)}),t.modifies(u)},JA._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,o=e.field,u=er(e),s=u.start,f=u.stop,l=u.step;null!=(t=e.anchor)&&(n=t-(s+l*Math.floor((t-s)/l)),s+=n,f+=n);var c=function(e){var t=o(e);return null==t?null:(t=Math.max(s,Math.min(+t,f-l)),s+l*Math.floor((t-s)/l))};return c.start=s,c.stop=f,c.step=l,this.value=r(c,a(o),e.name||"bin_"+i(o))},Pr.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};var QA=P(Pr,Bn);QA.transform=function(e,t){var n=t.fork(t.ALL),r=Nr(K,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),t.source&&t.source.root&&(this.value.root=t.source.root),n},P($r,se),qr.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var KA=P(qr,Bn);KA.transform=function(e,t){function n(t){return function(n){for(var r,i=jr(u(n),e.case,a)||[],s=0,f=i.length;s<f;++s)o.test(r=i[s])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],f=n(function(e){i[e]=1+(i[e]||0)}),l=n(function(e){i[e]-=1});return r?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,l)),this._finish(t,s)},KA._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},KA._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],f=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=te({}),r[u]=n,r[s]=i,f.add.push(r)):0===i?(r&&f.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,f.mod.push(r));return f.modifies(t)},Fr.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};var eC=P(Fr,Bn);eC.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1],u=!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");return u?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=Ur(r,a,o,e.filter||lS)):n.mod=r,n.source=this.value,n.modifies(i)};var tC={kde:Sr,mixture:Cr,normal:Or,uniform:Rr},nC="distributions",rC="function",iC="field",aC=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],oC={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:aC},{name:"weights",type:"number",array:!0}]};Br.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:aC.concat(oC)},{name:"as",type:"string",array:!0,default:["value","density"]}]};var uC=P(Br,Bn);uC.transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=Ir(e.distribution,Wr(t)),i=e.method||"pdf";"pdf"!==i&&"cdf"!==i&&o("Invalid density method: "+i),e.extent||r.data||o("Missing density extent parameter."),i=r[i];var a=e.as||["value","density"],u=e.extent||fr(r.data()),s=(u[1]-u[0])/(e.steps||100),f=lr(u[0],u[1]+s/2,s).map(function(e){var t={};return t[a[0]]=e,t[a[1]]=i(e),te(t)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n},Vr.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};var sC=P(Vr,Bn);sC.transform=function(e,t){var n,r=this.value,i=e.field,a=r[0],o=r[1],u=t.ADD;n=t.changed()||t.modified(i.fields)||e.modified("field"),n&&(u=t.SOURCE,a=+(1/0),o=-(1/0)),t.visit(u,function(e){var t=i(e);null!=t&&(t=+t,t<a&&(a=t),t>o&&(o=t))}),this.value=[a,o]};var fC=P(Hr,se);fC.connect=function(e){return this.targets().add(e),e.source=this},fC.add=function(e){this.value.add.push(e)},fC.rem=function(e){this.value.rem.push(e)},fC.mod=function(e){this.value.mod.push(e)},fC.init=function(e){this.value.init(e,e.NO_SOURCE)},fC.evaluate=function(){return this.value};var lC=P(Yr,Bn);lC.activate=function(e){this._targets[this._targets.active++]=e},lC.subflow=function(e,t,n,r){var i,a,o=this.value,u=o.hasOwnProperty(e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[e])&&a.tuple,i=n.dataflow,u=i.add(new Hr(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=u,this.activate(u)),u},lC.transform=function(e,t){function n(e){return i.subflow(e,o,t)}var r=t.dataflow,i=this,a=e.key,o=e.subflow,u=this._keys,s=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=K(e),r=u.get(t);void 0!==r&&(u.delete(t),n(r).rem(e))}),t.visit(t.ADD,function(e){var t=a(e);u.set(K(e),t),n(t).add(e)}),s||t.modified(a.fields)?t.visit(t.MOD,function(e){var t=K(e),r=u.get(t),i=a(e);r===i?n(i).mod(e):(u.set(t,i),n(r).rem(e),n(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(u.get(K(e))).mod(e)}),s&&t.visit(t.REFLOW,function(e){var t=K(e),r=u.get(t),i=a(e);r!==i&&(u.set(t,i),n(r).rem(e),n(i).add(e))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),t},P(Gr,se),Zr.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};var cC=P(Zr,Bn);cC.transform=function(e,t){function n(t){var n=K(t),r=f(t,e),a=i.get(n);r&&a?(i.delete(n),o.push(t)):r||a?l&&r&&!a&&s.push(t):(i.set(n,1),u.push(t))}var r=t.dataflow,i=this.value,a=t.fork(),o=a.add,u=a.rem,s=a.mod,f=e.expr,l=!0;return t.visit(t.REM,function(e){var t=K(e);i.has(t)?i.delete(t):u.push(e)}),t.visit(t.ADD,function(t){f(t,e)?o.push(t):i.set(K(t),1)}),t.visit(t.MOD,n),e.modified()&&(l=!1,t.visit(t.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},Qr.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]};var dC=P(Qr,Bn);dC.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=Jr(r,e.as||[]),a=i.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,o,u,s=r.map(function(t){return t(e)}),f=s.reduce(function(e,t){return Math.max(e,t.length)},0),l=0;l<f;++l){for(o=ne(e),t=0;t<a;++t)o[i[t]]=null==(u=s[t][l])?null:u;n.add.push(o)}}),this.value=n.source=n.add,n.modifies(i)},Kr.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};var hC=P(Kr,Bn);hC.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,a=r.map(i),o=e.as||["key","value"],u=o[0],s=o[1],f=r.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,i=0;i<f;++i)t=ne(e),t[u]=a[i],t[s]=r[i](e),n.add.push(t)}),this.value=n.source=n.add,n.modifies(o)},ei.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};var pC=P(ei,Bn);pC.transform=function(e,t){function n(t){t[i]=r(t,e)}var r=e.expr,i=e.as,a=e.modified(),o=e.initonly?t.ADD:a?t.SOURCE:t.modified(r.fields)?t.ADD_MOD:t.ADD;return a&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,n)};var gC=P(ti,Bn);gC.transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),u=e.size-a.length,s=e.generator;if(u>0){for(n=[];--u>=0;)n.push(i=te(s(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var mC={value:"value",median:yr,mean:vr,min:_r,max:mr},vC=[];ni.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};var yC=P(ni,Bn);yC.transform=function(e,t){var n,r,a,o,u,s,f,l,c,d,h=t.fork(t.ALL),p=ri(e),g=ii(e),m=i(e.field),v=i(e.key),y=(e.groupby||[]).map(i),b=ai(t.source,e.groupby,e.key,e.keyvals),_=[],x=this.value,w=b.domain.length;for(u=0,l=b.length;u<l;++u)for(n=b[u],a=n.values,r=NaN,f=0;f<w;++f)if(null==n[f]){for(o=b.domain[f],d={_impute:!0},s=0,c=a.length;s<c;++s)d[y[s]]=a[s];d[v]=o,d[m]=isNaN(r)?r=p(n,g):r,_.push(te(d))}return _.length&&(h.add=h.materialize(h.ADD).add.concat(_)),x.length&&(h.rem=h.materialize(h.REM).rem.concat(x)),this.value=_,h},oi.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:IA},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var bC=P(oi,zr);bC.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(n=r.value=r.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),r.changes(),t.visit(t.SOURCE,function(e){z(e,n[r.cellkey(e)].tuple)}),t.reflow(i).modifies(this._outputs)},bC.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},P(ui,se),fi.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};var _C=P(fi,Bn);_C.transform=function(e,t){var n,r,a,u=t,s=e.as,f=e.fields,l=e.index,c=e.values,d=null==e.default?null:e.default,h=e.modified(),p=h?t.SOURCE:t.ADD,g=f.length;return c?(r=c.length,g>1&&!s&&o('Multi-field lookup requires explicit "as" parameter.'),s&&s.length!==g*r&&o('The "as" parameter has too few output field names.'),s=s||c.map(i),n=function(e){for(var t,n,i=0,a=0;i<g;++i)if(n=l.get(f[i](e)),null==n)for(t=0;t<r;++t,++a)e[s[a]]=d;else for(t=0;t<r;++t,++a)e[s[a]]=c[t](n)}):(s||o("Missing output field names."),n=function(e){for(var t,n=0;n<g;++n)t=l.get(f[n](e)),e[s[n]]=null==t?d:t}),h?u=t.reflow(!0):(a=f.some(function(e){return t.modified(e.fields)}),p|=a?t.MOD:0),t.visit(p,n),u.modifies(s)},P(li,se),P(di,se),P(pi,Bn),pi.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},gi.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:IA,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var xC=P(gi,zr);xC._transform=xC.transform,xC.transform=function(e,t){return this._transform(mi(e,t),t)};var wC=P(bi,Yr);wC.transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(a(i)))&&o("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.mod(e)}):a.mod(e)}),t.visit(t.ADD,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.add(te(e))}):a.add(e)}),t.visit(t.REM,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.rem(e)}):a.rem(e)}),t},_i.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};var kC=P(_i,Bn);kC.transform=function(e,t){var n,r,i=e.fields,a=Jr(e.fields,e.as||[]),o=i?function(e,t){return xi(e,t,i,a)}:re;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=K(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=o(e,te({}));r[K(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(o(e,r[K(e)]))}),n};var MC=P(wi,Bn);MC.transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var EC=P(ki,Bn);EC.transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=K(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=ne(e);r[K(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(re(e,r[K(e)]))})),n},Mi.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};var OC=P(Mi,Bn);OC.transform=function(e,n){function r(e){var n,r;u.length<o?u.push(e):(r=~~((s+1)*t.random()),r<u.length&&r>=f&&(n=u[r],l[K(n)]&&i.rem.push(n),u[r]=e)),++s}var i=n.fork(n.NO_SOURCE),a=e.modified("size"),o=e.size,u=this.value,s=this.count,f=0,l=u.reduce(function(e,t){return e[K(t)]=1,e},{});if(n.rem.length&&(n.visit(n.REM,function(e){var t=K(e);l[t]&&(l[t]=-1,i.rem.push(e)),--s}),u=u.filter(function(e){return l[K(e)]!==-1})),(n.rem.length||a)&&u.length<o&&n.source&&(f=s=u.length,n.visit(n.SOURCE,function(e){l[K(e)]||r(e)}),f=-1),a&&u.length>o){for(var c=0,d=u.length-o;c<d;++c)l[K(u[c])]=-1,i.rem.push(u[c]);u=u.slice(d)}return n.mod.length&&n.visit(n.MOD,function(e){l[K(e)]&&i.mod.push(e)}),n.add.length&&n.visit(n.ADD,r),(n.add.length||f<0)&&(i.add=u.filter(function(e){return!l[K(e)]})),this.count=s,this.value=i.source=u,i},Ei.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]};var SC=P(Ei,Bn);SC.transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=lr(e.start,e.stop,e.step||1).map(te),n.add=t.add.concat(this.value),n}};var AC=P(Oi,Bn);AC.transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var CC=P(Si,Bn);CC.transform=function(e,t){function n(e){a.set(i(e),e)}var r=t.dataflow,i=e.field,a=this.value,o=!0;return e.modified("field")||t.modified(i.fields)?(a.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){a.delete(i(e))}),t.visit(t.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),t.fork()};var RC=P(Ai,Bn);RC.transform=function(e,t){var n=!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields);n&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var TC={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=TC.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){t=+t,t>0||o("ntile num must be greater than zero.");var n=TC.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return t=+t,t>0||o("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},zC=Object.keys(TC),DC=Ri.prototype;DC.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},DC.update=function(e,t){var n,r=this,i=r.cell,a=r.windows,o=e.data,u=a&&a.length;if(i){for(n=e.p0;n<e.i0;++n)i.rem(o[n]);for(n=e.p1;n<e.i1;++n)i.add(o[n]);i.set(t)}for(n=0;n<u;++n)a[n].update(e,t)},zi.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:zC.concat(IA)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var NC=P(zi,Bn);NC.transform=function(e,t){function n(e){return a.group(s(e))}var r,i,a=this,o=a.state,u=e.modified();this.stamp=t.stamp,o&&!u||(o=a.state=new Ri(e));var s=Yn(e.groupby);for(u||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,function(e){n(e).add(e)})):(t.visit(t.REM,function(e){n(e).remove(e)}),t.visit(t.ADD,function(e){n(e).add(e)})),r=0,i=a._mlen;r<i;++r)Di(a._mods[r],o,e);return a._mlen=0,a._mods=[],t.reflow(u).modifies(o.outputs)},NC.group=function(e){var t=this,n=t.value[e];return n||(n=t.value[e]=Nr(K),n.stamp=-1),n.stamp<t.stamp&&(n.stamp=t.stamp,t._mods[t._mlen++]=n),n};var PC=Object.freeze({aggregate:zr,bin:Dr,collect:Pr,compare:$r,countpattern:qr,cross:Fr,density:Br,extent:Vr,facet:Yr,field:Gr,filter:Zr,flatten:Qr,fold:Kr,formula:ei,generate:ti,impute:ni,joinaggregate:oi,key:ui,lookup:fi,multiextent:li,multivalues:di,params:pi,pivot:gi,prefacet:bi,project:_i,proxy:wi,relay:ki,sample:Mi,sequence:Ei,sieve:Oi,subflow:Hr,tupleindex:Si,values:Ai,window:zi}),$C="top",LC="left",qC="right",jC="bottom",FC="top-left",UC="top-right",IC="bottom-left",BC="bottom-right",WC="start",VC="end",HC="group",YC="axis",GC="title",XC="frame",ZC="scope",JC="legend",QC="row-header",KC="row-footer",eR="row-title",tR="column-header",nR="column-footer",rR="column-title",iR="padding",aR="symbol",oR="fit",uR="fit-x",sR="fit-y",fR="pad",lR="none",cR="all",dR="each",hR="flush",pR="column",gR="row",mR=$i.prototype;mR.clone=function(){return new $i(this)},mR.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},mR.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},mR.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},mR.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},mR.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},mR.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},mR.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},mR.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,u=this.x1,s=this.x2,f=this.y1,l=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*l+a,i*u+r*l+o).add(r*s-i*f+a,i*s+r*f+o).add(r*s-i*l+a,i*s+r*l+o)},mR.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},mR.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},mR.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},mR.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2);
},mR.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},mR.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},mR.width=function(){return this.x2-this.x1},mR.height=function(){return this.y2-this.y1};var vR=0;P(ji,qi);var yR;["canvas","canvas-prebuilt"].some(function(e){try{yR=n(17)(e),"function"!=typeof yR&&(yR=null)}catch(t){yR=null}return yR});var bR=Hi.prototype;bR.pending=function(){return this._pending},bR.sanitizeURL=function(e){var t=this;return Yi(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return Gi(t),e}).catch(function(){return Gi(t),null})},bR.loadImage=function(e){var t=this,n=Vi();return Yi(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){Gi(t),i.loaded=!0},i.onerror=function(){Gi(t),i.loaded=!1},i.src=r,i}).catch(function(e){return Gi(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}})},bR.ready=function(){var e=this;return new Promise(function(t){function n(r){e.pending()?setTimeout(function(){n(!0)},10):t(r)}n(!1)})};var _R=Math.PI,xR=2*_R,wR=1e-6,kR=xR-wR;Xi.prototype=Zi.prototype={constructor:Xi,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,u=n-e,s=r-t,f=a-e,l=o-t,c=f*f+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(c>wR)if(Math.abs(l*u-s*f)>wR&&i){var d=n-a,h=r-o,p=u*u+s*s,g=d*d+h*h,m=Math.sqrt(p),v=Math.sqrt(c),y=i*Math.tan((_R-Math.acos((p+c-g)/(2*m*v)))/2),b=y/v,_=y/m;Math.abs(b-1)>wR&&(this._+="L"+(e+b*f)+","+(t+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>f*h)+","+(this._x1=e+_*u)+","+(this._y1=t+_*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,a){e=+e,t=+t,n=+n;var o=n*Math.cos(r),u=n*Math.sin(r),s=e+o,f=t+u,l=1^a,c=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+f:(Math.abs(this._x1-s)>wR||Math.abs(this._y1-f)>wR)&&(this._+="L"+s+","+f),n&&(c<0&&(c=c%xR+xR),c>kR?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=f):c>wR&&(this._+="A"+n+","+n+",0,"+ +(c>=_R)+","+l+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var MR=Math.abs,ER=Math.atan2,OR=Math.cos,SR=Math.max,AR=Math.min,CR=Math.sin,RR=Math.sqrt,TR=1e-12,zR=Math.PI,DR=zR/2,NR=2*zR;sa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var PR={draw:function(e,t){var n=Math.sqrt(t/zR);e.moveTo(n,0),e.arc(0,0,n,0,NR)}};va.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ma(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ma(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ba.prototype={areaStart:ga,areaEnd:ga,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ma(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},xa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ma(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ka.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,u=t[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+r*o),this._beta*t[s]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var $R=function e(t){function n(e){return 1===t?new va(e):new ka(e,t)}return n.beta=function(t){return e(+t)},n}(.85);Ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ma(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ma(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var LR=function e(t){function n(e){return new Ea(e,t)}return n.tension=function(t){return e(+t)},n}(0);Oa.prototype={areaStart:ga,areaEnd:ga,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ma(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var qR=function e(t){function n(e){return new Oa(e,t)}return n.tension=function(t){return e(+t)},n}(0);Sa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ma(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var jR=function e(t){function n(e){return new Sa(e,t)}return n.tension=function(t){return e(+t)},n}(0);Ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Aa(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var FR=function e(t){function n(e){return t?new Ca(e,t):new Ea(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);Ra.prototype={areaStart:ga,areaEnd:ga,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Aa(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var UR=function e(t){function n(e){return t?new Ra(e,t):new Oa(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);Ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Aa(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var IR=function e(t){function n(e){return t?new Ta(e,t):new Sa(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);za.prototype={areaStart:ga,areaEnd:ga,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:La(this,this._t0,$a(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,La(this,$a(this,n=Pa(this,e,t)),n);break;default:La(this,this._t0,n=Pa(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(ja.prototype=Object.create(qa.prototype)).point=function(e,t){qa.prototype.point.call(this,t,e)},Fa.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},Ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Wa(e),i=Wa(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var BR,WR={basis:{curve:ya},"basis-closed":{curve:_a},"basis-open":{curve:wa},bundle:{curve:$R,tension:"beta",value:.85},cardinal:{curve:LR,tension:"tension",value:0},"cardinal-open":{curve:jR,tension:"tension",value:0},"cardinal-closed":{curve:qR,tension:"tension",value:0},"catmull-rom":{curve:FR,tension:"alpha",value:.5},"catmull-rom-closed":{curve:UR,tension:"alpha",value:.5},"catmull-rom-open":{curve:IR,tension:"alpha",value:.5},linear:{curve:fa},"linear-closed":{curve:Da},monotone:{horizontal:Ia,vertical:Ua},natural:{curve:Va},step:{curve:Ya},"step-after":{curve:Xa},"step-before":{curve:Ga}},VR={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},HR=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],YR={},GR={},XR=[].join,ZR=["l",0,0,0,0,0,0,0],JR=2*Math.PI,QR=Math.sqrt(3)/2,KR={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,JR)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=QR*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=QR*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=QR*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=QR*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}}},eT={},tT=Math.PI,nT=ua().startAngle(_o).endAngle(xo).padAngle(wo).innerRadius(ko).outerRadius(Mo).cornerRadius(Eo),rT=ha().x(ho).y1(po).y0(bo).defined(Oo),iT=ha().y(po).x1(ho).x0(yo).defined(Oo),aT=da().x(ho).y(po).defined(Oo),oT=lo().x(ho).y(po).width(go).height(vo).cornerRadius(Eo),uT=pa().type(Ao).size(So),sT=co().x(ho).y(po).defined(Oo).size(mo),fT=2*Math.PI,lT=fT/4,cT=fT-1e-8;Lo.beginPath=qo,Lo.closePath=qo,Lo.moveTo=jo,Lo.lineTo=jo,Lo.rect=function(e,t,n,r){jo(e,t),jo(e+n,t+r)},Lo.quadraticCurveTo=function(e,t,n,r){jo(e,t),jo(n,r)},Lo.bezierCurveTo=function(e,t,n,r,i,a){jo(e,t),jo(n,r),jo(i,a)},Lo.arc=function(e,t,n,r,i,a){function o(e){f=n*Math.cos(e),l=n*Math.sin(e),f<c&&(c=f),f>d&&(d=f),l<h&&(h=l),l>p&&(p=l)}if(Math.abs(i-r)>cT)return jo(e-n,t-n),void jo(e+n,t+n);var u,s,f,l,c=1/0,d=-(1/0),h=1/0,p=-(1/0);if(o(r),o(i),i!==r)if(r%=fT,r<0&&(r+=fT),i%=fT,i<0&&(i+=fT),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=fT,u=r-r%lT,s=0;s<4&&u>i;++s,u-=lT)o(u);else for(u=r-r%lT+lT,s=0;s<4&&u<i;++s,u+=lT)o(u);jo(e+c,t+h),jo(e+d,t+p)};var dT,hT,pT=[],gT=function(){return!0},mT=nu("arc",Co),vT=ou("area",Ro,ru),yT=1,bT=.5,_T=Qo(hu),xT={type:"group",tag:"g",nested:!1,attr:fu,bound:du,draw:pu,pick:gu,background:lu,foreground:cu},wT={type:"image",tag:"image",nested:!1,attr:_u,bound:xu,draw:wu,pick:Jo(),get:vu,xOffset:yu,yOffset:bu},kT=ou("line",To,iu),MT={type:"path",tag:"path",nested:!1,attr:ku,bound:Eu,draw:Go(Mu),pick:Ko(Mu)},ET={type:"rect",tag:"path",nested:!1,attr:Ou,bound:Su,draw:Go(Au),pick:Ko(Au)},OT={type:"rule",tag:"line",nested:!1,attr:Cu,bound:Ru,draw:zu,pick:Jo(Du)},ST=nu("shape",Do),AT=nu("symbol",No),CT={height:qu,measureWidth:$u,estimateWidth:Nu,width:Nu,canvas:ju};ju(!0);var RT={left:"start",center:"middle",right:"end"},TT=new $i,zT={type:"text",tag:"text",nested:!1,attr:Wu,bound:Vu,draw:Hu,pick:Jo(Yu)},DT=ou("trail",Po,au),NT={arc:mT,area:vT,group:xT,image:wT,line:kT,path:MT,rect:ET,rule:OT,shape:ST,symbol:AT,text:zT,trail:DT},PT={mark:null},$T=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],LT=Ku.prototype;LT.toJSON=function(e){return Zu(this.root,e||0)},LT.mark=function(e,t,n){t=t||this.root.items[0];var r=es(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var qT=ss.prototype;qT.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},qT.element=function(){return this._el},qT.canvas=function(){return this._el&&this._el.firstChild},qT.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},qT.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},qT.on=function(){},qT.off=function(){},qT._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},qT.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},qT.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},qT.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then(function(t){var n=new MouseEvent(e.type,e),r=ts(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)}).catch(function(){})},qT.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=us(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},qT.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,u=i.width(),s=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:u,height:s,left:a,top:o,right:a+u,bottom:o+s}}};var jT=ls.prototype;jT.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},jT.element=function(){return this._el},jT.canvas=function(){return this._el&&this._el.firstChild},jT.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},jT.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},jT.dirty=function(){},jT.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},jT._render=function(){},jT.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},jT._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return r},jT.sanitizeURL=function(e){return this._load("sanitizeURL",e)},jT.loadImage=function(e){return this._load("loadImage",e)};var FT=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],UT="mousemove",IT="mouseout",BT="click",WT=P(cs,ss);WT.initialize=function(e,t,n){var r=this._canvas=e&&ns(e,"canvas");if(r){var i=this;this.events.forEach(function(e){r.addEventListener(e,function(t){WT[e]?WT[e].call(i,t):i.fire(e,t)})})}return ss.prototype.initialize.call(this,e,t,n)},WT.canvas=function(){return this._canvas},WT.context=function(){return this._canvas.getContext("2d")},WT.events=FT,WT.DOMMouseScroll=function(e){this.fire("mousewheel",e)},WT.mousemove=ds("mousemove","mouseover","mouseout"),WT.dragover=ds("dragover","dragenter","dragleave"),WT.mouseout=hs("mouseout"),WT.dragleave=hs("dragleave"),WT.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},WT.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},WT.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},WT.touchmove=function(e){this.fire("touchmove",e,!0)},WT.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},WT.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(t.vegaType=e,e===BT&&a&&a.href?this.handleHref(t,a,a.href):e!==UT&&e!==IT||this.handleTooltip(t,a,e!==IT),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},WT.on=function(e,t){var n=this.eventName(e),r=this._handlers,i=this._handlerIndex(r[n],e,t);return i<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},WT.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},WT.pickEvent=function(e){var t=os(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},WT.pick=function(e,t,n,r,i){var a=this.context(),o=NT[e.marktype];return o.pick.call(this,a,e,t,n,r,i)};var VT=gs(),HT=P(vs,ls),YT=ls.prototype,GT=new $i;HT.initialize=function(e,t,n,r,i){return this._canvas=Wi(1,1),e&&(is(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),YT.initialize.call(this,e,t,n,r,i)},HT.resize=function(e,t,n,r){return YT.resize.call(this,e,t,n,r),ms(this._canvas,this._width,this._height,this._origin,this._scale),this._redraw=!0,this},HT.canvas=function(){return this._canvas},HT.context=function(){return this._canvas?this._canvas.getContext("2d"):null},HT.dirty=function(e){var t=bs(e.bounds,e.mark.group);this._dirty.union(t)},HT._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=ys(t,a,n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},HT.draw=function(e,t,n){var r=NT[t.marktype];t.clip&&ps(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},HT.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var XT=P(_s,ss);XT.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(BT,this._hrefHandler),r.removeEventListener(UT,this._tooltipHandler),r.removeEventListener(IT,this._tooltipHandler)),this._svg=r=e&&ns(e,"svg"),r&&(r.addEventListener(BT,this._hrefHandler),r.addEventListener(UT,this._tooltipHandler),r.addEventListener(IT,this._tooltipHandler)),ss.prototype.initialize.call(this,e,t,n)},XT.canvas=function(){return this._svg},XT.on=function(e,t){var n=this.eventName(e),r=this._handlers,i=this._handlerIndex(r[n],e,t);if(i<0){var a={type:e,handler:t,listener:xs(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},XT.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var ZT={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},JT={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},QT=Object.keys(JT),KT=ZT.xmlns,ez=P(Ms,ls),tz=ls.prototype;ez.initialize=function(e,t,n,r){return e&&(this._svg=rs(e,0,"svg",KT),this._svg.setAttribute("class","marks"),is(e,1),this._root=rs(this._svg,0,"g",KT),is(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),tz.initialize.call(this,e,t,n,r)},ez.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),tz.background.apply(this,arguments)},ez.resize=function(e,t,n,r){return tz.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},ez.canvas=function(){return this._svg},ez.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in ZT)e[t]=ZT[t];var n=this._bgcolor?ws("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+ks("rect"):"";return ws("svg",e)+n+this._svg.innerHTML+ks("svg")},ez._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),is(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},ez.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=rs(t,0,"defs",KT)),Es(r,n.gradient[e],i++);for(e in n.clipping)r||(n.el=r=rs(t,0,"defs",KT)),Os(r,n.clipping[e],i++);r&&(0===i?(t.removeChild(r),n.el=null):is(r,i))},ez._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},ez.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},ez.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},ez._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=e.length;a<o;++a)t=e[a],n=t.mark,n.marktype!==r&&(r=n.marktype,i=NT[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,Ss(t,s),n.items.forEach(function(e){e.dirty=s})),n.zdirty||(t.exit?(i.nested&&n.items.length?(u=n.items[0],u._svg&&this._update(i,u._svg,u)):t._svg&&(u=t._svg.parentNode,u&&u.removeChild(t._svg)),t._svg=null):(t=i.nested?n.items[0]:t,t._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,Ss(t,s)),t._update=s)));return!this._dirtyAll},ez.draw=function(e,t,n){function r(e){var t=a.isDirty(e),n=Cs(e,i,l,u.tag,o);t&&(a._update(u,n,e),f&&As(a,n,e)),l=n,++c}if(!this.isDirty(t))return t._svg;var i,a=this,o=this._svg,u=NT[t.marktype],s=t.interactive===!1?"none":null,f="g"===u.tag,l=null,c=0;return i=Cs(t,e,n,"g",o),i.setAttribute("class",as(t)),f||i.style.setProperty("pointer-events",s),t.clip?i.setAttribute("clip-path",su(a,t,t.group)):i.removeAttribute("clip-path"),u.nested?t.items.length&&r(t.items[0]):Ho(t,r),is(i,c),i};var nz=null,rz=null,iz={group:function(e,t,n){rz=t.__values__,nz=t.childNodes[1],e.foreground(Ts,n,this),nz=t.childNodes[0],e.background(Ts,n,this);var r=n.mark.interactive===!1?"none":null;r!==rz.events&&(nz.style.setProperty("pointer-events",r),rz.events=r)},text:function(e,t,n){var r=Fu(n);r!==rz.text&&(t.textContent=r,rz.text=r),r=Iu(n),r!==rz.font&&(t.style.setProperty("font",r),rz.font=r)}};ez._update=function(e,t,n){nz=t,rz=t.__values__,e.attr(Ts,n,this);var r=iz[e.type];r&&r.call(this,e,t,n),this.style(nz,n)},ez.style=function(e,t){if(null!=t){var n,r,i,a,o;for(n=0,r=QT.length;n<r;++n)i=QT[n],o=t[i],o!==rz[i]&&(a=JT[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+zs()+"#"+o.id+")"),e.style.setProperty(a,o+"")),rz[i]=o)}};var az=P(Ds,ls),oz=ls.prototype;az.resize=function(e,t,n,r){oz.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in ZT)o[u]=ZT[u];a.head=ws("svg",o);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),s?a.bg=ws("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+ks("rect"):a.bg="",a.root=ws("g",{transform:"translate("+i+")"}),a.foot=ks("g")+ks("svg"),this},az.background=function(){var e=oz.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},az.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},az._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},az.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(n=i.gradient[t],r=n.stops,a+=ws("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=ws("stop",{offset:r[e].offset,"stop-color":r[e].color})+ks("stop");a+=ks("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=ws("clipPath",{id:t}),a+=n.path?ws("path",{d:n.path})+ks("path"):ws("rect",{x:0,y:0,width:n.width,height:n.height})+ks("rect"),a+=ks("clipPath");return a.length>0?ws("defs")+a+ks("defs"):""};var uz;az.attributes=function(e,t){return uz={},e(Ns,t,this),uz},az.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then(function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e})}return null},az.mark=function(e){function t(t){var s=r.href(t);s&&(u+=ws("a",s)),n="g"!==a?Ps(t,e,a,o):null,u+=ws(a,r.attributes(i.attr,t),n),"text"===a?u+=$s(Fu(t)):"g"===a&&(u+=ws("path",r.attributes(i.background,t),Ps(t,e,"bgrect",o))+ks("path"),u+=ws("g",r.attributes(i.foreground,t))+r.markGroup(t)+ks("g")),u+=ks(a),s&&(u+=ks("a"))}var n,r=this,i=NT[e.marktype],a=i.tag,o=this._defs,u="";
return"g"!==a&&e.interactive===!1&&(n='style="pointer-events: none;"'),u+=ws("g",{class:as(e),"clip-path":e.clip?su(r,e,e.group):null},n),i.nested?e.items&&e.items.length&&t(e.items[0]):Ho(e,t),u+ks("g")},az.markGroup=function(e){var t=this,n="";return Ho(e,function(e){n+=t.mark(e)}),n};var sz="canvas",fz="png",lz="svg",cz="none",dz={Canvas:sz,PNG:fz,SVG:lz,None:cz},hz={};hz[sz]=hz[fz]={renderer:vs,headless:vs,handler:cs},hz[lz]={renderer:Ms,headless:Ds,handler:_s},hz[cz]={};var pz=new $i,gz=1e-9,mz=P(Is,Bn);mz.transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=NT[a],u=o.bound,s=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),s=Bs(i,u),i.items.forEach(function(e){e.bounds.clear().union(s)})):a===HC||e.modified()?(t.visit(t.MOD,function(e){r.dirty(e)}),s.clear(),i.items.forEach(function(e){s.union(Bs(e,u))}),i.role===JC&&t.reflow()):(n=t.changed(t.REM),t.visit(t.ADD,function(e){s.union(Bs(e,u))}),t.visit(t.MOD,function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(Bs(e,u))}),n&&(s.clear(),i.items.forEach(function(e){s.union(e.bounds)}))),qs(i),t.modifies("bounds")};var vz=":vega_identifier:";Ws.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};var yz=P(Ws,Bn);yz.transform=function(e,t){var n=Vs(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++r)}),n.set(this.value=r),t};var bz=P(Hs,Bn);bz.transform=function(e,t){var n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Ys(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r=n.marktype===HC?ji:qi;return t.visit(t.ADD,function(e){r.call(e,n)}),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t};var _z=P(Gs,Bn),xz={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&Xs(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};_z.transform=function(e,t){var n=xz[e.method]||xz.parity,r=t.materialize(t.SOURCE).source;if(r){e.sort&&(r=r.slice().sort(e.sort)),"greedy"===e.method&&(r=r.filter(Js)),r.forEach(function(e){e.opacity=1});var i=r;if(i.length>=3&&Zs(i)){t=t.reflow(e.modified()).modifies("opacity");do i=n(i);while(i.length>=3&&Zs(i));i.length<3&&!p(r).opacity&&(i.length>1&&(p(i).opacity=0),p(r).opacity=1)}if(e.boundScale){var a=Qs(e.boundScale,e.boundOrient,e.boundTolerance);r.forEach(function(e){a(e)||(e.opacity=0)})}return t}};var wz=P(Ks,Bn);wz.transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var kz=.5,Mz=new $i,Ez=P(df,Bn);Ez.transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&ff(n,t,e.layout),hf(n,t,e)}),e.modified()&&t.reflow(),t};var Oz=Object.freeze({bound:Is,identifier:Ws,mark:Hs,overlap:Gs,render:Ks,viewlayout:df}),Sz="log",Az="pow",Cz="utc",Rz="sqrt",Tz="band",zz="time",Dz="point",Nz="linear",Pz="ordinal",$z="quantile",Lz="quantize",qz="threshold",jz="bin-linear",Fz="bin-ordinal",Uz="sequential",Iz="$";Af.prototype=Cf.prototype={constructor:Af,has:function(e){return Iz+e in this},get:function(e){return this[Iz+e]},set:function(e,t){return this[Iz+e]=t,this},remove:function(e){var t=Iz+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Iz&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Iz&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Iz&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Iz&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Iz&&++e;return e},empty:function(){for(var e in this)if(e[0]===Iz)return!1;return!0},each:function(e){for(var t in this)t[0]===Iz&&e(this[t],t.slice(1),this)}};var Bz=Cf.prototype;Pf.prototype=$f.prototype={constructor:Pf,has:Bz.has,add:function(e){return e+="",this[Iz+e]=e,this},remove:Bz.remove,clear:Bz.clear,values:Bz.keys,size:Bz.size,empty:Bz.empty,each:Bz.each};var Wz=Array.prototype,Vz=Wz.map,Hz=Wz.slice,Yz={name:"implicit"},Gz=.7,Xz=1/Gz,Zz="\\s*([+-]?\\d+)\\s*",Jz="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qz="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kz=/^#([0-9a-f]{3})$/,eD=/^#([0-9a-f]{6})$/,tD=new RegExp("^rgb\\("+[Zz,Zz,Zz]+"\\)$"),nD=new RegExp("^rgb\\("+[Qz,Qz,Qz]+"\\)$"),rD=new RegExp("^rgba\\("+[Zz,Zz,Zz,Jz]+"\\)$"),iD=new RegExp("^rgba\\("+[Qz,Qz,Qz,Jz]+"\\)$"),aD=new RegExp("^hsl\\("+[Jz,Qz,Qz]+"\\)$"),oD=new RegExp("^hsla\\("+[Jz,Qz,Qz,Jz]+"\\)$"),uD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qf(Ff,Uf,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),qf(Hf,Vf,jf(Ff,{brighter:function(e){return e=null==e?Xz:Math.pow(Xz,e),new Hf(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Gz:Math.pow(Gz,e),new Hf(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Yf(this.r)+Yf(this.g)+Yf(this.b)},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),qf(Jf,Zf,jf(Ff,{brighter:function(e){return e=null==e?Xz:Math.pow(Xz,e),new Jf(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Gz:Math.pow(Gz,e),new Jf(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Hf(Qf(e>=240?e-240:e+120,i,r),Qf(e,i,r),Qf(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var sD=Math.PI/180,fD=180/Math.PI,lD=18,cD=.96422,dD=1,hD=.82521,pD=4/29,gD=6/29,mD=3*gD*gD,vD=gD*gD*gD;qf(tl,el,jf(Ff,{brighter:function(e){return new tl(this.l+lD*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new tl(this.l-lD*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=cD*rl(t),e=dD*rl(e),n=hD*rl(n),new Hf(il(3.1338561*t-1.6168667*e-.4906146*n),il(-.9787684*t+1.9161415*e+.033454*n),il(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),qf(sl,ul,jf(Ff,{brighter:function(e){return new sl(this.h,this.c,this.l+lD*(null==e?1:e),this.opacity)},darker:function(e){return new sl(this.h,this.c,this.l-lD*(null==e?1:e),this.opacity)},rgb:function(){return Kf(this).rgb()}}));var yD=-.14861,bD=1.78277,_D=-.29227,xD=-.90649,wD=1.97294,kD=wD*xD,MD=wD*bD,ED=bD*_D-xD*yD;qf(cl,ll,jf(Ff,{brighter:function(e){return e=null==e?Xz:Math.pow(Xz,e),new cl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Gz:Math.pow(Gz,e),new cl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*sD,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Hf(255*(t+n*(yD*r+bD*i)),255*(t+n*(_D*r+xD*i)),255*(t+n*(wD*r)),this.opacity)}}));var OD,SD,AD,CD,RD=function e(t){function n(e,t){var n=r((e=Vf(e)).r,(t=Vf(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),o=_l(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}var r=bl(t);return n.gamma=e,n}(1),TD=xl(hl),zD=xl(pl),DD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ND=new RegExp(DD.source,"g"),PD=180/Math.PI,$D={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},LD=Nl(zl,"px, ","px)","deg)"),qD=Nl(Dl,", ",")",")"),jD=Math.SQRT2,FD=2,UD=4,ID=1e-12,BD=jl(yl),WD=jl(_l),VD=Ul(yl),HD=Ul(_l),YD=Il(yl),GD=Il(_l),XD=Object.freeze({interpolate:Cl,interpolateArray:wl,interpolateBasis:hl,interpolateBasisClosed:pl,interpolateDate:kl,interpolateNumber:Ml,interpolateObject:El,interpolateRound:Rl,interpolateString:Al,interpolateTransformCss:LD,interpolateTransformSvg:qD,interpolateZoom:ql,interpolateRgb:RD,interpolateRgbBasis:TD,interpolateRgbBasisClosed:zD,interpolateHsl:BD,interpolateHslLong:WD,interpolateLab:Fl,interpolateHcl:VD,interpolateHclLong:HD,interpolateCubehelix:YD,interpolateCubehelixLong:GD,piecewise:Bl,quantize:Wl}),ZD=[0,1],JD=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;ic.prototype=ac.prototype,ac.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var QD,KD,eN,tN,nN={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return sc(100*e,t)},r:sc,s:uc,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},rN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];cc({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var iN=1e3,aN=60*iN,oN=60*aN,uN=24*oN,sN=7*uN,fN=30*uN,lN=365*uN,cN=Array.prototype.map,dN=Array.prototype.slice,hN={identity:yc,linear:vc,log:Oc,ordinal:Lf,pow:Ac,sqrt:Cc,quantile:Rc,quantize:Tc,threshold:zc,time:$c,utc:Lc,band:qc,point:Fc,sequential:Wc,"bin-linear":Ic,"bin-ordinal":Bc};for(var pN in hN)Hc(pN,hN[pN]);var gN=Yc("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),mN=Yc("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),vN=Yc("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),yN=Yc("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),bN=Yc("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),_N=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(Yc),xN=Gc("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),wN=Gc("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),kN=Gc("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),MN=Gc("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),EN=Gc("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ON=Gc("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),SN=Gc("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),AN=Gc("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),CN=Gc("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),RN=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Gc),TN=Xc(RN),zN=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Gc),DN=Xc(zN),NN=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Gc),PN=Xc(NN),$N=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Gc),LN=Xc($N),qN=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Gc),jN=Xc(qN),FN=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Gc),UN=Xc(FN),IN=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Gc),BN=Xc(IN),WN=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Gc),VN=Xc(WN),HN=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Gc),YN=Xc(HN),GN=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Gc),XN=Xc(GN),ZN=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Gc),JN=Xc(ZN),QN=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Gc),KN=Xc(QN),eP=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Gc),tP=Xc(eP),nP=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Gc),rP=Xc(nP),iP=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Gc),aP=Xc(iP),oP=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Gc),uP=Xc(oP),sP=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Gc),fP=Xc(sP),lP=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Gc),cP=Xc(lP),dP=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Gc),hP=Xc(dP),pP=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Gc),gP=Xc(pP),mP=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Gc),vP=Xc(mP),yP=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Gc),bP=Xc(yP),_P=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Gc),xP=Xc(_P),wP=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Gc),kP=Xc(wP),MP=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Gc),EP=Xc(MP),OP=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Gc),SP=Xc(OP),AP=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Gc),CP=Xc(AP),RP=GD(ll(300,.5,0),ll(-240,.5,1)),TP=GD(ll(-100,.75,.35),ll(80,1.5,.8)),zP=GD(ll(260,.75,.35),ll(80,1.5,.8)),DP=ll(),NP=Vf(),PP=Math.PI/3,$P=2*Math.PI/3,LP=Qc(Gc("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),qP=Qc(Gc("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),jP=Qc(Gc("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),FP=Qc(Gc("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),UP=Object.freeze({schemeCategory10:xN,schemeAccent:wN,schemeDark2:kN,schemePaired:MN,schemePastel1:EN,schemePastel2:ON,schemeSet1:SN,schemeSet2:AN,schemeSet3:CN,interpolateBrBG:TN,schemeBrBG:RN,interpolatePRGn:DN,schemePRGn:zN,interpolatePiYG:PN,schemePiYG:NN,interpolatePuOr:LN,schemePuOr:$N,interpolateRdBu:jN,schemeRdBu:qN,interpolateRdGy:UN,schemeRdGy:FN,interpolateRdYlBu:BN,schemeRdYlBu:IN,interpolateRdYlGn:VN,schemeRdYlGn:WN,interpolateSpectral:YN,schemeSpectral:HN,interpolateBuGn:XN,schemeBuGn:GN,interpolateBuPu:JN,schemeBuPu:ZN,interpolateGnBu:KN,schemeGnBu:QN,interpolateOrRd:tP,schemeOrRd:eP,interpolatePuBuGn:rP,schemePuBuGn:nP,interpolatePuBu:aP,schemePuBu:iP,interpolatePuRd:uP,schemePuRd:oP,interpolateRdPu:fP,schemeRdPu:sP,interpolateYlGnBu:cP,schemeYlGnBu:lP,interpolateYlGn:hP,schemeYlGn:dP,interpolateYlOrBr:gP,schemeYlOrBr:pP,interpolateYlOrRd:vP,schemeYlOrRd:mP,interpolateBlues:bP,schemeBlues:yP,interpolateGreens:xP,schemeGreens:_P,interpolateGreys:kP,schemeGreys:wP,interpolatePurples:EP,schemePurples:MP,interpolateReds:SP,schemeReds:OP,interpolateOranges:CP,schemeOranges:AP,interpolateCubehelixDefault:RP,interpolateRainbow:Zc,interpolateWarm:TP,interpolateCool:zP,interpolateSinebow:Jc,interpolateViridis:LP,interpolateMagma:qP,interpolateInferno:jP,interpolatePlasma:FP}),IP={blueorange:_N},BP={category10:xN,accent:wN,dark2:kN,paired:MN,pastel1:EN,pastel2:ON,set1:SN,set2:AN,set3:CN,category20:gN,category20b:mN,category20c:vN,tableau10:yN,tableau20:bN,viridis:LP,magma:qP,inferno:jP,plasma:FP,rainbow:Zc,sinebow:Jc,blueorange:TD(p(_N))};Kc("blues","Blues"),Kc("greens","Greens"),Kc("greys","Greys"),Kc("purples","Purples"),Kc("reds","Reds"),Kc("oranges","Oranges"),
Kc("brownbluegreen","BrBG"),Kc("purplegreen","PRGn"),Kc("pinkyellowgreen","PiYG"),Kc("purpleorange","PuOr"),Kc("redblue","RdBu"),Kc("redgrey","RdGy"),Kc("redyellowblue","RdYlBu"),Kc("redyellowgreen","RdYlGn"),Kc("spectral","Spectral"),Kc("bluegreen","BuGn"),Kc("bluepurple","BuPu"),Kc("greenblue","GnBu"),Kc("orangered","OrRd"),Kc("purplebluegreen","PuBuGn"),Kc("purpleblue","PuBu"),Kc("purplered","PuRd"),Kc("redpurple","RdPu"),Kc("yellowgreenblue","YlGnBu"),Kc("yellowgreen","YlGn"),Kc("yelloworangebrown","YlOrBr"),Kc("yelloworangered","YlOrRd");var WP={millisecond:BS,second:XS,minute:ZS,hour:JS,day:QS,week:KS,month:nA,year:rA},VP={millisecond:BS,second:XS,minute:iA,hour:aA,day:oA,week:uA,month:lA,year:cA},HP=P(md,Bn);HP.transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=null==e.count?e.values?e.values.length:10:sd(i,e.count),o=e.format||cd(i,a,e.formatSpecifier),u=e.values?fd(i,e.values,a):ld(i,a);return r&&(n.rem=r),r=u.map(function(e,t){return te({index:t/(u.length-1),value:e,label:o(e)})}),e.extra&&r.push(te({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n};var YP=P(vd,Bn);YP.transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||yd,a=e.key||K,u=this.value;return iS(r.encode)&&(r.encode=null),u&&(e.modified("key")||t.modified(a))&&o("DataJoin does not support modified key function or fields."),u||(t=t.addAll(),this.value=u=N().test(bd),u.lookup=function(e){return u.get(a(e))}),t.visit(t.ADD,function(e){var t=a(e),n=u.get(t);n?n.exit?(u.empty--,r.add.push(n)):r.mod.push(n):(u.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=a(e),n=u.get(t);n&&(n.datum=e,r.mod.push(n))}),t.visit(t.REM,function(e){var t=a(e),n=u.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++u.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&u.empty>n.cleanThreshold&&n.runAfter(u.clean),r};var GP=P(_d,Bn);GP.transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,i=t.encode;if(iS(i)){if(!n.changed()&&!i.every(function(e){return r[e]}))return t.StopPropagation;i=i[0],n.encode=null}var a="enter"===i,o=r.update||cS,u=r.enter||cS,s=r.exit||cS,f=(i&&!a?r[i]:o)||cS;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(t){u(t,e),o(t,e),f!==cS&&f!==o&&f(t,e)}),n.modifies(u.output),n.modifies(o.output),f!==cS&&f!==o&&n.modifies(f.output)),t.changed(t.REM)&&s!==cS&&(t.visit(t.REM,function(t){s(t,e)}),n.modifies(s.output)),a||f!==cS){var l=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(l,function(t){var r=u(t,e);(f(t,e)||r)&&n.mod.push(t)}),n.mod.length&&n.modifies(u.output)):t.visit(l,function(t){f(t,e)&&n.mod.push(t)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation};var XP="symbol",ZP="discrete",JP="gradient",QP={};QP[$z]=kd,QP[Lz]=wd,QP[qz]=Md,QP[jz]=QP[Fz]=Ed;var KP=P(zd,Bn);KP.transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=this.value,s=e.type||XP,f=e.scale,l=null==e.count?5:sd(f,e.count),c=e.format||cd(f,l,e.formatSpecifier),d=e.values||xd(f,l,s);return c=Od(f,c,s),u&&(o.rem=u),s===XP?(A(i=e.size)?(e.values||0!==f(d[0])||(d=d.slice(1)),a=d.reduce(function(t,n){return Math.max(t,i(n,e))},0)):i=R(a=i||8),u=d.map(function(t,n){return te({index:n,label:c(t,n,d),value:t,offset:a,size:i(t,e)})})):s===JP?(n=e.values?f.domain():d,r=nd(f,n[0],p(n)),u=d.map(function(e,t){return te({index:t,label:c(e,t,d),value:e,perc:r(e)})})):(i=d.length-1,r=Td(f),u=d.map(function(e,t){return te({index:t,label:c(e,t,d),value:e,perc:t?r(e):0,perc2:t===i?1:r(d[t+1])})})),o.source=u,o.add=u,this.value=u,o};var e$=N({line:qd,"line-radial":jd,arc:Fd,"arc-radial":Ud,curve:Id,"curve-radial":Bd,"orthogonal-horizontal":Wd,"orthogonal-vertical":Vd,"orthogonal-radial":Hd,"diagonal-horizontal":Yd,"diagonal-vertical":Gd,"diagonal-radial":Xd});Ld.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]};var t$=P(Ld,Bn);t$.transform=function(e,t){var n=e.sourceX||Dd,r=e.sourceY||Nd,i=e.targetX||Pd,a=e.targetY||$d,u=e.as||"path",s=e.orient||"vertical",f=e.shape||"line",l=e$.get(f+"-"+s)||e$.get(f);return l||o("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[u]=l(n(e),r(e),i(e),a(e))}),t.reflow(e.modified()).modifies(u)},Zd.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};var n$=P(Zd,Bn);n$.transform=function(e,t){var n,r,i,a=e.as||["startAngle","endAngle"],o=a[0],u=a[1],s=e.field||fS,f=e.startAngle||0,l=null!=e.endAngle?e.endAngle:2*Math.PI,c=t.source,d=c.map(s),h=d.length,p=f,g=(l-f)/wr(d),m=lr(h);for(e.sort&&m.sort(function(e,t){return d[e]-d[t]}),n=0;n<h;++n)i=d[m[n]],r=c[m[n]],r[o]=p,r[u]=p+=i*g;return this.value=d,t.reflow(e.modified()).modifies(a)};var r$=5,i$=G([Nz,Az,Rz]),a$=G([Nz,Sz,Az,Rz,zz,Cz]),o$=G(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]),u$=P(Jd,Bn);u$.transform=function(e,t){var n,r=t.dataflow,i=this.value;i&&!e.modified("type")||(this.value=i=Hc((e.type||Nz).toLowerCase())());for(n in e)if(!o$[n]){if("padding"===n&&a$[i.type])continue;A(i[n])?i[n](e[n]):r.warn("Unsupported scale property: "+n)}return th(i,e,Qd(i,e,r)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var s$=P(uh,Bn);s$.transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};var f$="center",l$="normalize";sh.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]};var xS=P(sh,Bn);xS.transform=function(e,t){var n,r,i,a,o=e.as||["y0","y1"],u=o[0],s=o[1],f=e.field||fS,l=e.offset===f$?fh:e.offset===l$?lh:ch;for(n=dh(t.source,e.groupby,e.sort,f),r=0,i=n.length,a=n.max;r<i;++r)l(n[r],a,f,u,s);return t.reflow(e.modified()).modifies(o)};var c$=Object.freeze({axisticks:md,datajoin:vd,encode:_d,legendentries:zd,linkpath:Ld,pie:Zd,scale:Jd,sortitems:uh,stack:sh,validTicks:fd}),d$=Array.prototype,h$=d$.slice,p$=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],g$=["size","smooth"],m$=["x","y","size","cellSize","bandwidth"];Ah.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]};var v$=P(Ah,Bn);v$.transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=e.count||10;return e.values?(n=wh(),r=g$,i=e.values):(n=Sh(),r=m$,i=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?o:Ch(o))),r.forEach(function(t){null!=e[t]&&n[t](e[t])}),this.value&&(a.rem=this.value),i=i&&i.length?n(i).map(te):[],this.value=a.source=a.add=i,a};var y$="Feature",b$="FeatureCollection",_$="MultiPoint";Rh.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};var x$=P(Rh,Bn);x$.transform=function(e,t){var n,r=this._features,i=this._points,o=e.fields,u=o&&o[0],s=o&&o[1],f=e.geojson,l=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(a(f))||u&&t.modified(a(u))||s&&t.modified(a(s)),this.value&&!n||(l=t.SOURCE,this._features=r=[],this._points=i=[]),f&&t.visit(l,function(e){r.push(f(e))}),u&&s&&(t.visit(l,function(e){var t=u(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])}),r=r.concat({type:y$,geometry:{type:_$,coordinates:i}})),this.value={type:b$,features:r}},zh.prototype={constructor:zh,reset:function(){this.s=this.t=0},add:function(e){Dh(K$,e,this.t),Dh(this,K$.s,this.s),this.s?this.t+=K$.t:this.s=K$.t},valueOf:function(){return this.s}};var w$,k$,M$,E$,O$,S$,A$,C$,R$,T$,z$,D$,N$,P$,$$,L$,q$,j$,F$,U$,I$,B$,W$,V$,H$,Y$,G$,X$,Z$,J$,Q$,K$=new zh,eL=1e-6,tL=1e-12,nL=Math.PI,rL=nL/2,iL=nL/4,aL=2*nL,oL=180/nL,uL=nL/180,sL=Math.abs,fL=Math.atan,lL=Math.atan2,cL=Math.cos,dL=Math.ceil,hL=Math.exp,pL=Math.log,gL=Math.pow,mL=Math.sin,vL=Math.sign||function(e){return e>0?1:e<0?-1:0},yL=Math.sqrt,bL=Math.tan,_L={Feature:function(e,t){Lh(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Lh(n[r].geometry,t)}},xL={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){qh(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)qh(n[r],t,0)},Polygon:function(e,t){jh(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)jh(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Lh(n[r],t)}},wL=Th(),kL=Th(),ML={point:$h,lineStart:$h,lineEnd:$h,polygonStart:function(){wL.reset(),ML.lineStart=Uh,ML.lineEnd=Ih},polygonEnd:function(){var e=+wL;kL.add(e<0?aL+e:e),this.lineStart=this.lineEnd=this.point=$h},sphere:function(){kL.add(aL)}},EL=Th(),OL={point:Kh,lineStart:tp,lineEnd:np,polygonStart:function(){OL.point=rp,OL.lineStart=ip,OL.lineEnd=ap,EL.reset(),ML.polygonStart()},polygonEnd:function(){ML.polygonEnd(),OL.point=Kh,OL.lineStart=tp,OL.lineEnd=np,wL<0?(S$=-(C$=180),A$=-(R$=90)):EL>eL?R$=90:EL<-eL&&(A$=-90),$$[0]=S$,$$[1]=C$}},SL={sphere:$h,point:lp,lineStart:dp,lineEnd:gp,polygonStart:function(){SL.lineStart=mp,SL.lineEnd=vp},polygonEnd:function(){SL.lineStart=dp,SL.lineEnd=gp}};wp.invert=wp;var AL,CL,RL,TL,zL,DL,NL,PL,$L=Th(),LL=$p(function(){return!0},jp,Up,[-nL,-rL]),qL=1e9,jL=-qL,FL=(Th(),Th()),UL=Th(),IL={point:$h,lineStart:$h,lineEnd:$h,polygonStart:function(){IL.lineStart=Xp,IL.lineEnd=Qp},polygonEnd:function(){IL.lineStart=IL.lineEnd=IL.point=$h,FL.add(sL(UL)),UL.reset()},result:function(){var e=FL/2;return FL.reset(),e}},BL=1/0,WL=BL,VL=-BL,HL=VL,YL={point:Kp,lineStart:$h,lineEnd:$h,polygonStart:$h,polygonEnd:$h,result:function(){var e=[[BL,WL],[VL,HL]];return VL=HL=-(WL=BL=1/0),e}},GL=0,XL=0,ZL=0,JL=0,QL=0,KL=0,eq=0,tq=0,nq=0,rq={point:eg,lineStart:tg,lineEnd:ig,polygonStart:function(){rq.lineStart=ag,rq.lineEnd=og},polygonEnd:function(){rq.point=eg,rq.lineStart=tg,rq.lineEnd=ig},result:function(){var e=nq?[eq/nq,tq/nq]:KL?[JL/KL,QL/KL]:ZL?[GL/ZL,XL/ZL]:[NaN,NaN];return GL=XL=ZL=JL=QL=KL=eq=tq=nq=0,e}};fg.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,aL)}},result:$h};var iq,aq,oq,uq,sq,fq=Th(),lq={point:$h,lineStart:function(){lq.point=lg},lineEnd:function(){iq&&cg(aq,oq),lq.point=$h},polygonStart:function(){iq=!0},polygonEnd:function(){iq=null},result:function(){var e=+fq;return fq.reset(),e}};dg.prototype={_radius:4.5,_circle:hg(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=hg(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},mg.prototype={constructor:mg,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cq=16,dq=cL(30*uL),hq=gg({point:function(e,t){this.stream.point(e*uL,t*uL)}}),pq=Lg(function(e){return yL(2/(1+e))});pq.invert=qg(function(e){return 2*Ph(e/2)});var gq=Lg(function(e){return(e=Nh(e))&&e/mL(e)});gq.invert=qg(function(e){return e}),Ug.invert=function(e,t){return[e,2*fL(hL(t))-rL]},Yg.invert=Yg,Jg.invert=qg(fL),tm.invert=qg(Ph),rm.invert=qg(function(e){return 2*fL(e)}),am.invert=function(e,t){return[-t,2*fL(hL(e))-rL]};var mq=pg(),vq=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],yq={albers:Ng,albersusa:$g,azimuthalequalarea:jg,azimuthalequidistant:Fg,conicconformal:Hg,conicequalarea:Dg,conicequidistant:Zg,equirectangular:Gg,gnomonic:Qg,identity:em,mercator:Ig,orthographic:nm,stereographic:im,transversemercator:om};for(var bq in yq)sm(bq,yq[bq]);lm.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};var _q=P(lm,Bn);_q.transform=function(e,t){function n(e){e[o]=i(a(e))}var r=t.fork(t.ALL),i=this.value,a=e.field||uS,o=e.as||"path",u=r.SOURCE;!i||e.modified()?(this.value=i=fm(e.projection),r.materialize().reflow()):u=a===uS||t.modified(a.fields)?r.ADD_MOD:r.ADD;var s=cm(i,e.pointRadius);return r.visit(u,n),i.pointRadius(s),r.modifies(o)},dm.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};var xq=P(dm,Bn);xq.transform=function(e,t){function n(e){var t=i([a(e),o(e)]);t?(e[s]=t[0],e[f]=t[1]):(e[s]=void 0,e[f]=void 0)}var r,i=e.projection,a=e.fields[0],o=e.fields[1],u=e.as||["x","y"],s=u[0],f=u[1];return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(r=t.modified(a.fields)||t.modified(o.fields),t.visit(r?t.ADD_MOD:t.ADD,n)),t.modifies(u)},hm.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};var wq=P(hm,Bn);wq.transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||c("datum"),a=e.as||"shape",o=n.ADD_MOD;return r&&!e.modified()||(this.value=r=pm(fm(e.projection),i,e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,function(e){e[a]=r}),n.modifies(a)},gm.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};var kq=P(gm,Bn);kq.transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)A(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(ie(r[0],n)):t.add.push(te(n)),r[0]=n,t};var Mq=P(mm,Bn);Mq.transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=ym(e.type),vq.forEach(function(t){null!=e[t]&&bm(n,t,e[t])})):vq.forEach(function(t){e.modified(t)&&bm(n,t,e[t])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&vm(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var Eq=Object.freeze({contour:Ah,geojson:Rh,geopath:lm,geopoint:dm,geoshape:hm,graticule:gm,projection:mm}),Oq=Im.prototype=Bm.prototype;Oq.copy=function(){var e,t,n=new Bm(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Wm(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=Wm(t));return n},Oq.add=Mm,Oq.addAll=Om,Oq.cover=Sm,Oq.data=Am,Oq.extent=Cm,Oq.find=Tm,Oq.remove=zm,Oq.removeAll=Dm,Oq.root=Nm,Oq.size=Pm,Oq.visit=$m,Oq.visitAfter=Lm,Oq.x=jm,Oq.y=Um;var Sq={value:function(){}};Qm.prototype=Jm.prototype={constructor:Qm,on:function(e,t){var n,r=this._,i=Km(e+"",r),a=-1,o=i.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=i[a]).type)r[n]=tv(r[n],e.name,t);else if(null==t)for(n in r)r[n]=tv(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=i[a]).type)&&(n=ev(r[n],e.name)))return n}},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qm(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],a=0,n=r.length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var Aq,Cq,Rq=0,Tq=0,zq=0,Dq=1e3,Nq=0,Pq=0,$q=0,Lq="object"==typeof performance&&performance.now?performance:Date,qq="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};iv.prototype=av.prototype={constructor:iv,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?nv():+n)+(null==t?0:+t),this._next||Cq===this||(Cq?Cq._next=this:Aq=this,Cq=this),this._call=e,this._time=n,lv()},stop:function(){this._call&&(this._call=null,this._time=1/0,lv())}};var jq=10,Fq=Math.PI*(3-Math.sqrt(5)),Uq={center:xm,collide:Ym,nbody:gv,link:Zm,x:mv,y:vv},Iq="forces",Bq=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Wq=["static","iterations"],Vq=["x","y","vx","vy"];yv.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Vq}]};var Hq=P(yv,Bn);Hq.transform=function(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(Bq),a=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&xv(n,e,0,t)):(this.value=n=_v(t.source,e),n.on("tick",bv(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Wq)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation;return this.finish(e,t)},Hq.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if(n=i[a],n.name===Iq&&"link"===n.op._argval.force)for(var u,s=n.op._argops,f=0,l=s.length;f<l;++f)if("links"===s[f].name&&(u=s[f].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(Vq)};var Yq=Object.freeze({force:yv});Qv.prototype=Yv.prototype={constructor:Qv,count:Pv,each:$v,eachAfter:qv,eachBefore:Lv,sum:jv,sort:Fv,path:Uv,ancestors:Bv,descendants:Wv,leaves:Vv,links:Hv,copy:Gv};var Gq=Array.prototype.slice,Xq="$",Zq={depth:-1},Jq={};Py.prototype=Object.create(Qv.prototype);var Qq=(1+Math.sqrt(5))/2,Kq=function e(t){function n(e,n,r,i,a){jy(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Qq),ej=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,f,l,c=-1,d=o.length,h=e.value;++c<d;){for(u=o[c],s=u.children,f=u.value=0,l=s.length;f<l;++f)u.value+=s[f].value;u.dice?My(u,n,r,i,r+=(a-r)*u.value/h):qy(u,n,r,n+=(i-n)*u.value/h,a),h-=u.value}else e._squarify=o=jy(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Qq);By.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var tj=P(By,Bn);tj.transform=function(e,t){t.source||o("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each(function(e){e.children&&Q(e.data)&&i.rem.push(e.data)}),this.value=a=Yv({values:S(e.keys).reduce(function(e,t){return e.key(t),e},Rf()).entries(i.source)},Wy),n&&a.each(function(e){e.children&&(e=te(e.data),i.add.push(e),i.source.push(e))}),Ev(a,K,K)),i.source.root=a,i};var nj=P(Vy,Bn);nj.transform=function(e,t){t.source&&t.source.root||o(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),Hy(n,this.params,e);try{this.value=n(i)}catch(u){o(u)}return i.each(function(e){Yy(e,r,a)}),t.reflow(e.modified()).modifies(a).modifies("leaf")};var rj=["x","y","r","depth","children"];Gy.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:rj}]};var ij=P(Gy,Vy);ij.layout=by,ij.params=["size","padding"],ij.fields=rj;var aj=["x0","y0","x1","y1","depth","children"];Xy.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:aj}]};var oj=P(Xy,Vy);oj.layout=Ey,oj.params=["size","round","padding"],oj.fields=aj,Zy.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};var uj=P(Zy,Bn);uj.transform=function(e,t){t.source||o("Stratify transform requires an upstream data source.");var n=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),i=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),i&&(this.value=Ev(Ay().id(e.key).parentId(e.parentKey)(r.source),e.key,lS)),r.source.root=this.value,r};var sj={tidy:Ly,cluster:Dv},fj=["x","y","depth","children"];Jy.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:fj}]};var lj=P(Jy,Vy);lj.layout=function(e){var t=e||"tidy";return sj.hasOwnProperty(t)?sj[t]():void o("Unrecognized Tree layout method: "+t)},lj.params=["size","nodeSize","separation"],lj.fields=fj,Qy.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};var cj=P(Qy,Bn);cj.transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||o("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,function(e){a[K(e)]=1}),r.each(function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[K(t)]&&a[K(n)]&&i.add.push(te({source:n,target:t}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,function(e){a[K(e)]=1}),n.forEach(function(e){(a[K(e.source)]||a[K(e.target)])&&i.mod.push(e)})),i};var dj={binary:Uy,dice:My,slice:qy,slicedice:Iy,squarify:Kq,resquarify:ej},hj=["x0","y0","x1","y1","depth","children"];Ky.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:hj}]};var pj=P(Ky,Vy);pj.layout=function(){var e=Fy();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){dj.hasOwnProperty(t)?e.tile(dj[t]):o("Unrecognized Treemap layout method: "+t)},e},pj.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],pj.fields=hj;var gj=Object.freeze({nest:By,pack:Gy,partition:Xy,stratify:Zy,tree:Jy,treelinks:Qy,treemap:Ky});rb.prototype={constructor:rb,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ub(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ab(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ob(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ob(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ab(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?ub(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ab(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ob(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ab(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ob(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ab(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ob(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var mj,vj,yj,bj,_j,xj=[],wj=[],kj=1e-6,Mj=1e-12;zb.prototype={constructor:zb,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return mb(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,u=n.site,s=-1,f=t[i[a-1]],l=f.left===u?f.right:f.left;++s<a;)o=l,f=t[i[s]],l=f.left===u?f.right:f.left,o&&l&&r<o.index&&r<l.index&&Rb(u,o,l)<0&&e.push([u.data,o.data,l.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,u=a.cells.length;!(i=a.cells[o]);)if(++o>=u)return null;var s=e-i.site[0],f=t-i.site[1],l=s*s+f*f;do i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=e-u[0],f=t-u[1],c=s*s+f*f;c<l&&(l=c,o=u.index)}});while(null!==o);return a._found=r,null==n||l<=n*n?i.site:null}},Nb.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var Ej=P(Nb,Bn),Oj=[[-1e5,-1e5],[1e5,1e5]];Ej.transform=function(e,t){var n,r,i,a,o=e.as||"path",u=t.source;for(n=Db().x(e.x).y(e.y),e.size?n.size(e.size):n.extent(e.extent||Oj),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return t.reflow(e.modified()).modifies(o)};var Sj=Object.freeze({voronoi:Nb}),Aj=Math.PI/180,Cj=64,Rj=2048,Tj={archimedean:Fb,rectangular:Ub},zj=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Dj=["text","font","rotate","fontSize","fontStyle","fontWeight"];Wb.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:zj}]};var Nj=P(Wb,Bn);Nj.transform=function(e,n){function r(t){var r=e[t];return A(r)&&n.modified(r.fields)}var i=e.modified();if(i||n.changed(n.ADD_REM)||Dj.some(r)){var a,o=n.materialize(n.SOURCE).source,u=this.value,s=e.as||zj,f=e.fontSize||14;if(A(f)?a=e.fontSizeRange:f=R(f),a){var l=f,c=Hc("sqrt")().domain(Vb(l,o)).range(a);f=function(e){return c(l(e))}}o.forEach(function(e){e[s[0]]=NaN,e[s[1]]=NaN,e[s[3]]=0});for(var d,h,p=u.words(o).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(f).random(t.random).layout(),g=u.size(),m=g[0]>>1,v=g[1]>>1,y=0,b=p.length;y<b;++y)d=p[y],
h=d.datum,h[s[0]]=d.x+m,h[s[1]]=d.y+v,h[s[2]]=d.font,h[s[3]]=d.size,h[s[4]]=d.style,h[s[5]]=d.weight,h[s[6]]=d.rotate;return n.reflow(i).modifies(s)}};var Pj=Object.freeze({wordcloud:Wb});n_.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var $j=P(n_,Bn);$j.transform=function(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)});return n?this.reinit(e,t):this.eval(e,t)}return this.init(e,t)},$j.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},u=this._dims=[],s=a.length,f=0;f<s;++f)n=i[f].fname,r=o[n]||(o[n]=Kb()),u.push(Qb(r,f,a[f]));return this.eval(e,t)},$j.reinit=function(e,t){var n,r,i,a,o,u,s,f,l,c=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,g=this._dims,m=this.value,v=m.curr(),y=m.prev(),b=m.all(),_=c.rem=c.add,x=c.mod,w=h.length,k={};if(y.set(v),t.rem.length&&(o=this.remove(e,t,c)),t.add.length&&m.add(t.add),t.mod.length)for(u={},a=t.mod,s=0,f=a.length;s<f;++s)u[a[s]._index]=1;for(s=0;s<w;++s)l=d[s],(!g[s]||e.modified("fields",s)||t.modified(l.fields))&&(i=l.fname,(n=k[i])||(p[i]=r=Kb(),k[i]=n=r.insert(l,t.source,0)),g[s]=Qb(r,s,h[s]).onAdd(n,v));for(s=0,f=m.data().length;s<f;++s)o[s]||(y[s]!==v[s]?_.push(s):u[s]&&v[s]!==b&&x.push(s));return m.mask=(1<<w)-1,c},$j.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},$j.insert=function(e,t,n){var r,i,a,o=t.add,u=this.value,s=this._dims,f=this._indices,l=e.fields,c={},d=n.add,h=u.size(),p=h+o.length,g=s.length;u.resize(p,g),u.add(o);var m=u.curr(),v=u.prev(),y=u.all();for(r=0;r<g;++r)i=l[r].fname,a=c[i]||(c[i]=f[i].insert(l[r],o,h)),s[r].onAdd(a,m);for(;h<p;++h)v[h]=y,m[h]!==y&&d.push(h)},$j.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,u=o.curr(),s=o.all(),f=e.mod;for(n=0,r=f.length;n<r;++n)i=f[n]._index,u[i]!==s&&a.push(i)},$j.remove=function(e,t,n){var r,i,a,o,u=this._indices,s=this.value,f=s.curr(),l=s.prev(),c=s.all(),d={},h=n.rem,p=t.rem;for(r=0,i=p.length;r<i;++r)a=p[r]._index,d[a]=1,l[a]=o=f[a],f[a]=c,o!==c&&h.push(a);for(a in u)u[a].remove(i,d);return this.reindex(t,i,d),d},$j.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)})},$j.update=function(e,t,n){var r,i,a=this._dims,o=e.query,u=t.stamp,s=a.length,f=0;for(n.filters=0,i=0;i<s;++i)e.modified("query",i)&&(r=i,++f);if(1===f)f=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,f=0;i<s;++i)e.modified("query",i)&&(f|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return f},$j.incrementAll=function(e,t,n,r){var i,a,o,u=this.value,s=u.seen(),f=u.curr(),l=u.prev(),c=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],g=h[1],m=d[0],v=d[1],y=e.one;if(p<m)for(i=p,a=Math.min(m,g);i<a;++i)o=c[i],s[o]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(p>m)for(i=m,a=Math.min(p,v);i<a;++i)o=c[i],s[o]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;if(g>v)for(i=Math.max(p,v),a=g;i<a;++i)o=c[i],s[o]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(g<v)for(i=Math.max(m,g),a=v;i<a;++i)o=c[i],s[o]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;e.range=t.slice()},$j.incrementOne=function(e,t,n,r){var i,a,o,u=this.value,s=u.curr(),f=e.index(),l=e.bisect(e.range),c=e.bisect(t),d=c[0],h=c[1],p=l[0],g=l[1],m=e.one;if(d<p)for(i=d,a=Math.min(p,h);i<a;++i)o=f[i],s[o]^=m,n.push(o);else if(d>p)for(i=p,a=Math.min(d,g);i<a;++i)o=f[i],s[o]^=m,r.push(o);if(h>g)for(i=Math.max(d,g),a=h;i<a;++i)o=f[i],s[o]^=m,n.push(o);else if(h<g)for(i=Math.max(p,h),a=g;i<a;++i)o=f[i],s[o]^=m,r.push(o);e.range=t.slice()},r_.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};var Lj=P(r_,Bn);Lj.transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0===(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),f=function(e){return u[e]&n?null:o[e]};return a.filter(a.MOD,f),i&i-1?(a.filter(a.ADD,function(e){var t=u[e]&n,r=!t&&t^s[e]&n;return r?o[e]:null}),a.filter(a.REM,function(e){var t=u[e]&n,r=t&&!(t^(t^s[e]&n));return r?o[e]:null})):(a.filter(a.ADD,f),a.filter(a.REM,function(e){return(u[e]&n)===i?o[e]:null})),a.filter(a.SOURCE,function(e){return f(e._index)})};var qj=Object.freeze({crossfilter:n_,resolvefilter:r_}),jj="4.0.0-rc.2",Fj="default",Uj="view",Ij="timer",Bj="window",Wj={trap:!1},Vj="vega-bind",Hj="vega-bind-name",Yj="vega-bind-radio",Gj="vega-option-",Xj="outer",Zj=["value","update","react","bind"];Z_.prototype.visit=function(e){var t,n,r,i=this;if(e(i))return 1;for(t=J_(i),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};var Jj,Qj,Kj,eF,tF,nF=1,rF=2,iF=3,aF=4,oF=5,uF=6,sF=7,fF=8,lF=9;Jj={},Jj[nF]="Boolean",Jj[rF]="<end>",Jj[iF]="Identifier",Jj[aF]="Keyword",Jj[oF]="Null",Jj[uF]="Numeric",Jj[sF]="Punctuator",Jj[fF]="String",Jj[lF]="RegularExpression";var cF="ArrayExpression",dF="BinaryExpression",hF="CallExpression",pF="ConditionalExpression",gF="Identifier",mF="Literal",vF="LogicalExpression",yF="MemberExpression",bF="ObjectExpression",_F="Property",xF="UnaryExpression",wF="Unexpected token %0",kF="Unexpected number",MF="Unexpected string",EF="Unexpected identifier",OF="Unexpected reserved word",SF="Unexpected end of input",AF="Invalid regular expression",CF="Invalid regular expression: missing /",RF="Octal literals are not allowed in strict mode.",TF="Duplicate data property in object literal not allowed in strict mode",zF="ILLEGAL",DF="Disabled.",NF=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),PF=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),$F={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},LF={if:1,this:1},qF={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},jF={},FF=new Date(2e3,0,1),UF="undefined"!=typeof window&&window||null,IF="Literal",BF="Identifier",WF="@",VF="%",HF=":",YF=Ww("area",Vh),GF=Ww("bounds",fp),XF=Ww("centroid",_p),ZF={},JF="bin_",QF="intersect",KF="union",eU="index:unit",tU={random:function(){return t.random()},isArray:iS,isBoolean:$,isDate:L,isNumber:q,isObject:s,isRegExp:j,isString:f,isTuple:Q,toBoolean:W,toDate:H,toNumber:g,toString:Y,pad:B,peek:p,truncate:X,rgb:Vf,lab:el,hcl:ul,hsl:Zf,sequence:lr,format:uw,utcFormat:fw,utcParse:cw,timeFormat:sw,timeParse:lw,monthFormat:hw,monthAbbrevFormat:pw,dayFormat:gw,dayAbbrevFormat:mw,quarter:vw,utcquarter:yw,warn:_w,info:xw,debug:ww,inScope:kw,clampRange:Mw,pinchDistance:Ew,pinchAngle:Ow,screen:Sw,containerSize:Cw,windowSize:Aw,span:zw,merge:Tw,flush:Rw,bandspace:jw,inrange:nk,setdata:Jw,pathShape:Hw,panLinear:_,panLog:x,panPow:w,zoomLinear:M,zoomLog:E,zoomPow:O,encode:rk,modify:uk},nU=["view","item","group","xy","x","y"],rU="event.vega.",iU="this.",aU={};_k("bandwidth",qw,Pw),_k("copy",Fw,Pw),_k("domain",Lw,Pw),_k("range",$w,Pw),_k("invert",Iw,Pw),_k("scale",Uw,Pw),_k("gradient",Bw,Pw),_k("geoArea",YF,Pw),_k("geoBounds",GF,Pw),_k("geoCentroid",XF,Pw),_k("geoShape",Vw,Pw),_k("indata",Xw,Zw),_k("data",Yw,Gw),_k("vlSingle",ck,Gw),_k("vlSingleDomain",pk,Gw),_k("vlMulti",ck,hk),_k("vlMultiDomain",pk,hk),_k("vlInterval",dk,Gw),_k("vlIntervalDomain",gk,Gw),_k("treePath",ek,Gw),_k("treeAncestors",tk,Gw);var oU,uU,sU={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+l("$"+e)+"]"},functions:xk,constants:qF,visitors:aU},fU=aw(sU),lU="$",cU={$tupleid:1,toString:function(){return":_tupleid_:"}},dU=Sk("key"),hU="ascending",pU="descending",gU="scope",mU="view",vU="timer",yU="view",bU="[",_U="]",xU="{",wU="}",kU=":",MU=",",EU="@",OU=">",SU=/[[\]{}]/,AU={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},CU="var datum=event.item&&event.item.datum;",RU=Kk("aggregate"),TU=Kk("axisticks"),zU=Kk("bound"),DU=Kk("collect"),NU=Kk("compare"),PU=Kk("datajoin"),$U=Kk("encode"),LU=Kk("facet"),qU=Kk("field"),jU=Kk("key"),FU=Kk("legendentries"),UU=Kk("mark"),IU=Kk("multiextent"),BU=Kk("multivalues"),WU=Kk("overlap"),VU=Kk("params"),HU=Kk("prefacet"),YU=Kk("projection"),GU=Kk("proxy"),XU=Kk("relay"),ZU=Kk("render"),JU=Kk("scale"),QU=Kk("sieve"),KU=Kk("sortitems"),eI=Kk("viewlayout"),tI=Kk("values"),nI=0,rI=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],iI=G(rI),aI=G(rI.slice(4,9)),oI=G(rI.slice(9)),uI=G(rI.slice(1,6)),sI="top",fI="left",lI="right",cI="bottom",dI="center",hI="vertical",pI="start",gI="end",mI="index",vI="label",yI="offset",bI="perc",_I="perc2",xI="size",wI="value",kI="guide-label",MI="guide-title",EI="group-title",OI="symbol",SI="gradient",AI="discrete",CI=["size","shape","fill","stroke","strokeDash","opacity"],RI={name:1,interactive:1},TI=G(["rule"]),zI=G(["group","image","rect"]),DI="mark",NI="frame",PI="scope",$I="axis",LI="axis-domain",qI="axis-grid",jI="axis-label",FI="axis-tick",UI="axis-title",II="legend",BI="legend-band",WI="legend-entry",VI="legend-gradient",HI="legend-label",YI="legend-symbol",GI="legend-title",XI="title",ZI="group",JI="rect",QI="rule",KI="symbol",eB="text",tB="datum."+bI+'<=0?"left":datum.'+bI+'>=1?"right":"center"',nB="datum."+bI+'<=0?"bottom":datum.'+bI+'>=1?"top":"middle"',rB={value:0};EE.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],u=null;for(e.add(t[0]);r<n;++r)t[r].params.pulse=Ok(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(u=t[r]);return new EE(e,i,o,a,u)};var iB=EE.prototype;iB.countsRef=function(e,t,n){var r,i,a,o=this,u=o.counts||(o.counts={}),s=OE(t);return null!=s&&(e=o.scope,r=u[s]),r?n&&n.field&&SE(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:Ok(o.output)},n&&n.field&&SE(e,a,n),i=e.add(RU(a)),r=e.add(DU({pulse:Ok(i)})),r={agg:i,ref:Ok(r)},null!=s&&(u[s]=r)),r.ref},iB.tuplesRef=function(){return Ok(this.values)},iB.extentRef=function(e,t){return AE(e,this,"extent","extent",t,!1)},iB.domainRef=function(e,t){return AE(e,this,"domain","values",t,!1)},iB.valuesRef=function(e,t,n){return AE(e,this,"vals","values",t,n||!0)},iB.lookupRef=function(e,t){return AE(e,this,"lookup","tupleindex",t,!1)},iB.indataRef=function(e,t){return AE(e,this,"indata","tupleindex",t,!0,!0)};var aB=jE(l(fI),l(lI),l(dI)),oB=jE('+(item.orient==="'+lI+'")','+(item.orient!=="'+fI+'")',"0.5"),uB=G(["width","height","padding","autosize"]),sB=nO.prototype=rO.prototype;sB.fork=function(){return new rO(this)},sB.isSubscope=function(){return this._subid>0},sB.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},sB.id=function(){return(this._subid?this._subid+":":0)+this._id++},sB.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},sB.proxy=function(e){var t=e instanceof kk?Ok(e):e;return this.add(GU({value:t}))},sB.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},sB.addUpdate=function(e){return this.updates.push(e),e},sB.finish=function(){function e(e,t,n){var r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}var t,n;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data){n=this.data[t],e(n.input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values");for(var r in n.index)e(n.index[r],t,"index:"+r)}return this},sB.pushState=function(e,t,n){this._encode.push(Ok(this.add(QU({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ok(this.proxy(n)):null),this._markpath.push(-1)},sB.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},sB.parent=function(){return p(this._parent)},sB.encode=function(){return p(this._encode)},sB.lookup=function(){return p(this._lookup)},sB.markpath=function(){var e=this._markpath;return++e[e.length-1]},sB.fieldRef=function(e,t){if(f(e))return Sk(e,t);e.signal||o("Unsupported field reference: "+l(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=Ok(this.add(qU(n)))),i},sB.compareRef=function(e,t){function n(e){return zk(e)?(i=!0,Ok(r[e.signal])):e}var r=this.signals,i=!1,a=S(e.field).map(n),o=S(e.order).map(n);return t&&a.push(cU),i?Ok(this.add(NU({fields:a,orders:o}))):Ak(a,o)},sB.keyRef=function(e,t){function n(e){return zk(e)?(i=!0,Ok(r[e.signal])):e}var r=this.signals,i=!1;return e=S(e).map(n),i?Ok(this.add(jU({fields:e,flat:t}))):Ck(e,t)},sB.sortRef=function(e){if(!e)return e;var t=[Tk(e.op,e.field),cU],n=e.order||hU;return n.signal?Ok(this.add(NU({fields:t,orders:[n=this.signalRef(n.signal),n]}))):Ak(t,[n,n])},sB.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},sB.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&o("Duplicate signal name: "+l(e));var n=t instanceof kk?t:this.add(Ek(t));return this.signals[e]=n},sB.getSignal=function(e){return this.signals[e]||o("Unrecognized signal name: "+l(e)),this.signals[e]},sB.signalRef=function(e){return this.signals[e]?Ok(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(Ek(null))),Ok(this.lambdas[e]))},sB.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=wk(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},sB.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},sB.objectProperty=function(e){return e&&s(e)?this.signalRef(e.signal||iO(e)):e},sB.addBinding=function(e,t){this.bindings||o("Nested signals do not support binding: "+l(e)),this.bindings.push(z({signal:e},t))},sB.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&o("Duplicate scale or projection name: "+l(e)),this.scales[e]=this.add(t)},sB.addScale=function(e,t){this.addScaleProj(e,JU(t))},sB.addProjection=function(e,t){this.addScaleProj(e,YU(t))},sB.getScale=function(e){return this.scales[e]||o("Unrecognized scale name: "+l(e)),this.scales[e]},sB.projectionRef=sB.scaleRef=function(e){return Ok(this.getScale(e))},sB.projectionType=sB.scaleType=function(e){return this.getScale(e).params.type},sB.addData=function(e,t){return this.data.hasOwnProperty(e)&&o("Duplicate data set name: "+l(e)),this.data[e]=t},sB.getData=function(e){return this.data[e]||o("Undefined data set name: "+l(e)),this.data[e]},sB.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&o("Duplicate data set name: "+l(e)),this.addData(e,EE.fromEntries(this,t))};var fB="sans-serif",lB=30,cB=2,dB="#4c78a8",hB="#000",pB="#888",gB="#ddd",mB=[{key:"$ref",parse:yO},{key:"$key",parse:_O},{key:"$expr",parse:bO},{key:"$field",parse:xO},{key:"$encode",parse:kO},{key:"$compare",parse:wO},{key:"$context",parse:MO},{key:"$subflow",parse:EO},{key:"$tupleid",parse:OO}],vB={skip:!0};qO.prototype=jO.prototype={fork:function(){var e=new jO(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),CO(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.request(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach(function(e){n[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[SO(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:PO,setState:$O};var yB="width",bB="height",_B="padding",xB={skip:!0},wB=P(tS,Un);wB.run=function(e){if(Un.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(t){this.error(t)}return this},wB.render=function(){return this._renderer&&(this._resize&&(this._resize=0,p_(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},wB.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},wB.container=function(){return this._el},wB.scenegraph=function(){return this._scenegraph},wB.origin=function(){return this._origin.slice()},wB.signal=function(e,t,n){var r=nS(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},wB.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},wB.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},wB.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},wB.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},wB.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},wB.renderer=function(e){return arguments.length?(Ls(e)||o("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},wB.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},wB.loader=function(e){return arguments.length?(e!==this._loader&&(Un.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},wB.resize=function(){return this._autosize=1,this},wB._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},wB._resizeView=WO,wB.addEventListener=function(e,t,n){var r=t;return n&&n.trap===!1||(r=P_(this,t),r.raw=t),this._handler.on(e,r),this},wB.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;--a>=0;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},wB.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},wB.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},wB.addSignalListener=function(e,t){var n=nS(this,e),r=rS(n,t);return r||(r=P_(this,function(){t(e,n.value)}),r.handler=t,this.on(n,null,r)),this},wB.removeSignalListener=function(e,t){var n=nS(this,e),r=rS(n,t);return r&&n._targets.remove(r),this},wB.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},wB.timer=XO,wB.events=b_,wB.finalize=M_,wB.hover=k_,wB.data=u_,wB.change=s_,wB.insert=f_,wB.remove=l_,wB.initialize=L_,wB.toImageURL=F_,wB.toCanvas=I_,wB.toSVG=B_,wB.getState=VO,wB.setState=GO,z(FA,PC,Oz,c$,Eq,Yq,gj,Sj,Pj,qj),t.version=jj,t.Dataflow=Un,t.EventStream=de,t.Parameters=ue,t.Pulse=Mn,t.MultiPulse=An,t.Operator=se,t.Transform=Bn,t.changeset=oe,t.ingest=te,t.isTuple=Q,t.definition=Wn,t.transform=Vn,t.transforms=FA,t.tupleid=K,t.scale=Hc,t.scheme=ed,t.interpolate=id,t.interpolateRange=td,t.timeInterval=od,t.utcInterval=ud,t.projection=sm,t.View=tS,t.parse=fO,t.expressionFunction=_k,t.formatLocale=cc,t.timeFormatLocale=cn,t.runtime=NO,t.runtimeContext=LO,t.bin=er,t.bootstrapCI=kr,t.quartiles=Mr,t.setRandom=rr,t.randomInteger=Er,t.randomKDE=Sr,t.randomMixture=Cr,t.randomNormal=Or,t.randomUniform=Rr,t.accessor=r,t.accessorName=i,t.accessorFields=a,t.id=oS,t.identity=uS,t.zero=sS,t.one=fS,t.truthy=lS,t.falsy=cS,t.logger=h,t.None=dS,t.Error=hS,t.Warn=pS,t.Info=gS,t.Debug=mS,t.panLinear=_,t.panLog=x,t.panPow=w,t.zoomLinear=M,t.zoomLog=E,t.zoomPow=O,t.array=S,t.compare=C,t.constant=R,t.debounce=T,t.error=o,t.extend=z,t.extentIndex=D,t.fastmap=N,t.field=c,t.inherits=P,t.isArray=iS,t.isBoolean=$,t.isDate=L,t.isFunction=A,t.isNumber=q,t.isObject=s,t.isRegExp=j,t.isString=f,t.key=F,t.merge=U,t.pad=B,t.peek=p,t.repeat=I,t.splitAccessPath=u,t.stringValue=l,t.toBoolean=W,t.toDate=H,t.toNumber=g,t.toString=Y,t.toSet=G,t.truncate=X,t.visitArray=Z,t.loader=ge,t.read=pn,t.inferType=ke,t.inferTypes=Me,t.typeParsers=zS,t.formats=Ze,t.Bounds=$i,t.Gradient=Li,t.GroupItem=ji,t.ResourceLoader=Hi,t.Item=qi,t.Scenegraph=Ku,t.Handler=ss,t.Renderer=ls,t.CanvasHandler=cs,t.CanvasRenderer=vs,t.SVGHandler=_s,t.SVGRenderer=Ms,t.SVGStringRenderer=Ds,t.RenderType=dz,t.renderModule=Ls,t.Marks=NT,t.boundClip=qs,t.boundContext=Lo,t.boundStroke=$o,t.boundItem=Gu,t.boundMark=Xu,t.pathCurves=Za,t.pathSymbols=ro,t.pathRectangle=lo,t.pathTrail=co,t.pathParse=Ja,t.pathRender=to,t.point=os,t.domCreate=ts,t.domFind=ns,t.domChild=rs,t.domClear=is,t.openTag=ws,t.closeTag=ks,t.font=Iu,t.textMetrics=CT,t.resetSVGClipId=uu,t.sceneEqual=js,t.pathEqual=Fs,t.sceneToJSON=Zu,t.sceneFromJSON=Ju,t.sceneZOrder=Vo,t.sceneVisit=Ho,t.scenePickVisit=Yo,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,n(1).Buffer)},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function n(e,n){var r=t(e);return function(t,i){return n(r(t),i,e)}}function r(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}var i={},a={},o=34,u=10,s=13,f=function(e){function f(e,r){var i,a,o=l(e,function(e,o){return i?i(e,o-1):(a=e,void(i=r?n(e,r):t(e)))});return o.columns=a||[],o}function l(e,t){function n(){if(h)return a;if(p)return p=!1,i;var t,n,r=c;if(e.charCodeAt(r)===o){for(;c++<l&&e.charCodeAt(c)!==o||e.charCodeAt(++c)===o;);return(t=c)>=l?h=!0:(n=e.charCodeAt(c++))===u?p=!0:n===s&&(p=!0,e.charCodeAt(c)===u&&++c),e.slice(r+1,t-1).replace(/""/g,'"')}for(;c<l;){if((n=e.charCodeAt(t=c++))===u)p=!0;else if(n===s)p=!0,e.charCodeAt(c)===u&&++c;else if(n!==m)continue;return e.slice(r,t)}return h=!0,e.slice(r,l)}var r,f=[],l=e.length,c=0,d=0,h=l<=0,p=!1;for(e.charCodeAt(l-1)===u&&--l,e.charCodeAt(l-1)===s&&--l;(r=n())!==a;){for(var g=[];r!==i&&r!==a;)g.push(r),r=n();t&&null==(g=t(g,d++))||f.push(g)}return f}function c(t,n){return null==n&&(n=r(t)),[n.map(p).join(e)].concat(t.map(function(t){return n.map(function(e){return p(t[e])}).join(e)})).join("\n")}function d(e){return e.map(h).join("\n")}function h(t){return t.map(p).join(e)}function p(e){return null==e?"":g.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var g=new RegExp('["'+e+"\n\r]"),m=e.charCodeAt(0);return{parse:f,parseRows:l,format:c,formatRows:d}},l=f(","),c=l.parse,d=l.parseRows,h=l.format,p=l.formatRows,g=f("\t"),m=g.parse,v=g.parseRows,y=g.format,b=g.formatRows;e.dsvFormat=f,e.csvParse=c,e.csvParseRows=d,e.csvFormat=h,e.csvFormatRows=p,e.tsvParse=m,e.tsvParseRows=v,e.tsvFormat=y,e.tsvFormatRows=b,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(73),n(9),n(72),n(22))}(this,function(e,t,n,r,i){"use strict";function a(e){return e.x+e.vx}function o(e){return e.y+e.vy}function u(e){return e.index}function s(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function f(e){return e.x}function l(e){return e.y}var c=function(e,t){function n(){var n,i,a=r.length,o=0,u=0;for(n=0;n<a;++n)i=r[n],o+=i.x,u+=i.y;for(o=o/a-e,u=u/a-t,n=0;n<a;++n)i=r[n],i.x-=o,i.y-=u}var r;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){r=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n},d=function(e){return function(){return e}},h=function(){return 1e-6*(Math.random()-.5)},p=function(e){function n(){function e(e,t,n,r,i){var a=e.data,o=e.r,u=g+o;{if(!a)return t>d+u||r<d-u||n>p+u||i<p-u;if(a.index>c.index){var s=d-a.x-a.vx,l=p-a.y-a.vy,v=s*s+l*l;v<u*u&&(0===s&&(s=h(),v+=s*s),0===l&&(l=h(),v+=l*l),v=(u-(v=Math.sqrt(v)))/v*f,c.vx+=(s*=v)*(u=(o*=o)/(m+o)),c.vy+=(l*=v)*u,a.vx-=s*(u=1-u),a.vy-=l*u)}}}for(var n,i,c,d,p,g,m,v=u.length,y=0;y<l;++y)for(i=t.quadtree(u,a,o).visitAfter(r),n=0;n<v;++n)c=u[n],g=s[c.index],m=g*g,d=c.x+c.vx,p=c.y+c.vy,i.visit(e)}function r(e){if(e.data)return e.r=s[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function i(){if(u){var t,n,r=u.length;for(s=new Array(r),t=0;t<r;++t)n=u[t],s[n.index]=+e(n,t,u)}}var u,s,f=1,l=1;return"function"!=typeof e&&(e=d(null==e?1:+e)),n.initialize=function(e){u=e,i()},n.iterations=function(e){return arguments.length?(l=+e,n):l},n.strength=function(e){return arguments.length?(f=+e,n):f},n.radius=function(t){return arguments.length?(e="function"==typeof t?t:d(+t),i(),n):e},n},g=function(e){function t(e){return 1/Math.min(p[e.source.index],p[e.target.index])}function r(t){for(var n=0,r=e.length;n<b;++n)for(var i,a,o,u,s,c,d,p=0;p<r;++p)i=e[p],a=i.source,o=i.target,u=o.x+o.vx-a.x-a.vx||h(),s=o.y+o.vy-a.y-a.vy||h(),c=Math.sqrt(u*u+s*s),c=(c-l[p])/c*t*f[p],u*=c,s*=c,o.vx-=u*(d=g[p]),o.vy-=s*d,a.vx+=u*(d=1-d),a.vy+=s*d}function i(){if(c){var t,r,i=c.length,u=e.length,d=n.map(c,m);for(t=0,p=new Array(i);t<u;++t)r=e[t],r.index=t,"object"!=typeof r.source&&(r.source=s(d,r.source)),"object"!=typeof r.target&&(r.target=s(d,r.target)),p[r.source.index]=(p[r.source.index]||0)+1,p[r.target.index]=(p[r.target.index]||0)+1;for(t=0,g=new Array(u);t<u;++t)r=e[t],g[t]=p[r.source.index]/(p[r.source.index]+p[r.target.index]);f=new Array(u),a(),l=new Array(u),o()}}function a(){if(c)for(var t=0,n=e.length;t<n;++t)f[t]=+v(e[t],t,e)}function o(){if(c)for(var t=0,n=e.length;t<n;++t)l[t]=+y(e[t],t,e)}var f,l,c,p,g,m=u,v=t,y=d(30),b=1;return null==e&&(e=[]),r.initialize=function(e){c=e,i()},r.links=function(t){return arguments.length?(e=t,i(),r):e},r.id=function(e){return arguments.length?(m=e,r):m},r.iterations=function(e){return arguments.length?(b=+e,r):b},r.strength=function(e){return arguments.length?(v="function"==typeof e?e:d(+e),a(),r):v},r.distance=function(e){return arguments.length?(y="function"==typeof e?e:d(+e),o(),r):y},r},m=10,v=Math.PI*(3-Math.sqrt(5)),y=function(e){function t(){a(),y.call("tick",s),f<l&&(g.stop(),y.call("end",s))}function a(){var t,n,r=e.length;for(f+=(d-f)*c,p.each(function(e){e(f)}),t=0;t<r;++t)n=e[t],null==n.fx?n.x+=n.vx*=h:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=h:(n.y=n.fy,n.vy=0)}function o(){for(var t,n=0,r=e.length;n<r;++n){if(t=e[n],t.index=n,isNaN(t.x)||isNaN(t.y)){var i=m*Math.sqrt(n),a=n*v;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function u(t){return t.initialize&&t.initialize(e),t}var s,f=1,l=.001,c=1-Math.pow(l,1/300),d=0,h=.6,p=n.map(),g=i.timer(t),y=r.dispatch("tick","end");return null==e&&(e=[]),o(),s={tick:a,restart:function(){return g.restart(t),s},stop:function(){return g.stop(),s},nodes:function(t){return arguments.length?(e=t,o(),p.each(u),s):e},alpha:function(e){return arguments.length?(f=+e,s):f},alphaMin:function(e){return arguments.length?(l=+e,s):l},alphaDecay:function(e){return arguments.length?(c=+e,s):+c},alphaTarget:function(e){return arguments.length?(d=+e,s):d},velocityDecay:function(e){return arguments.length?(h=1-e,s):1-h},force:function(e,t){return arguments.length>1?(null==t?p.remove(e):p.set(e,u(t)),s):p.get(e)},find:function(t,n,r){var i,a,o,u,s,f=0,l=e.length;for(null==r?r=1/0:r*=r,f=0;f<l;++f)u=e[f],i=t-u.x,a=n-u.y,o=i*i+a*a,o<r&&(s=u,r=o);return s},on:function(e,t){return arguments.length>1?(y.on(e,t),s):y.on(e)}}},b=function(){function e(e){var n,s=a.length,c=t.quadtree(a,f,l).visitAfter(r);for(u=e,n=0;n<s;++n)o=a[n],c.visit(i)}function n(){if(a){var e,t,n=a.length;for(s=new Array(n),e=0;e<n;++e)t=a[e],s[t.index]=+c(t,e,a)}}function r(e){var t,n,r,i,a,o=0,u=0;if(e.length){for(r=i=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(o+=t.value,u+=n,r+=n*t.x,i+=n*t.y);e.x=r/u,e.y=i/u}else{t=e,t.x=t.data.x,t.y=t.data.y;do o+=s[t.data.index];while(t=t.next)}e.value=o}function i(e,t,n,r){if(!e.value)return!0;var i=e.x-o.x,a=e.y-o.y,f=r-t,l=i*i+a*a;if(f*f/m<l)return l<g&&(0===i&&(i=h(),l+=i*i),0===a&&(a=h(),l+=a*a),l<p&&(l=Math.sqrt(p*l)),o.vx+=i*e.value*u/l,o.vy+=a*e.value*u/l),!0;if(!(e.length||l>=g)){(e.data!==o||e.next)&&(0===i&&(i=h(),l+=i*i),0===a&&(a=h(),l+=a*a),l<p&&(l=Math.sqrt(p*l)));do e.data!==o&&(f=s[e.data.index]*u/l,o.vx+=i*f,o.vy+=a*f);while(e=e.next)}}var a,o,u,s,c=d(-30),p=1,g=1/0,m=.81;return e.initialize=function(e){a=e,n()},e.strength=function(t){return arguments.length?(c="function"==typeof t?t:d(+t),n(),e):c},e.distanceMin=function(t){return arguments.length?(p=t*t,e):Math.sqrt(p)},e.distanceMax=function(t){return arguments.length?(g=t*t,e):Math.sqrt(g)},e.theta=function(t){return arguments.length?(m=t*t,e):Math.sqrt(m)},e},_=function(e,t,n){function r(e){for(var r=0,i=a.length;r<i;++r){var s=a[r],f=s.x-t||1e-6,l=s.y-n||1e-6,c=Math.sqrt(f*f+l*l),d=(u[r]-c)*o[r]*e/c;s.vx+=f*d,s.vy+=l*d}}function i(){if(a){var t,n=a.length;for(o=new Array(n),u=new Array(n),t=0;t<n;++t)u[t]=+e(a[t],t,a),o[t]=isNaN(u[t])?0:+s(a[t],t,a)}}var a,o,u,s=d(.1);return"function"!=typeof e&&(e=d(+e)),null==t&&(t=0),null==n&&(n=0),r.initialize=function(e){a=e,i()},r.strength=function(e){return arguments.length?(s="function"==typeof e?e:d(+e),
i(),r):s},r.radius=function(t){return arguments.length?(e="function"==typeof t?t:d(+t),i(),r):e},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(e){return arguments.length?(n=+e,r):n},r},x=function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)t=r[n],t.vx+=(a[n]-t.x)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=d(.1);return"function"!=typeof e&&(e=d(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:d(+e),n(),t):o},t.x=function(r){return arguments.length?(e="function"==typeof r?r:d(+r),n(),t):e},t},w=function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)t=r[n],t.vy+=(a[n]-t.y)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=d(.1);return"function"!=typeof e&&(e=d(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:d(+e),n(),t):o},t.y=function(r){return arguments.length?(e="function"==typeof r?r:d(+r),n(),t):e},t};e.forceCenter=c,e.forceCollide=p,e.forceLink=g,e.forceManyBody=b,e.forceRadial=_,e.forceSimulation=y,e.forceX=x,e.forceY=w,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(8))}(this,function(e,t){"use strict";function n(){return new r}function r(){this.reset()}function i(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}function a(e){return e>1?0:e<-1?Pn:Math.acos(e)}function o(e){return e>1?$n:e<-1?-$n:Math.asin(e)}function u(e){return(e=Xn(e/2))*e}function s(){}function f(e,t){e&&er.hasOwnProperty(e.type)&&er[e.type](e,t)}function l(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function c(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)l(e[n],t,1);t.polygonEnd()}function d(e,t){e&&Kn.hasOwnProperty(e.type)?Kn[e.type](e,t):f(e,t)}function h(){rr.point=g}function p(){m(en,tn)}function g(e,t){rr.point=m,en=e,tn=t,e*=Fn,t*=Fn,nn=e,rn=Wn(t=t/2+Ln),an=Xn(t)}function m(e,t){e*=Fn,t*=Fn,t=t/2+Ln;var n=e-nn,r=n>=0?1:-1,i=r*n,a=Wn(t),o=Xn(t),u=an*o,s=rn*a+u*Wn(i),f=u*r*Xn(i);tr.add(Bn(f,s)),nn=e,rn=a,an=o}function v(e){return nr.reset(),d(e,rr),2*nr}function y(e){return[Bn(e[1],e[0]),o(e[2])]}function b(e){var t=e[0],n=e[1],r=Wn(n);return[r*Wn(t),r*Xn(t),Xn(n)]}function _(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function x(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function w(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function k(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function M(e){var t=Jn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function E(e,t){pn.push(gn=[on=e,sn=e]),t<un&&(un=t),t>fn&&(fn=t)}function O(e,t){var n=b([e*Fn,t*Fn]);if(hn){var r=x(hn,n),i=[r[1],-r[0],0],a=x(i,r);M(a),a=y(a);var o,u=e-ln,s=u>0?1:-1,f=a[0]*jn*s,l=Un(u)>180;l^(s*ln<f&&f<s*e)?(o=a[1]*jn,o>fn&&(fn=o)):(f=(f+360)%360-180,l^(s*ln<f&&f<s*e)?(o=-a[1]*jn,o<un&&(un=o)):(t<un&&(un=t),t>fn&&(fn=t))),l?e<ln?z(on,e)>z(on,sn)&&(sn=e):z(e,sn)>z(on,sn)&&(on=e):sn>=on?(e<on&&(on=e),e>sn&&(sn=e)):e>ln?z(on,e)>z(on,sn)&&(sn=e):z(e,sn)>z(on,sn)&&(on=e)}else pn.push(gn=[on=e,sn=e]);t<un&&(un=t),t>fn&&(fn=t),hn=n,ln=e}function S(){ar.point=O}function A(){gn[0]=on,gn[1]=sn,ar.point=E,hn=null}function C(e,t){if(hn){var n=e-ln;ir.add(Un(n)>180?n+(n>0?360:-360):n)}else cn=e,dn=t;rr.point(e,t),O(e,t)}function R(){rr.lineStart()}function T(){C(cn,dn),rr.lineEnd(),Un(ir)>Dn&&(on=-(sn=180)),gn[0]=on,gn[1]=sn,hn=null}function z(e,t){return(t-=e)<0?t+360:t}function D(e,t){return e[0]-t[0]}function N(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function P(e){var t,n,r,i,a,o,u;if(fn=sn=-(on=un=1/0),pn=[],d(e,ar),n=pn.length){for(pn.sort(D),t=1,r=pn[0],a=[r];t<n;++t)i=pn[t],N(r,i[0])||N(r,i[1])?(z(r[0],i[1])>z(r[0],r[1])&&(r[1]=i[1]),z(i[0],r[1])>z(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-(1/0),n=a.length-1,t=0,r=a[n];t<=n;r=i,++t)i=a[t],(u=z(r[1],i[0]))>o&&(o=u,on=i[0],sn=r[1])}return pn=gn=null,on===1/0||un===1/0?[[NaN,NaN],[NaN,NaN]]:[[on,un],[sn,fn]]}function $(e,t){e*=Fn,t*=Fn;var n=Wn(t);L(n*Wn(e),n*Xn(e),Xn(t))}function L(e,t,n){++mn,yn+=(e-yn)/mn,bn+=(t-bn)/mn,_n+=(n-_n)/mn}function q(){or.point=j}function j(e,t){e*=Fn,t*=Fn;var n=Wn(t);Cn=n*Wn(e),Rn=n*Xn(e),Tn=Xn(t),or.point=F,L(Cn,Rn,Tn)}function F(e,t){e*=Fn,t*=Fn;var n=Wn(t),r=n*Wn(e),i=n*Xn(e),a=Xn(t),o=Bn(Jn((o=Rn*a-Tn*i)*o+(o=Tn*r-Cn*a)*o+(o=Cn*i-Rn*r)*o),Cn*r+Rn*i+Tn*a);vn+=o,xn+=o*(Cn+(Cn=r)),wn+=o*(Rn+(Rn=i)),kn+=o*(Tn+(Tn=a)),L(Cn,Rn,Tn)}function U(){or.point=$}function I(){or.point=W}function B(){V(Sn,An),or.point=$}function W(e,t){Sn=e,An=t,e*=Fn,t*=Fn,or.point=V;var n=Wn(t);Cn=n*Wn(e),Rn=n*Xn(e),Tn=Xn(t),L(Cn,Rn,Tn)}function V(e,t){e*=Fn,t*=Fn;var n=Wn(t),r=n*Wn(e),i=n*Xn(e),a=Xn(t),u=Rn*a-Tn*i,s=Tn*r-Cn*a,f=Cn*i-Rn*r,l=Jn(u*u+s*s+f*f),c=o(l),d=l&&-c/l;Mn+=d*u,En+=d*s,On+=d*f,vn+=c,xn+=c*(Cn+(Cn=r)),wn+=c*(Rn+(Rn=i)),kn+=c*(Tn+(Tn=a)),L(Cn,Rn,Tn)}function H(e){mn=vn=yn=bn=_n=xn=wn=kn=Mn=En=On=0,d(e,or);var t=Mn,n=En,r=On,i=t*t+n*n+r*r;return i<Nn&&(t=xn,n=wn,r=kn,vn<Dn&&(t=yn,n=bn,r=_n),i=t*t+n*n+r*r,i<Nn)?[NaN,NaN]:[Bn(n,t)*jn,o(r/Jn(i))*jn]}function Y(e){return function(){return e}}function G(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function X(e,t){return[e>Pn?e-qn:e<-Pn?e+qn:e,t]}function Z(e,t,n){return(e%=qn)?t||n?G(Q(e),K(t,n)):Q(e):t||n?K(t,n):X}function J(e){return function(t,n){return t+=e,[t>Pn?t-qn:t<-Pn?t+qn:t,n]}}function Q(e){var t=J(e);return t.invert=J(-e),t}function K(e,t){function n(e,t){var n=Wn(t),s=Wn(e)*n,f=Xn(e)*n,l=Xn(t),c=l*r+s*i;return[Bn(f*a-c*u,s*r-l*i),o(c*a+f*u)]}var r=Wn(e),i=Xn(e),a=Wn(t),u=Xn(t);return n.invert=function(e,t){var n=Wn(t),s=Wn(e)*n,f=Xn(e)*n,l=Xn(t),c=l*a-f*u;return[Bn(f*a+l*u,s*r+c*i),o(c*r-s*i)]},n}function ee(e){function t(t){return t=e(t[0]*Fn,t[1]*Fn),t[0]*=jn,t[1]*=jn,t}return e=Z(e[0]*Fn,e[1]*Fn,e.length>2?e[2]*Fn:0),t.invert=function(t){return t=e.invert(t[0]*Fn,t[1]*Fn),t[0]*=jn,t[1]*=jn,t},t}function te(e,t,n,r,i,a){if(n){var o=Wn(t),u=Xn(t),s=r*n;null==i?(i=t+r*qn,a=t-s/2):(i=ne(o,i),a=ne(o,a),(r>0?i<a:i>a)&&(i+=r*qn));for(var f,l=i;r>0?l>a:l<a;l-=s)f=y([o,-u*Wn(l),-u*Xn(l)]),e.point(f[0],f[1])}}function ne(e,t){t=b(t),t[0]-=e,M(t);var n=a(-t[1]);return((-t[2]<0?-n:n)+qn-Dn)%qn}function re(){function e(e,t){n.push(e=r(e,t)),e[0]*=jn,e[1]*=jn}function t(){var e=i.apply(this,arguments),t=a.apply(this,arguments)*Fn,s=o.apply(this,arguments)*Fn;return n=[],r=Z(-e[0]*Fn,-e[1]*Fn,0).invert,te(u,t,s,1),e={type:"Polygon",coordinates:[n]},n=r=null,e}var n,r,i=Y([0,0]),a=Y(90),o=Y(6),u={point:e};return t.center=function(e){return arguments.length?(i="function"==typeof e?e:Y([+e[0],+e[1]]),t):i},t.radius=function(e){return arguments.length?(a="function"==typeof e?e:Y(+e),t):a},t.precision=function(e){return arguments.length?(o="function"==typeof e?e:Y(+e),t):o},t}function ie(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:s,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ae(e,t){return Un(e[0]-t[0])<Dn&&Un(e[1]-t[1])<Dn}function oe(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ue(e,t,n,r,i){var a,o,u=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(ae(r,o)){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);return void i.lineEnd()}u.push(n=new oe(r,e,null,(!0))),s.push(n.o=new oe(r,null,n,(!1))),u.push(n=new oe(o,e,null,(!1))),s.push(n.o=new oe(o,null,n,(!0)))}}),u.length){for(s.sort(t),se(u),se(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var f,l,c=u[0];;){for(var d=c,h=!0;d.v;)if((d=d.n)===c)return;f=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=f.length;a<o;++a)i.point((l=f[a])[0],l[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(f=d.p.z,a=f.length-1;a>=0;--a)i.point((l=f[a])[0],l[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,f=d.z,h=!h}while(!d.v);i.lineEnd()}}}function se(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function fe(e,t){var n=t[0],r=t[1],i=Xn(r),a=[Xn(n),-Wn(n),0],u=0,s=0;yr.reset(),1===i?r=$n+Dn:i===-1&&(r=-$n-Dn);for(var f=0,l=e.length;f<l;++f)if(d=(c=e[f]).length)for(var c,d,h=c[d-1],p=h[0],g=h[1]/2+Ln,m=Xn(g),v=Wn(g),y=0;y<d;++y,p=w,m=E,v=O,h=_){var _=c[y],w=_[0],k=_[1]/2+Ln,E=Xn(k),O=Wn(k),S=w-p,A=S>=0?1:-1,C=A*S,R=C>Pn,T=m*E;if(yr.add(Bn(T*A*Xn(C),v*O+T*Wn(C))),u+=R?S+A*qn:S,R^p>=n^w>=n){var z=x(b(h),b(_));M(z);var D=x(a,z);M(D);var N=(R^S>=0?-1:1)*o(D[2]);(r>N||r===N&&(z[0]||z[1]))&&(s+=R^S>=0?1:-1)}}return(u<-Dn||u<Dn&&yr<-Dn)^1&s}function le(e,n,r,i){return function(a){function o(t,n){e(t,n)&&a.point(t,n)}function u(e,t){m.point(e,t)}function s(){_.point=u,m.lineStart()}function f(){_.point=o,m.lineEnd()}function l(e,t){g.push([e,t]),y.point(e,t)}function c(){y.lineStart(),g=[]}function d(){l(g[0][0],g[0][1]),y.lineEnd();var e,t,n,r,i=y.clean(),o=v.result(),u=o.length;if(g.pop(),h.push(g),g=null,u)if(1&i){if(n=o[0],(t=n.length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart(),e=0;e<t;++e)a.point((r=n[e])[0],r[1]);a.lineEnd()}}else u>1&&2&i&&o.push(o.pop().concat(o.shift())),p.push(o.filter(ce))}var h,p,g,m=n(a),v=ie(),y=n(v),b=!1,_={point:o,lineStart:s,lineEnd:f,polygonStart:function(){_.point=l,_.lineStart=c,_.lineEnd=d,p=[],h=[]},polygonEnd:function(){_.point=o,_.lineStart=s,_.lineEnd=f,p=t.merge(p);var e=fe(h,i);p.length?(b||(a.polygonStart(),b=!0),ue(p,de,e,r,a)):e&&(b||(a.polygonStart(),b=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),p=h=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return _}}function ce(e){return e.length>1}function de(e,t){return((e=e.x)[0]<0?e[1]-$n-Dn:$n-e[1])-((t=t.x)[0]<0?t[1]-$n-Dn:$n-t[1])}function he(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var u=a>0?Pn:-Pn,s=Un(a-n);Un(s-Pn)<Dn?(e.point(n,r=(r+o)/2>0?$n:-$n),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(a,r),t=0):i!==u&&s>=Pn&&(Un(n-i)<Dn&&(n-=i*Dn),Un(a-u)<Dn&&(a-=u*Dn),r=pe(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=a,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function pe(e,t,n,r){var i,a,o=Xn(e-n);return Un(o)>Dn?In((Xn(t)*(a=Wn(r))*Xn(n)-Xn(r)*(i=Wn(t))*Xn(e))/(i*a*o)):(t+r)/2}function ge(e,t,n,r){var i;if(null==e)i=n*$n,r.point(-Pn,i),r.point(0,i),r.point(Pn,i),r.point(Pn,0),r.point(Pn,-i),r.point(0,-i),r.point(-Pn,-i),r.point(-Pn,0),r.point(-Pn,i);else if(Un(e[0]-t[0])>Dn){var a=e[0]<t[0]?Pn:-Pn;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function me(e){function t(t,n,r,i){te(i,e,u,r,t,n)}function n(e,t){return Wn(e)*Wn(t)>o}function r(e){var t,r,o,u,l;return{lineStart:function(){u=o=!1,l=1},point:function(c,d){var h,p=[c,d],g=n(c,d),m=s?g?0:a(c,d):g?a(c+(c<0?Pn:-Pn),d):0;if(!t&&(u=o=g)&&e.lineStart(),g!==o&&(h=i(t,p),(!h||ae(t,h)||ae(p,h))&&(p[0]+=Dn,p[1]+=Dn,g=n(p[0],p[1]))),g!==o)l=0,g?(e.lineStart(),h=i(p,t),e.point(h[0],h[1])):(h=i(t,p),e.point(h[0],h[1]),e.lineEnd()),t=h;else if(f&&t&&s^g){var v;m&r||!(v=i(p,t,!0))||(l=0,s?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||t&&ae(t,p)||e.point(p[0],p[1]),t=p,o=g,r=m},lineEnd:function(){o&&e.lineEnd(),t=null},clean:function(){return l|(u&&o)<<1}}}function i(e,t,n){var r=b(e),i=b(t),a=[1,0,0],u=x(r,i),s=_(u,u),f=u[0],l=s-f*f;if(!l)return!n&&e;var c=o*s/l,d=-o*f/l,h=x(a,u),p=k(a,c),g=k(u,d);w(p,g);var m=h,v=_(p,m),M=_(m,m),E=v*v-M*(_(p,p)-1);if(!(E<0)){var O=Jn(E),S=k(m,(-v-O)/M);if(w(S,p),S=y(S),!n)return S;var A,C=e[0],R=t[0],T=e[1],z=t[1];R<C&&(A=C,C=R,R=A);var D=R-C,N=Un(D-Pn)<Dn,P=N||D<Dn;if(!N&&z<T&&(A=T,T=z,z=A),P?N?T+z>0^S[1]<(Un(S[0]-C)<Dn?T:z):T<=S[1]&&S[1]<=z:D>Pn^(C<=S[0]&&S[0]<=R)){var $=k(m,(-v+O)/M);return w($,p),[S,y($)]}}}function a(t,n){var r=s?e:Pn-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Wn(e),u=6*Fn,s=o>0,f=Un(o)>Dn;return le(n,r,t,s?[0,-e]:[-Pn,e-Pn])}function ve(e,t,n,r,i,a){var o,u=e[0],s=e[1],f=t[0],l=t[1],c=0,d=1,h=f-u,p=l-s;if(o=n-u,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>c&&(c=o)}if(o=i-u,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<d&&(d=o)}if(o=r-s,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>c&&(c=o)}if(o=a-s,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<d&&(d=o)}return c>0&&(e[0]=u+c*h,e[1]=s+c*p),d<1&&(t[0]=u+d*h,t[1]=s+d*p),!0}}}}}function ye(e,n,r,i){function a(t,a){return e<=t&&t<=r&&n<=a&&a<=i}function o(t,a,o,s){var l=0,c=0;if(null==t||(l=u(t,o))!==(c=u(a,o))||f(t,a)<0^o>0)do s.point(0===l||3===l?e:r,l>1?i:n);while((l=(l+o+4)%4)!==c);else s.point(a[0],a[1])}function u(t,i){return Un(t[0]-e)<Dn?i>0?0:3:Un(t[0]-r)<Dn?i>0?2:1:Un(t[1]-n)<Dn?i>0?1:0:i>0?3:2}function s(e,t){return f(e.x,t.x)}function f(e,t){var n=u(e,1),r=u(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(u){function f(e,t){a(e,t)&&S.point(e,t)}function l(){for(var t=0,n=0,r=v.length;n<r;++n)for(var a,o,u=v[n],s=1,f=u.length,l=u[0],c=l[0],d=l[1];s<f;++s)a=c,o=d,l=u[s],c=l[0],d=l[1],o<=i?d>i&&(c-a)*(i-o)>(d-o)*(e-a)&&++t:d<=i&&(c-a)*(i-o)<(d-o)*(e-a)&&--t;return t}function c(){S=A,m=[],v=[],O=!0}function d(){var e=l(),n=O&&e,r=(m=t.merge(m)).length;(n||r)&&(u.polygonStart(),n&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),r&&ue(m,s,e,o,u),u.polygonEnd()),S=u,m=v=y=null}function h(){C.point=g,v&&v.push(y=[]),E=!0,M=!1,w=k=NaN}function p(){m&&(g(b,_),x&&M&&A.rejoin(),m.push(A.result())),C.point=f,M&&S.lineEnd()}function g(t,o){var u=a(t,o);if(v&&y.push([t,o]),E)b=t,_=o,x=u,E=!1,u&&(S.lineStart(),S.point(t,o));else if(u&&M)S.point(t,o);else{var s=[w=Math.max(xr,Math.min(_r,w)),k=Math.max(xr,Math.min(_r,k))],f=[t=Math.max(xr,Math.min(_r,t)),o=Math.max(xr,Math.min(_r,o))];ve(s,f,e,n,r,i)?(M||(S.lineStart(),S.point(s[0],s[1])),S.point(f[0],f[1]),u||S.lineEnd(),O=!1):u&&(S.lineStart(),S.point(t,o),O=!1)}w=t,k=o,M=u}var m,v,y,b,_,x,w,k,M,E,O,S=u,A=ie(),C={point:f,lineStart:h,lineEnd:p,polygonStart:c,polygonEnd:d};return C}}function be(){var e,t,n,r=0,i=0,a=960,o=500;return n={stream:function(n){return e&&t===n?e:e=ye(r,i,a,o)(t=n)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],a=+u[1][0],o=+u[1][1],e=t=null,n):[[r,i],[a,o]]}}}function _e(){kr.point=we,kr.lineEnd=xe}function xe(){kr.point=kr.lineEnd=s}function we(e,t){e*=Fn,t*=Fn,ur=e,sr=Xn(t),fr=Wn(t),kr.point=ke}function ke(e,t){e*=Fn,t*=Fn;var n=Xn(t),r=Wn(t),i=Un(e-ur),a=Wn(i),o=Xn(i),u=r*o,s=fr*n-sr*r*a,f=sr*n+fr*r*a;wr.add(Bn(Jn(u*u+s*s),f)),ur=e,sr=n,fr=r}function Me(e){return wr.reset(),d(e,kr),+wr}function Ee(e,t){return Mr[0]=e,Mr[1]=t,Me(Er)}function Oe(e,t){return!(!e||!Sr.hasOwnProperty(e.type))&&Sr[e.type](e,t)}function Se(e,t){return 0===Ee(e,t)}function Ae(e,t){var n=Ee(e[0],e[1]),r=Ee(e[0],t),i=Ee(t,e[1]);return r+i<=n+Dn}function Ce(e,t){return!!fe(e.map(Re),Te(t))}function Re(e){return e=e.map(Te),e.pop(),e}function Te(e){return[e[0]*Fn,e[1]*Fn]}function ze(e,t){return(e&&Or.hasOwnProperty(e.type)?Or[e.type]:Oe)(e,t)}function De(e,n,r){var i=t.range(e,n-Dn,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function Ne(e,n,r){var i=t.range(e,n-Dn,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function Pe(){function e(){return{type:"MultiLineString",coordinates:n()}}function n(){return t.range(Vn(o/v)*v,a,v).map(h).concat(t.range(Vn(l/y)*y,f,y).map(p)).concat(t.range(Vn(i/g)*g,r,g).filter(function(e){return Un(e%v)>Dn}).map(c)).concat(t.range(Vn(s/m)*m,u,m).filter(function(e){return Un(e%y)>Dn}).map(d))}var r,i,a,o,u,s,f,l,c,d,h,p,g=10,m=g,v=90,y=360,b=2.5;return e.lines=function(){return n().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(f).slice(1),h(a).reverse().slice(1),p(l).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(o=+t[0][0],a=+t[1][0],l=+t[0][1],f=+t[1][1],o>a&&(t=o,o=a,a=t),l>f&&(t=l,l=f,f=t),e.precision(b)):[[o,l],[a,f]]},e.extentMinor=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],s=+t[0][1],u=+t[1][1],i>r&&(t=i,i=r,r=t),s>u&&(t=s,s=u,u=t),e.precision(b)):[[i,s],[r,u]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(v=+t[0],y=+t[1],e):[v,y]},e.stepMinor=function(t){return arguments.length?(g=+t[0],m=+t[1],e):[g,m]},e.precision=function(t){return arguments.length?(b=+t,c=De(s,u,90),d=Ne(i,r,b),h=De(l,f,90),p=Ne(o,a,b),e):b},e.extentMajor([[-180,-90+Dn],[180,90-Dn]]).extentMinor([[-180,-80-Dn],[180,80+Dn]])}function $e(){return Pe()()}function Le(e,t){var n=e[0]*Fn,r=e[1]*Fn,i=t[0]*Fn,a=t[1]*Fn,s=Wn(r),f=Xn(r),l=Wn(a),c=Xn(a),d=s*Wn(n),h=s*Xn(n),p=l*Wn(i),g=l*Xn(i),m=2*o(Jn(u(a-r)+s*l*u(i-n))),v=Xn(m),y=m?function(e){var t=Xn(e*=m)/v,n=Xn(m-e)/v,r=n*d+t*p,i=n*h+t*g,a=n*f+t*c;return[Bn(i,r)*jn,Bn(a,Jn(r*r+i*i))*jn]}:function(){return[n*jn,r*jn]};return y.distance=m,y}function qe(e){return e}function je(){Rr.point=Fe}function Fe(e,t){Rr.point=Ue,lr=dr=e,cr=hr=t}function Ue(e,t){Cr.add(hr*e-dr*t),dr=e,hr=t}function Ie(){Ue(lr,cr)}function Be(e,t){e<Tr&&(Tr=e),e>Dr&&(Dr=e),t<zr&&(zr=t),t>Nr&&(Nr=t)}function We(e,t){$r+=e,Lr+=t,++qr}function Ve(){Vr.point=He}function He(e,t){Vr.point=Ye,We(mr=e,vr=t)}function Ye(e,t){var n=e-mr,r=t-vr,i=Jn(n*n+r*r);jr+=i*(mr+e)/2,Fr+=i*(vr+t)/2,Ur+=i,We(mr=e,vr=t)}function Ge(){Vr.point=We}function Xe(){Vr.point=Je}function Ze(){Qe(pr,gr)}function Je(e,t){Vr.point=Qe,We(pr=mr=e,gr=vr=t)}function Qe(e,t){var n=e-mr,r=t-vr,i=Jn(n*n+r*r);jr+=i*(mr+e)/2,Fr+=i*(vr+t)/2,Ur+=i,i=vr*e-mr*t,Ir+=i*(mr+e),Br+=i*(vr+t),Wr+=3*i,We(mr=e,vr=t)}function Ke(e){this._context=e}function et(e,t){Qr.point=tt,Yr=Xr=e,Gr=Zr=t}function tt(e,t){Xr-=e,Zr-=t,Jr.add(Jn(Xr*Xr+Zr*Zr)),Xr=e,Zr=t}function nt(){this._string=[]}function rt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function it(e,t){function n(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),d(e,r(i))),i.result()}var r,i,a=4.5;return n.area=function(e){return d(e,r(Rr)),Rr.result()},n.measure=function(e){return d(e,r(Qr)),Qr.result()},n.bounds=function(e){return d(e,r(Pr)),Pr.result()},n.centroid=function(e){return d(e,r(Vr)),Vr.result()},n.projection=function(t){return arguments.length?(r=null==t?(e=null,qe):(e=t).stream,n):e},n.context=function(e){return arguments.length?(i=null==e?(t=null,new nt):new Ke(t=e),"function"!=typeof a&&i.pointRadius(a),n):t},n.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),n):a},n.projection(e).context(t)}function at(e){return{stream:ot(e)}}function ot(e){return function(t){var n=new ut;for(var r in e)n[r]=e[r];return n.stream=t,n}}function ut(){}function st(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),d(n,e.stream(Pr)),t(Pr.result()),null!=r&&e.clipExtent(r),e}function ft(e,t,n){return st(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,u])},n)}function lt(e,t,n){return ft(e,[[0,0],t],n)}function ct(e,t,n){return st(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])},n)}function dt(e,t,n){return st(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])},n)}function ht(e,t){return+t?gt(e,t):pt(e)}function pt(e){return ot({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function gt(e,t){function n(r,i,a,u,s,f,l,c,d,h,p,g,m,v){var y=l-r,b=c-i,_=y*y+b*b;if(_>4*t&&m--){var x=u+h,w=s+p,k=f+g,M=Jn(x*x+w*w+k*k),E=o(k/=M),O=Un(Un(k)-1)<Dn||Un(a-d)<Dn?(a+d)/2:Bn(w,x),S=e(O,E),A=S[0],C=S[1],R=A-r,T=C-i,z=b*R-y*T;(z*z/_>t||Un((y*R+b*T)/_-.5)>.3||u*h+s*p+f*g<ei)&&(n(r,i,a,u,s,f,A,C,O,x/=M,w/=M,k,m,v),v.point(A,C),n(A,C,O,x,w,k,l,c,d,h,p,g,m,v))}}return function(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function i(){v=NaN,k.point=a,t.lineStart()}function a(r,i){var a=b([r,i]),o=e(r,i);n(v,y,m,_,x,w,v=o[0],y=o[1],m=r,_=a[0],x=a[1],w=a[2],Kr,t),t.point(v,y)}function o(){k.point=r,t.lineEnd()}function u(){i(),k.point=s,k.lineEnd=f}function s(e,t){a(l=e,t),c=v,d=y,h=_,p=x,g=w,k.point=a}function f(){n(v,y,m,_,x,w,c,d,l,h,p,g,Kr,t),k.lineEnd=o,o()}var l,c,d,h,p,g,m,v,y,_,x,w,k={point:r,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),k.lineStart=u},polygonEnd:function(){t.polygonEnd(),k.lineStart=i}};return k}}function mt(e){return ot({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function vt(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r}function yt(e,t,n,r){function i(e,r){return[u*e-s*r+t,n-s*e-u*r]}var a=Wn(r),o=Xn(r),u=a*e,s=o*e,f=a/e,l=o/e,c=(o*n-a*t)/e,d=(o*t+a*n)/e;return i.invert=function(e,t){return[f*e-l*t+c,d-l*e-f*t]},i}function bt(e){return _t(function(){return e})()}function _t(e){function t(e){return d(e[0]*Fn,e[1]*Fn)}function n(e){return e=d.invert(e[0],e[1]),e&&[e[0]*jn,e[1]*jn]}function r(){var e=yt(g,0,0,k).apply(null,a(y,b)),t=(k?yt:vt)(g,m-e[0],v-e[1],k);return o=Z(_,x,w),c=G(a,t),d=G(o,c),l=ht(c,A),i()}function i(){return h=p=null,t}var a,o,u,s,f,l,c,d,h,p,g=150,m=480,v=250,y=0,b=0,_=0,x=0,w=0,k=0,M=null,E=br,O=null,S=qe,A=.5;return t.stream=function(e){return h&&p===e?h:h=ti(mt(o)(E(l(S(p=e)))))},t.preclip=function(e){return arguments.length?(E=e,M=void 0,i()):E},t.postclip=function(e){return arguments.length?(S=e,O=u=s=f=null,i()):S},t.clipAngle=function(e){return arguments.length?(E=+e?me(M=e*Fn):(M=null,br),i()):M*jn},t.clipExtent=function(e){return arguments.length?(S=null==e?(O=u=s=f=null,qe):ye(O=+e[0][0],u=+e[0][1],s=+e[1][0],f=+e[1][1]),i()):null==O?null:[[O,u],[s,f]]},t.scale=function(e){return arguments.length?(g=+e,r()):g},t.translate=function(e){return arguments.length?(m=+e[0],v=+e[1],r()):[m,v]},t.center=function(e){return arguments.length?(y=e[0]%360*Fn,b=e[1]%360*Fn,r()):[y*jn,b*jn]},t.rotate=function(e){return arguments.length?(_=e[0]%360*Fn,x=e[1]%360*Fn,w=e.length>2?e[2]%360*Fn:0,r()):[_*jn,x*jn,w*jn]},t.angle=function(e){return arguments.length?(k=e%360*Fn,r()):k*jn},t.precision=function(e){return arguments.length?(l=ht(c,A=e*e),i()):Jn(A)},t.fitExtent=function(e,n){return ft(t,e,n)},t.fitSize=function(e,n){return lt(t,e,n)},t.fitWidth=function(e,n){return ct(t,e,n)},t.fitHeight=function(e,n){return dt(t,e,n)},function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function xt(e){var t=0,n=Pn/3,r=_t(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Fn,n=e[1]*Fn):[t*jn,n*jn]},i}function wt(e){function t(e,t){return[e*n,Xn(t)/n]}var n=Wn(e);return t.invert=function(e,t){return[e/n,o(t*n)]},t}function kt(e,t){function n(e,t){var n=Jn(a-2*i*Xn(t))/i;return[n*Xn(e*=i),u-n*Wn(e)]}var r=Xn(e),i=(r+Xn(t))/2;if(Un(i)<Dn)return wt(e);var a=1+r*(2*i-r),u=Jn(a)/i;return n.invert=function(e,t){var n=u-t;return[Bn(e,Un(n))/i*Zn(n),o((a-(e*e+n*n)*i*i)/(2*i))]},n}function Mt(){return xt(kt).scale(155.424).center([0,33.6442])}function Et(){return Mt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ot(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function St(){function e(e){var t=e[0],n=e[1];return u=null,i.point(t,n),u||(a.point(t,n),u)||(o.point(t,n),u)}function t(){return n=r=null,e}var n,r,i,a,o,u,s=Et(),f=Mt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Mt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){u=[e,t]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?f:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:s).invert(e)},e.stream=function(e){return n&&r===e?n:n=Ot([s.stream(r=e),f.stream(e),l.stream(e)])},e.precision=function(e){return arguments.length?(s.precision(e),f.precision(e),l.precision(e),t()):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),f.scale(.35*t),l.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(e){if(!arguments.length)return s.translate();var n=s.scale(),r=+e[0],u=+e[1];return i=s.translate(e).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(c),a=f.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+Dn,u+.12*n+Dn],[r-.214*n-Dn,u+.234*n-Dn]]).stream(c),o=l.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+Dn,u+.166*n+Dn],[r-.115*n-Dn,u+.234*n-Dn]]).stream(c),t()},e.fitExtent=function(t,n){return ft(e,t,n)},e.fitSize=function(t,n){return lt(e,t,n)},e.fitWidth=function(t,n){return ct(e,t,n)},e.fitHeight=function(t,n){return dt(e,t,n)},e.scale(1070)}function At(e){return function(t,n){var r=Wn(t),i=Wn(n),a=e(r*i);return[a*i*Xn(t),a*Xn(n)]}}function Ct(e){return function(t,n){var r=Jn(t*t+n*n),i=e(r),a=Xn(i),u=Wn(i);return[Bn(t*a,r*u),o(r&&n*a/r)]}}function Rt(){return bt(ni).scale(124.75).clipAngle(179.999)}function Tt(){return bt(ri).scale(79.4188).clipAngle(179.999)}function zt(e,t){return[e,Yn(Qn(($n+t)/2))]}function Dt(){return Nt(zt).scale(961/qn)}function Nt(e){function t(){var t=Pn*u(),o=a(ee(a.rotate()).invert([0,0]));return f(null==l?[[o[0]-t,o[1]-t],[o[0]+t,o[1]+t]]:e===zt?[[Math.max(o[0]-t,l),n],[Math.min(o[0]+t,r),i]]:[[l,Math.max(o[1]-t,n)],[r,Math.min(o[1]+t,i)]])}var n,r,i,a=bt(e),o=a.center,u=a.scale,s=a.translate,f=a.clipExtent,l=null;return a.scale=function(e){return arguments.length?(u(e),t()):u()},a.translate=function(e){return arguments.length?(s(e),t()):s()},a.center=function(e){return arguments.length?(o(e),t()):o()},a.clipExtent=function(e){return arguments.length?(null==e?l=n=r=i=null:(l=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),t()):null==l?null:[[l,n],[r,i]]},t()}function Pt(e){return Qn(($n+e)/2)}function $t(e,t){function n(e,t){a>0?t<-$n+Dn&&(t=-$n+Dn):t>$n-Dn&&(t=$n-Dn);var n=a/Gn(Pt(t),i);return[n*Xn(i*e),a-n*Wn(i*e)]}var r=Wn(e),i=e===t?Xn(e):Yn(r/Wn(t))/Yn(Pt(t)/Pt(e)),a=r*Gn(Pt(e),i)/i;return i?(n.invert=function(e,t){var n=a-t,r=Zn(i)*Jn(e*e+n*n);return[Bn(e,Un(n))/i*Zn(n),2*In(Gn(a/r,1/i))-$n]},n):zt}function Lt(){return xt($t).scale(109.5).parallels([30,30])}function qt(e,t){return[e,t]}function jt(){return bt(qt).scale(152.63)}function Ft(e,t){function n(e,t){var n=a-t,r=i*e;return[n*Xn(r),a-n*Wn(r)]}var r=Wn(e),i=e===t?Xn(e):(r-Wn(t))/(t-e),a=r/i+e;return Un(i)<Dn?qt:(n.invert=function(e,t){var n=a-t;return[Bn(e,Un(n))/i*Zn(n),a-Zn(i)*Jn(e*e+n*n)]},n)}function Ut(){return xt(Ft).scale(131.154).center([0,13.9389])}function It(e,t){var n=Wn(t),r=Wn(e)*n;return[n*Xn(e)/r,Xn(t)/r]}function Bt(){return bt(It).scale(144.049).clipAngle(60)}function Wt(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?qe:ot({point:function(i,a){this.stream.point(i*e+n,a*t+r)}})}function Vt(){function e(){return i=a=null,o}var t,n,r,i,a,o,u=1,s=0,f=0,l=1,c=1,d=qe,h=null,p=qe;return o={stream:function(e){return i&&a===e?i:i=d(p(a=e))},postclip:function(i){return arguments.length?(p=i,h=t=n=r=null,e()):p},clipExtent:function(i){return arguments.length?(p=null==i?(h=t=n=r=null,qe):ye(h=+i[0][0],t=+i[0][1],n=+i[1][0],r=+i[1][1]),e()):null==h?null:[[h,t],[n,r]]},scale:function(t){return arguments.length?(d=Wt((u=+t)*l,u*c,s,f),e()):u},translate:function(t){return arguments.length?(d=Wt(u*l,u*c,s=+t[0],f=+t[1]),e()):[s,f]},reflectX:function(t){return arguments.length?(d=Wt(u*(l=t?-1:1),u*c,s,f),e()):l<0},reflectY:function(t){return arguments.length?(d=Wt(u*l,u*(c=t?-1:1),s,f),e()):c<0},fitExtent:function(e,t){return ft(o,e,t)},fitSize:function(e,t){return lt(o,e,t)},fitWidth:function(e,t){return ct(o,e,t)},fitHeight:function(e,t){return dt(o,e,t)}}}function Ht(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}function Yt(){return bt(Ht).scale(175.295)}function Gt(e,t){return[Wn(t)*Xn(e),Xn(t)]}function Xt(){return bt(Gt).scale(249.5).clipAngle(90+Dn)}function Zt(e,t){var n=Wn(t),r=1+Wn(e)*n;return[n*Xn(e)/r,Xn(t)/r]}function Jt(){return bt(Zt).scale(250).clipAngle(142)}function Qt(e,t){return[Yn(Qn(($n+t)/2)),-e]}function Kt(){var e=Nt(Qt),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)}r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(e){i(zn,e,this.t),i(this,zn.s,this.s),this.s?this.t+=zn.t:this.s=zn.t},valueOf:function(){return this.s}};var en,tn,nn,rn,an,on,un,sn,fn,ln,cn,dn,hn,pn,gn,mn,vn,yn,bn,_n,xn,wn,kn,Mn,En,On,Sn,An,Cn,Rn,Tn,zn=new r,Dn=1e-6,Nn=1e-12,Pn=Math.PI,$n=Pn/2,Ln=Pn/4,qn=2*Pn,jn=180/Pn,Fn=Pn/180,Un=Math.abs,In=Math.atan,Bn=Math.atan2,Wn=Math.cos,Vn=Math.ceil,Hn=Math.exp,Yn=Math.log,Gn=Math.pow,Xn=Math.sin,Zn=Math.sign||function(e){return e>0?1:e<0?-1:0},Jn=Math.sqrt,Qn=Math.tan,Kn={Feature:function(e,t){f(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)f(n[r].geometry,t)}},er={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){l(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)l(n[r],t,0)},Polygon:function(e,t){c(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)c(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)f(n[r],t)}},tr=n(),nr=n(),rr={point:s,lineStart:s,lineEnd:s,polygonStart:function(){tr.reset(),rr.lineStart=h,rr.lineEnd=p},polygonEnd:function(){var e=+tr;nr.add(e<0?qn+e:e),this.lineStart=this.lineEnd=this.point=s},sphere:function(){nr.add(qn)}},ir=n(),ar={point:E,lineStart:S,lineEnd:A,polygonStart:function(){ar.point=C,ar.lineStart=R,ar.lineEnd=T,ir.reset(),rr.polygonStart()},polygonEnd:function(){rr.polygonEnd(),ar.point=E,ar.lineStart=S,ar.lineEnd=A,tr<0?(on=-(sn=180),un=-(fn=90)):ir>Dn?fn=90:ir<-Dn&&(un=-90),gn[0]=on,gn[1]=sn}},or={sphere:s,point:$,lineStart:q,lineEnd:U,polygonStart:function(){or.lineStart=I,or.lineEnd=B},polygonEnd:function(){or.lineStart=q,or.lineEnd=U}};X.invert=X;var ur,sr,fr,lr,cr,dr,hr,pr,gr,mr,vr,yr=n(),br=le(function(){return!0},he,ge,[-Pn,-$n]),_r=1e9,xr=-_r,wr=n(),kr={sphere:s,point:s,lineStart:_e,lineEnd:s,polygonStart:s,polygonEnd:s},Mr=[null,null],Er={type:"LineString",coordinates:Mr},Or={Feature:function(e,t){return Oe(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(Oe(n[r].geometry,t))return!0;return!1}},Sr={Sphere:function(){return!0},Point:function(e,t){return Se(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Se(n[r],t))return!0;return!1},LineString:function(e,t){
return Ae(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Ae(n[r],t))return!0;return!1},Polygon:function(e,t){return Ce(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Ce(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(Oe(n[r],t))return!0;return!1}},Ar=n(),Cr=n(),Rr={point:s,lineStart:s,lineEnd:s,polygonStart:function(){Rr.lineStart=je,Rr.lineEnd=Ie},polygonEnd:function(){Rr.lineStart=Rr.lineEnd=Rr.point=s,Ar.add(Un(Cr)),Cr.reset()},result:function(){var e=Ar/2;return Ar.reset(),e}},Tr=1/0,zr=Tr,Dr=-Tr,Nr=Dr,Pr={point:Be,lineStart:s,lineEnd:s,polygonStart:s,polygonEnd:s,result:function(){var e=[[Tr,zr],[Dr,Nr]];return Dr=Nr=-(zr=Tr=1/0),e}},$r=0,Lr=0,qr=0,jr=0,Fr=0,Ur=0,Ir=0,Br=0,Wr=0,Vr={point:We,lineStart:Ve,lineEnd:Ge,polygonStart:function(){Vr.lineStart=Xe,Vr.lineEnd=Ze},polygonEnd:function(){Vr.point=We,Vr.lineStart=Ve,Vr.lineEnd=Ge},result:function(){var e=Wr?[Ir/Wr,Br/Wr]:Ur?[jr/Ur,Fr/Ur]:qr?[$r/qr,Lr/qr]:[NaN,NaN];return $r=Lr=qr=jr=Fr=Ur=Ir=Br=Wr=0,e}};Ke.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,qn)}},result:s};var Hr,Yr,Gr,Xr,Zr,Jr=n(),Qr={point:s,lineStart:function(){Qr.point=et},lineEnd:function(){Hr&&tt(Yr,Gr),Qr.point=s},polygonStart:function(){Hr=!0},polygonEnd:function(){Hr=null},result:function(){var e=+Jr;return Jr.reset(),e}};nt.prototype={_radius:4.5,_circle:rt(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=rt(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},ut.prototype={constructor:ut,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Kr=16,ei=Wn(30*Fn),ti=ot({point:function(e,t){this.stream.point(e*Fn,t*Fn)}}),ni=At(function(e){return Jn(2/(1+e))});ni.invert=Ct(function(e){return 2*o(e/2)});var ri=At(function(e){return(e=a(e))&&e/Xn(e)});ri.invert=Ct(function(e){return e}),zt.invert=function(e,t){return[e,2*In(Hn(t))-$n]},qt.invert=qt,It.invert=Ct(In),Ht.invert=function(e,t){var n,r=t,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-t)/(1.007226+a*(.045255+o*(-.311325+.259866*a-.005916*11*o)))}while(Un(n)>Dn&&--i>0);return[e/(.8707+(a=r*r)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),r]},Gt.invert=Ct(o),Zt.invert=Ct(function(e){return 2*In(e)}),Qt.invert=function(e,t){return[-t,2*In(Hn(e))-$n]},e.geoArea=v,e.geoBounds=P,e.geoCentroid=H,e.geoCircle=re,e.geoClipAntimeridian=br,e.geoClipCircle=me,e.geoClipExtent=be,e.geoClipRectangle=ye,e.geoContains=ze,e.geoDistance=Ee,e.geoGraticule=Pe,e.geoGraticule10=$e,e.geoInterpolate=Le,e.geoLength=Me,e.geoPath=it,e.geoAlbers=Et,e.geoAlbersUsa=St,e.geoAzimuthalEqualArea=Rt,e.geoAzimuthalEqualAreaRaw=ni,e.geoAzimuthalEquidistant=Tt,e.geoAzimuthalEquidistantRaw=ri,e.geoConicConformal=Lt,e.geoConicConformalRaw=$t,e.geoConicEqualArea=Mt,e.geoConicEqualAreaRaw=kt,e.geoConicEquidistant=Ut,e.geoConicEquidistantRaw=Ft,e.geoEquirectangular=jt,e.geoEquirectangularRaw=qt,e.geoGnomonic=Bt,e.geoGnomonicRaw=It,e.geoIdentity=Vt,e.geoProjection=bt,e.geoProjectionMutator=_t,e.geoMercator=Dt,e.geoMercatorRaw=zt,e.geoNaturalEarth1=Yt,e.geoNaturalEarth1Raw=Ht,e.geoOrthographic=Xt,e.geoOrthographicRaw=Gt,e.geoStereographic=Jt,e.geoStereographicRaw=Zt,e.geoTransverseMercator=Kt,e.geoTransverseMercatorRaw=Qt,e.geoRotation=ee,e.geoStream=d,e.geoTransform=at,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,t){return e.parent===t.parent?1:2}function n(e){return e.reduce(r,0)/e.length}function r(e,t){return e+t.x}function i(e){return 1+e.reduce(a,0)}function a(e,t){return Math.max(e,t.y)}function o(e){for(var t;t=e.children;)e=t[0];return e}function u(e){for(var t;t=e.children;)e=t[t.length-1];return e}function s(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function f(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function l(e,t){var n,r,i,a,o,u=new g(e),s=+e.value&&(u.value=e.value),f=[u];for(null==t&&(t=d);n=f.pop();)if(s&&(n.value=+n.data.value),(i=t(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)f.push(r=n.children[a]=new g(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(p)}function c(){return l(this).eachBefore(h)}function d(e){return e.children}function h(e){e.data=e.data.data}function p(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function g(e){this.data=e,this.depth=this.height=0,this.parent=null}function m(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}function v(e,t){var n,r;if(_(t,e))return[t];for(n=0;n<e.length;++n)if(y(t,e[n])&&_(k(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(y(k(e[n],e[r]),t)&&y(k(e[n],t),e[r])&&y(k(e[r],t),e[n])&&_(M(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function y(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function b(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function _(e,t){for(var n=0;n<t.length;++n)if(!b(e,t[n]))return!1;return!0}function x(e){switch(e.length){case 1:return w(e[0]);case 2:return k(e[0],e[1]);case 3:return M(e[0],e[1],e[2])}}function w(e){return{x:e.x,y:e.y,r:e.r}}function k(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,u=t.r,s=a-n,f=o-r,l=u-i,c=Math.sqrt(s*s+f*f);return{x:(n+a+s/c*l)/2,y:(r+o+f/c*l)/2,r:(c+i+u)/2}}function M(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,u=t.y,s=t.r,f=n.x,l=n.y,c=n.r,d=r-o,h=r-f,p=i-u,g=i-l,m=s-a,v=c-a,y=r*r+i*i-a*a,b=y-o*o-u*u+s*s,_=y-f*f-l*l+c*c,x=h*p-d*g,w=(p*_-g*b)/(2*x)-r,k=(g*m-p*v)/x,M=(h*b-d*_)/(2*x)-i,E=(d*v-h*m)/x,O=k*k+E*E-1,S=2*(a+w*k+M*E),A=w*w+M*M-a*a,C=-(O?(S+Math.sqrt(S*S-4*O*A))/(2*O):A/S);return{x:r+w+k*C,y:i+M+E*C,r:C}}function E(e,t,n){var r,i,a,o,u=e.x-t.x,s=e.y-t.y,f=u*u+s*s;f?(i=t.r+n.r,i*=i,o=e.r+n.r,o*=o,i>o?(r=(f+o-i)/(2*f),a=Math.sqrt(Math.max(0,o/f-r*r)),n.x=e.x-r*u-a*s,n.y=e.y-r*s+a*u):(r=(f+i-o)/(2*f),a=Math.sqrt(Math.max(0,i/f-r*r)),n.x=t.x+r*u-a*s,n.y=t.y+r*s+a*u)):(n.x=t.x+n.r,n.y=t.y)}function O(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function S(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function A(e){this._=e,this.next=null,this.previous=null}function C(e){if(!(i=e.length))return 0;var t,n,r,i,a,o,u,s,f,l,c;if(t=e[0],t.x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;E(n,t,r=e[2]),t=new A(t),n=new A(n),r=new A(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(u=3;u<i;++u){E(t._,n._,r=e[u]),r=new A(r),s=n.next,f=t.previous,l=n._.r,c=t._.r;do if(l<=c){if(O(s._,r._)){n=s,t.next=n,n.previous=t,--u;continue e}l+=s._.r,s=s.next}else{if(O(f._,r._)){t=f,t.next=n,n.previous=t,--u;continue e}c+=f._.r,f=f.previous}while(s!==f.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=S(t);(r=r.next)!==n;)(o=S(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=ue(t),u=0;u<i;++u)t=e[u],t.x-=r.x,t.y-=r.y;return r.r}function R(e){return null==e?null:T(e)}function T(e){if("function"!=typeof e)throw new Error;return e}function z(){return 0}function D(e){return Math.sqrt(e.value)}function N(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function P(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,u=e(n)*t||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=C(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function $(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function L(e){return e.id}function q(e){return e.parentId}function j(e,t){return e.parent===t.parent?1:2}function F(e){var t=e.children;return t?t[0]:e.t}function U(e){var t=e.children;return t?t[t.length-1]:e.t}function I(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function B(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function W(e,t,n){return e.a.parent===t.parent?e.a:n}function V(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function H(e){for(var t,n,r,i,a,o=new V(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)u.push(n=t.children[i]=new V(r[i],i)),n.parent=t;return(o.parent=new V(null,0)).children=[o],o}function Y(e,t,n,r,i,a){for(var o,u,s,f,l,c,d,h,p,g,m,v=[],y=t.children,b=0,_=0,x=y.length,w=t.value;b<x;){s=i-n,f=a-r;do l=y[_++].value;while(!l&&_<x);for(c=d=l,g=Math.max(f/s,s/f)/(w*e),m=l*l*g,p=Math.max(d/m,m/c);_<x;++_){if(l+=u=y[_].value,u<c&&(c=u),u>d&&(d=u),m=l*l*g,h=Math.max(d/m,m/c),h>p){l-=u;break}p=h}v.push(o={value:l,dice:s<f,children:y.slice(b,_)}),o.dice?de(o,n,r,i,w?r+=f*l/w:a):be(o,n,r,w?n+=s*l/w:i,a),w-=l,b=_}return v}var G=function(){function e(e){var t,l=0;e.eachAfter(function(e){var a=e.children;a?(e.x=n(a),e.y=i(a)):(e.x=t?l+=r(e,t):0,e.y=0,t=e)});var c=o(e),d=u(e),h=c.x-r(c,d)/2,p=d.x+r(d,c)/2;return e.eachAfter(f?function(t){t.x=(t.x-e.x)*a,t.y=(e.y-t.y)*s}:function(t){t.x=(t.x-h)/(p-h)*a,t.y=(1-(e.y?t.y/e.y:1))*s})}var r=t,a=1,s=1,f=!1;return e.separation=function(t){return arguments.length?(r=t,e):r},e.size=function(t){return arguments.length?(f=!1,a=+t[0],s=+t[1],e):f?null:[a,s]},e.nodeSize=function(t){return arguments.length?(f=!0,a=+t[0],s=+t[1],e):f?[a,s]:null},e},X=function(){return this.eachAfter(s)},Z=function(e){var t,n,r,i,a=this,o=[a];do for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);while(o.length);return this},J=function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this},Q=function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this},K=function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})},ee=function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},te=function(e){for(var t=this,n=f(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ne=function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},re=function(){var e=[];return this.each(function(t){e.push(t)}),e},ie=function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},ae=function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t};g.prototype=l.prototype={constructor:g,count:X,each:Z,eachAfter:Q,eachBefore:J,sum:K,sort:ee,path:te,ancestors:ne,descendants:re,leaves:ie,links:ae,copy:c};var oe=Array.prototype.slice,ue=function(e){for(var t,n,r=0,i=(e=m(oe.call(e))).length,a=[];r<i;)t=e[r],n&&b(n,t)?++r:(n=x(a=v(a,t)),r=0);return n},se=function(e){return C(e),e},fe=function(e){return function(){return e}},le=function(){function e(e){return e.x=n/2,e.y=r/2,t?e.eachBefore(N(t)).eachAfter(P(i,.5)).eachBefore($(1)):e.eachBefore(N(D)).eachAfter(P(z,1)).eachAfter(P(i,e.r/Math.min(n,r))).eachBefore($(Math.min(n,r)/(2*e.r))),e}var t=null,n=1,r=1,i=z;return e.radius=function(n){return arguments.length?(t=R(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i="function"==typeof t?t:fe(+t),e):i},e},ce=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},de=function(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(r-t)/e.value;++u<s;)a=o[u],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*f},he=function(){function e(e){var o=e.height+1;return e.x0=e.y0=i,e.x1=n,e.y1=r/o,e.eachBefore(t(r,o)),a&&e.eachBefore(ce),e}function t(e,t){return function(n){n.children&&de(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var r=n.x0,a=n.y0,o=n.x1-i,u=n.y1-i;o<r&&(r=o=(r+o)/2),u<a&&(a=u=(a+u)/2),n.x0=r,n.y0=a,n.x1=o,n.y1=u}}var n=1,r=1,i=0,a=!1;return e.round=function(t){return arguments.length?(a=!!t,e):a},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i=+t,e):i},e},pe="$",ge={depth:-1},me={},ve=function(){function e(e){var r,i,a,o,u,s,f,l=e.length,c=new Array(l),d={};for(i=0;i<l;++i)r=e[i],u=c[i]=new g(r),null!=(s=t(r,i,e))&&(s+="")&&(f=pe+(u.id=s),d[f]=f in d?me:u);for(i=0;i<l;++i)if(u=c[i],s=n(e[i],i,e),null!=s&&(s+="")){if(o=d[pe+s],!o)throw new Error("missing: "+s);if(o===me)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error("multiple roots");a=u}if(!a)throw new Error("no root");if(a.parent=ge,a.eachBefore(function(e){e.depth=e.parent.depth+1,--l}).eachBefore(p),a.parent=null,l>0)throw new Error("cycle");return a}var t=L,n=q;return e.id=function(n){return arguments.length?(t=T(n),e):t},e.parentId=function(t){return arguments.length?(n=T(t),e):n},e};V.prototype=Object.create(g.prototype);var ye=function(){function e(e){var r=H(e);if(r.eachAfter(t),r.parent.m=-r.z,r.eachBefore(n),s)e.eachBefore(i);else{var f=e,l=e,c=e;e.eachBefore(function(e){e.x<f.x&&(f=e),e.x>l.x&&(l=e),e.depth>c.depth&&(c=e)});var d=f===l?1:a(f,l)/2,h=d-f.x,p=o/(l.x+d+h),g=u/(c.depth||1);e.eachBefore(function(e){e.x=(e.x+h)*p,e.y=e.depth*g})}return e}function t(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t){B(e);var o=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+a(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+a(e._,i._));e.parent.A=r(e,i,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e,t,n){if(t){for(var r,i=e,o=e,u=t,s=i.parent.children[0],f=i.m,l=o.m,c=u.m,d=s.m;u=U(u),i=F(i),u&&i;)s=F(s),o=U(o),o.a=e,r=u.z+c-i.z-f+a(u._,i._),r>0&&(I(W(u,e,n),e,r),f+=r,l+=r),c+=u.m,f+=i.m,d+=s.m,l+=o.m;u&&!U(o)&&(o.t=u,o.m+=c-l),i&&!F(s)&&(s.t=i,s.m+=f-d,n=e)}return n}function i(e){e.x*=o,e.y=e.depth*u}var a=j,o=1,u=1,s=null;return e.separation=function(t){return arguments.length?(a=t,e):a},e.size=function(t){return arguments.length?(s=!1,o=+t[0],u=+t[1],e):s?null:[o,u]},e.nodeSize=function(t){return arguments.length?(s=!0,o=+t[0],u=+t[1],e):s?[o,u]:null},e},be=function(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(i-n)/e.value;++u<s;)a=o[u],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*f},_e=(1+Math.sqrt(5))/2,xe=function e(t){function n(e,n,r,i,a){Y(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(_e),we=function(){function e(e){return e.x0=e.y0=0,e.x1=i,e.y1=a,e.eachBefore(t),o=[0],r&&e.eachBefore(ce),e}function t(e){var t=o[e.depth],r=e.x0+t,i=e.y0+t,a=e.x1-t,d=e.y1-t;a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),e.x0=r,e.y0=i,e.x1=a,e.y1=d,e.children&&(t=o[e.depth+1]=u(e)/2,r+=c(e)-t,i+=s(e)-t,a-=f(e)-t,d-=l(e)-t,a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),n(e,r,i,a,d))}var n=xe,r=!1,i=1,a=1,o=[0],u=z,s=z,f=z,l=z,c=z;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(i=+t[0],a=+t[1],e):[i,a]},e.tile=function(t){return arguments.length?(n=T(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(u="function"==typeof t?t:fe(+t),e):u},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:fe(+t),e):s},e.paddingRight=function(t){return arguments.length?(f="function"==typeof t?t:fe(+t),e):f},e.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:fe(+t),e):l},e.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:fe(+t),e):c},e},ke=function(e,t,n,r,i){function a(e,t,n,r,i,o,u){if(e>=t-1){var f=s[e];return f.x0=r,f.y0=i,f.x1=o,f.y1=u,void 0}for(var c=l[e],d=n/2+c,h=e+1,p=t-1;h<p;){var g=h+p>>>1;l[g]<d?h=g+1:p=g}d-l[h-1]<l[h]-d&&e+1<h&&--h;var m=l[h]-c,v=n-m;if(o-r>u-i){var y=(r*v+o*m)/n;a(e,h,m,r,i,y,u),a(h,t,v,y,i,o,u)}else{var b=(i*v+u*m)/n;a(e,h,m,r,i,o,b),a(h,t,v,r,b,o,u)}}var o,u,s=e.children,f=s.length,l=new Array(f+1);for(l[0]=u=o=0;o<f;++o)l[o+1]=u+=s[o].value;a(0,f,e.value,t,n,r,i)},Me=function(e,t,n,r,i){(1&e.depth?be:de)(e,t,n,r,i)},Ee=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,f,l,c=-1,d=o.length,h=e.value;++c<d;){for(u=o[c],s=u.children,f=u.value=0,l=s.length;f<l;++f)u.value+=s[f].value;u.dice?de(u,n,r,i,r+=(a-r)*u.value/h):be(u,n,r,n+=(i-n)*u.value/h,a),h-=u.value}else e._squarify=o=Y(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(_e);e.cluster=G,e.hierarchy=l,e.pack=le,e.packSiblings=se,e.packEnclose=ue,e.partition=he,e.stratify=ve,e.tree=ye,e.treemap=we,e.treemapBinary=ke,e.treemapDice=de,e.treemapSlice=be,e.treemapSliceDice=Me,e.treemapSquarify=xe,e.treemapResquarify=Ee,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(11),n(10))}(this,function(e,t,n){"use strict";function r(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function i(e){return t.interpolateRgbBasis(e[e.length-1])}function a(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return _e.h=360*e-100,_e.s=1.5-1.5*t,_e.l=.8-.9*t,_e+""}function o(e){var t;return e=(.5-e)*Math.PI,xe.r=255*(t=Math.sin(e))*t,xe.g=255*(t=Math.sin(e+we))*t,xe.b=255*(t=Math.sin(e+ke))*t,xe+""}function u(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var s=r("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),f=r("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),l=r("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),c=r("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),d=r("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),h=r("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),p=r("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),g=r("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),m=r("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),v=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r),y=i(v),b=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r),_=i(b),x=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r),w=i(x),k=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r),M=i(k),E=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r),O=i(E),S=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r),A=i(S),C=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r),R=i(C),T=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r),z=i(T),D=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r),N=i(D),P=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r),$=i(P),L=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r),q=i(L),j=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r),F=i(j),U=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r),I=i(U),B=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r),W=i(B),V=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r),H=i(V),Y=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r),G=i(Y),X=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r),Z=i(X),J=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r),Q=i(J),K=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r),ee=i(K),te=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r),ne=i(te),re=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r),ie=i(re),ae=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r),oe=i(ae),ue=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r),se=i(ue),fe=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r),le=i(fe),ce=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r),de=i(ce),he=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r),pe=i(he),ge=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r),me=i(ge),ve=t.interpolateCubehelixLong(n.cubehelix(300,.5,0),n.cubehelix(-240,.5,1)),ye=t.interpolateCubehelixLong(n.cubehelix(-100,.75,.35),n.cubehelix(80,1.5,.8)),be=t.interpolateCubehelixLong(n.cubehelix(260,.75,.35),n.cubehelix(80,1.5,.8)),_e=n.cubehelix(),xe=n.rgb(),we=Math.PI/3,ke=2*Math.PI/3,Me=u(r("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Ee=u(r("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Oe=u(r("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Se=u(r("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));
e.schemeCategory10=s,e.schemeAccent=f,e.schemeDark2=l,e.schemePaired=c,e.schemePastel1=d,e.schemePastel2=h,e.schemeSet1=p,e.schemeSet2=g,e.schemeSet3=m,e.interpolateBrBG=y,e.schemeBrBG=v,e.interpolatePRGn=_,e.schemePRGn=b,e.interpolatePiYG=w,e.schemePiYG=x,e.interpolatePuOr=M,e.schemePuOr=k,e.interpolateRdBu=O,e.schemeRdBu=E,e.interpolateRdGy=A,e.schemeRdGy=S,e.interpolateRdYlBu=R,e.schemeRdYlBu=C,e.interpolateRdYlGn=z,e.schemeRdYlGn=T,e.interpolateSpectral=N,e.schemeSpectral=D,e.interpolateBuGn=$,e.schemeBuGn=P,e.interpolateBuPu=q,e.schemeBuPu=L,e.interpolateGnBu=F,e.schemeGnBu=j,e.interpolateOrRd=I,e.schemeOrRd=U,e.interpolatePuBuGn=W,e.schemePuBuGn=B,e.interpolatePuBu=H,e.schemePuBu=V,e.interpolatePuRd=G,e.schemePuRd=Y,e.interpolateRdPu=Z,e.schemeRdPu=X,e.interpolateYlGnBu=Q,e.schemeYlGnBu=J,e.interpolateYlGn=ee,e.schemeYlGn=K,e.interpolateYlOrBr=ne,e.schemeYlOrBr=te,e.interpolateYlOrRd=ie,e.schemeYlOrRd=re,e.interpolateBlues=oe,e.schemeBlues=ae,e.interpolateGreens=se,e.schemeGreens=ue,e.interpolateGreys=le,e.schemeGreys=fe,e.interpolatePurples=de,e.schemePurples=ce,e.interpolateReds=pe,e.schemeReds=he,e.interpolateOranges=me,e.schemeOranges=ge,e.interpolateCubehelixDefault=ve,e.interpolateRainbow=a,e.interpolateWarm=ye,e.interpolateCool=be,e.interpolateSinebow=o,e.interpolateViridis=Me,e.interpolateMagma=Ee,e.interpolateInferno=Oe,e.interpolatePlasma=Se,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(8),n(9),n(11),n(19),n(12),n(21))}(this,function(e,t,n,r,i,a,o){"use strict";function u(e){function t(t){var n=t+"",o=r.get(n);if(!o){if(a!==G)return a;r.set(n,o=i.push(t))}return e[(o-1)%e.length]}var r=n.map(),i=[],a=G;return e=null==e?[]:Y.call(e),t.domain=function(e){if(!arguments.length)return i.slice();i=[],r=n.map();for(var a,o,u=-1,s=e.length;++u<s;)r.has(o=(a=e[u])+"")||r.set(o,i.push(a));return t},t.range=function(n){return arguments.length?(e=Y.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(a=e,t):a},t.copy=function(){return u().domain(i).range(e).unknown(a)},t}function s(){function e(){var e=a().length,i=f[1]<f[0],u=f[i-0],s=f[1-i];n=(s-u)/Math.max(1,e-c+2*d),l&&(n=Math.floor(n)),u+=(s-u-n*(e-c))*h,r=n*(1-c),l&&(u=Math.round(u),r=Math.round(r));var p=t.range(e).map(function(e){return u+n*e});return o(i?p.reverse():p)}var n,r,i=u().unknown(void 0),a=i.domain,o=i.range,f=[0,1],l=!1,c=0,d=0,h=.5;return delete i.unknown,i.domain=function(t){return arguments.length?(a(t),e()):a()},i.range=function(t){return arguments.length?(f=[+t[0],+t[1]],e()):f.slice()},i.rangeRound=function(t){return f=[+t[0],+t[1]],l=!0,e()},i.bandwidth=function(){return r},i.step=function(){return n},i.round=function(t){return arguments.length?(l=!!t,e()):l},i.padding=function(t){return arguments.length?(c=d=Math.max(0,Math.min(1,t)),e()):c},i.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},i.paddingOuter=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},i.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),e()):h},i.copy=function(){return s().domain(a()).range(f).round(l).paddingInner(c).paddingOuter(d).align(h)},e()}function f(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return f(t())},e}function l(){return f(s().paddingInner(1))}function c(e){return function(){return e}}function d(e){return+e}function h(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:c(t)}function p(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}function g(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}function m(e,t,n,r){var i=e[0],a=e[1],o=t[0],u=t[1];return a<i?(i=n(a,i),o=r(u,o)):(i=n(i,a),o=r(o,u)),function(e){return o(i(e))}}function v(e,n,r,i){var a=Math.min(e.length,n.length)-1,o=new Array(a),u=new Array(a),s=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<a;)o[s]=r(e[s],e[s+1]),u[s]=i(n[s],n[s+1]);return function(n){var r=t.bisect(e,n,1,a)-1;return u[r](o[r](n))}}function y(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function b(e,t){function n(){return a=Math.min(s.length,f.length)>2?v:m,o=u=null,i}function i(t){return(o||(o=a(s,f,c?p(e):e,l)))(+t)}var a,o,u,s=X,f=X,l=r.interpolate,c=!1;return i.invert=function(e){return(u||(u=a(f,s,h,c?g(t):t)))(+e)},i.domain=function(e){return arguments.length?(s=H.call(e,d),n()):s.slice()},i.range=function(e){return arguments.length?(f=Y.call(e),n()):f.slice()},i.rangeRound=function(e){return f=Y.call(e),l=r.interpolateRound,n()},i.clamp=function(e){return arguments.length?(c=!!e,n()):c},i.interpolate=function(e){return arguments.length?(l=e,n()):l},n()}function _(e,n,r){var a,o=e[0],u=e[e.length-1],s=t.tickStep(o,u,null==n?10:n);switch(r=i.formatSpecifier(null==r?",f":r),r.type){case"s":var f=Math.max(Math.abs(o),Math.abs(u));return null!=r.precision||isNaN(a=i.precisionPrefix(s,f))||(r.precision=a),i.formatPrefix(r,f);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=i.precisionRound(s,Math.max(Math.abs(o),Math.abs(u))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=i.precisionFixed(s))||(r.precision=a-2*("%"===r.type))}return i.format(r)}function x(e){var n=e.domain;return e.ticks=function(e){var r=n();return t.ticks(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,t){return _(n(),e,t)},e.nice=function(r){null==r&&(r=10);var i,a=n(),o=0,u=a.length-1,s=a[o],f=a[u];return f<s&&(i=s,s=f,f=i,i=o,o=u,u=i),i=t.tickIncrement(s,f,r),i>0?(s=Math.floor(s/i)*i,f=Math.ceil(f/i)*i,i=t.tickIncrement(s,f,r)):i<0&&(s=Math.ceil(s*i)/i,f=Math.floor(f*i)/i,i=t.tickIncrement(s,f,r)),i>0?(a[o]=Math.floor(s/i)*i,a[u]=Math.ceil(f/i)*i,n(a)):i<0&&(a[o]=Math.ceil(s*i)/i,a[u]=Math.floor(f*i)/i,n(a)),e},e}function w(){var e=b(h,r.interpolateNumber);return e.copy=function(){return y(e,w())},x(e)}function k(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=H.call(n,d),e):t.slice()},e.copy=function(){return k().domain(t)},x(e)}function M(e,t){e=e.slice();var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function E(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:c(t)}function O(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function S(e){return isFinite(e)?+("1e"+e):e<0?0:e}function A(e){return 10===e?S:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function C(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function R(e){return function(t){return-e(-t)}}function T(){function e(){return o=C(a),u=A(a),r()[0]<0&&(o=R(o),u=R(u)),n}var n=b(E,O).domain([1,10]),r=n.domain,a=10,o=C(10),u=A(10);return n.base=function(t){return arguments.length?(a=+t,e()):a},n.domain=function(t){return arguments.length?(r(t),e()):r()},n.ticks=function(e){var n,i=r(),s=i[0],f=i[i.length-1];(n=f<s)&&(h=s,s=f,f=h);var l,c,d,h=o(s),p=o(f),g=null==e?10:+e,m=[];if(!(a%1)&&p-h<g){if(h=Math.round(h)-1,p=Math.round(p)+1,s>0){for(;h<p;++h)for(c=1,l=u(h);c<a;++c)if(d=l*c,!(d<s)){if(d>f)break;m.push(d)}}else for(;h<p;++h)for(c=a-1,l=u(h);c>=1;--c)if(d=l*c,!(d<s)){if(d>f)break;m.push(d)}}else m=t.ticks(h,p,Math.min(p-h,g)).map(u);return n?m.reverse():m},n.tickFormat=function(e,t){if(null==t&&(t=10===a?".0e":","),"function"!=typeof t&&(t=i.format(t)),e===1/0)return t;null==e&&(e=10);var r=Math.max(1,a*e/n.ticks().length);return function(e){var n=e/u(Math.round(o(e)));return n*a<a-.5&&(n*=a),n<=r?t(e):""}},n.nice=function(){return r(M(r(),{floor:function(e){return u(Math.floor(o(e)))},ceil:function(e){return u(Math.ceil(o(e)))}}))},n.copy=function(){return y(n,T().base(a))},n}function z(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function D(){function e(e,t){return(t=z(t,n)-(e=z(e,n)))?function(r){return(z(r,n)-e)/t}:c(t)}function t(e,t){return t=z(t,n)-(e=z(e,n)),function(r){return z(e+t*r,1/n)}}var n=1,r=b(e,t),i=r.domain;return r.exponent=function(e){return arguments.length?(n=+e,i(i())):n},r.copy=function(){return y(r,D().exponent(n))},x(r)}function N(){return D().exponent(.5)}function P(){function e(){var e=0,o=Math.max(1,i.length);for(a=new Array(o-1);++e<o;)a[e-1]=t.quantile(r,e/o);return n}function n(e){if(!isNaN(e=+e))return i[t.bisect(a,e)]}var r=[],i=[],a=[];return n.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},n.domain=function(n){if(!arguments.length)return r.slice();r=[];for(var i,a=0,o=n.length;a<o;++a)i=n[a],null==i||isNaN(i=+i)||r.push(i);return r.sort(t.ascending),e()},n.range=function(t){return arguments.length?(i=Y.call(t),e()):i.slice()},n.quantiles=function(){return a.slice()},n.copy=function(){return P().domain(r).range(i)},n}function $(){function e(e){if(e<=e)return u[t.bisect(o,e,0,a)]}function n(){var t=-1;for(o=new Array(a);++t<a;)o[t]=((t+1)*i-(t-a)*r)/(a+1);return e}var r=0,i=1,a=1,o=[.5],u=[0,1];return e.domain=function(e){return arguments.length?(r=+e[0],i=+e[1],n()):[r,i]},e.range=function(e){return arguments.length?(a=(u=Y.call(e)).length-1,n()):u.slice()},e.invertExtent=function(e){var t=u.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,o[0]]:t>=a?[o[a-1],i]:[o[t-1],o[t]]},e.copy=function(){return $().domain([r,i]).range(u)},x(e)}function L(){function e(e){if(e<=e)return r[t.bisect(n,e,0,i)]}var n=[.5],r=[0,1],i=1;return e.domain=function(t){return arguments.length?(n=Y.call(t),i=Math.min(n.length,r.length-1),e):n.slice()},e.range=function(t){return arguments.length?(r=Y.call(t),i=Math.min(n.length,r.length-1),e):r.slice()},e.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},e.copy=function(){return L().domain(n).range(r)},e}function q(e){return new Date(e)}function j(e){return e instanceof Date?+e:+new Date((+e))}function F(e,n,i,a,o,u,s,f,l){function c(t){return(s(t)<t?v:u(t)<t?_:o(t)<t?x:a(t)<t?w:n(t)<t?i(t)<t?k:E:e(t)<t?O:S)(t)}function d(n,r,i,a){if(null==n&&(n=10),"number"==typeof n){var o=Math.abs(i-r)/n,u=t.bisector(function(e){return e[2]}).right(A,o);u===A.length?(a=t.tickStep(r/ne,i/ne,n),n=e):u?(u=A[o/A[u-1][2]<A[u][2]/o?u-1:u],a=u[1],n=u[0]):(a=Math.max(t.tickStep(r,i,n),1),n=f)}return null==a?n:n.every(a)}var p=b(h,r.interpolateNumber),g=p.invert,m=p.domain,v=l(".%L"),_=l(":%S"),x=l("%I:%M"),w=l("%I %p"),k=l("%a %d"),E=l("%b %d"),O=l("%B"),S=l("%Y"),A=[[s,1,Z],[s,5,5*Z],[s,15,15*Z],[s,30,30*Z],[u,1,J],[u,5,5*J],[u,15,15*J],[u,30,30*J],[o,1,Q],[o,3,3*Q],[o,6,6*Q],[o,12,12*Q],[a,1,K],[a,2,2*K],[i,1,ee],[n,1,te],[n,3,3*te],[e,1,ne]];return p.invert=function(e){return new Date(g(e))},p.domain=function(e){return arguments.length?m(H.call(e,j)):m().map(q)},p.ticks=function(e,t){var n,r=m(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=d(e,i,a,t),n=n?n.range(i,a+1):[],o?n.reverse():n},p.tickFormat=function(e,t){return null==t?c:l(t)},p.nice=function(e,t){var n=m();return(e=d(e,n[0],n[n.length-1],t))?m(M(n,e)):p},p.copy=function(){return y(p,F(e,n,i,a,o,u,s,f,l))},p}function U(){return F(a.timeYear,a.timeMonth,a.timeWeek,a.timeDay,a.timeHour,a.timeMinute,a.timeSecond,a.timeMillisecond,o.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function I(){return F(a.utcYear,a.utcMonth,a.utcWeek,a.utcDay,a.utcHour,a.utcMinute,a.utcSecond,a.utcMillisecond,o.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function B(e){function t(t){var r=(t-n)*i;return e(a?Math.max(0,Math.min(1,r)):r)}var n=0,r=1,i=1,a=!1;return t.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],i=n===r?0:1/(r-n),t):[n,r]},t.clamp=function(e){return arguments.length?(a=!!e,t):a},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return B(e).domain([n,r]).clamp(a)},x(t)}function W(e){function t(t){var n=.5+((t=+t)-r)*(t<r?a:o);return e(u?Math.max(0,Math.min(1,n)):n)}var n=0,r=.5,i=1,a=1,o=1,u=!1;return t.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],i=+e[2],a=n===r?0:.5/(r-n),o=r===i?0:.5/(i-r),t):[n,r,i]},t.clamp=function(e){return arguments.length?(u=!!e,t):u},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return W(e).domain([n,r,i]).clamp(u)},x(t)}var V=Array.prototype,H=V.map,Y=V.slice,G={name:"implicit"},X=[0,1],Z=1e3,J=60*Z,Q=60*J,K=24*Q,ee=7*K,te=30*K,ne=365*K;e.scaleBand=s,e.scalePoint=l,e.scaleIdentity=k,e.scaleLinear=w,e.scaleLog=T,e.scaleOrdinal=u,e.scaleImplicit=G,e.scalePow=D,e.scaleSqrt=N,e.scaleQuantile=P,e.scaleQuantize=$,e.scaleThreshold=L,e.scaleTime=U,e.scaleUtc=I,e.scaleSequential=B,e.scaleDiverging=W,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(20))}(this,function(e,t){"use strict";function n(e){return e>1?0:e<-1?ce:Math.acos(e)}function r(e){return e>=1?de:e<=-1?-de:Math.asin(e)}function i(e){return e.innerRadius}function a(e){return e.outerRadius}function o(e){return e.startAngle}function u(e){return e.endAngle}function s(e){return e&&e.padAngle}function f(e,t,n,r,i,a,o,u){var s=n-e,f=r-t,l=o-i,c=u-a,d=(l*(t-a)-c*(e-i))/(c*s-l*f);return[e+d*s,t+d*f]}function l(e,t,n,r,i,a,o){var u=e-n,s=t-r,f=(o?a:-a)/fe(u*u+s*s),l=f*s,c=-f*u,d=e+l,h=t+c,p=n+l,g=r+c,m=(d+p)/2,v=(h+g)/2,y=p-d,b=g-h,_=y*y+b*b,x=i-a,w=d*g-p*h,k=(b<0?-1:1)*fe(oe(0,x*x*_-w*w)),M=(w*b-y*k)/_,E=(-w*y-b*k)/_,O=(w*b+y*k)/_,S=(-w*y+b*k)/_,A=M-m,C=E-v,R=O-m,T=S-v;return A*A+C*C>R*R+T*T&&(M=O,E=S),{cx:M,cy:E,x01:-l,y01:-c,x11:M*(i/x-1),y11:E*(i/x-1)}}function c(e){this._context=e}function d(e){return e[0]}function h(e){return e[1]}function p(e){this._curve=e}function g(e){function t(t){return new p(e(t))}return t._curve=e,t}function m(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(g(e)):t()._curve},e}function v(e){return e.source}function y(e){return e.target}function b(e){function n(){var n,s=Ee.call(arguments),f=r.apply(this,s),l=i.apply(this,s);if(u||(u=n=t.path()),e(u,+a.apply(this,(s[0]=f,s)),+o.apply(this,s),+a.apply(this,(s[0]=l,s)),+o.apply(this,s)),n)return u=null,n+""||null}var r=v,i=y,a=d,o=h,u=null;return n.source=function(e){return arguments.length?(r=e,n):r},n.target=function(e){return arguments.length?(i=e,n):i},n.x=function(e){return arguments.length?(a="function"==typeof e?e:ne(+e),n):a},n.y=function(e){return arguments.length?(o="function"==typeof e?e:ne(+e),n):o},n.context=function(e){return arguments.length?(u=null==e?null:e,n):u},n}function _(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function x(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+i)/2,r,n,r,i)}function w(e,t,n,r,i){var a=Me(t,n),o=Me(t,n=(n+i)/2),u=Me(r,n),s=Me(r,i);e.moveTo(a[0],a[1]),e.bezierCurveTo(o[0],o[1],u[0],u[1],s[0],s[1])}function k(){return b(_)}function M(){return b(x)}function E(){var e=b(w);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}function O(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function S(e){this._context=e}function A(e){this._context=e}function C(e){this._context=e}function R(e,t){this._basis=new S(e),this._beta=t}function T(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function z(e,t){this._context=e,this._k=(1-t)/6}function D(e,t){this._context=e,this._k=(1-t)/6}function N(e,t){this._context=e,this._k=(1-t)/6}function P(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>le){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>le){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function $(e,t){this._context=e,this._alpha=t}function L(e,t){this._context=e,this._alpha=t}function q(e,t){this._context=e,this._alpha=t}function j(e){this._context=e}function F(e){return e<0?-1:1}function U(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(F(a)+F(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function I(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function B(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function W(e){this._context=e}function V(e){this._context=new H(e)}function H(e){this._context=e}function Y(e){return new W(e)}function G(e){return new V(e)}function X(e){this._context=e}function Z(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function J(e,t){this._context=e,this._t=t}function Q(e){return new J(e,0)}function K(e){return new J(e,1)}function ee(e,t){return e[t]}function te(e){for(var t,n=0,r=-1,i=e.length;++r<i;)(t=+e[r][1])&&(n+=t);return n}var ne=function(e){return function(){return e}},re=Math.abs,ie=Math.atan2,ae=Math.cos,oe=Math.max,ue=Math.min,se=Math.sin,fe=Math.sqrt,le=1e-12,ce=Math.PI,de=ce/2,he=2*ce,pe=function(){function e(){var e,i,a=+c.apply(this,arguments),o=+d.apply(this,arguments),u=g.apply(this,arguments)-de,s=m.apply(this,arguments)-de,b=re(s-u),_=s>u;if(y||(y=e=t.path()),o<a&&(i=o,o=a,a=i),o>le)if(b>he-le)y.moveTo(o*ae(u),o*se(u)),y.arc(0,0,o,u,s,!_),a>le&&(y.moveTo(a*ae(s),a*se(s)),y.arc(0,0,a,s,u,_));else{var x,w,k=u,M=s,E=u,O=s,S=b,A=b,C=v.apply(this,arguments)/2,R=C>le&&(p?+p.apply(this,arguments):fe(a*a+o*o)),T=ue(re(o-a)/2,+h.apply(this,arguments)),z=T,D=T;if(R>le){var N=r(R/a*se(C)),P=r(R/o*se(C));(S-=2*N)>le?(N*=_?1:-1,E+=N,O-=N):(S=0,E=O=(u+s)/2),(A-=2*P)>le?(P*=_?1:-1,k+=P,M-=P):(A=0,k=M=(u+s)/2)}var $=o*ae(k),L=o*se(k),q=a*ae(O),j=a*se(O);if(T>le){var F=o*ae(M),U=o*se(M),I=a*ae(E),B=a*se(E);if(b<ce){var W=S>le?f($,L,I,B,F,U,q,j):[q,j],V=$-W[0],H=L-W[1],Y=F-W[0],G=U-W[1],X=1/se(n((V*Y+H*G)/(fe(V*V+H*H)*fe(Y*Y+G*G)))/2),Z=fe(W[0]*W[0]+W[1]*W[1]);z=ue(T,(a-Z)/(X-1)),D=ue(T,(o-Z)/(X+1))}}A>le?D>le?(x=l(I,B,$,L,o,D,_),w=l(F,U,q,j,o,D,_),y.moveTo(x.cx+x.x01,x.cy+x.y01),D<T?y.arc(x.cx,x.cy,D,ie(x.y01,x.x01),ie(w.y01,w.x01),!_):(y.arc(x.cx,x.cy,D,ie(x.y01,x.x01),ie(x.y11,x.x11),!_),y.arc(0,0,o,ie(x.cy+x.y11,x.cx+x.x11),ie(w.cy+w.y11,w.cx+w.x11),!_),y.arc(w.cx,w.cy,D,ie(w.y11,w.x11),ie(w.y01,w.x01),!_))):(y.moveTo($,L),y.arc(0,0,o,k,M,!_)):y.moveTo($,L),a>le&&S>le?z>le?(x=l(q,j,F,U,a,-z,_),w=l($,L,I,B,a,-z,_),y.lineTo(x.cx+x.x01,x.cy+x.y01),z<T?y.arc(x.cx,x.cy,z,ie(x.y01,x.x01),ie(w.y01,w.x01),!_):(y.arc(x.cx,x.cy,z,ie(x.y01,x.x01),ie(x.y11,x.x11),!_),y.arc(0,0,a,ie(x.cy+x.y11,x.cx+x.x11),ie(w.cy+w.y11,w.cx+w.x11),_),y.arc(w.cx,w.cy,z,ie(w.y11,w.x11),ie(w.y01,w.x01),!_))):y.arc(0,0,a,O,E,_):y.lineTo(q,j)}else y.moveTo(0,0);if(y.closePath(),e)return y=null,e+""||null}var c=i,d=a,h=ne(0),p=null,g=o,m=u,v=s,y=null;return e.centroid=function(){var e=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,t=(+g.apply(this,arguments)+ +m.apply(this,arguments))/2-ce/2;return[ae(t)*e,se(t)*e]},e.innerRadius=function(t){return arguments.length?(c="function"==typeof t?t:ne(+t),e):c},e.outerRadius=function(t){return arguments.length?(d="function"==typeof t?t:ne(+t),e):d},e.cornerRadius=function(t){return arguments.length?(h="function"==typeof t?t:ne(+t),e):h},e.padRadius=function(t){return arguments.length?(p=null==t?null:"function"==typeof t?t:ne(+t),e):p},e.startAngle=function(t){return arguments.length?(g="function"==typeof t?t:ne(+t),e):g},e.endAngle=function(t){return arguments.length?(m="function"==typeof t?t:ne(+t),e):m},e.padAngle=function(t){return arguments.length?(v="function"==typeof t?t:ne(+t),e):v},e.context=function(t){return arguments.length?(y=null==t?null:t,e):y},e};c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var ge=function(e){return new c(e)},me=function(){function e(e){var s,f,l,c=e.length,d=!1;for(null==a&&(u=o(l=t.path())),s=0;s<=c;++s)!(s<c&&i(f=e[s],s,e))===d&&((d=!d)?u.lineStart():u.lineEnd()),d&&u.point(+n(f,s,e),+r(f,s,e));if(l)return u=null,l+""||null}var n=d,r=h,i=ne(!0),a=null,o=ge,u=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:ne(+t),e):n},e.y=function(t){return arguments.length?(r="function"==typeof t?t:ne(+t),e):r},e.defined=function(t){return arguments.length?(i="function"==typeof t?t:ne(!!t),e):i},e.curve=function(t){return arguments.length?(o=t,null!=a&&(u=o(a)),e):o},e.context=function(t){return arguments.length?(null==t?a=u=null:u=o(a=t),e):a},e},ve=function(){function e(e){var n,c,d,h,p,g=e.length,m=!1,v=new Array(g),y=new Array(g);for(null==s&&(l=f(p=t.path())),n=0;n<=g;++n){if(!(n<g&&u(h=e[n],n,e))===m)if(m=!m)c=n,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),d=n-1;d>=c;--d)l.point(v[d],y[d]);l.lineEnd(),l.areaEnd()}m&&(v[n]=+r(h,n,e),y[n]=+a(h,n,e),l.point(i?+i(h,n,e):v[n],o?+o(h,n,e):y[n]))}if(p)return l=null,p+""||null}function n(){return me().defined(u).curve(f).context(s)}var r=d,i=null,a=ne(0),o=h,u=ne(!0),s=null,f=ge,l=null;return e.x=function(t){return arguments.length?(r="function"==typeof t?t:ne(+t),i=null,e):r},e.x0=function(t){return arguments.length?(r="function"==typeof t?t:ne(+t),e):r},e.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:ne(+t),e):i},e.y=function(t){return arguments.length?(a="function"==typeof t?t:ne(+t),o=null,e):a},e.y0=function(t){return arguments.length?(a="function"==typeof t?t:ne(+t),e):a},e.y1=function(t){return arguments.length?(o=null==t?null:"function"==typeof t?t:ne(+t),e):o},e.lineX0=e.lineY0=function(){return n().x(r).y(a)},e.lineY1=function(){return n().x(r).y(o)},e.lineX1=function(){return n().x(i).y(a)},e.defined=function(t){return arguments.length?(u="function"==typeof t?t:ne(!!t),e):u},e.curve=function(t){return arguments.length?(f=t,null!=s&&(l=f(s)),e):f},e.context=function(t){return arguments.length?(null==t?s=l=null:l=f(s=t),e):s},e},ye=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},be=function(e){return e},_e=function(){function e(e){var u,s,f,l,c,d=e.length,h=0,p=new Array(d),g=new Array(d),m=+i.apply(this,arguments),v=Math.min(he,Math.max(-he,a.apply(this,arguments)-m)),y=Math.min(Math.abs(v)/d,o.apply(this,arguments)),b=y*(v<0?-1:1);for(u=0;u<d;++u)(c=g[p[u]=u]=+t(e[u],u,e))>0&&(h+=c);for(null!=n?p.sort(function(e,t){return n(g[e],g[t])}):null!=r&&p.sort(function(t,n){return r(e[t],e[n])}),u=0,f=h?(v-d*b)/h:0;u<d;++u,m=l)s=p[u],c=g[s],l=m+(c>0?c*f:0)+b,g[s]={data:e[s],index:u,value:c,startAngle:m,endAngle:l,padAngle:y};return g}var t=be,n=ye,r=null,i=ne(0),a=ne(he),o=ne(0);return e.value=function(n){return arguments.length?(t="function"==typeof n?n:ne(+n),e):t},e.sortValues=function(t){return arguments.length?(n=t,r=null,e):n},e.sort=function(t){return arguments.length?(r=t,n=null,e):r},e.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:ne(+t),e):i},e.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:ne(+t),e):a},e.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:ne(+t),e):o},e},xe=g(ge);p.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var we=function(){return m(me().curve(xe))},ke=function(){var e=ve().curve(xe),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,a=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return m(n())},delete e.lineX0,e.lineEndAngle=function(){return m(r())},delete e.lineX1,e.lineInnerRadius=function(){return m(i())},delete e.lineY0,e.lineOuterRadius=function(){return m(a())},delete e.lineY1,e.curve=function(e){return arguments.length?t(g(e)):t()._curve},e},Me=function(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]},Ee=Array.prototype.slice,Oe={draw:function(e,t){var n=Math.sqrt(t/ce);e.moveTo(n,0),e.arc(0,0,n,0,he)}},Se={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Ae=Math.sqrt(1/3),Ce=2*Ae,Re={draw:function(e,t){var n=Math.sqrt(t/Ce),r=n*Ae;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Te=.8908130915292852,ze=Math.sin(ce/10)/Math.sin(7*ce/10),De=Math.sin(he/10)*ze,Ne=-Math.cos(he/10)*ze,Pe={draw:function(e,t){var n=Math.sqrt(t*Te),r=De*n,i=Ne*n;e.moveTo(0,-n),e.lineTo(r,i);for(var a=1;a<5;++a){var o=he*a/5,u=Math.cos(o),s=Math.sin(o);e.lineTo(s*n,-u*n),e.lineTo(u*r-s*i,s*r+u*i)}e.closePath()}},$e={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},Le=Math.sqrt(3),qe={draw:function(e,t){var n=-Math.sqrt(t/(3*Le));e.moveTo(0,2*n),e.lineTo(-Le*n,-n),e.lineTo(Le*n,-n),e.closePath()}},je=-.5,Fe=Math.sqrt(3)/2,Ue=1/Math.sqrt(12),Ie=3*(Ue/2+1),Be={draw:function(e,t){var n=Math.sqrt(t/Ie),r=n/2,i=n*Ue,a=r,o=n*Ue+n,u=-a,s=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,s),e.lineTo(je*r-Fe*i,Fe*r+je*i),e.lineTo(je*a-Fe*o,Fe*a+je*o),e.lineTo(je*u-Fe*s,Fe*u+je*s),e.lineTo(je*r+Fe*i,je*i-Fe*r),e.lineTo(je*a+Fe*o,je*o-Fe*a),e.lineTo(je*u+Fe*s,je*s-Fe*u),e.closePath()}},We=[Oe,Se,Re,$e,Pe,qe,Be],Ve=function(){function e(){var e;if(i||(i=e=t.path()),n.apply(this,arguments).draw(i,+r.apply(this,arguments)),e)return i=null,e+""||null}var n=ne(Oe),r=ne(64),i=null;return e.type=function(t){return arguments.length?(n="function"==typeof t?t:ne(t),e):n},e.size=function(t){return arguments.length?(r="function"==typeof t?t:ne(+t),e):r},e.context=function(t){return arguments.length?(i=null==t?null:t,e):i},e},He=function(){};S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:O(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:O(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Ye=function(e){return new S(e)};A.prototype={areaStart:He,areaEnd:He,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:O(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Ge=function(e){return new A(e)};C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:O(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Xe=function(e){return new C(e)};R.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,u=t[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+r*o),this._beta*t[s]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var Ze=function e(t){function n(e){return 1===t?new S(e):new R(e,t)}return n.beta=function(t){return e(+t)},n}(.85);z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:T(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:T(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Je=function e(t){function n(e){return new z(e,t)}return n.tension=function(t){return e(+t)},n}(0);D.prototype={areaStart:He,areaEnd:He,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:T(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Qe=function e(t){function n(e){return new D(e,t)}return n.tension=function(t){return e(+t)},n}(0);N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:T(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,
this._y1=this._y2,this._y2=t}};var Ke=function e(t){function n(e){return new N(e,t)}return n.tension=function(t){return e(+t)},n}(0);$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:P(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var et=function e(t){function n(e){return t?new $(e,t):new z(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);L.prototype={areaStart:He,areaEnd:He,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:P(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var tt=function e(t){function n(e){return t?new L(e,t):new D(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:P(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var nt=function e(t){function n(e){return t?new q(e,t):new N(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);j.prototype={areaStart:He,areaEnd:He,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};var rt=function(e){return new j(e)};W.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:B(this,this._t0,I(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,B(this,I(this,n=U(this,e,t)),n);break;default:B(this,this._t0,n=U(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(V.prototype=Object.create(W.prototype)).point=function(e,t){W.prototype.point.call(this,t,e)},H.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},X.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Z(e),i=Z(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var it=function(e){return new X(e)};J.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var at=function(e){return new J(e,.5)},ot=function(e,t){if((i=e.length)>1)for(var n,r,i,a=1,o=e[t[0]],u=o.length;a<i;++a)for(r=o,o=e[t[a]],n=0;n<u;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},ut=function(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n},st=function(){function e(e){var a,o,u=t.apply(this,arguments),s=e.length,f=u.length,l=new Array(f);for(a=0;a<f;++a){for(var c,d=u[a],h=l[a]=new Array(s),p=0;p<s;++p)h[p]=c=[0,+i(e[p],d,p,e)],c.data=e[p];h.key=d}for(a=0,o=n(l);a<f;++a)l[o[a]].index=a;return r(l,o),l}var t=ne([]),n=ut,r=ot,i=ee;return e.keys=function(n){return arguments.length?(t="function"==typeof n?n:ne(Ee.call(n)),e):t},e.value=function(t){return arguments.length?(i="function"==typeof t?t:ne(+t),e):i},e.order=function(t){return arguments.length?(n=null==t?ut:"function"==typeof t?t:ne(Ee.call(t)),e):n},e.offset=function(t){return arguments.length?(r=null==t?ot:t,e):r},e},ft=function(e,t){if((r=e.length)>0){for(var n,r,i,a=0,o=e[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<r;++n)e[n][a][1]/=i}ot(e,t)}},lt=function(e,t){if((u=e.length)>1)for(var n,r,i,a,o,u,s=0,f=e[t[0]].length;s<f;++s)for(a=o=0,n=0;n<u;++n)(i=(r=e[t[n]][s])[1]-r[0])>=0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):r[0]=a},ct=function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],a=i.length;r<a;++r){for(var o=0,u=0;o<n;++o)u+=e[o][r][1]||0;i[r][1]+=i[r][0]=-u/2}ot(e,t)}},dt=function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var u=0,s=0,f=0;u<i;++u){for(var l=e[t[u]],c=l[o][1]||0,d=l[o-1][1]||0,h=(c-d)/2,p=0;p<u;++p){var g=e[t[p]],m=g[o][1]||0,v=g[o-1][1]||0;h+=m-v}s+=c,f+=h*c}n[o-1][1]+=n[o-1][0]=a,s&&(a-=f/s)}n[o-1][1]+=n[o-1][0]=a,ot(e,t)}},ht=function(e){var t=e.map(te);return ut(e).sort(function(e,n){return t[e]-t[n]})},pt=function(e){return ht(e).reverse()},gt=function(e){var t,n,r=e.length,i=e.map(te),a=ut(e).sort(function(e,t){return i[t]-i[e]}),o=0,u=0,s=[],f=[];for(t=0;t<r;++t)n=a[t],o<u?(o+=i[n],s.push(n)):(u+=i[n],f.push(n));return f.reverse().concat(s)},mt=function(e){return ut(e).reverse()};e.arc=pe,e.area=ve,e.line=me,e.pie=_e,e.areaRadial=ke,e.radialArea=ke,e.lineRadial=we,e.radialLine=we,e.pointRadial=Me,e.linkHorizontal=k,e.linkVertical=M,e.linkRadial=E,e.symbol=Ve,e.symbols=We,e.symbolCircle=Oe,e.symbolCross=Se,e.symbolDiamond=Re,e.symbolSquare=$e,e.symbolStar=Pe,e.symbolTriangle=qe,e.symbolWye=Be,e.curveBasisClosed=Ge,e.curveBasisOpen=Xe,e.curveBasis=Ye,e.curveBundle=Ze,e.curveCardinalClosed=Qe,e.curveCardinalOpen=Ke,e.curveCardinal=Je,e.curveCatmullRomClosed=tt,e.curveCatmullRomOpen=nt,e.curveCatmullRom=et,e.curveLinearClosed=rt,e.curveLinear=ge,e.curveMonotoneX=Y,e.curveMonotoneY=G,e.curveNatural=it,e.curveStep=at,e.curveStepAfter=K,e.curveStepBefore=Q,e.stack=st,e.stackOffsetExpand=ft,e.stackOffsetDiverging=lt,e.stackOffsetNone=ot,e.stackOffsetSilhouette=ct,e.stackOffsetWiggle=dt,e.stackOrderAscending=ht,e.stackOrderDescending=pt,e.stackOrderInsideOut=gt,e.stackOrderNone=ut,e.stackOrderReverse=mt,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return e[0]}function n(e){return e[1]}function r(){this._=null}function i(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function a(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function o(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function u(e){for(;e.L;)e=e.L;return e}function s(e,t,n,r){var i=[null,null],a=q.push(i)-1;return i.left=e,i.right=t,n&&l(i,e,t,n),r&&l(i,t,e,r),$[e.index].halfedges.push(a),$[t.index].halfedges.push(a),i}function f(e,t,n){var r=[t,n];return r.left=e,r}function l(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function c(e,t,n,r,i){var a,o=e[0],u=e[1],s=o[0],f=o[1],l=u[0],c=u[1],d=0,h=1,p=l-s,g=c-f;if(a=t-s,p||!(a>0)){if(a/=p,p<0){if(a<d)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=r-s,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<h&&(h=a)}if(a=n-f,g||!(a>0)){if(a/=g,g<0){if(a<d)return;a<h&&(h=a)}else if(g>0){if(a>h)return;a>d&&(d=a)}if(a=i-f,g||!(a<0)){if(a/=g,g<0){if(a>h)return;a>d&&(d=a)}else if(g>0){if(a<d)return;a<h&&(h=a)}return!(d>0||h<1)||(d>0&&(e[0]=[s+d*p,f+d*g]),h<1&&(e[1]=[s+h*p,f+h*g]),!0)}}}}}function d(e,t,n,r,i){var a=e[1];if(a)return!0;var o,u,s=e[0],f=e.left,l=e.right,c=f[0],d=f[1],h=l[0],p=l[1],g=(c+h)/2,m=(d+p)/2;if(p===d){if(g<t||g>=r)return;if(c>h){if(s){if(s[1]>=i)return}else s=[g,n];a=[g,i]}else{if(s){if(s[1]<n)return}else s=[g,i];a=[g,n]}}else if(o=(c-h)/(p-d),u=m-o*g,o<-1||o>1)if(c>h){if(s){if(s[1]>=i)return}else s=[(n-u)/o,n];a=[(i-u)/o,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/o,i];a=[(n-u)/o,n]}else if(d<p){if(s){if(s[0]>=r)return}else s=[t,o*t+u];a=[r,o*r+u]}else{if(s){if(s[0]<t)return}else s=[r,o*r+u];a=[t,o*t+u]}return e[0]=s,e[1]=a,!0}function h(e,t,n,r){for(var i,a=q.length;a--;)d(i=q[a],e,t,n,r)&&c(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>U||Math.abs(i[0][1]-i[1][1])>U)||delete q[a]}function p(e){return $[e.index]={site:e,halfedges:[]}}function g(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function m(e,t){return t[+(t.left!==e.site)]}function v(e,t){return t[+(t.left===e.site)]}function y(){for(var e,t,n,r,i=0,a=$.length;i<a;++i)if((e=$[i])&&(r=(t=e.halfedges).length)){var o=new Array(r),u=new Array(r);for(n=0;n<r;++n)o[n]=n,u[n]=g(e,q[t[n]]);for(o.sort(function(e,t){return u[t]-u[e]}),n=0;n<r;++n)u[n]=t[o[n]];for(n=0;n<r;++n)t[n]=u[n]}}function b(e,t,n,r){var i,a,o,u,s,l,c,d,h,p,g,y,b=$.length,_=!0;for(i=0;i<b;++i)if(a=$[i]){for(o=a.site,s=a.halfedges,u=s.length;u--;)q[s[u]]||s.splice(u,1);for(u=0,l=s.length;u<l;)p=v(a,q[s[u]]),g=p[0],y=p[1],c=m(a,q[s[++u%l]]),d=c[0],h=c[1],(Math.abs(g-d)>U||Math.abs(y-h)>U)&&(s.splice(u,0,q.push(f(o,p,Math.abs(g-e)<U&&r-y>U?[e,Math.abs(d-e)<U?h:r]:Math.abs(y-r)<U&&n-g>U?[Math.abs(h-r)<U?d:n,r]:Math.abs(g-n)<U&&y-t>U?[n,Math.abs(d-n)<U?h:t]:Math.abs(y-t)<U&&g-e>U?[Math.abs(h-t)<U?d:e,t]:null))-1),++l);l&&(_=!1)}if(_){var x,w,k,M=1/0;for(i=0,_=null;i<b;++i)(a=$[i])&&(o=a.site,x=o[0]-e,w=o[1]-t,k=x*x+w*w,k<M&&(M=k,_=a));if(_){var E=[e,t],O=[e,r],S=[n,r],A=[n,t];_.halfedges.push(q.push(f(o=_.site,E,O))-1,q.push(f(o,O,S))-1,q.push(f(o,S,A))-1,q.push(f(o,A,E))-1)}}for(i=0;i<b;++i)(a=$[i])&&(a.halfedges.length||delete $[i])}function _(){i(this),this.x=this.y=this.arc=this.site=this.cy=null}function x(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i[0],u=i[1],s=r[0]-o,f=r[1]-u,l=a[0]-o,c=a[1]-u,d=2*(s*c-f*l);if(!(d>=-I)){var h=s*s+f*f,p=l*l+c*c,g=(c*h-f*p)/d,m=(s*p-l*h)/d,v=j.pop()||new _;v.arc=e,v.site=i,v.x=g+o,v.y=(v.cy=m+u)+Math.sqrt(g*g+m*m),e.circle=v;for(var y=null,b=L._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}L.insert(y,v),y||(N=v)}}}}function w(e){var t=e.circle;t&&(t.P||(N=t.N),L.remove(t),j.push(t),i(t),e.circle=null)}function k(){i(this),this.edge=this.site=this.circle=null}function M(e){var t=F.pop()||new k;return t.site=e,t}function E(e){w(e),P.remove(e),F.push(e),i(e)}function O(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],a=e.P,o=e.N,u=[e];E(e);for(var f=a;f.circle&&Math.abs(n-f.circle.x)<U&&Math.abs(r-f.circle.cy)<U;)a=f.P,u.unshift(f),E(f),f=a;u.unshift(f),w(f);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<U&&Math.abs(r-c.circle.cy)<U;)o=c.N,u.push(c),E(c),c=o;u.push(c),w(c);var d,h=u.length;for(d=1;d<h;++d)c=u[d],f=u[d-1],l(c.edge,f.site,c.site,i);f=u[0],c=u[h-1],c.edge=s(f.site,c.site,null,i),x(f),x(c)}function S(e){for(var t,n,r,i,a=e[0],o=e[1],u=P._;u;)if(r=A(u,o)-a,r>U)u=u.L;else{if(i=a-C(u,o),!(i>U)){r>-U?(t=u.P,n=u):i>-U?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}p(e);var f=M(e);if(P.insert(t,f),t||n){if(t===n)return w(t),n=M(t.site),P.insert(f,n),f.edge=n.edge=s(t.site,f.site),x(t),void x(n);if(!n)return void(f.edge=s(t.site,f.site));w(t),w(n);var c=t.site,d=c[0],h=c[1],g=e[0]-d,m=e[1]-h,v=n.site,y=v[0]-d,b=v[1]-h,_=2*(g*b-m*y),k=g*g+m*m,E=y*y+b*b,O=[(b*k-m*E)/_+d,(g*E-y*k)/_+h];l(n.edge,c,v,O),f.edge=s(c,e,null,O),n.edge=s(e,v,null,O),x(t),x(n)}}function A(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-(1/0);n=o.site;var u=n[0],s=n[1],f=s-t;if(!f)return u;var l=u-r,c=1/a-1/f,d=l/f;return c?(-d+Math.sqrt(d*d-2*c*(l*l/(-2*f)-s+f/2+i-a/2)))/c+r:(r+u)/2}function C(e,t){var n=e.N;if(n)return A(n,t);var r=e.site;return r[1]===t?r[0]:1/0}function R(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function T(e,t){return t[1]-e[1]||t[0]-e[0]}function z(e,t){var n,i,a,o=e.sort(T).pop();for(q=[],$=new Array(e.length),P=new r,L=new r;;)if(a=N,o&&(!a||o[1]<a.y||o[1]===a.y&&o[0]<a.x))o[0]===n&&o[1]===i||(S(o),n=o[0],i=o[1]),o=e.pop();else{if(!a)break;O(a.arc)}if(y(),t){var u=+t[0][0],s=+t[0][1],f=+t[1][0],l=+t[1][1];h(u,s,f,l),b(u,s,f,l)}this.edges=q,this.cells=$,P=L=q=$=null}var D=function(e){return function(){return e}};r.prototype={constructor:r,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=u(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(a(this,n),e=n,n=e.U),n.C=!1,r.C=!0,o(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(o(this,n),e=n,n=e.U),n.C=!1,r.C=!0,a(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,s=e.L,f=e.R;if(n=s?f?u(f):s:f,i?i.L===e?i.L=n:i.R=n:this._=n,s&&f?(r=n.C,n.C=e.C,n.L=s,s.U=n,n!==f?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=f,f.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,a(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,o(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,a(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,o(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,a(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,o(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var N,P,$,L,q,j=[],F=[],U=1e-6,I=1e-12;z.prototype={constructor:z,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return m(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,u=n.site,s=-1,f=t[i[a-1]],l=f.left===u?f.right:f.left;++s<a;)o=l,f=t[i[s]],l=f.left===u?f.right:f.left,o&&l&&r<o.index&&r<l.index&&R(u,o,l)<0&&e.push([u.data,o.data,l.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,u=a.cells.length;!(i=a.cells[o]);)if(++o>=u)return null;var s=e-i.site[0],f=t-i.site[1],l=s*s+f*f;do i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=e-u[0],f=t-u[1],c=s*s+f*f;c<l&&(l=c,o=u.index)}});while(null!==o);return a._found=r,null==n||l<=n*n?i.site:null}};var B=function(){function e(e){return new z(e.map(function(t,n){var a=[Math.round(r(t,n,e)/U)*U,Math.round(i(t,n,e)/U)*U];return a.index=n,a.data=t,a}),a)}var r=t,i=n,a=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(t){return arguments.length?(r="function"==typeof t?t:D(+t),e):r},e.y=function(t){return arguments.length?(i="function"==typeof t?t:D(+t),e):i},e.extent=function(t){return arguments.length?(a=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):a&&[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},e.size=function(t){return arguments.length?(a=null==t?null:[[0,0],[+t[0],+t[1]]],e):a&&[a[1][0]-a[0][0],a[1][1]-a[0][1]]},e};e.voronoi=B,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){function r(e,t,n){this.name=this.constructor.name,this.message=e,this.type=t,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}e.exports=r,n(32).inherits(r,Error)},function(e,t,n){function r(e){if(e&&!s(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function a(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var u=n(1).Buffer,s=u.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=i)}this.charBuffer=new u(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&r<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,i)}return t},f.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},f.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},function(e,t){"use strict";function n(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0}e.exports=n},function(e,t){"use strict";function n(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function r(e,t,n,r){var a=i,o=r+n;e^=-1;for(var u=r;u<o;u++)e=e>>>8^a[255&(e^t[u])];return e^-1}var i=n();e.exports=r},function(e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t){e.exports=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]];
},function(e,t){e.exports=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]},function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{autosize:{oneOf:[{enum:["pad","fit","fit-x","fit-y","none"]},{type:"object",properties:{type:{enum:["pad","fit","fit-x","fit-y","none"]},resize:{type:"boolean"},contains:{enum:["content","padding"]}},required:["type"],additionalProperties:!1}],default:"pad"},axis:{type:"object",properties:{orient:{enum:["top","bottom","left","right"]},scale:{type:"string"},format:{$ref:"#/refs/stringOrSignal"},minExtent:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},maxExtent:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},offset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},position:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},bandPosition:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},values:{$ref:"#/refs/arrayOrSignal"},zindex:{type:"number"},title:{$ref:"#/refs/stringOrSignal"},titlePadding:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleAlign:{oneOf:[{enum:["left","right","center"]},{$ref:"#/refs/alignValue"}]},titleAngle:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleX:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleY:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleBaseline:{oneOf:[{enum:["top","middle","bottom","alphabetic"]},{$ref:"#/refs/baselineValue"}]},titleColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},titleFont:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},titleFontSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleFontWeight:{oneOf:[{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]},{$ref:"#/refs/fontWeightValue"}]},titleLimit:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},domain:{type:"boolean"},domainColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},domainWidth:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},ticks:{type:"boolean"},tickCount:{$ref:"#/refs/tickCount"},tickColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},tickExtra:{$ref:"#/refs/numberOrSignal"},tickOffset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},tickRound:{oneOf:[{type:"boolean"},{$ref:"#/refs/booleanValue"}]},tickSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},tickWidth:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},grid:{type:"boolean"},gridScale:{type:"string"},gridColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},gridDash:{oneOf:[{type:"array",items:{type:"number"}},{$ref:"#/refs/arrayValue"}]},gridOpacity:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},gridWidth:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labels:{type:"boolean"},labelBound:{oneOf:[{type:"boolean"},{type:"number"}]},labelFlush:{oneOf:[{type:"boolean"},{type:"number"}]},labelFlushOffset:{type:"number"},labelOverlap:{$ref:"#/refs/labelOverlap"},labelAngle:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},labelFont:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},labelFontSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelFontWeight:{oneOf:[{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]},{$ref:"#/refs/fontWeightValue"}]},labelLimit:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelPadding:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},encode:{type:"object",properties:{axis:{$ref:"#/defs/guideEncode"},ticks:{$ref:"#/defs/guideEncode"},labels:{$ref:"#/defs/guideEncode"},title:{$ref:"#/defs/guideEncode"},grid:{$ref:"#/defs/guideEncode"},domain:{$ref:"#/defs/guideEncode"}},additionalProperties:!1}},additionalProperties:!1,required:["orient","scale"]},background:{type:"string"},bind:{oneOf:[{type:"object",properties:{input:{enum:["checkbox"]},element:{$ref:"#/refs/element"},debounce:{type:"number"},name:{type:"string"}},required:["input"]},{type:"object",properties:{input:{enum:["radio","select"]},element:{$ref:"#/refs/element"},options:{type:"array"},debounce:{type:"number"},name:{type:"string"}},additionalProperties:!1,required:["input","options"]},{type:"object",properties:{input:{enum:["range"]},element:{$ref:"#/refs/element"},min:{type:"number"},max:{type:"number"},step:{type:"number"},debounce:{type:"number"},name:{type:"string"}},additionalProperties:!1,required:["input"]},{type:"object",properties:{input:{not:{enum:["checkbox","radio","range","select"]}},element:{$ref:"#/refs/element"},debounce:{type:"number"},name:{type:"string"}},additionalProperties:!0}]},dataFormat:{type:"object",anyOf:[{properties:{type:{enum:["json"]},parse:{oneOf:[{enum:["auto"]},{type:"object",additionalProperties:{oneOf:[{enum:["boolean","number","date","string"]},{type:"string",pattern:"^(date|utc):.*$"}]}}]},property:{type:"string"},copy:{type:"boolean"}},additionalProperties:!1},{properties:{type:{enum:["csv","tsv"]},parse:{oneOf:[{enum:["auto"]},{type:"object",additionalProperties:{oneOf:[{enum:["boolean","number","date","string"]},{type:"string",pattern:"^(date|utc):.*$"}]}}]}},additionalProperties:!1},{properties:{type:{enum:["dsv"]},delimiter:{type:"string"},parse:{oneOf:[{enum:["auto"]},{type:"object",additionalProperties:{oneOf:[{enum:["boolean","number","date","string"]},{type:"string",pattern:"^(date|utc):.*$"}]}}]}},additionalProperties:!1},{oneOf:[{properties:{type:{enum:["topojson"]},feature:{type:"string"},property:{type:"string"}},additionalProperties:!1},{properties:{type:{enum:["topojson"]},mesh:{type:"string"},property:{type:"string"}},additionalProperties:!1}]}]},data:{title:"Input data set definition",type:"object",allOf:[{properties:{name:{type:"string"},transform:{type:"array",items:{$ref:"#/defs/transform"}},on:{$ref:"#/defs/onTrigger"}},required:["name"]},{anyOf:[{required:["name"]},{oneOf:[{properties:{source:{oneOf:[{type:"string"},{type:"array",items:{type:"string"},minItems:1}]}},required:["source"]},{properties:{values:{type:"array"},format:{$ref:"#/defs/dataFormat"}},required:["values"]},{properties:{url:{type:"string"},format:{$ref:"#/defs/dataFormat"}},required:["url"]}]}]}]},rule:{type:"object",properties:{test:{type:"string"}}},encodeEntry:{title:"Mark encode property set",type:"object",properties:{x:{$ref:"#/refs/numberValue"},x2:{$ref:"#/refs/numberValue"},xc:{$ref:"#/refs/numberValue"},width:{$ref:"#/refs/numberValue"},y:{$ref:"#/refs/numberValue"},y2:{$ref:"#/refs/numberValue"},yc:{$ref:"#/refs/numberValue"},height:{$ref:"#/refs/numberValue"},opacity:{$ref:"#/refs/numberValue"},fill:{$ref:"#/refs/colorValue"},fillOpacity:{$ref:"#/refs/numberValue"},stroke:{$ref:"#/refs/colorValue"},strokeWidth:{$ref:"#/refs/numberValue"},strokeOpacity:{$ref:"#/refs/numberValue"},strokeDash:{$ref:"#/refs/arrayValue"},strokeDashOffset:{$ref:"#/refs/numberValue"},cursor:{$ref:"#/refs/stringValue"},clip:{$ref:"#/refs/booleanValue"},size:{$ref:"#/refs/numberValue"},shape:{$ref:"#/refs/stringValue"},path:{$ref:"#/refs/stringValue"},innerRadius:{$ref:"#/refs/numberValue"},outerRadius:{$ref:"#/refs/numberValue"},startAngle:{$ref:"#/refs/numberValue"},endAngle:{$ref:"#/refs/numberValue"},interpolate:{$ref:"#/refs/stringValue"},tension:{$ref:"#/refs/numberValue"},orient:{$ref:"#/refs/orientValue"},url:{$ref:"#/refs/stringValue"},align:{$ref:"#/refs/alignValue"},baseline:{$ref:"#/refs/baselineValue"},text:{$ref:"#/refs/stringValue"},dir:{$ref:"#/refs/stringValue"},ellipsis:{$ref:"#/refs/stringValue"},limit:{$ref:"#/refs/numberValue"},dx:{$ref:"#/refs/numberValue"},dy:{$ref:"#/refs/numberValue"},radius:{$ref:"#/refs/numberValue"},theta:{$ref:"#/refs/numberValue"},angle:{$ref:"#/refs/numberValue"},font:{$ref:"#/refs/stringValue"},fontSize:{$ref:"#/refs/numberValue"},fontWeight:{$ref:"#/refs/fontWeightValue"},fontStyle:{$ref:"#/refs/stringValue"}},additionalProperties:!0},encode:{type:"object",patternProperties:{"^.+$":{$ref:"#/defs/encodeEntry"}},additionalProperties:!1},layout:{oneOf:[{type:"object",properties:{align:{oneOf:[{oneOf:[{enum:["all","each","none"]},{$ref:"#/refs/signal"}]},{type:"object",properties:{row:{oneOf:[{enum:["all","each","none"]},{$ref:"#/refs/signal"}]},column:{oneOf:[{enum:["all","each","none"]},{$ref:"#/refs/signal"}]}},additionalProperties:!1}]},bounds:{oneOf:[{enum:["full","flush"]},{$ref:"#/refs/signal"}]},center:{oneOf:[{$ref:"#/refs/booleanOrSignal"},{type:"object",properties:{row:{$ref:"#/refs/booleanOrSignal"},column:{$ref:"#/refs/booleanOrSignal"}},additionalProperties:!1}]},columns:{$ref:"#/refs/numberOrSignal"},padding:{oneOf:[{$ref:"#/refs/numberOrSignal"},{type:"object",properties:{row:{$ref:"#/refs/numberOrSignal"},column:{$ref:"#/refs/numberOrSignal"}},additionalProperties:!1}]},offset:{oneOf:[{$ref:"#/refs/numberOrSignal"},{type:"object",properties:{rowHeader:{$ref:"#/refs/numberOrSignal"},rowFooter:{$ref:"#/refs/numberOrSignal"},rowTitle:{$ref:"#/refs/numberOrSignal"},columnHeader:{$ref:"#/refs/numberOrSignal"},columnFooter:{$ref:"#/refs/numberOrSignal"},columnTitle:{$ref:"#/refs/numberOrSignal"}},additionalProperties:!1}]},headerBand:{oneOf:[{$ref:"#/refs/numberOrSignal"},{type:"null"},{type:"object",properties:{row:{$ref:"#/refs/numberOrSignal"},column:{$ref:"#/refs/numberOrSignal"}},additionalProperties:!1}]},footerBand:{oneOf:[{$ref:"#/refs/numberOrSignal"},{type:"null"},{type:"object",properties:{row:{$ref:"#/refs/numberOrSignal"},column:{$ref:"#/refs/numberOrSignal"}},additionalProperties:!1}]},titleBand:{oneOf:[{$ref:"#/refs/numberOrSignal"},{type:"null"},{type:"object",properties:{row:{$ref:"#/refs/numberOrSignal"},column:{$ref:"#/refs/numberOrSignal"}},additionalProperties:!1}]}}},{$ref:"#/refs/signal"}]},guideEncode:{type:"object",properties:{name:{type:"string"},interactive:{type:"boolean",default:!1},style:{$ref:"#/refs/style"}},patternProperties:{"^(?!interactive|name|style).+$":{$ref:"#/defs/encodeEntry"}},additionalProperties:!1},legend:{type:"object",properties:{size:{type:"string"},shape:{type:"string"},fill:{type:"string"},stroke:{type:"string"},opacity:{type:"string"},strokeDash:{type:"string"},type:{enum:["gradient","symbol"]},direction:{enum:["vertical","horizontal"]},orient:{enum:["none","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:"right"},format:{$ref:"#/refs/stringOrSignal"},title:{$ref:"#/refs/stringOrSignal"},tickCount:{$ref:"#/refs/tickCount"},values:{$ref:"#/refs/arrayOrSignal"},zindex:{type:"number"},cornerRadius:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},fillColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},offset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},padding:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},strokeColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},strokeWidth:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleAlign:{oneOf:[{enum:["left","right","center"]},{$ref:"#/refs/alignValue"}]},titleBaseline:{oneOf:[{enum:["top","middle","bottom","alphabetic"]},{$ref:"#/refs/baselineValue"}]},titleColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},titleFont:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},titleFontSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleFontWeight:{oneOf:[{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]},{$ref:"#/refs/fontWeightValue"}]},titleLimit:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titlePadding:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},gradientLength:{$ref:"#/refs/numberOrSignal"},gradientThickness:{$ref:"#/refs/numberOrSignal"},gradientStrokeColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},gradientStrokeWidth:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},clipHeight:{$ref:"#/refs/numberOrSignal"},columns:{$ref:"#/refs/numberOrSignal"},columnPadding:{$ref:"#/refs/numberOrSignal"},rowPadding:{$ref:"#/refs/numberOrSignal"},gridAlign:{oneOf:[{enum:["all","each","none"]},{$ref:"#/refs/signal"}]},symbolFillColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},symbolOffset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},symbolSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},symbolStrokeColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},symbolStrokeWidth:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},symbolType:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},labelAlign:{oneOf:[{enum:["left","right","center"]},{$ref:"#/refs/alignValue"}]},labelBaseline:{oneOf:[{enum:["top","middle","bottom","alphabetic"]},{$ref:"#/refs/baselineValue"}]},labelColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},labelFont:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},labelFontSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelFontWeight:{oneOf:[{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]},{$ref:"#/refs/fontWeightValue"}]},labelLimit:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelOffset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelOverlap:{$ref:"#/refs/labelOverlap"},encode:{type:"object",properties:{title:{$ref:"#/defs/guideEncode"},labels:{$ref:"#/defs/guideEncode"},legend:{$ref:"#/defs/guideEncode"},entries:{$ref:"#/defs/guideEncode"},symbols:{$ref:"#/defs/guideEncode"},gradient:{$ref:"#/defs/guideEncode"}},additionalProperties:!1}},additionalProperties:!1,anyOf:[{required:["size"]},{required:["shape"]},{required:["fill"]},{required:["stroke"]},{required:["opacity"]},{required:["strokeDash"]}]},mark:{type:"object",properties:{type:{$ref:"#/refs/marktype"},role:{type:"string"},name:{type:"string"},style:{$ref:"#/refs/style"},key:{type:"string"},clip:{$ref:"#/refs/markclip"},sort:{$ref:"#/refs/compare"},interactive:{$ref:"#/refs/booleanOrSignal"},encode:{$ref:"#/defs/encode"},transform:{type:"array",items:{$ref:"#/defs/transformMark"}},on:{$ref:"#/defs/onMarkTrigger"}},required:["type"]},markGroup:{allOf:[{properties:{type:{enum:["group"]}},required:["type"]},{$ref:"#/defs/mark"},{$ref:"#/defs/scope"},{type:"object",properties:{from:{oneOf:[{$ref:"#/refs/from"},{$ref:"#/refs/facet"}]}}}]},markVisual:{allOf:[{not:{properties:{type:{enum:["group"]}}}},{$ref:"#/defs/mark"},{type:"object",properties:{from:{$ref:"#/refs/from"}}}]},listener:{oneOf:[{$ref:"#/refs/signal"},{type:"object",properties:{scale:{type:"string"}},required:["scale"]},{$ref:"#/defs/stream"}]},onEvents:{type:"array",items:{allOf:[{type:"object",properties:{events:{oneOf:[{$ref:"#/refs/selector"},{$ref:"#/defs/listener"},{type:"array",minItems:1,items:{$ref:"#/defs/listener"}}]},force:{type:"boolean"}},required:["events"]},{oneOf:[{type:"object",properties:{encode:{type:"string"}},required:["encode"]},{type:"object",properties:{update:{oneOf:[{$ref:"#/refs/exprString"},{$ref:"#/refs/expr"},{$ref:"#/refs/signal"},{type:"object",properties:{value:{}},required:["value"]}]}},required:["update"]}]}]}},onTrigger:{type:"array",items:{type:"object",properties:{trigger:{$ref:"#/refs/exprString"},insert:{$ref:"#/refs/exprString"},remove:{oneOf:[{type:"boolean"},{$ref:"#/refs/exprString"}]},toggle:{$ref:"#/refs/exprString"},modify:{$ref:"#/refs/exprString"},values:{$ref:"#/refs/exprString"}},required:["trigger"]}},onMarkTrigger:{type:"array",items:{type:"object",properties:{trigger:{$ref:"#/refs/exprString"},modify:{$ref:"#/refs/exprString"},values:{$ref:"#/refs/exprString"}},required:["trigger"]}},padding:{oneOf:[{type:"number"},{type:"object",properties:{top:{type:"number"},bottom:{type:"number"},left:{type:"number"},right:{type:"number"}},additionalProperties:!1}]},projection:{type:"object",properties:{name:{type:"string"},type:{$ref:"#/refs/stringOrSignal"},clipAngle:{$ref:"#/refs/numberOrSignal"},clipExtent:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]}}]},scale:{$ref:"#/refs/numberOrSignal"},translate:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]},center:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]},rotate:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:3}]},parallels:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]},precision:{$ref:"#/refs/numberOrSignal"},pointRadius:{$ref:"#/refs/numberOrSignal"},fit:{oneOf:[{type:"object"},{type:"array"}]},extent:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]},minItems:2,maxItems:2}]},size:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]}},additionalProperties:!0,required:["name"]},scale:{title:"Scale mapping",type:"object",allOf:[{properties:{name:{type:"string"},type:{type:"string",default:"linear"},domain:{oneOf:[{type:"array",items:{oneOf:[{type:"null"},{type:"string"},{type:"number"},{type:"boolean"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/scaleData"},{$ref:"#/refs/signal"}]},domainMin:{$ref:"#/refs/numberOrSignal"},domainMax:{$ref:"#/refs/numberOrSignal"},domainMid:{$ref:"#/refs/numberOrSignal"},domainRaw:{oneOf:[{type:"null"},{type:"array"},{$ref:"#/refs/signal"}]},reverse:{$ref:"#/refs/booleanOrSignal"},round:{$ref:"#/refs/booleanOrSignal"}},required:["name"]},{oneOf:[{properties:{type:{enum:["ordinal"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1},{$ref:"#/refs/scaleData"}]}},required:["type"]},{properties:{type:{enum:["band"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{step:{$ref:"#/refs/numberOrSignal"}},required:["step"],additionalProperties:!1}]},padding:{$ref:"#/refs/numberOrSignal"},paddingInner:{$ref:"#/refs/numberOrSignal"},paddingOuter:{$ref:"#/refs/numberOrSignal"},align:{$ref:"#/refs/numberOrSignal"}},required:["type"]},{properties:{type:{enum:["point"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{step:{$ref:"#/refs/numberOrSignal"}},required:["step"],additionalProperties:!1}]},padding:{$ref:"#/refs/numberOrSignal"},paddingOuter:{$ref:"#/refs/numberOrSignal"},align:{$ref:"#/refs/numberOrSignal"}},required:["type"]},{properties:{type:{enum:["sequential"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},clamp:{$ref:"#/refs/booleanOrSignal"}},required:["type","range"]},{properties:{type:{enum:["time","utc"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},clamp:{$ref:"#/refs/booleanOrSignal"},padding:{type:"number"},nice:{oneOf:[{type:"boolean"},{type:"string",enum:["millisecond","second","minute","hour","day","week","month","year"]},{type:"object",properties:{interval:{oneOf:[{type:"string",enum:["millisecond","second","minute","hour","day","week","month","year"]},{$ref:"#/refs/signal"}]},step:{$ref:"#/refs/numberOrSignal"}},required:["interval"]},{$ref:"#/refs/signal"}]}},required:["type"]},{properties:{type:{enum:["identity"]},nice:{$ref:"#/refs/booleanOrSignal"}},required:["type"]},{description:"Discretizing scales",properties:{type:{enum:["quantile","quantize","threshold","bin-ordinal"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},nice:{oneOf:[{type:"boolean"},{type:"number"},{$ref:"#/refs/signal"}]},zero:{$ref:"#/refs/booleanOrSignal"}},required:["type"]},{description:"Default numeric scale",not:{properties:{type:{enum:["ordinal","band","point","quantile","quantize","threshold","sequential","pow","log","time","utc","identity","bin-ordinal","bin-linear"]}},required:["type"]},properties:{range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},interpolate:{$ref:"#/refs/scaleInterpolate"},clamp:{$ref:"#/refs/booleanOrSignal"},padding:{type:"number"},nice:{oneOf:[{type:"boolean"},{type:"number"},{$ref:"#/refs/signal"}]},zero:{$ref:"#/refs/booleanOrSignal"}}},{properties:{type:{enum:["log"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},interpolate:{$ref:"#/refs/scaleInterpolate"},base:{$ref:"#/refs/numberOrSignal"},clamp:{$ref:"#/refs/booleanOrSignal"},padding:{type:"number"},nice:{oneOf:[{type:"boolean"},{type:"number"},{$ref:"#/refs/signal"}]},zero:{$ref:"#/refs/booleanOrSignal"}},required:["type"]},{properties:{type:{enum:["pow"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},interpolate:{$ref:"#/refs/scaleInterpolate"},clamp:{$ref:"#/refs/booleanOrSignal"},exponent:{$ref:"#/refs/numberOrSignal"},padding:{type:"number"},nice:{oneOf:[{type:"boolean"},{type:"number"},{$ref:"#/refs/signal"}]},zero:{$ref:"#/refs/booleanOrSignal"}},required:["type"]},{properties:{type:{enum:["bin-linear"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},interpolate:{$ref:"#/refs/scaleInterpolate"}},required:["type"]}]}]},scope:{type:"object",properties:{encode:{$ref:"#/defs/encode"},layout:{$ref:"#/defs/layout"},signals:{type:"array",items:{$ref:"#/defs/signal"}},data:{type:"array",items:{$ref:"#/defs/data"}},scales:{type:"array",items:{$ref:"#/defs/scale"}},projections:{type:"array",items:{$ref:"#/defs/projection"}},axes:{type:"array",items:{$ref:"#/defs/axis"}},legends:{type:"array",items:{$ref:"#/defs/legend"}},title:{$ref:"#/defs/title"},marks:{type:"array",items:{oneOf:[{$ref:"#/defs/markGroup"},{$ref:"#/defs/markVisual"}]}}}},signal:{oneOf:[{$ref:"#/defs/signalPush"},{$ref:"#/defs/signalNew"}]},signalName:{type:"string",not:{enum:["parent","datum","event","item"]}},signalNew:{type:"object",properties:{name:{$ref:"#/defs/signalName"},description:{type:"string"},value:{},react:{type:"boolean",default:!0},update:{$ref:"#/refs/exprString"},on:{$ref:"#/defs/onEvents"},bind:{$ref:"#/defs/bind"}},additionalProperties:!1,required:["name"]},signalPush:{type:"object",properties:{name:{$ref:"#/defs/signalName"},push:{enum:["outer"]},description:{type:"string"},on:{$ref:"#/defs/onEvents"}},additionalProperties:!1,required:["name","push"]},streamParams:{properties:{between:{type:"array",minItems:2,maxItems:2,items:{$ref:"#/defs/stream"}},marktype:{type:"string"},markname:{type:"string"},filter:{oneOf:[{$ref:"#/refs/exprString"},{type:"array",minItems:1,items:{$ref:"#/refs/exprString"}}]},throttle:{type:"number"},debounce:{type:"number"},consume:{type:"boolean"}}},streamEvents:{properties:{source:{type:"string"},type:{type:"string"}},required:["type"]},stream:{title:"Input event stream definition",type:"object",allOf:[{$ref:"#/defs/streamParams"},{oneOf:[{$ref:"#/defs/streamEvents"},{type:"object",properties:{stream:{$ref:"#/defs/stream"}},required:["stream"]},{type:"object",properties:{merge:{type:"array",minItems:1,items:{$ref:"#/defs/stream"}}},required:["merge"]}]}]},titleEncode:{type:"object",patternProperties:{"^(?!interactive|name|style).+$":{$ref:"#/defs/encodeEntry"}},additionalProperties:!1},title:{oneOf:[{type:"string"},{type:"object",properties:{name:{type:"string"},orient:{enum:["none","left","right","top","bottom"],default:"top"},anchor:{oneOf:[{enum:["start","middle","end"],default:"middle"},{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["start","middle","end"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["start","middle","end"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}]},style:{$ref:"#/refs/style"},text:{$ref:"#/refs/stringOrSignal"},zindex:{type:"number"},interactive:{type:"boolean"},color:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},font:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},fontSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},fontWeight:{oneOf:[{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]},{$ref:"#/refs/fontWeightValue"}]},offset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},frame:{oneOf:[{enum:["group","bounds"]},{$ref:"#/refs/stringValue"}]},angle:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},baseline:{oneOf:[{enum:["top","middle","bottom","alphabetic"]},{$ref:"#/refs/baselineValue"}]},limit:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},encode:{$ref:"#/defs/titleEncode"}},required:["text"],additionalProperties:!1}]},transform:{oneOf:[{$ref:"#/defs/aggregateTransform"},{$ref:"#/defs/binTransform"},{$ref:"#/defs/collectTransform"},{$ref:"#/defs/countpatternTransform"},{$ref:"#/defs/crossTransform"},{$ref:"#/defs/densityTransform"},{$ref:"#/defs/extentTransform"},{$ref:"#/defs/filterTransform"},{$ref:"#/defs/flattenTransform"},{$ref:"#/defs/foldTransform"},{$ref:"#/defs/formulaTransform"},{$ref:"#/defs/imputeTransform"},{$ref:"#/defs/joinaggregateTransform"},{$ref:"#/defs/lookupTransform"},{$ref:"#/defs/pivotTransform"},{$ref:"#/defs/projectTransform"},{$ref:"#/defs/sampleTransform"},{$ref:"#/defs/sequenceTransform"},{$ref:"#/defs/windowTransform"},{$ref:"#/defs/identifierTransform"},{$ref:"#/defs/linkpathTransform"},{$ref:"#/defs/pieTransform"},{$ref:"#/defs/stackTransform"},{$ref:"#/defs/contourTransform"},{$ref:"#/defs/geojsonTransform"},{$ref:"#/defs/geopathTransform"},{$ref:"#/defs/geopointTransform"},{$ref:"#/defs/geoshapeTransform"},{$ref:"#/defs/graticuleTransform"},{$ref:"#/defs/forceTransform"},{$ref:"#/defs/nestTransform"},{$ref:"#/defs/packTransform"},{$ref:"#/defs/partitionTransform"},{$ref:"#/defs/stratifyTransform"},{$ref:"#/defs/treeTransform"},{$ref:"#/defs/treelinksTransform"},{$ref:"#/defs/treemapTransform"},{$ref:"#/defs/voronoiTransform"},{$ref:"#/defs/wordcloudTransform"},{$ref:"#/defs/crossfilterTransform"},{$ref:"#/defs/resolvefilterTransform"}]},transformMark:{oneOf:[{$ref:"#/defs/binTransform"},{$ref:"#/defs/collectTransform"},{$ref:"#/defs/extentTransform"},{$ref:"#/defs/formulaTransform"},{$ref:"#/defs/joinaggregateTransform"},{$ref:"#/defs/lookupTransform"},{$ref:"#/defs/sampleTransform"},{$ref:"#/defs/windowTransform"},{$ref:"#/defs/identifierTransform"},{$ref:"#/defs/linkpathTransform"},{$ref:"#/defs/pieTransform"},{$ref:"#/defs/stackTransform"},{$ref:"#/defs/geojsonTransform"},{$ref:"#/defs/geopathTransform"},{$ref:"#/defs/geopointTransform"},{$ref:"#/defs/geoshapeTransform"},{$ref:"#/defs/forceTransform"},{$ref:"#/defs/packTransform"},{$ref:"#/defs/partitionTransform"},{$ref:"#/defs/stratifyTransform"
},{$ref:"#/defs/treeTransform"},{$ref:"#/defs/treemapTransform"},{$ref:"#/defs/voronoiTransform"},{$ref:"#/defs/wordcloudTransform"},{$ref:"#/defs/crossfilterTransform"},{$ref:"#/defs/resolvefilterTransform"}]},aggregateTransform:{type:"object",properties:{type:{enum:["aggregate"]},signal:{type:"string"},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},ops:{oneOf:[{type:"array",items:{anyOf:[{enum:["values","count","__count__","missing","valid","sum","mean","average","variance","variancep","stdev","stdevp","stderr","distinct","ci0","ci1","median","q1","q3","argmin","argmax","min","max"]},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"},{type:"null"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}]},drop:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:!0},cross:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type"]},binTransform:{type:"object",properties:{type:{enum:["bin"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},anchor:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},maxbins:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:20},base:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:10},divide:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:[5,2]},extent:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},step:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},steps:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},minstep:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},nice:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:!0},name:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["bin0","bin1"]}},additionalProperties:!1,required:["type","field","extent"]},collectTransform:{type:"object",properties:{type:{enum:["collect"]},signal:{type:"string"},sort:{$ref:"#/refs/compare"}},additionalProperties:!1,required:["type"]},countpatternTransform:{type:"object",properties:{type:{enum:["countpattern"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},case:{anyOf:[{enum:["upper","lower","mixed"]},{$ref:"#/refs/signal"}],default:"mixed"},pattern:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:'[\\w"]+'},stopwords:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["text","count"]}},additionalProperties:!1,required:["type","field"]},crossTransform:{type:"object",properties:{type:{enum:["cross"]},signal:{type:"string"},filter:{$ref:"#/refs/exprString"},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["a","b"]}},additionalProperties:!1,required:["type"]},densityTransform:{type:"object",properties:{type:{enum:["density"]},signal:{type:"string"},extent:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},steps:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:100},method:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"pdf"},distribution:{oneOf:[{type:"object",properties:{function:{enum:["normal"]},mean:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},stdev:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1}},additionalProperties:!1,required:["function"]},{type:"object",properties:{function:{enum:["uniform"]},min:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},max:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1}},additionalProperties:!1,required:["function"]},{type:"object",properties:{function:{enum:["kde"]},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},from:{type:"string"},bandwidth:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["function","field"]},{type:"object",properties:{function:{enum:["mixture"]},distributions:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}]},weights:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["function"]}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:["value","density"]}},additionalProperties:!1,required:["type"]},extentTransform:{type:"object",properties:{type:{enum:["extent"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type","field"]},filterTransform:{type:"object",properties:{type:{enum:["filter"]},signal:{type:"string"},expr:{$ref:"#/refs/exprString"}},additionalProperties:!1,required:["type","expr"]},flattenTransform:{type:"object",properties:{type:{enum:["flatten"]},signal:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","fields"]},foldTransform:{type:"object",properties:{type:{enum:["fold"]},signal:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["key","value"]}},additionalProperties:!1,required:["type","fields"]},formulaTransform:{type:"object",properties:{type:{enum:["formula"]},signal:{type:"string"},expr:{$ref:"#/refs/exprString"},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]},initonly:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","expr","as"]},imputeTransform:{type:"object",properties:{type:{enum:["impute"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},keyvals:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}]},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},method:{anyOf:[{enum:["value","mean","median","max","min"]},{$ref:"#/refs/signal"}],default:"value"},value:{}},additionalProperties:!1,required:["type","field","key"]},joinaggregateTransform:{type:"object",properties:{type:{enum:["joinaggregate"]},signal:{type:"string"},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"},{type:"null"}]}},{$ref:"#/refs/signal"}]},ops:{oneOf:[{type:"array",items:{anyOf:[{enum:["values","count","__count__","missing","valid","sum","mean","average","variance","variancep","stdev","stdevp","stderr","distinct","ci0","ci1","median","q1","q3","argmin","argmax","min","max"]},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}]},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type"]},lookupTransform:{type:"object",properties:{type:{enum:["lookup"]},signal:{type:"string"},from:{type:"string"},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},values:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},default:{}},additionalProperties:!1,required:["type","from","key","fields"]},pivotTransform:{type:"object",properties:{type:{enum:["pivot"]},signal:{type:"string"},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},value:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},op:{anyOf:[{enum:["values","count","__count__","missing","valid","sum","mean","average","variance","variancep","stdev","stdevp","stderr","distinct","ci0","ci1","median","q1","q3","argmin","argmax","min","max"]},{$ref:"#/refs/signal"}],default:"sum"},limit:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type","field","value"]},projectTransform:{type:"object",properties:{type:{enum:["project"]},signal:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type"]},sampleTransform:{type:"object",properties:{type:{enum:["sample"]},signal:{type:"string"},size:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1e3}},additionalProperties:!1,required:["type"]},sequenceTransform:{type:"object",properties:{type:{enum:["sequence"]},signal:{type:"string"},start:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},stop:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},step:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1}},additionalProperties:!1,required:["type","start","stop"]},windowTransform:{type:"object",properties:{type:{enum:["window"]},signal:{type:"string"},sort:{$ref:"#/refs/compare"},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},ops:{oneOf:[{type:"array",items:{anyOf:[{enum:["row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","values","count","__count__","missing","valid","sum","mean","average","variance","variancep","stdev","stdevp","stderr","distinct","ci0","ci1","median","q1","q3","argmin","argmax","min","max"]},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},params:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}]},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"},{type:"null"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}]},frame:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:[null,0]},ignorePeers:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type"]},identifierTransform:{type:"object",properties:{type:{enum:["identifier"]},signal:{type:"string"},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","as"]},linkpathTransform:{type:"object",properties:{type:{enum:["linkpath"]},signal:{type:"string"},sourceX:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}],default:"source.x"},sourceY:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}],default:"source.y"},targetX:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}],default:"target.x"},targetY:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}],default:"target.y"},orient:{anyOf:[{enum:["horizontal","vertical","radial"]},{$ref:"#/refs/signal"}],default:"vertical"},shape:{anyOf:[{enum:["line","arc","curve","diagonal","orthogonal"]},{$ref:"#/refs/signal"}],default:"line"},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"path"}},additionalProperties:!1,required:["type"]},pieTransform:{type:"object",properties:{type:{enum:["pie"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},startAngle:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},endAngle:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:6.283185307179586},sort:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["startAngle","endAngle"]}},additionalProperties:!1,required:["type"]},stackTransform:{type:"object",properties:{type:{enum:["stack"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},sort:{$ref:"#/refs/compare"},offset:{anyOf:[{enum:["zero","center","normalize"]},{$ref:"#/refs/signal"}],default:"zero"},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["y0","y1"]}},additionalProperties:!1,required:["type"]},contourTransform:{type:"object",properties:{type:{enum:["contour"]},signal:{type:"string"},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},values:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},x:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},y:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},cellSize:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},bandwidth:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},count:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},smooth:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},nice:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},thresholds:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","size"]},geojsonTransform:{type:"object",properties:{type:{enum:["geojson"]},signal:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},geojson:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type"]},geopathTransform:{type:"object",properties:{type:{enum:["geopath"]},signal:{type:"string"},projection:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},pointRadius:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"path"}},additionalProperties:!1,required:["type"]},geopointTransform:{type:"object",properties:{type:{enum:["geopoint"]},signal:{type:"string"},projection:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["x","y"]}},additionalProperties:!1,required:["type","projection","fields"]},geoshapeTransform:{type:"object",properties:{type:{enum:["geoshape"]},signal:{type:"string"},projection:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}],default:"datum"},pointRadius:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"shape"}},additionalProperties:!1,required:["type"]},graticuleTransform:{type:"object",properties:{type:{enum:["graticule"]},signal:{type:"string"},extent:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},extentMajor:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},extentMinor:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},step:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},stepMajor:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:[90,360]},stepMinor:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:[10,10]},precision:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:2.5}},additionalProperties:!1,required:["type"]},forceTransform:{type:"object",properties:{type:{enum:["force"]},signal:{type:"string"},static:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},restart:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},iterations:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:300},alpha:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1},alphaMin:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.001},alphaTarget:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},velocityDecay:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.4},forces:{type:"array",items:{oneOf:[{type:"object",properties:{force:{enum:["center"]},x:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},y:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["force"]},{type:"object",properties:{force:{enum:["collide"]},radius:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},strength:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.7},iterations:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1}},additionalProperties:!1,required:["force"]},{type:"object",properties:{force:{enum:["nbody"]},strength:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:-30},theta:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.9},distanceMin:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1},distanceMax:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["force"]},{type:"object",properties:{force:{enum:["link"]},links:{type:"string"},id:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},distance:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}],default:30},strength:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},iterations:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1}},additionalProperties:!1,required:["force"]},{type:"object",properties:{force:{enum:["x"]},strength:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.1},x:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["force"]},{type:"object",properties:{force:{enum:["y"]},strength:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.1},y:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["force"]}]}},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:["x","y","vx","vy"]}},additionalProperties:!1,required:["type"]},nestTransform:{type:"object",properties:{type:{enum:["nest"]},signal:{type:"string"},keys:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},generate:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type"]},packTransform:{type:"object",properties:{type:{enum:["pack"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},sort:{$ref:"#/refs/compare"},padding:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},radius:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:3,minItems:3,default:["x","y","r","depth","children"]}},additionalProperties:!1,required:["type"]},partitionTransform:{type:"object",properties:{type:{enum:["partition"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},sort:{$ref:"#/refs/compare"},padding:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},round:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:4,minItems:4,default:["x0","y0","x1","y1","depth","children"]}},additionalProperties:!1,required:["type"]},stratifyTransform:{type:"object",properties:{type:{enum:["stratify"]},signal:{type:"string"},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},parentKey:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type","key","parentKey"]},treeTransform:{type:"object",properties:{type:{enum:["tree"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},sort:{$ref:"#/refs/compare"},method:{anyOf:[{enum:["tidy","cluster"]},{$ref:"#/refs/signal"}],default:"tidy"},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},nodeSize:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:4,minItems:4,default:["x","y","depth","children"]}},additionalProperties:!1,required:["type"]},treelinksTransform:{type:"object",properties:{type:{enum:["treelinks"]},signal:{type:"string"}},additionalProperties:!1,required:["type"]},treemapTransform:{type:"object",properties:{type:{enum:["treemap"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},sort:{$ref:"#/refs/compare"},method:{anyOf:[{enum:["squarify","resquarify","binary","dice","slice","slicedice"]},{$ref:"#/refs/signal"}],default:"squarify"},padding:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingInner:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingOuter:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingTop:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingRight:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingBottom:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingLeft:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},ratio:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1.618033988749895},round:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:4,minItems:4,default:["x0","y0","x1","y1","depth","children"]}},additionalProperties:!1,required:["type"]},voronoiTransform:{type:"object",properties:{type:{enum:["voronoi"]},signal:{type:"string"},x:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},y:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},extent:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:[[-1e5,-1e5],[1e5,1e5]]},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"path"}},additionalProperties:!1,required:["type","x","y"]},wordcloudTransform:{type:"object",properties:{type:{enum:["wordcloud"]},signal:{type:"string"},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},font:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}],default:"sans-serif"},fontStyle:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}],default:"normal"},fontWeight:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}],default:"normal"},fontSize:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}],default:14},fontSizeRange:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"null"}],default:[10,50]},rotate:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},text:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},spiral:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]},padding:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:7,minItems:7,default:["x","y","font","fontSize","fontStyle","fontWeight","angle"]}},additionalProperties:!1,required:["type"]},crossfilterTransform:{type:"object",properties:{type:{enum:["crossfilter"]},signal:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},query:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","fields","query"]},resolvefilterTransform:{type:"object",properties:{type:{enum:["resolvefilter"]},signal:{type:"string"},ignore:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},filter:{}},additionalProperties:!1,required:["type","ignore","filter"]}},refs:{labelOverlap:{oneOf:[{type:"boolean"},{enum:["parity","greedy"],type:"string"}]},tickCount:{oneOf:[{type:"number"},{type:"string",enum:["millisecond","second","minute","hour","day","week","month","year"]},{type:"object",properties:{interval:{oneOf:[{type:"string",enum:["millisecond","second","minute","hour","day","week","month","year"]},{$ref:"#/refs/signal"}]},step:{$ref:"#/refs/numberOrSignal"}},required:["interval"]},{$ref:"#/refs/signal"}]},element:{type:"string"},paramField:{type:"object",properties:{field:{type:"string"}},additionalProperties:!1,required:["field"]},field:{title:"FieldRef",oneOf:[{type:"string"},{oneOf:[{$ref:"#/refs/signal"},{type:"object",properties:{datum:{$ref:"#/refs/field"}},required:["datum"],additionalProperties:!1},{type:"object",properties:{group:{$ref:"#/refs/field"},level:{type:"number"}},required:["group"],additionalProperties:!1},{type:"object",properties:{parent:{$ref:"#/refs/field"},level:{type:"number"}},required:["parent"],additionalProperties:!1}]}]},scale:{$ref:"#/refs/field"},stringModifiers:{properties:{scale:{$ref:"#/refs/scale"}}},numberModifiers:{properties:{exponent:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},mult:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},offset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},round:{type:"boolean",default:!1},scale:{$ref:"#/refs/scale"},band:{type:["number","boolean"]},extra:{type:"boolean"}}},value:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{oneOf:[{type:{}},{type:"null"}]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{oneOf:[{type:{}},{type:"null"}]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},numberValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/numberModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"number"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/numberModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"number"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},stringValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"string"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"string"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},booleanValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"boolean"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"boolean"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"
}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},arrayValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"array"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"array"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},nullableStringValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{oneOf:[{type:"string"},{type:"null"}]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{oneOf:[{type:"string"},{type:"null"}]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},fontWeightValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},alignValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["left","right","center"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["left","right","center"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},baselineValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["top","middle","bottom","alphabetic"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["top","middle","bottom","alphabetic"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},orientValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["horizontal","vertical"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["horizontal","vertical"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},colorRGB:{type:"object",properties:{r:{$ref:"#/refs/numberValue"},g:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["r","g","b"]},colorHSL:{type:"object",properties:{h:{$ref:"#/refs/numberValue"},s:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","s","l"]},colorLAB:{type:"object",properties:{l:{$ref:"#/refs/numberValue"},a:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["l","a","b"]},colorHCL:{type:"object",properties:{h:{$ref:"#/refs/numberValue"},c:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","c","l"]},colorValue:{title:"ColorRef",oneOf:[{$ref:"#/refs/nullableStringValue"},{type:"object",properties:{gradient:{$ref:"#/refs/scale"}},additionalProperties:!1,required:["gradient"]},{type:"object",properties:{color:{oneOf:[{$ref:"#/refs/colorRGB"},{$ref:"#/refs/colorHSL"},{$ref:"#/refs/colorLAB"},{$ref:"#/refs/colorHCL"}]}},additionalProperties:!1,required:["color"]}]},expr:{title:"ExpressionRef",type:"object",properties:{expr:{type:"string"}},required:["expr"]},exprString:{title:"Expression String",type:"string"},compare:{oneOf:[{type:"object",properties:{field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},order:{$ref:"#/refs/sortOrder"}}},{type:"object",properties:{field:{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},order:{type:"array",items:{$ref:"#/refs/sortOrder"}}}}]},from:{type:"object",properties:{data:{type:"string"}},additionalProperties:!1},facet:{type:"object",properties:{data:{type:"string"},facet:{oneOf:[{type:"object",properties:{name:{type:"string"},data:{type:"string"},field:{type:"string"}},additionalProperties:!1,required:["name","data","field"]},{type:"object",properties:{name:{type:"string"},data:{type:"string"},groupby:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},aggregate:{type:"object",properties:{cross:{type:"boolean"},fields:{type:"array",items:{type:"string"}},ops:{type:"array",items:{type:"string"}},as:{type:"array",items:{type:"string"}}}}},additionalProperties:!1,required:["name","data","groupby"]}]}},additionalProperties:!1,required:["facet"]},markclip:{oneOf:[{$ref:"#/refs/booleanOrSignal"},{type:"object",properties:{path:{$ref:"#/refs/stringOrSignal"}},required:["path"],additionalProperties:!1},{type:"object",properties:{sphere:{$ref:"#/refs/stringOrSignal"}},required:["sphere"],additionalProperties:!1}]},style:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},marktype:{title:"Mark Type definition",type:"string"},sortOrder:{oneOf:[{enum:["ascending","descending"]},{$ref:"#/refs/signal"}]},scaleField:{$ref:"#/refs/stringOrSignal"},scaleInterpolate:{oneOf:[{type:"string"},{$ref:"#/refs/signal"},{type:"object",properties:{type:{$ref:"#/refs/stringOrSignal"},gamma:{$ref:"#/refs/numberOrSignal"}},required:["type"]}]},scaleData:{oneOf:[{type:"object",properties:{data:{type:"string"},field:{$ref:"#/refs/scaleField"},sort:{oneOf:[{type:"boolean"},{type:"object",properties:{field:{$ref:"#/refs/scaleField"},op:{$ref:"#/refs/scaleField"},order:{$ref:"#/refs/sortOrder"}},additionalProperties:!1}]}},required:["data","field"],additionalProperties:!1},{type:"object",properties:{data:{type:"string"},fields:{type:"array",items:{$ref:"#/refs/scaleField"},minItems:1},sort:{oneOf:[{type:"boolean"},{type:"object",properties:{op:{enum:["count"]},order:{$ref:"#/refs/sortOrder"}},additionalProperties:!1}]}},required:["data","fields"],additionalProperties:!1},{type:"object",properties:{fields:{type:"array",items:{oneOf:[{type:"object",properties:{data:{type:"string"},field:{$ref:"#/refs/scaleField"}},required:["data","field"],additionalProperties:!1},{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"}]}},{$ref:"#/refs/signal"}]},minItems:1},sort:{oneOf:[{type:"boolean"},{type:"object",properties:{op:{enum:["count"]},order:{$ref:"#/refs/sortOrder"}},additionalProperties:!1}]}},required:["fields"],additionalProperties:!1}]},selector:{title:"Event Selector String",type:"string"},signal:{title:"SignalRef",type:"object",properties:{signal:{type:"string"}},required:["signal"]},arrayOrSignal:{oneOf:[{type:"array"},{$ref:"#/refs/signal"}]},booleanOrSignal:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},numberOrSignal:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},stringOrSignal:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},type:"object",allOf:[{$ref:"#/defs/scope"},{properties:{$schema:{type:"string",format:"uri"},usermeta:{type:"object"},config:{type:"object"},description:{type:"string"},width:{type:"number"},height:{type:"number"},padding:{$ref:"#/defs/padding"},autosize:{$ref:"#/defs/autosize"},background:{$ref:"#/defs/background"}}}]}},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(t){return v=t,y}}function a(e,t){try{return e(t)}catch(n){return v=n,y}}function o(e,t,n){try{e(t,n)}catch(r){return v=r,y}}function u(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,e!==r&&g(e,this)}function s(e,t,n){return new e.constructor(function(i,a){var o=new u(r);o.then(i,a),f(e,new p(t,n,o))})}function f(e,t){for(;3===e._81;)e=e._65;return u._10&&u._10(e),0===e._81?0===e._45?(e._45=1,void(e._54=t)):1===e._45?(e._45=2,void(e._54=[e._54,t])):void e._54.push(t):void l(e,t)}function l(e,t){m(function(){var n=1===e._81?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._81?c(t.promise,e._65):d(t.promise,e._65));var r=a(n,e._65);r===y?d(t.promise,v):c(t.promise,r)})}function c(e,t){if(t===e)return d(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===y)return d(e,v);if(n===e.then&&t instanceof u)return e._81=3,e._65=t,void h(e);if("function"==typeof n)return void g(n.bind(t),e)}e._81=1,e._65=t,h(e)}function d(e,t){e._81=2,e._65=t,u._97&&u._97(e,t),h(e)}function h(e){if(1===e._45&&(f(e,e._54),e._54=null),2===e._45){for(var t=0;t<e._54.length;t++)f(e,e._54[t]);e._54=null}}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function g(e,t){var n=!1,r=o(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,d(t,e))});n||r!==y||(n=!0,d(t,v))}var m=n(58),v=null,y={};e.exports=u,u._10=null,u._97=null,u._61=r,u.prototype.then=function(e,t){if(this.constructor!==u)return s(this,e,t);var n=new u(r);return f(this,new p(e,t,n)),n}},function(e,t,n){function r(e){return this instanceof r?void i.call(this,e):new r(e)}e.exports=r;var i=n(30),a=n(5);a.inherits=n(4),a.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},[145,130,142,6,53,6,53],43,function(e,t,n){(function(e){!function(e,r){r(t,n(34),n(21),n(8),n(40),n(20),n(39),n(38),n(11),n(12),n(19),n(36),n(35),n(9),n(37),n(41),n(10),n(22))}(this,function(t,r,i,a,o,u,s,f,l,c,d,h,p,g,m,v,y,b){"use strict";function _(e,t,n){return e.fields=t||[],e.fname=n,e}function x(e){return null==e?null:e.fname}function w(e){return null==e?null:e.fields}function k(e){throw Error(e)}function M(e){function t(){a.push(f+e.substring(n,r)),f="",n=r+1}var n,r,i,a=[],o=null,u=0,s=e.length,f="";for(e+="",n=r=0;r<s;++r)if(i=e[r],"\\"===i)f+=e.substring(n,r),n=++r;else if(i===o)t(),o=null,u=-1;else{if(o)continue;n===u&&'"'===i?(n=r+1,o=i):n===u&&"'"===i?(n=r+1,o=i):"."!==i||u?"["===i?(r>n&&t(),u=n=r+1):"]"===i&&(u||k("Access path missing open bracket: "+e),u>0&&t(),u=0,n=r+1):r>n?t():n=r+1}return u&&k("Access path missing closing bracket: "+e),o&&k("Access path missing closing quote: "+e),r>n&&(r++,t()),a}function E(e){return e===Object(e)}function O(e){return"string"==typeof e}function S(e){return Zm(e)?"["+e.map(S)+"]":E(e)||O(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function A(e,t){var n=M(e),r="return _["+n.map(S).join("][")+"];";return _(Function("_",r),[e=1===n.length?n[0]:e],t||e)}function C(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function R(e){var t=e||iv;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=av&&C("error","ERROR",arguments),this},warn:function(){return t>=ov&&C("warn","WARN",arguments),this},info:function(){return t>=uv&&C("log","INFO",arguments),this},debug:function(){return t>=sv&&C("log","DEBUG",arguments),this}}}function T(e){return e[e.length-1]}function z(e){return null==e||""===e?null:+e}function D(e){return function(t){return e*Math.exp(t)}}function N(e){return function(t){return Math.log(e*t)}}function P(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function $(e,t,n,r){var i=n(e[0]),a=n(T(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function L(e,t){return $(e,t,z,Km)}function q(e,t){var n=Math.sign(e[0]);return $(e,t,N(n),D(n))}function j(e,t,n){return $(e,t,P(n),P(1/n))}function F(e,t,n,r,i){var a=r(e[0]),o=r(T(e)),u=null!=t?r(t):(a+o)/2;return[i(u+(a-u)*n),i(u+(o-u)*n)]}function U(e,t,n){return F(e,t,n,z,Km)}function I(e,t,n){var r=Math.sign(e[0]);return F(e,t,n,N(r),D(r))}function B(e,t,n,r){return F(e,t,n,P(r),P(1/r))}function W(e){return null!=e?Zm(e)?e:[e]:[]}function V(e){return"function"==typeof e}function H(e,t){var n,r,i,a,o,u,s,f,l,c=[],d=(e=W(e)).map(function(e,t){return null==e?null:(c.push(t),V(e)?e:M(e).map(S).join("]["))}),h=c.length-1,p=W(t),g="var u,v;return ";if(h<0)return null;for(r=0;r<=h;++r)n=c[r],i=d[n],V(i)?(u="f"+n,a="(u=this."+u+"(a))",o="(v=this."+u+"(b))",(s=s||{})[u]=i):(a="(u=a["+i+"])",o="(v=b["+i+"])"),u="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==p[n]?(l=1,f=-1):(l=-1,f=1),g+="("+a+"<"+o+"||u==null)&&v!=null?"+f+":(u>v||v==null)&&u!=null?"+l+":"+u+"!==u&&v===v?"+f+":v!==v&&u===u?"+l+(n<h?":":":0");return i=Function("a","b",g+";"),s&&(i=i.bind(s)),e=e.reduce(function(e,t){return V(t)?(w(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),_(i,Object.keys(e))}function Y(e){return V(e)?e:function(){return e}}function G(e,t){function n(){t(i),r=i=null}var r,i;return function(t){i=t,r&&clearTimeout(r),r=setTimeout(n,e)}}function X(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Z(e,t){var n,r,i,a,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(r=e[u],null!=r&&r>=r){n=i=r;break}for(a=o=u;++u<s;)r=e[u],null!=r&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(r=t(e[u],u,e),null!=r&&r>=r){n=i=r;break}for(a=o=u;++u<s;)r=t(e[u],u,e),null!=r&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]}function J(e){function t(e){return i.hasOwnProperty(e)&&i[e]!==fv}var n,r,i={};return n={size:0,empty:0,object:i,has:t,get:function(e){return t(e)?i[e]:void 0},set:function(e,r){return t(e)||(++n.size,i[e]===fv&&--n.empty),i[e]=r,this},delete:function(e){return t(e)&&(--n.size,++n.empty,i[e]=fv),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(e){return arguments.length?(r=e,n):r},clean:function(){var e,t,a={},o=0;for(e in i)t=i[e],t===fv||r&&r(t)||(a[e]=t,++o);n.size=o,n.empty=0,n.object=i=a}},e&&Object.keys(e).forEach(function(t){n.set(t,e[t])}),n}function Q(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}function K(e){return"boolean"==typeof e}function ee(e){return"[object Date]"===Object.prototype.toString.call(e)}function te(e){return"number"==typeof e}function ne(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function re(e,t){e&&(e=t?W(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):W(e));var n=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?S(e):M(e).map(S).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return _(n,e,"key")}function ie(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),u=0,s=0,f=0;u<i&&s<a;++f)o[f]=e(t[u],n[s])>0?n[s++]:t[u++];for(;u<i;++u,++f)o[f]=t[u];for(;s<a;++s,++f)o[f]=n[s];return o}function ae(e,t){for(var n="";--t>=0;)n+=e;return n}function oe(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?ae(i,o)+a:"center"===r?ae(i,~~(o/2))+a+ae(i,Math.ceil(o/2)):a+ae(i,o)}function ue(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}function se(e){return te(e)?e:ee(e)?e:Date.parse(e)}function fe(e,t){return t=t||se,null==e||""===e?null:t(e)}function le(e){return null==e||""===e?null:e+""}function ce(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function de(e,t,n,r){var i=null!=r?r:"",a=e+"",o=a.length,u=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function he(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}function pe(e){var t=e||Km,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0,(i=n.indexOf(e))>=0&&n.splice(i,1)),n},n}function ge(e){return!(!e||!me(e))}function me(e){return e[lv]}function ve(e,t){return e[lv]=t,e}function ye(e){var t=e===Object(e)?e:{data:e};return me(t)?t:ve(t,cv++)}function be(e){return _e(e,ye({}))}function _e(e,t){for(var n in e)t[n]=e[n];return t}function xe(e,t){return ve(t,me(e))}function we(e){return e&&e.constructor===ke}function ke(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:ke,insert:function(t){for(var n=W(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=V(e)?r:t,i=W(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(e,t,r){var a={field:t,value:Y(r)};return V(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return V(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function s(e,t,n){n?e[t]=n(e):o.encode=t,a||(f[me(e)]=e)}var f,l,c,d,h,p,g;for(l=0,c=e.length;l<c;++l)o.add.push(ye(e[l]));for(f={},l=0,c=t.length;l<c;++l)p=t[l],f[me(p)]=p;for(l=0,c=r.length;l<c;++l)h=r[l],u.forEach(function(e){h(e)&&(f[me(e)]=e)});for(g in f)o.rem.push(f[g]);for(f={},l=0,c=n.length;l<c;++l)d=n[l],s(d.tuple,d.field,d.value),o.modifies(d.field);for(l=0,c=i.length;l<c;++l)d=i[l],h=d.filter,u.forEach(function(e){h(e)&&s(e,d.field,d.value)}),o.modifies(d.field);if(a)o.mod=t.length||r.length?u.filter(function(e){return f.hasOwnProperty(me(e))}):u.slice();else for(g in f)o.mod.push(f[g]);return o}}}function Me(){Object.defineProperty(this,dv,{writable:!0,value:{}})}function Ee(e,t,n,r){this.id=++pv,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Oe(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function Se(e,t,n,r){var i,a=1;return e instanceof Ee?i=e:e&&e.prototype instanceof Ee?i=new e:V(e)?i=new Ee(null,e):(a=0,i=new Ee(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i}function Ae(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)}function Ce(e,t,n){this.id=++_v,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Re(e,t,n){return new Ce(e,t,n)}function Te(e,t,n,r){var i,a=this,o=Re(n,r),u=function(e){e.dataflow=a;try{o.receive(e)}catch(t){a.error(t)}finally{a.run()}};i="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):W(e);for(var s=0,f=i.length;s<f;++s)i[s].addEventListener(t,u);return o}function ze(e){return{options:e||{},sanitize:Ne,load:De,file:$e,http:Pe}}function De(e,t){var n=this;return n.sanitize(e,t).then(function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)})}function Ne(e,t){return t=X({},this.options,t),new Promise(function(n,r){var i,a,o,u,s={href:null};return null==e||"string"!=typeof e?void r("Sanitize failure, invalid URI: "+S(e)):(a=wv.test(e),(u=t.baseURL)&&!a&&(je(e,"/")||"/"===u[u.length-1]||(e="/"+e),e=u+e),o=(i=je(e,kv))||"file"===t.mode||"http"!==t.mode&&!a&&qe(),i?e=e.slice(kv.length):je(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(s,"localFile",{value:!!o}),s.href=e,t.target&&(s.target=t.target+""),void n(s))})}function Pe(e,t){return Le(e,X({},this.options.http,t)).then(function(e){if(!e.ok)throw e.status+""+e.statusText;return e.text()})}function $e(e){return new Promise(function(t,n){var r=qe();r?r.readFile(e,function(e,r){e?n(e):t(r)}):n("No file system access for "+e)})}function Le(e,t){var r="function"==typeof fetch?fetch:n(14);return r?r(e,t):Promise.reject("No fetch method available.")}function qe(){var e=n(18);return e&&V(e.readFile)?e:null}function je(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function Fe(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o=Ev.slice();for(r=0,i=e.length;r<i;++r){for(n=t?e[r][t]:e[r],a=0;a<o.length;++a)Ie(n)&&!o[a](n)&&(o.splice(a,1),--a);if(0===o.length)return"string"}return Ov[Ev.indexOf(o[0])]}function Ue(e,t){return t.reduce(function(t,n){return t[n]=Fe(e,n),t},{})}function Ie(e){return null!=e&&e===e}function Be(e){return"true"===e||"false"===e||e===!0||e===!1}function We(e){return!isNaN(Date.parse(e))}function Ve(e){return!(isNaN(+e)||e instanceof Date)}function He(e){return Ve(e)&&(e=+e)===~~e}function Ye(e){return function(t,n){var r={delimiter:e};return Ge(t,n?X(n,r):r)}}function Ge(e,t){return t.header&&(e=t.header.map(S).join(t.delimiter)+"\n"+e),r.dsvFormat(t.delimiter).parse(e+"")}function Xe(t){return!("function"!=typeof e||!V(e.isBuffer))&&e.isBuffer(t)}function Ze(e,t){var n=t&&t.property?A(t.property):Km;return E(e)&&!Xe(e)?Je(n(e)):n(JSON.parse(e))}function Je(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}function Qe(e){return e}function Ke(e){if(null==e)return Qe;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,f=e.length,l=new Array(f);for(l[0]=(t+=e[0])*r+a,l[1]=(n+=e[1])*i+o;s<f;)l[s]=e[s],++s;return l}}function et(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function tt(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return nt(e,t)})}:nt(e,t)}function nt(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=rt(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function rt(e,t){function n(e,t){t.length&&t.pop();for(var n=f[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(s(n[r],r));e<0&&et(t,i)}function r(e){return s(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}function u(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(u)};case"Point":t=r(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(r);break;case"LineString":t=i(e.arcs);break;case"MultiLineString":t=e.arcs.map(i);break;case"Polygon":t=o(e.arcs);break;case"MultiPolygon":t=e.arcs.map(o);break;default:return null}return{type:n,coordinates:t}}var s=Ke(e.transform),f=e.arcs;return u(t)}function it(e,t){function n(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),u.push(r)}}var i={},a={},o={},u=[],s=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++s],t[s]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),u=i[0],s=i[1];if(t=o[u])if(delete o[t.end],t.push(e),t.end=s,r=a[s]){delete a[r.start];var f=r===t?t:t.concat(r);a[f.start=t.start]=o[f.end=r.end]=f}else a[t.start]=o[t.end]=t;else if(t=a[s])if(delete a[t.start],t.unshift(e),t.start=u,r=o[u]){delete o[r.end];var l=r===t?t:r.concat(t);a[l.start=r.start]=o[l.end=t.end]=l}else a[t.start]=o[t.end]=t;else t=[e],a[t.start=u]=o[t.end=s]=t}),r(o,a),r(a,o),t.forEach(function(e){i[e<0?~e:e]||u.push([e])}),u}function at(e){return rt(e,ot.apply(this,arguments))}function ot(e,t,n){var r,i,a;if(arguments.length>1)r=ut(e,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:it(e,r)}}function ut(e,t,n){function r(e){var t=e<0?~e:e;(l[t]||(l[t]=[])).push({i:e,g:s})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}function o(e){e.forEach(a)}function u(e){switch(s=e,e.type){case"GeometryCollection":e.geometries.forEach(u);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":a(e.arcs);break;case"MultiPolygon":o(e.arcs)}}var s,f=[],l=[];return u(t),l.forEach(null==n?function(e){f.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&f.push(e[0].i)}),f}function st(e,t){var n,r,i;return e=Ze(e,t),n=t&&(i=t.feature)?tt:t&&(i=t.mesh)?at:k("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r):k("Invalid TopoJSON object: "+i),r&&r.features||[r]}function ft(e,t){return arguments.length>1?(Sv[e]=t,this):Sv.hasOwnProperty(e)?Sv[e]:null}function lt(e,t,n){t=t||{};var r=ft(t.type||"json");return r||k("Unknown data format type: "+t.type),e=r(e,t),t.parse&&ct(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e}function ct(e,t,n){if(e.length){n=n||i.timeParse;var r,a,o,u,s,f,l,c=e.columns||Object.keys(e[0]);for("auto"===t&&(t=Ue(e,c)),c=Object.keys(t),r=c.map(function(e){var r,a,o=t[e];if(o&&(0===o.indexOf("date:")||0===o.indexOf("utc:")))return r=o.split(/:(.+)?/,2),a=r[1],("'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1)),"utc"===r[0]?i.utcParse(a):n(a);if(!Mv[o])throw Error("Illegal format pattern: "+e+":"+o);return Mv[o]}),u=0,f=e.length,l=c.length;u<f;++u)for(a=e[u],s=0;s<l;++s)o=c[s],a[o]=r[s](a[o])}}function dt(e,t,n){return this.pulse(e,this.changeset().insert(lt(t,n)))}function ht(e){var t,n,r=new Promise(function(e,r){t=e,n=r});return r.requests=0,r.done=function(){0===--r.requests&&e.runAfter(function(){e._pending=null;try{e.run(),t(e)}catch(r){n(r)}})},e._pending=r}function pt(e,t,n){var r=this,i=r._pending||ht(r);i.requests+=1,r.loader().load(t,{context:"dataflow"}).then(function(t){r.ingest(e,t,n)},function(e){r.error("Loading failed",t,e)}).catch(function(e){r.error("Data ingestion failed",t,e)}).then(i.done,i.done)}function gt(e,t,n,r,i){var a=e instanceof Ee?vt:mt;return a(this,e,t,n,r,i),this}function mt(e,t,n,r,i,a){var o,u,s=X({},a,Av);V(n)||(n=Y(n)),void 0===r?o=function(t){e.touch(n(t))}:V(r)?(u=new Ee(null,r,i,(!1)),o=function(t){var r,i=n(t);u.evaluate(t),we(r=u.value)?e.pulse(i,r,a):e.update(i,r,s)}):o=function(t){e.update(n(t),r,s)},t.apply(o)}function vt(e,t,n,r,i,a){var o,u;void 0===r?u=n:(o=V(r)?r:Y(r),r=n?function(e,t){var r=o(e,t);return n.skip()||(n.skip(r!==this.value).value=r),r}:o,u=new Ee(null,r,i,(!1)),u.modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),t.targets().add(u)}function yt(e){e.rank=++this._rank}function bt(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;--r>=0;)i.push(t=n[r]),t===e&&k("Cycle detected in dataflow graph.")}function _t(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function xt(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function wt(e,t){var n=[];return he(e,t,function(e){n.push(e)}),n}function kt(e,t){var n={};return e.visit(t,function(e){n[me(e)]=1}),function(e){return n[me(e)]?null:e}}function Mt(e,t,n,r){var i,a,o,u,s,f=this,l=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n,o=0,u=n.length;o<u;++o)if(i=n[o],i.stamp===t){if(i.fields){a=f.fields||(f.fields={});for(s in i.fields)a[s]=1}i.changed(f.ADD)&&(l|=f.ADD),i.changed(f.REM)&&(l|=f.REM),i.changed(f.MOD)&&(l|=f.MOD)}this.changes=l}function Et(e){var t,n,r,i,a=this,o=0,u=a.logLevel();if(a._pending)return a.info("Awaiting requests, delaying dataflow run."),0;if(a._pulse)return a.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!a._touched.length)return a.info("Dataflow invoked, but nothing to do."),0;a._pulse=new _t(a,(++a._clock),e),u>=uv&&(r=Date.now(),a.debug("-- START PROPAGATION ("+a._clock+") -----")),a._touched.forEach(function(e){a._enqueue(e,!0)}),a._touched=pe(Qm);try{for(;a._heap.size()>0;)t=a._heap.pop(),t.rank===t.qrank?(n=t.run(a._getPulse(t,e)),u>=sv&&a.debug(t.id,n===Cv?"STOP":n,t),n!==Cv&&(a._pulse=n,t._targets&&t._targets.forEach(function(e){a._enqueue(e)})),++o):a._enqueue(t,!0)}catch(s){i=s}if(a._pulses={},a._pulse=null,u>=uv&&(r=Date.now()-r,a.info("> Pulse "+a._clock+": "+o+" operators; "+r+"ms")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,o,i)}catch(s){a.error(s)}if(a._postrun.length){var f=a._postrun;a._postrun=[],f.sort(function(e,t){return t.priority-e.priority}).forEach(function(e){Ot(a,e.callback)})}return o}function Ot(e,t){try{t(e)}catch(n){e.error(n)}}function St(){return this._pending||Promise.resolve(this.run())}function At(e,t,n){this._pulse||t?this._postrun.push({priority:n||0,callback:e}):Ot(this,e)}function Ct(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Rt(e,t){var n,r=e.source,i=this._clock;return r&&Zm(r)?(n=r.map(function(e){return e.pulse}),new Mt(this,i,n,t)):(n=this._pulses[e.id],r&&(r=r.pulse,r&&r!==Cv?r.stamp===i&&n.target!==e?n=r:n.source=r.source:n.source=[]),n)}function Tt(e,t){var n=t||Iv;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function zt(e,t,n){var r=n||Iv;return(e.set(t)||r.force)&&this.touch(e,r),this}function Dt(e,t,n){this.touch(e,n||Iv);var r=new _t(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._pulses[e.id]=t.pulse(r,i),this}function Nt(e){this.cmp=e,this.nodes=[]}function Pt(e,t,n,r){var i,a,o;for(i=e[n];n>t&&(o=n-1>>1,a=e[o],r(i,a)<0);)e[n]=a,n=o;return e[n]=i}function $t(e,t,n){for(var r,i=t,a=e.length,o=e[t],u=2*t+1;u<a;)r=u+1,r<a&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],t=u,u=2*t+1;return e[t]=o,Pt(e,i,t,n)}function Lt(){this._log=R(),this.logLevel(av),this._clock=0,this._rank=0;try{this._loader=ze()}catch(e){}this._touched=pe(Qm),this._pulses={},this._pulse=null,this._heap=new Nt(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function qt(e){return function(){return this._log[e].apply(this,arguments);
}}function jt(e,t){Ee.call(this,e,null,t)}function Ft(e){var t=Ut(e);return t&&t.Definition||null}function Ut(e){return e=e&&e.toLowerCase(),Hv.hasOwnProperty(e)?Hv[e]:null}function It(e){return function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}}function Bt(e){return e&&e.length?1===e.length?e[0]:It(e):function(){return""}}function Wt(e,t,n){return n||e+(t?"_"+t:"")}function Vt(e,t){return Yv[e](t)}function Ht(e){return function(t){var n=X({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function Yt(e,t){return e.idx-t.idx}function Gt(e,t){function n(e,r){function i(t){e[t]||n(e,e[t]=Yv[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),e}var r,i=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{})),a=[];for(r in i)a.push(i[r]);return a.sort(Yt)}function Xt(e,t){var n=t||Km,r=Gt(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",u="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return r.forEach(function(e){i+=e.init,o+=e.add,u+=e.rem}),e.slice().sort(Yt).forEach(function(e){s+="t['"+e.out+"']="+e.set+";"}),s+="return t;",a=Function("cell",a),a.prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",u),a.prototype.set=Function("t",s),a.prototype.get=n,a.fields=e.map(function(e){return e.out}),a}function Zt(e){var t,n,r,i,a,o,u,s,f=e.maxbins||20,l=e.base||10,c=Math.log(l),d=e.divide||[5,2],h=e.extent[0],p=e.extent[1],g=p-h;if(e.step)t=e.step;else if(e.steps){for(a=g/f,o=0,u=e.steps.length;o<u&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(f)/c),r=e.minstep||0,t=Math.max(r,Math.pow(l,Math.round(Math.log(g)/c)-n));Math.ceil(g/t)>f;)t*=l;for(o=0,u=d.length;o<u;++o)a=t/d[o],a>=r&&g/a<=f&&(t=a)}return a=Math.log(t),i=a>=0?0:~~(-a/c)+1,s=Math.pow(l,-i-1),(e.nice||void 0===e.nice)&&(a=Math.floor(h/t+s)*t,h=h<a?a-t:a,p=Math.ceil(p/t)*t),{start:h,stop:p,step:t}}function Jt(e,t){var n,r=[],i=e.length,a=-1;if(null==t)for(;++a<i;)isNaN(n=Qt(e[a]))||r.push(n);else for(;++a<i;)isNaN(n=Qt(t(e[a],a,e)))||r.push(n);return r}function Qt(e){return null===e?NaN:+e}function Kt(e){t.random=e}function en(e,n,r,i){var o,u,s,f,l=Jt(e,i),c=l.length,d=n;for(s=0,f=Array(d);s<d;++s){for(o=0,u=0;u<c;++u)o+=l[~~(t.random()*c)];f[s]=o/c}return[a.quantile(f.sort(a.ascending),r/2),a.quantile(f,1-r/2)]}function tn(e,t){var n=Jt(e,t);return[a.quantile(n.sort(a.ascending),.25),a.quantile(n,.5),a.quantile(n,.75)]}function nn(e,n){null==n&&(n=e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(r=e||0,a=i-r,o):r},o.max=function(e){return arguments.length?(i=e||0,a=i-r,o):i},o.sample=function(){return r+Math.floor(a*t.random())},o.pdf=function(e){return e===Math.floor(e)&&e>=r&&e<i?1/a:0},o.cdf=function(e){var t=Math.floor(e);return t<r?0:t>=i?1:(t-r+1)/a},o.icdf=function(e){return e>=0&&e<=1?r-1+Math.floor(e*a):NaN},o.min(e).max(n)}function rn(e,n){var r,i,a=NaN,o={};return o.mean=function(e){return arguments.length?(r=e||0,a=NaN,o):r},o.stdev=function(e){return arguments.length?(i=null==e?1:e,a=NaN,o):i},o.sample=function(){var e,n,o=0,u=0;if(a===a)return o=a,a=NaN,o;do o=2*t.random()-1,u=2*t.random()-1,e=o*o+u*u;while(0===e||e>1);return n=Math.sqrt(-2*Math.log(e)/e),a=r+u*n*i,r+o*n*i},o.pdf=function(e){var t=Math.exp(Math.pow(e-r,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*t},o.cdf=function(e){var t,n=(e-r)/i,a=Math.abs(n);if(a>37)t=0;else{var o,u=Math.exp(-a*a/2);a<7.07106781186547?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,t=u*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,t/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,t=u/o/2.506628274631)}return n>0?1-t:t},o.icdf=function(e){if(e<=0||e>=1)return NaN;var t=2*e-1,n=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*n)+Math.log(1-Math.pow(t,2))/2,o=Math.log(1-t*t)/n,u=(t>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return r+i*Math.SQRT2*u},o.mean(e).stdev(n)}function an(e,n){var r=rn(),i={},a=0;return i.data=function(t){return arguments.length?(e=t,a=t?t.length:0,i.bandwidth(n)):e},i.bandwidth=function(t){return arguments.length?(n=t,!n&&e&&(n=on(e)),i):n},i.sample=function(){return e[~~(t.random()*a)]+n*r.sample()},i.pdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.pdf((t-e[o])/n);return i/n/a},i.cdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.cdf((t-e[o])/n);return i/a},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)}function on(e){var t=e.length,n=tn(e),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(a.variance(e)),r)*Math.pow(t,-.2)}function un(e,n){function r(e){var t,n=[],r=0;for(t=0;t<o;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<o;++t)n[t]/=r;return n}var i,a={},o=0;return a.weights=function(e){return arguments.length?(i=r(n=e||[]),a):n},a.distributions=function(t){return arguments.length?(t?(o=t.length,e=t):(o=0,e=[]),a.weights(n)):e},a.sample=function(){for(var n=t.random(),r=e[o-1],a=i[0],u=0;u<o-1;a+=i[++u])if(n<a){r=e[u];break}return r.sample()},a.pdf=function(t){for(var n=0,r=0;r<o;++r)n+=i[r]*e[r].pdf(t);return n},a.cdf=function(t){for(var n=0,r=0;r<o;++r)n+=i[r]*e[r].cdf(t);return n},a.icdf=function(){throw Error("Mixture icdf not supported.")},a.distributions(e).weights(n)}function sn(e,n){null==n&&(n=null==e?1:e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(r=e||0,a=i-r,o):r},o.max=function(e){return arguments.length?(i=e||0,a=i-r,o):i},o.sample=function(){return r+a*t.random()},o.pdf=function(e){return e>=r&&e<=i?1/a:0},o.cdf=function(e){return e<r?0:e>i?1:(e-r)/a},o.icdf=function(e){return e>=0&&e<=1?r+e*a:NaN},o.min(e).max(n)}function fn(e){this._key=e?A(e):me,this.reset()}function ln(e){jt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function cn(e){jt.call(this,null,e)}function dn(e,t,n){var r=e,i=t||[],a=n||[],o={},u=0;return{add:function(e){a.push(e)},remove:function(e){o[r(e)]=++u},size:function(){return i.length},data:function(e,t){return u&&(i=i.filter(function(e){return!o[r(e)]}),o={},u=0),t&&e&&i.sort(e),a.length&&(i=e?ie(e,i,a.sort(e)):i.concat(a),a=[]),i}}}function hn(e){jt.call(this,[],e)}function pn(e){Ee.call(this,null,gn,e)}function gn(e){return this.value&&!e.modified()?this.value:H(e.fields,e.orders)}function mn(e){jt.call(this,null,e)}function vn(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}function yn(e){jt.call(this,null,e)}function bn(e,t,n,r){for(var i,a,o=[],u={},s=e.length,f=0;f<s;++f)for(u[t]=a=e[f],i=0;i<s;++i)u[n]=e[i],r(u)&&(o.push(ye(u)),u={},u[t]=a);return o}function _n(e,t){var n=e[ry];ty.hasOwnProperty(n)||k("Unknown distribution function: "+n);var r=ty[n]();for(var i in e)i===iy?r.data((e.from||t()).map(e[i])):i===ny?r[i](e[i].map(function(e){return _n(e,t)})):typeof r[i]===ry&&r[i](e[i]);return r}function xn(e){jt.call(this,null,e)}function wn(e){return function(){return e.materialize(e.SOURCE).source}}function kn(e){jt.call(this,[+(1/0),-(1/0)],e)}function Mn(e,t){Ee.call(this,e),this.parent=t}function En(e){jt.call(this,{},e),this._keys=J();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function On(e){Ee.call(this,null,Sn,e)}function Sn(e){return this.value&&!e.modified()?this.value:Zm(e.name)?W(e.name).map(function(e){return A(e)}):A(e.name,e.as)}function An(e){jt.call(this,J(),e)}function Cn(e,t){return e?e.map(function(e,n){return t[n]||x(e)}):null}function Rn(e){jt.call(this,[],e)}function Tn(e){jt.call(this,[],e)}function zn(e){jt.call(this,null,e)}function Dn(e){jt.call(this,[],e)}function Nn(e){jt.call(this,[],e)}function Pn(e){var t,n=e.method||my.value;return null!=my[n]?n===my.value?(t=void 0!==e.value?e.value:0,function(){return t}):my[n]:void k("Unrecognized imputation method: "+n)}function $n(e){var t=e.field;return function(e){return e?t(e):NaN}}function Ln(e,t,n,r){var i,a,o,u,s,f,l,c,d=function(e){return e(c)},h=[],p=r?r.slice():[],g={},m={};for(p.forEach(function(e,t){g[e]=t+1}),u=0,l=e.length;u<l;++u)c=e[u],f=n(c),s=g[f]||(g[f]=p.push(f)),a=(i=t?t.map(d):vy)+"",(o=m[a])||(o=m[a]=[],h.push(o),o.values=i),o[s-1]=c;return h.domain=p,h}function qn(e){ln.call(this,e)}function jn(e){Ee.call(this,null,Fn,e)}function Fn(e){return this.value&&!e.modified()?this.value:re(e.fields,e.flat)}function Un(e){jt.call(this,{},e)}function In(e){Ee.call(this,null,Bn,e)}function Bn(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=+(1/0),a=-(1/0),o=e.extents;for(t=0,n=o.length;t<n;++t)r=o[t],r[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function Wn(e){Ee.call(this,null,Vn,e)}function Vn(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function Hn(e){jt.call(this,null,e)}function Yn(e){ln.call(this,e)}function Gn(e,t){var n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",a=w(n).concat(w(r)),o=Zn(n,e.limit||0,t);return{key:e.key,groupby:e.groupby,ops:o.map(function(){return i}),fields:o.map(function(e){return Xn(e,n,r,a)}),as:o.map(function(e){return e+""}),modified:e.modified.bind(e)}}function Xn(e,t,n,r){return _(function(r){return t(r)===e?n(r):NaN},r,e+"")}function Zn(e,t,n){var r={},i=[];return n.visit(n.SOURCE,function(t){var n=e(t);r[n]||(r[n]=1,i.push(n))}),i.sort(function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)}),t?i.slice(0,t):i}function Jn(e){En.call(this,e)}function Qn(e){jt.call(this,null,e)}function Kn(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}function er(e){jt.call(this,null,e)}function tr(e){jt.call(this,null,e)}function nr(e){jt.call(this,[],e),this.count=0}function rr(e){jt.call(this,null,e)}function ir(e){jt.call(this,null,e),this.modified(!0)}function ar(e){jt.call(this,J(),e)}function or(e){jt.call(this,null,e)}function ur(e,t,n,r){var i=Ty[e](t,n);return{init:i.init||ev,update:function(e,t){t[r]=i.next(e)}}}function sr(e){function t(e){W(w(e)).forEach(function(e){f[e]=1})}var n=this,r=W(e.ops),i=W(e.fields),a=W(e.params),o=W(e.as),u=n.outputs=[],s=n.windows=[],f={},l={},c=!0,d=[],h=[];t(e.sort),r.forEach(function(e,n){var r=i[n],f=x(r),p=Wt(e,f,o[n]);if(t(r),u.push(p),Ty.hasOwnProperty(e))s.push(ur(e,i[n],a[n],p));else{if(null==r&&"count"!==e&&k("Null aggregate field specified."),"count"===e)return void d.push(p);c=!1;var g=l[f];g||(g=l[f]=[],g.field=r,h.push(g)),g.push(Vt(e,p))}}),(d.length||h.length)&&(n.cell=fr(h,d,c)),n.inputs=Object.keys(f)}function fr(e,t,n){e=e.map(function(e){return Xt(e,e.field)});var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var u=r.data=new fn;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(u&&u.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<i;++e)a[e].init()},r}function lr(e){jt.call(this,{},e),this._mlen=0,this._mods=[]}function cr(e,t,n){var r=n.sort,i=r&&!n.ignorePeers,o=n.frame||[null,0],u=e.data(r),s=u.length,f=0,l=i?a.bisector(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:r||Y(-1)};for(t.init();f<s;++f)dr(c,o,f,s),i&&hr(c,l),t.update(c,u[f])}function dr(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function hr(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function pr(e){this.clear(),e&&this.union(e)}function gr(e,t){var n,r=[];return n={id:"gradient_"+vb++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}function mr(e){this.mark=e,this.bounds=this.bounds||new pr}function vr(e){mr.call(this,e),this.items=this.items||[]}function yr(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}function br(){return"undefined"!=typeof Image?Image:null}function _r(e,t){if(yb)try{return new yb(e,t)}catch(n){}return null}function xr(){return yb&&yb.Image||null}function wr(e,t){return yr(e,t)||_r(e,t)||null}function kr(){return br()||xr()||null}function Mr(e){this._pending=0,this._loader=e||ze()}function Er(e){e._pending+=1}function Or(e){e._pending-=1}function Sr(e,t,n){var r=xb.hasOwnProperty(e)&&xb[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function Ar(e){var t,n,r,i,a,o,u,s,f,l,c,d=[];for(t=e.slice().replace(kb[0],"###$1").split(kb[1]).slice(1),s=0,l=t.length;s<l;++s){for(n=t[s],r=n.slice(1).trim().replace(kb[2],"$1###$2").split(kb[3]),o=n.charAt(0),i=[o],f=0,c=r.length;f<c;++f)(a=+r[f])===a&&i.push(a);if(u=wb[o.toLowerCase()],i.length-1>u)for(f=1,c=i.length;f<c;f+=u)d.push([o].concat(i.slice(f,f+u)));else d.push(i)}return d}function Cr(e,t,n,r,i,a,o,u,s){var f=Ob.call(arguments);if(Mb[f])return Mb[f];var l=o*(Math.PI/180),c=Math.sin(l),d=Math.cos(l);n=Math.abs(n),r=Math.abs(r);var h=d*(u-e)*.5+c*(s-t)*.5,p=d*(s-t)*.5-c*(u-e)*.5,g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);var m=d/n,v=c/n,y=-c/r,b=d/r,_=m*u+v*s,x=y*u+b*s,w=m*e+v*t,k=y*e+b*t,M=(w-_)*(w-_)+(k-x)*(k-x),E=1/M-.25;E<0&&(E=0);var O=Math.sqrt(E);a==i&&(O=-O);var S=.5*(_+w)-O*(k-x),A=.5*(x+k)+O*(w-_),C=Math.atan2(x-A,_-S),R=Math.atan2(k-A,w-S),T=R-C;T<0&&1===a?T+=2*Math.PI:T>0&&0===a&&(T-=2*Math.PI);for(var z=Math.ceil(Math.abs(T/(.5*Math.PI+.001))),D=[],N=0;N<z;++N){var P=C+N*T/z,$=C+(N+1)*T/z;D[N]=[S,A,P,$,n,r,c,d]}return Mb[f]=D}function Rr(e){var t=Ob.call(e);if(Eb[t])return Eb[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],f=e[7],l=f*o,c=-s*u,d=s*o,h=f*u,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*g,w=r+g+_*p,k=n+m,M=r+v,E=k+_*v,O=M-_*m;return Eb[t]=[l*x+c*w,d*x+h*w,l*E+c*O,d*E+h*O,l*k+c*M,d*k+h*M]}function Tr(e,t){var n=Sb[0]=e[0];if("a"===n||"A"===n)Sb[1]=t*e[1],Sb[2]=t*e[2],Sb[6]=t*e[6],Sb[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)Sb[r]=t*e[r];return Sb}function zr(e,t,n,r,i){var a,o,u,s,f,l=null,c=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=Tr(a,i)),a[0]){case"l":c+=a[1],d+=a[2],e.lineTo(c+n,d+r);break;case"L":c=a[1],d=a[2],e.lineTo(c+n,d+r);break;case"h":c+=a[1],e.lineTo(c+n,d+r);break;case"H":c=a[1],e.lineTo(c+n,d+r);break;case"v":d+=a[1],e.lineTo(c+n,d+r);break;case"V":d=a[1],e.lineTo(c+n,d+r);break;case"m":c+=a[1],d+=a[2],e.moveTo(c+n,d+r);break;case"M":c=a[1],d=a[2],e.moveTo(c+n,d+r);break;case"c":o=c+a[5],u=d+a[6],h=c+a[3],p=d+a[4],e.bezierCurveTo(c+a[1]+n,d+a[2]+r,h+n,p+r,o+n,u+r),c=o,d=u;break;case"C":c=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,c+n,d+r);break;case"s":o=c+a[3],u=d+a[4],h=2*c-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,c+a[1]+n,d+a[2]+r,o+n,u+r),h=c+a[1],p=d+a[2],c=o,d=u;break;case"S":o=a[3],u=a[4],h=2*c-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,u+r),c=o,d=u,h=a[1],p=a[2];break;case"q":o=c+a[3],u=d+a[4],h=c+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,u+r),c=o,d=u;break;case"Q":o=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),c=o,d=u,h=a[1],p=a[2];break;case"t":o=c+a[1],u=d+a[2],null===l[0].match(/[QqTt]/)?(h=c,p=d):"t"===l[0]?(h=2*c-s,p=2*d-f):"q"===l[0]&&(h=2*c-h,p=2*d-p),s=h,f=p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),c=o,d=u,h=c+a[1],p=d+a[2];break;case"T":o=a[1],u=a[2],h=2*c-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),c=o,d=u;break;case"a":Dr(e,c+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+c+n,a[7]+d+r]),c+=a[6],d+=a[7];break;case"A":Dr(e,c+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),c=a[6],d=a[7];break;case"z":case"Z":e.closePath()}l=a}}function Dr(e,t,n,r){for(var i=Cr(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=Rr(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}function Nr(e){return Rb.hasOwnProperty(e)?Rb[e]:Pr(e)}function Pr(e){if(!Tb.hasOwnProperty(e)){var t=Ar(e);Tb[e]={draw:function(e,n){zr(e,t,0,0,Math.sqrt(n)/2)}}}return Tb[e]}function $r(e){return e.x}function Lr(e){return e.y}function qr(e){return e.width}function jr(e){return e.height}function Fr(e){return function(){return e}}function Ur(){function e(e,s,f){var l,c=null!=s?s:+t.call(this,e),d=null!=f?f:+n.call(this,e),h=+r.call(this,e),p=+i.call(this,e),g=+a.call(this,e);if(o||(o=l=u.path()),g<=0)o.rect(c,d,h,p);else{var m=c+h,v=d+p;o.moveTo(c+g,d),o.lineTo(m-g,d),o.quadraticCurveTo(m,d,m,d+g),o.lineTo(m,v-g),o.quadraticCurveTo(m,v,m-g,v),o.lineTo(c+g,v),o.quadraticCurveTo(c,v,c,v-g),o.lineTo(c,d+g),o.quadraticCurveTo(c,d,c+g,d),o.closePath()}if(l)return o=null,l+""||null}var t=$r,n=Lr,r=qr,i=jr,a=Fr(0),o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Fr(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Fr(+t),e):n},e.width=function(t){return arguments.length?(r="function"==typeof t?t:Fr(+t),e):r},e.height=function(t){return arguments.length?(i="function"==typeof t?t:Fr(+t),e):i},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:Fr(+t),e):a},e.context=function(t){return arguments.length?(o=null==t?null:t,e):o},e}function Ir(){function e(e,t,n){var r=n/2;if(o){var i=f-t,a=e-s;if(i||a){var u=Math.sqrt(i*i+a*a),d=(i/=u)*l,h=(a/=u)*l,p=Math.atan2(a,i);c.moveTo(s-d,f-h),c.lineTo(e-i*r,t-a*r),c.arc(e,t,r,p-zb,p),c.lineTo(s+d,f+h),c.arc(s,f,l,p,p+zb)}else c.arc(e,t,r,0,2*zb);c.closePath()}else o=1;s=e,f=t,l=r}function t(t){var s,f,l,d=t.length,h=!1;for(null==c&&(c=l=u.path()),s=0;s<=d;++s)!(s<d&&a(f=t[s],s,t))===h&&(h=!h)&&(o=0),h&&e(+n(f,s,t),+r(f,s,t),+i(f,s,t));if(l)return c=null,l+""||null}var n,r,i,a,o,s,f,l,c=null;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.context=function(e){return arguments.length?(c=null==e?null:e,t):c},t}function Br(e){return e.x||0}function Wr(e){return e.y||0}function Vr(e){return e.width||0}function Hr(e){return e.size||1}function Yr(e){return e.height||0}function Gr(e){return(e.x||0)+(e.width||0)}function Xr(e){return(e.y||0)+(e.height||0)}function Zr(e){return e.startAngle||0}function Jr(e){return e.endAngle||0}function Qr(e){return e.padAngle||0}function Kr(e){return e.innerRadius||0}function ei(e){return e.outerRadius||0}function ti(e){return e.cornerRadius||0}function ni(e){return!(e.defined===!1)}function ri(e){return null==e.size?64:e.size}function ii(e){return Nr(e.shape||"circle")}function ai(e,t){return Db.context(e)(t)}function oi(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?Pb:Nb).curve(Sr(r,n.orient,n.tension)).context(e)(t)}function ui(e,t){var n=t[0],r=n.interpolate||"linear";return $b.curve(Sr(r,n.orient,n.tension)).context(e)(t)}function si(e,t,n,r){return Lb.context(e)(t,n,r)}function fi(e,t){return(t.mark.shape||t.shape).context(e)(t)}function li(e,t){return qb.context(e)(t)}function ci(e,t){return jb.context(e)(t)}function di(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e}function hi(e){return _b=e,hi}function pi(){}function gi(e,t){_b.add(e,t)}function mi(e,t,n){for(var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,u=n.x1+t.x2*r,s=n.y1+t.y2*i,f=t.stops,l=0,c=f.length,d=e.createLinearGradient(a,o,u,s);l<c;++l)d.addColorStop(f[l].offset,f[l].color);return d}function vi(e,t,n){return n.id?mi(e,n,t.bounds):n}function yi(e,t,n){return n*=null==t.fillOpacity?1:t.fillOpacity,n>0&&(e.globalAlpha=n,e.fillStyle=vi(e,t,t.fill),!0)}function bi(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity,n>0&&(e.globalAlpha=n,e.strokeStyle=vi(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Vb),e.lineDashOffset=t.strokeDashOffset||0),!0))}function _i(e,t){return e.zindex-t.zindex||e.index-t.index}function xi(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)t=i[n],t.index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(_i)}function wi(e,t){var n,r,i=e.items;if(i&&i.length){var a=xi(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function ki(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=xi(e);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===a)for(i=e.items,r=i.length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function Mi(e){return function(t,n,r){wi(n,function(n){r&&!r.intersects(n.bounds)||Oi(e,t,n,n)})}}function Ei(e){return function(t,n,r){!n.items.length||r&&!r.intersects(n.bounds)||Oi(e,t,n.items[0],n.items)}}function Oi(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&yi(t,n,i)&&t.fill(),n.stroke&&bi(t,n,i)&&t.stroke()))}function Si(e){return e||(e=Hb),function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,ki(n,function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return e(t,n,r,i,a,o)?n:void 0})}}function Ai(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,f=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(f&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function Ci(e){return Si(Ai(e))}function Ri(e,t){return"translate("+e+","+t+")"}function Ti(e){return Ri(e.x||0,e.y||0)}function zi(e,t){function n(e,n){e("transform",Ti(n)),e("d",t(null,n))}function r(e,n){return t(hi(e),n),di(e,n).translate(n.x||0,n.y||0)}function i(e,n){var r=n.x||0,i=n.y||0;e.translate(r,i),e.beginPath(),t(e,n),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:n,bound:r,draw:Mi(i),pick:Ci(i)}}function Di(e,t){var n="horizontal"===e[0].orient?t[1]:t[0],r="horizontal"===e[0].orient?"y":"x",i=0,a=e.length;if(1===a)return e[0];for(;i<a;){var o=i+a>>>1;e[o][r]<n?i=o+1:a=o}return i=Math.max(0,i-1),a=Math.min(e.length-1,a),n-e[i][r]<e[a][r]-n?e[i]:e[a]}function Ni(e,t){for(var n,r,i,a=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(e[o].defined!==!1&&(n=e[o].x-t[0],r=e[o].y-t[1],i=n*n+r*r,i<a))return e[o];return null}function Pi(e,t){for(var n,r,i,a=e.length;--a>=0;)if(e[a].defined!==!1&&(n=e[a].x-t[0],r=e[a].y-t[1],i=n*n+r*r,n=e[a].size||1,i<n*n))return e[a];return null}function $i(e,t,n){function r(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))}function i(e,n){var r=n.items;return 0===r.length?e:(t(hi(e),r),di(e,r[0]))}function a(e,n){e.beginPath(),t(e,n)}function o(e,t,n,r,i,a){var o=t.items,s=t.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,u(e,o,n,r)?o[0]:null)}var u=Ai(a);return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Ei(a),pick:o,tip:n}}function Li(){Xb=1}function qi(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+Xb++),o=i.clipping[a]||(i.clipping[a]={id:a});return V(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function ji(e,t){e("transform",Ti(t))}function Fi(e,t){var n=t.stroke?Zb:0;e("class","background"),e("d",si(null,t,n,n))}function Ui(e,t,n){var r=t.clip?qi(n,t,t):null;e("clip-path",r)}function Ii(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&di(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)}function Bi(e,t){var n=t.stroke?Zb:0;e.beginPath(),si(e,t,n,n)}function Wi(e,t,n){var r=this;wi(t,function(t){var i,a=t.x||0,o=t.y||0,u=t.width||0,s=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&(i=null==t.opacity?1:t.opacity,i>0&&(Bi(e,t),t.fill&&yi(e,t,i)&&e.fill(),t.stroke&&bi(e,t,i)&&e.stroke())),t.clip&&(e.beginPath(),e.rect(0,0,u,s),e.clip()),n&&n.translate(-a,-o),wi(t,function(t){r.draw(e,t,n)}),n&&n.translate(a,o),e.restore()})}function Vi(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,u=n*e.pixelRatio,s=r*e.pixelRatio;return ki(t,function(f){var l,c,d,h;if(h=f.bounds,!h||h.contains(i,a))return c=f.x||0,d=f.y||0,e.save(),e.translate(c,d),c=i-c,d=a-d,l=ki(f,function(e){return Hi(e,c,d)?o.pick(e,n,r,c,d):null}),!l&&t.interactive!==!1&&(f.fill||f.stroke)&&Jb(e,f,u,s)&&(l=f),e.restore(),l||null})}function Hi(e,t,n){return(e.interactive!==!1||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}function Yi(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function Gi(e,t){return"center"===e?t/2:"right"===e?t:0}function Xi(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function Zi(e,t,n){var r=Yi(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,u=(null!=t.height?t.height:r.height)||0,s=t.aspect===!1?"none":"xMidYMid";i-=Gi(t.align,o),a-=Xi(t.baseline,u),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",Ri(i,a)),e("width",o),e("height",u),e("preserveAspectRatio",s)}function Ji(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=Gi(t.align,a),i-=Xi(t.baseline,o),e.set(r,i,r+a,i+o)}function Qi(e,t,n){var r=this;wi(t,function(t){if(!n||n.intersects(t.bounds)){var i,a,o,u,s=Yi(t,r),f=t.x||0,l=t.y||0,c=(null!=t.width?t.width:s.width)||0,d=(null!=t.height?t.height:s.height)||0;f-=Gi(t.align,c),l-=Xi(t.baseline,d),t.aspect!==!1&&(a=s.width/s.height,o=t.width/t.height,a===a&&o===o&&a!==o&&(o<a?(u=c/a,l+=(d-u)/2,d=u):(u=d*a,f+=(c-u)/2,c=u))),s.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(s,f,l,c,d))}})}function Ki(e,t){e("transform",Ti(t)),e("d",t.path)}function ea(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=Ar(n)).path=n),zr(e,r,t.x,t.y)}function ta(e,t){return ea(hi(e),t)?e.set(0,0,0,0):di(e,t)}function na(e,t){e("d",si(null,t))}function ra(e,t){var n,r;return di(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function ia(e,t){e.beginPath(),si(e,t)}function aa(e,t){e("transform",Ti(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)}function oa(e,t){var n,r;return di(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)}function ua(e,t,n){var r,i,a,o;return!(!t.stroke||!bi(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),!0)}function sa(e,t,n){wi(t,function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&ua(e,t,r)&&e.stroke()}})}function fa(e,t,n,r){return!!e.isPointInStroke&&(ua(e,t,1)&&e.isPointInStroke(n,r))}function la(e){return Wb=pa(e),ca(ma(e))}function ca(e){return~~(.8*e.length*Wb)}function da(e){return Bb.font=ya(e),ha(ma(e))}function ha(e){return Bb.measureText(e).width}function pa(e){return null!=e.fontSize?e.fontSize:11}function ga(e){Bb=e&&(Bb=wr(1,1))?Bb.getContext("2d"):null,o_.width=Bb?da:la}function ma(e){var t=e.text;return null==t?"":e.limit>0?va(e):t+""}function va(e){var t,n=+e.limit,r=e.text+"";if(Bb?(Bb.font=ya(e),t=ha):(Wb=pa(e),t=ca),t(r)<n)return r;var i,a=e.ellipsis||"",o="rtl"===e.dir,u=0,s=r.length;if(n-=t(a),o){for(;u<s;)i=u+s>>>1,t(r.slice(i))>n?u=i+1:s=i;return a+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),t(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+a}function ya(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/"/g,"'")),""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+pa(e)+"px "+(n||"sans-serif")}function ba(e){var t=e.baseline,n=pa(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}function _a(e,t){var n,r=t.dx||0,i=(t.dy||0)+ba(t),a=t.x||0,o=t.y||0,u=t.angle||0,s=t.radius||0;s&&(n=(t.theta||0)-Math.PI/2,a+=s*Math.cos(n),o+=s*Math.sin(n)),e("text-anchor",u_[t.align]||"start"),u?(n=Ri(a,o)+" rotate("+u+")",(r||i)&&(n+=" "+Ri(r,i))):n=Ri(a+r,o+i),e("transform",n)}function xa(e,t,n){var r,i,a=o_.height(t),o=t.align,u=t.radius||0,s=t.x||0,f=t.y||0,l=t.dx||0,c=(t.dy||0)+ba(t)-Math.round(.8*a);return u&&(i=(t.theta||0)-Math.PI/2,s+=u*Math.cos(i),f+=u*Math.sin(i)),r=o_.width(t),"center"===o?l-=r/2:"right"===o&&(l-=r),e.set(l+=s,c+=f,l+r,c+a),t.angle&&!n&&e.rotate(t.angle*Math.PI/180,s,f),e.expand(n||!r?0:1)}function wa(e,t,n){wi(t,function(t){var r,i,a,o,u,s;n&&!n.intersects(t.bounds)||(s=ma(t))&&(r=null==t.opacity?1:t.opacity,0!==r&&(e.font=ya(t),e.textAlign=t.align||"left",i=t.x||0,a=t.y||0,(o=t.radius)&&(u=(t.theta||0)-Math.PI/2,i+=o*Math.cos(u),a+=o*Math.sin(u)),t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*Math.PI/180),i=a=0),i+=t.dx||0,a+=(t.dy||0)+ba(t),t.fill&&yi(e,t,r)&&e.fillText(s,i,a),t.stroke&&bi(e,t,r)&&e.strokeText(s,i,a),t.angle&&e.restore()))})}function ka(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=xa(s_,t,!0),u=-t.angle*Math.PI/180,s=Math.cos(u),f=Math.sin(u),l=t.x,c=t.y,d=s*i-f*a+(l-l*s+c*f),h=f*i+s*a+(c-l*f-c*s);return o.contains(d,h)}function Ma(e,t,n){var r=c_[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new pr),e,n)}function Ea(e,t,n){var r,i,a,o,u=c_[e.marktype],s=u.bound,f=e.items,l=f&&f.length;if(u.nested)return l?a=f[0]:(d_.mark=e,a=d_),o=Ma(a,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new pr,l)for(r=0,i=f.length;r<i;++r)t.union(Ma(f[r],s,n));return e.bounds=t}function Oa(e,t){return JSON.stringify(e,h_,t)}function Sa(e){var t="string"==typeof e?JSON.parse(e):e;return Aa(t)}function Aa(e){var t,n,r,i=e.marktype,a=e.items;if(a)for(n=0,r=a.length;n<r;++n)t=i?"mark":"group",a[n][t]=e,a[n].zindex&&(a[n][t].zdirty=!0),"group"===(i||t)&&Aa(a[n]);return i&&Ea(e),e}function Ca(e){arguments.length?this.root=Sa(e):(this.root=Ra({marktype:"group",name:"root",role:"frame"}),this.root.items=[new vr(this.root)])}function Ra(e,t){return{bounds:new pr,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function Ta(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function za(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Da(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=Ta(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function Na(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Pa(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function $a(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function La(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=c_[o.marktype]).tip){for(a=$a(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}function qa(e,t){this._active=null,this._handlers={},this._loader=e||ze(),this._tooltip=t||ja}function ja(e,t,n,r){e.element().setAttribute("title",r||"")}function Fa(e){this._el=null,this._bgcolor=null,this._loader=new Mr(e);
}function Ua(e,t){qa.call(this,e,t),this._down=null,this._touch=null,this._first=!0}function Ia(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function Ba(e){return function(t){this.fire(e,t),this._active=null}}function Wa(e,t){var n=t.clip;if(e.save(),e.beginPath(),V(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}function Va(){return"undefined"!=typeof window?window.devicePixelRatio||1:1}function Ha(e,t,n,r,i){var a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,o=e.getContext("2d"),u=a?w_:i;return e.width=t*u,e.height=n*u,a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=u,o.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function Ya(e){Fa.call(this,e),this._redraw=!1,this._dirty=new pr}function Ga(e,t,n){return t.expand(1).round(),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}function Xa(e,t){if(null==t)return e;for(var n=E_.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}function Za(e,t){qa.call(this,e,t);var n=this;n._hrefHandler=Ja(n,function(e,t){t&&t.href&&n.handleHref(e,t,t.href)}),n._tooltipHandler=Ja(n,function(e,t){n.handleTooltip(e,t,e.type!==b_)})}function Ja(e,t){return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,t.call(e._obj,n,i)}}function Qa(e,t,n){var r,i,a="<"+e;if(t)for(r in t)i=t[r],null!=i&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function Ka(e){return"</"+e+">"}function eo(e){Fa.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function to(e,t,n){var r,i,a;for(e=Da(e,n,"linearGradient",R_),e.setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)a=Da(e,r,"stop",R_),a.setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);Na(e,r)}function no(e,t,n){var r;e=Da(e,n,"clipPath",R_),e.setAttribute("id",t.id),t.path?(r=Da(e,0,"path",R_),r.setAttribute("d",t.path)):(r=Da(e,0,"rect",R_),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height))}function ro(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function io(e,t,n){t=t.lastChild;var r,i=0;wi(n,function(n){r=e.draw(t,n,r),++i}),Na(t,1+i)}function ao(e,t,n,r,i){var a,o=e._svg;if(!o&&(a=t.ownerDocument,o=Ta(a,r,R_),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=Ta(a,"path",R_);u.setAttribute("class","background"),o.appendChild(u),u.__data__=e;var s=Ta(a,"g",R_);o.appendChild(s),s.__data__=e}return(o.ownerSVGElement!==i||oo(e)&&o.previousSibling!==n)&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function oo(e){var t=e.mark||e.group;return t&&t.items.length>1}function uo(e,t,n){t!==N_[e]&&(null!=t?n?D_.setAttributeNS(n,e,t):D_.setAttribute(e,t):n?D_.removeAttributeNS(n,e):D_.removeAttribute(e),N_[e]=t)}function so(){var e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function fo(e){Fa.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function lo(e,t,n,r){q_[r||e]=t}function co(e,t,n,r){if(null==e)return"";var i,a,o,u,s,f="";for("bgrect"===n&&t.interactive===!1&&(f+="pointer-events: none; "),"text"===n&&(f+="font: "+ya(e)+"; "),i=0,a=C_.length;i<a;++i)o=C_[i],u=A_[o],s=e[o],null==s?"fill"===u&&(f+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(s.id&&(r.gradient[s.id]=s,s="url(#"+s.id+")"),f+=u+": "+s+"; "):f+=u+": none; ";return f?'style="'+f.trim()+'"':null}function ho(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function po(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(W_[e]=t,this):W_[e]}function go(e){var t=e.clip;if(V(t))t(hi(V_.clear()));else{if(!t)return;V_.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(V_)}function mo(e,t,n){return e===t||("path"===n?vo(e,t):e instanceof Date&&t instanceof Date?+e===+t:te(e)&&te(t)?Math.abs(e-t)<=H_:e&&t&&(E(e)||E(t))?null!=e&&null!=t&&yo(e,t):e==t)}function vo(e,t){return mo(Ar(e),Ar(t))}function yo(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!mo(e[n],t[n],n))return!1;return typeof e==typeof t}function bo(e){jt.call(this,null,e)}function _o(e,t,n){return t(e.bounds.clear(),e,n)}function xo(e){jt.call(this,0,e)}function wo(e){var t=e._signals[G_];return t||(e._signals[G_]=t=e.add(0)),t}function ko(e){jt.call(this,null,e)}function Mo(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Eo(e){jt.call(this,null,e)}function Oo(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function So(e){for(var t,n=1,r=e.length,i=e[0].bounds;n<r;i=t,++n)if(Oo(i,t=e[n].bounds))return!0}function Ao(e){var t=e.bounds;return t.width()>1&&t.height()>1}function Co(e,t,n){var r=e.range(),i=new pr;return t===$y||t===jy?i.set(r[0],-(1/0),r[1],+(1/0)):i.set(-(1/0),r[0],+(1/0),r[1]),i.expand(n||1),function(e){return i.encloses(e.bounds)}}function Ro(e){jt.call(this,null,e)}function To(e){for(var t,n,r=e.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(t=r[a],n=t.items,t.marktype===Hy)switch(t.role){case Yy:case Jy:break;case Qy:zo(n,o.rowheaders);break;case Ky:zo(n,o.rowfooters);break;case tb:zo(n,o.colheaders);break;case nb:zo(n,o.colfooters);break;case eb:o.rowtitle=n[0];break;case rb:o.coltitle=n[0];break;default:zo(n,o.marks)}return o}function zo(e,t){for(var n=0,r=e.length;n<r;++n)t.push(e[n])}function Do(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function No(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Po(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function $o(e,t){return e.bounds[t]}function Lo(e,t,n){var r=E(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function qo(e){return e<0?Math.ceil(-e):0}function jo(e,t,n){function r(e,t){return Math.floor(Math.min(e,t))}function i(e,t){return Math.ceil(Math.max(e,t))}var a,o,u,s,f,l,c,d,h,p,g,m,v=To(t,n),y=v.marks,b=n.bounds===hb,_=b?Do:No,x=new pr(0,0,0,0),w=Lo(n.align,pb),k=Lo(n.align,gb),M=Lo(n.padding,pb),E=Lo(n.padding,gb),O=n.offset,S=t.columns||n.columns||y.length,A=S<0?1:Math.ceil(y.length/S),C=A*S,R=[],T=[],z=0,D=0,N=[],P=[],$=0,L=0,q=y.length;for(o=0;o<S;++o)T[o]=0;for(o=0;o<A;++o)P[o]=0;for(o=0;o<q;++o)f=_(y[o]),u=o%S,s=~~(o/S),c=Math.ceil(_(y[o]).x2),d=Math.ceil(_(y[o]).y2),z=Math.max(z,c),$=Math.max($,d),T[u]=Math.max(T[u],c),P[s]=Math.max(P[s],d),R.push(M+qo(f.x1)),N.push(E+qo(f.y1)),e.dirty(y[o]);for(o=0;o<q;++o)o%S===0&&(R[o]=D),o<S&&(N[o]=L);if(w===db)for(u=1;u<S;++u){for(m=0,o=u;o<q;o+=S)m<R[o]&&(m=R[o]);for(o=u;o<q;o+=S)R[o]=m+T[u-1]}else if(w===cb){for(m=0,o=0;o<q;++o)o%S&&m<R[o]&&(m=R[o]);for(o=0;o<q;++o)o%S&&(R[o]=m+z)}else for(w=!1,u=1;u<S;++u)for(o=u;o<q;o+=S)R[o]+=T[u-1];if(k===db)for(s=1;s<A;++s){for(m=0,o=s*S,a=o+S;o<a;++o)m<N[o]&&(m=N[o]);for(o=s*S;o<a;++o)N[o]=m+P[s-1]}else if(k===cb){for(m=0,o=S;o<q;++o)m<N[o]&&(m=N[o]);for(o=S;o<q;++o)N[o]=m+$}else for(k=!1,s=1;s<A;++s)for(o=s*S,a=o+S;o<a;++o)N[o]+=P[s-1];for(h=0,o=0;o<q;++o)l=y[o],c=l.x||0,l.x=h=R[o]+(o%S?h:0),l.bounds.translate(h-c,0);for(u=0;u<S;++u)for(p=0,o=u;o<q;o+=S)l=y[o],d=l.y||0,l.y=p+=N[o],l.bounds.translate(0,p-d);if(Lo(n.center,pb)&&A>1&&w)for(o=0;o<q;++o)l=y[o],f=w===cb?z:T[o%S],h=f-_(l).x2,h>0&&(l.x+=c=h/2,l.bounds.translate(c,0));if(Lo(n.center,gb)&&1!==S&&k)for(o=0;o<q;++o)l=y[o],f=k===cb?$:P[~~(o/S)],p=f-_(l).y2,p>0&&(l.y+=d=p/2,l.bounds.translate(0,d));for(o=0;o<q;++o)y[o].mark.bounds.clear();for(o=0;o<q;++o)l=y[o],e.dirty(l),x.union(l.mark.bounds.union(l.bounds));_=b?Po:$o,g=Lo(n.headerBand,gb,null),h=Fo(e,v.rowheaders,y,S,A,-Lo(O,"rowHeader"),r,0,_,"x1",0,S,1,g),g=Lo(n.headerBand,pb,null),p=Fo(e,v.colheaders,y,S,S,-Lo(O,"columnHeader"),r,1,_,"y1",0,1,S,g),g=Lo(n.footerBand,gb,null),Fo(e,v.rowfooters,y,S,A,Lo(O,"rowFooter"),i,0,_,"x2",S-1,S,1,g),g=Lo(n.footerBand,pb,null),Fo(e,v.colfooters,y,S,S,Lo(O,"columnFooter"),i,1,_,"y2",C-S,1,S,g),v.rowtitle&&(m=h-Lo(O,"rowTitle"),g=Lo(n.titleBand,gb,.5),Uo(e,v.rowtitle,m,0,x,g)),v.coltitle&&(m=p-Lo(O,"columnTitle"),g=Lo(n.titleBand,pb,.5),Uo(e,v.coltitle,m,1,x,g))}function Fo(e,t,n,r,i,a,o,u,s,f,l,c,d,h){var p,g,m,v,y,b,_,x,w,k=n.length,M=0,E=0;if(!k)return M;for(p=l;p<k;p+=c)n[p]&&(M=o(M,s(n[p],f)));if(!t.length)return M;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),M+=a,g=0,v=t.length;g<v;++g)e.dirty(t[g]),t[g].mark.bounds.clear();for(p=l,g=0,v=t.length;g<v;++g,p+=c){for(b=t[g],y=b.mark.bounds,m=p;m>=0&&null==(_=n[m]);m-=d);u?(x=null==h?_.x:Math.round(_.bounds.x1+h*_.bounds.width()),w=M):(x=M,w=null==h?_.y:Math.round(_.bounds.y1+h*_.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,e.dirty(b),E=o(E,y[f])}return E}function Uo(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function Io(e){jt.call(this,null,e)}function Bo(e,t,n){var r,i,a,o,u,s,f=t.items,l=Math.max(0,t.width||0),c=Math.max(0,t.height||0),d=(new pr).set(0,0,l,c),h=d.clone(),p=d.clone(),g=[];for(u=0,s=f.length;u<s;++u)switch(i=f[u],i.role){case Yy:o=Vo(i)?h:p,o.union(Yo(e,i,l,c));break;case Gy:r=i;break;case Jy:g.push(i);break;case Xy:case Zy:case Qy:case Ky:case eb:case tb:case nb:case rb:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}if(g.length)for(a={leftWidth:Zo(e,g),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},u=0,s=g.length;u<s;++u)if(o=Qo(e,g[u],a,h,p,l,c),n.autosize&&n.autosize.type===ob){var m=g[u].items[0].datum.orient;m===Ly||m===qy?d.add(o.x1,0).add(o.x2,0):m!==$y&&m!==jy||d.add(0,o.y1).add(0,o.y2)}else d.union(o);d.union(h).union(p),r&&d.union(Xo(e,r,l,c,d)),eu(e,t,d,n)}function Wo(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Vo(e){var t=e.items[0].datum.orient;return t===Ly||t===qy}function Ho(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Yo(e,t,n,r){var i,a,o=t.items[0],u=o.datum,s=u.orient,f=Ho(u),l=o.range,c=o.offset,d=o.position,h=o.minExtent,p=o.maxExtent,g=u.title&&o.items[f[2]].items[0],m=o.titlePadding,v=o.bounds,y=0,b=0;switch(tx.clear().union(v),v.clear(),(i=f[0])>-1&&v.union(o.items[i].bounds),(i=f[1])>-1&&v.union(o.items[i].bounds),s){case $y:y=d||0,b=-c,a=Math.max(h,Math.min(p,-v.y1)),g&&(a=Go(g,a,m,0,-1,v)),v.add(0,-a).add(l,0);break;case Ly:y=-c,b=d||0,a=Math.max(h,Math.min(p,-v.x1)),g&&(a=Go(g,a,m,1,-1,v)),v.add(-a,0).add(0,l);break;case qy:y=n+c,b=d||0,a=Math.max(h,Math.min(p,v.x2)),g&&(a=Go(g,a,m,1,1,v)),v.add(0,0).add(a,l);break;case jy:y=d||0,b=r+c,a=Math.max(h,Math.min(p,v.y2)),g&&(a=Go(g,a,m,0,1,v)),v.add(0,0).add(l,a);break;default:y=o.x,b=o.y}return di(v.translate(y,b),o),Wo(o,"x",y+ex)|Wo(o,"y",b+ex)&&(o.bounds=tx,e.dirty(o),o.bounds=v,e.dirty(o)),o.mark.bounds.clear().union(v)}function Go(e,t,n,r,i,a){var o=e.bounds,u=0,s=0;return e.auto?(t+=n,r?u=(e.x||0)-(e.x=i*t):s=(e.y||0)-(e.y=i*t),o.translate(-u,-s),e.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),t+=o.width()):(a.add(o.x1,0).add(o.x2,0),t+=o.height())):a.union(o),t}function Xo(e,t,n,r,i){var a,o=t.items[0],u=o.orient,s=o.frame,f=o.anchor,l=o.offset,c=o.bounds,d=u===Ly||u===qy,h=0,p=d?r:n,g=0,m=0;switch(s!==Hy?u===Ly?(h=i.y2,p=i.y1):u===qy?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):u===Ly&&(h=r,p=0),a=f===Wy?h:f===Vy?p:(h+p)/2,tx.clear().union(c),u){case $y:g=a,m=i.y1-l;break;case Ly:g=i.x1-l,m=a;break;case qy:g=i.x2+l,m=a;break;case jy:g=a,m=i.y2+l;break;default:g=o.x,m=o.y}return c.translate(g-o.x,m-o.y),Wo(o,"x",g)|Wo(o,"y",m)&&(o.bounds=tx,e.dirty(o),o.bounds=c,e.dirty(o)),t.bounds.clear().union(c)}function Zo(e,t){return t.reduce(function(t,n){var r=n.items[0];if(Jo(e,r,r.items[0].items[0]),r.datum.orient===Ly){var i=tx.clear();r.items.forEach(function(e){i.union(e.bounds)}),t=Math.max(t,Math.round(i.width())+2*r.padding-1)}return t},0)}function Jo(e,t,n){var r=t.padding-n.x,i=t.padding-n.y;if(t.datum.title){var a=t.items[1].items[0];i+=t.titlePadding+a.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),e.dirty(n))}function Qo(e,t,n,r,i,a,o){var u,s,f,l=t.items[0],c=l.datum,d=c.orient,h=l.offset,p=l.bounds,g=0,m=0;switch(d===$y||d===jy?(f=i,g=n[d]):d!==Ly&&d!==qy||(f=r,m=n[d]),tx.clear().union(p),p.clear(),l.items.forEach(function(e){p.union(e.bounds)}),u=Math.round(p.width())+2*l.padding-1,s=Math.round(p.height())+2*l.padding-1,c.type===ab&&Ko(l.items[0].items[0].items[0].items),d){case Ly:g-=n.leftWidth+h-Math.floor(f.x1),n.left+=s+n.margin;break;case qy:g+=h+Math.ceil(f.x2),n.right+=s+n.margin;break;case $y:m-=s+h-Math.floor(f.y1),n.top+=u+n.margin;break;case jy:m+=h+Math.ceil(f.y2),n.bottom+=u+n.margin;break;case Fy:g+=h,m+=h;break;case Uy:g+=a-u-h,m+=h;break;case Iy:g+=h,m+=o-s-h;break;case By:g+=a-u-h,m+=o-s-h;break;default:g=l.x,m=l.y}return di(p.set(g,m,g+u,m+s),l),Wo(l,"x",g)|Wo(l,"width",u)|Wo(l,"y",m)|Wo(l,"height",s)&&(l.bounds=tx,e.dirty(l),l.bounds=p,e.dirty(l)),l.mark.bounds.clear().union(p)}function Ko(e){var t=e.reduce(function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e},{});e.forEach(function(e){e.width=t[e.column],e.height=e.bounds.y2-e.y})}function eu(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,u=e._height,s=e.padding();if(!(e._autosize<1)&&a){var f=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,Math.ceil(n.x2-f)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===ib&&(o-=s.left+s.right,u-=s.top+s.bottom),a===lb?(l=0,h=0,f=o,d=u):a===ob?(f=Math.max(0,o-l-c),d=Math.max(0,u-h-p)):a===ub?(f=Math.max(0,o-l-c),u=d+h+p):a===sb?(o=f+l+c,d=Math.max(0,u-h-p)):a===fb&&(o=f+l+c,u=d+h+p),e._resizeView(o,u,f,d,[l,h],i.resize)}}function tu(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function nu(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function ru(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}function iu(){function e(){var e=i().length,r=u[1]<u[0],s=u[r-0],h=u[1-r],p=ru(e,l,c);t=(h-s)/(p||1),f&&(t=Math.floor(t)),s+=(h-s-t*(e-l))*d,n=t*(1-l),f&&(s=Math.round(s),n=Math.round(n));var g=a.range(e).map(function(e){return s+t*e});return o(r?g.reverse():g)}var t,n,r=s.scaleOrdinal().unknown(void 0),i=r.domain,o=r.range,u=[0,1],f=!1,l=0,c=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},r.rangeRound=function(t){return u=[+t[0],+t[1]],f=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(f=!!t,e()):f},r.padding=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l=c,e()):l},r.paddingInner=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.paddingOuter=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,s,f=+e[0],l=+e[1],c=u[1]<u[0],d=c?o().reverse():o(),h=d.length-1;if(f===f&&l===l&&(l<f&&(s=f,f=l,l=s),!(l<d[0]||f>u[1-c])))return t=Math.max(0,a.bisectRight(d,f)-1),r=f===l?t:a.bisectRight(d,l)-1,f-d[t]>n+1e-10&&++t,c&&(s=t,t=h-r,r=h-s),t>r?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return iu().domain(i()).range(u).round(f).paddingInner(l).paddingOuter(c).align(d)},e()}function au(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return au(t())},e}function ou(){return au(iu().paddingInner(1))}function uu(e){return bx.call(e,function(e){return+e})}function su(){function e(e){return n(e)}function t(e){r=uu(e),n.domain([r[0],T(r)])}var n=s.scaleLinear(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var n=r.length,i=~~(n/(t||n));return i<2?e.domain():r.filter(function(e,t){return!(t%i)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return su().domain(e.domain()).range(e.range())},e}function fu(){function e(e){return null==e||e!==e?void 0:n[(a.bisect(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=uu(n),e):t.slice()},e.range=function(t){return arguments.length?(n=_x.call(t),e):n.slice()},e.copy=function(){return fu().domain(e.domain()).range(e.range())},e}function lu(e){function t(){var e=r.domain();i=e[0],a=T(e)-i}function n(t){var n=(t-i)/a;return e(o?Math.max(0,Math.min(1,n)):n)}var r=s.scaleLinear(),i=0,a=1,o=!1;return n.clamp=function(e){return arguments.length?(o=!!e,n):o},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return lu().domain(r.domain()).clamp(o).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function cu(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?tu(n):n.invertExtent?nu(n):void 0),n.type=e,n}}function du(e,t){return arguments.length>1?(xx[e]=cu(e,t),this):xx.hasOwnProperty(e)?xx[e]:void 0}function hu(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function pu(e,t){Rx[e]=f["interpolate"+t],Cx[e]=f["scheme"+t]}function gu(e,t){if(arguments.length>1)return Rx[e]=t,this;var n=e.split("-");return e=n[0],n=+n[1]+1,n&&Cx.hasOwnProperty(e)?Cx[e][n-1]:!n&&Rx.hasOwnProperty(e)?Rx[e]:void 0}function mu(e,t){var n=t[0],r=T(t)-n;return function(t){return e(n+t*r)}}function vu(e,t,n){var r=n-t;return r?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/r}:e.copy().domain([t,n]).range([0,1]).interpolate(yu):Y(0)}function yu(e,t){var n=t-e;return function(t){return e+t*n}}function bu(e,t){var n=l[_u(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function _u(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}function xu(e){return Tx.hasOwnProperty(e)&&Tx[e]}function wu(e){return zx.hasOwnProperty(e)&&zx[e]}function ku(e,t){var n;return E(t)&&(n=t.step,t=t.interval),O(t)&&(t="time"===e.type?xu(t):"utc"===e.type?wu(t):k("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function Mu(e,t,n){var r=e.range(),i=r[0],a=T(r);if(i>a&&(r=a,a=i,i=r),t=t.filter(function(t){return t=e(t),!(t<i||t>a)}),n>0&&t.length>1){for(var o=[t[0],T(t)];t.length>n&&t.length>=3;)t=t.filter(function(e,t){return!(t%2)});t.length<3&&(t=o)}return t}function Eu(e,t){return e.ticks?e.ticks(t):e.domain()}function Ou(e,t,n){var r=e.tickFormat?e.tickFormat(t,n):n?d.format(n):String;return e.type===ix?Su(r,Au(n)):r}function Su(e,t){return function(n){return e(n)?t(n):""}}function Au(e){var t=d.formatSpecifier(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return Cu(d.format(t),d.format(".1f")(1)[1])}return d.format(t)}function Cu(e,t){return function(n){var r,i,a=e(n),o=a.indexOf(t);if(o<0)return a;for(r=Ru(a,o),i=r<a.length?a.slice(r):"";--r>o;)if("0"!==a[r]){++r;break}return a.slice(0,r)+i}}function Ru(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}function Tu(e){jt.call(this,null,e)}function zu(e){jt.call(this,null,e)}function Du(){return ye({})}function Nu(e){return e.exit}function Pu(e){jt.call(this,null,e)}function $u(e,t){var n=jx[e.type];return n?n(e):Eu(e,t)}function Lu(e){var t=e.domain(),n=t[0],r=T(t),i=e.range().length,a=new Array(i),o=0;for(a[0]=-(1/0);++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=+(1/0),a}function qu(e){var t=[-(1/0)].concat(e.quantiles());return t.max=+(1/0),t}function ju(e){var t=[-(1/0)].concat(e.domain());return t.max=+(1/0),t}function Fu(e){var t=e.domain();return t.max=t.pop(),t}function Uu(e,t,n){return n===$x&&jx[e.type]?Iu(t):n===Lx?Bu(t):Wu(t)}function Iu(e){return function(t,n,r){var i=r[n+1]||r.max||+(1/0),a=Vu(t,e),o=Vu(i,e);return a&&o?a+""+o:o?"< "+o:" "+a}}function Bu(e){return function(t,n){return n?e(t):null}}function Wu(e){return function(t){return e(t)}}function Vu(e,t){return isFinite(e)?t(e):null}function Hu(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+T(t),a=i-r;if(e.type===gx){var o=n?a/n:.1;r-=o,i+=o,a=i-r}return function(e){return(e-r)/a}}function Yu(e){jt.call(this,[],e)}function Gu(e){return e.source.x}function Xu(e){return e.source.y}function Zu(e){return e.target.x}function Ju(e){return e.target.y}function Qu(e){jt.call(this,{},e)}function Ku(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function es(e,t,n,r){return Ku(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function ts(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2,u=180*Math.atan2(a,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+u+" 0 1 "+n+","+r}function ns(e,t,n,r){return ts(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function rs(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),u=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function is(e,t,n,r){return rs(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function as(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n}function os(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r}function us(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u}function ss(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r}function fs(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r}function ls(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*i+","+t*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}function cs(e){jt.call(this,null,e)}function ds(e){jt.call(this,null,e),this.modified(!0)}function hs(e,t,n){var r=ps(e,t.domainRaw);if(r>-1)return r;var i,a,o=t.domain,u=e.type,s=t.zero||void 0===t.zero&&Vx[u];return o?(Hx[u]&&t.padding&&o[0]!==T(o)&&(o=gs(u,o,t.range,t.padding,t.exponent)),(s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(o=o.slice()).length-1||1,s&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[i]=t.domainMax),null!=t.domainMid&&(a=t.domainMid,(a<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a))),e.domain(o),u===dx&&e.unknown(void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&ku(e,t.nice)||null),o.length):0}function ps(e,t){return t?(e.domain(t),t.length):-1}function gs(e,t,n,r,i){var a=Math.abs(T(n)-n[0]),o=a/(a-2*r),u=e===ix?I(t,null,o):e===ux?B(t,null,o,.5):e===ax?B(t,null,o,i):U(t,null,o);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function ms(e,t,n){var r=t.round||!1,i=t.range;if(null!=t.rangeStep)i=vs(e.type,t,n);else if(t.scheme){if(i=ys(e.type,t,n),V(i))return e.interpolator(i)}else if(i&&e.type===yx)return e.interpolator(l.interpolateRgbBasis(_s(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate(bu(t.interpolate,t.interpolateGamma)):V(e.round)?e.round(r):V(e.rangeRound)&&e.interpolate(r?l.interpolateRound:l.interpolate),i&&e.range(_s(i,t.reverse))}function vs(e,t,n){e!==sx&&e!==lx&&k("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===lx?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*ru(n,i,r)]}function ys(e,t,n){var r,i=t.scheme.toLowerCase(),a=gu(i),o=t.schemeExtent;return a||k("Unrecognized scheme name: "+t.scheme),n=e===gx?n+1:e===vx?n-1:e===hx||e===px?+t.schemeCount||Wx:n,e===yx?bs(a,o,t.reverse):!o&&(r=gu(i+"-"+n))?r:V(a)?xs(bs(a,o),n):e===dx?a:a.slice(0,n)}function bs(e,t,n){return V(e)&&(t||n)?mu(e,_s(t||[0,1],n)):e}function _s(e,t){return t?e.slice().reverse():e}function xs(e,t){for(var n=new Array(t),r=t+2,i=0;i<t;)n[i]=e(++i/r);return n}function ws(e){jt.call(this,null,e)}function ks(e){jt.call(this,null,e)}function Ms(e,t,n,r,i){for(var a,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)a=e[s],a[r]=o,a[i]=o+=Math.abs(n(a))}function Es(e,t,n,r,i){for(var a,o=1/e.sum,u=0,s=e.length,f=0,l=0;f<s;++f)a=e[f],a[r]=u,a[i]=u=o*(l+=Math.abs(n(a)))}function Os(e,t,n,r,i){for(var a,o,u=0,s=0,f=e.length,l=0;l<f;++l)o=e[l],a=n(o),a<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function Ss(e,t,n,r){var i,a,o,u,s,f,l,c,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)s=e[a],f=t.map(p),l=i[f],l||(i[f]=l=[],h.push(l)),l.push(s);for(f=0,d=0,u=h.length;f<u;++f){for(l=h[f],a=0,c=0,o=l.length;a<o;++a)c+=Math.abs(r(l[a]));l.sum=c,c>d&&(d=c),n&&l.sort(n)}return h.max=d,h}function As(e,t){return e-t}function Cs(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Rs(e){return function(){return e}}function Ts(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=zs(e,t[r]))return n;return 0}function zs(e,t){for(var n=t[0],r=t[1],i=-1,a=0,o=e.length,u=o-1;a<o;u=a++){var s=e[a],f=s[0],l=s[1],c=e[u],d=c[0],h=c[1];if(Ds(s,c,t))return 0;l>r!=h>r&&n<(d-f)*(r-l)/(h-l)+f&&(i=-i)}return i}function Ds(e,t,n){var r;return Ns(e,t,n)&&Ps(e[r=+(e[0]===t[0])],n[r],t[r])}function Ns(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Ps(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function $s(){}function Ls(){function e(e){var n=s(e);if(Array.isArray(n))n=n.slice().sort(As);else{var r=a.extent(e),i=r[0],o=r[1];n=a.tickStep(i,o,n),n=a.range(Math.floor(i/n)*n,Math.floor(o/n)*n,n)}return n.map(function(n){return t(e,n)})}function t(e,t){var r=[],i=[];return n(e,t,function(n){f(n,e,t),Cs(n)>0?r.push([n]):i.push(n)}),i.forEach(function(e){for(var t,n=0,i=r.length;n<i;++n)if(Ts((t=r[n])[0],e)!==-1)return void t.push(e)}),{type:"MultiPolygon",value:t,coordinates:r}}function n(e,t,n){function i(e){var t,i,o=[e[0][0]+a,e[0][1]+s],u=[e[1][0]+a,e[1][1]+s],f=r(o),l=r(u);(t=p[f])?(i=h[l])?(delete p[t.end],delete h[i.start],t===i?(t.ring.push(u),n(t.ring)):h[t.start]=p[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete p[t.end],t.ring.push(u),p[t.end=l]=t):(t=h[l])?(i=p[f])?(delete h[t.start],delete p[i.end],t===i?(t.ring.push(u),n(t.ring)):h[i.start]=p[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(o),h[t.start=f]=t):h[f]=p[l]={start:f,end:l,ring:[o,u]}}var a,s,f,l,c,d,h=new Array,p=new Array;for(a=s=-1,l=e[0]>=t,tw[l<<1].forEach(i);++a<o-1;)f=l,l=e[a+1]>=t,tw[f|l<<1].forEach(i);for(tw[l<<0].forEach(i);++s<u-1;){for(a=-1,l=e[s*o+o]>=t,c=e[s*o]>=t,tw[l<<1|c<<2].forEach(i);++a<o-1;)f=l,l=e[s*o+o+a+1]>=t,d=c,c=e[s*o+a+1]>=t,tw[f|l<<1|c<<2|d<<3].forEach(i);tw[l|c<<3].forEach(i)}for(a=-1,c=e[s*o]>=t,tw[c<<2].forEach(i);++a<o-1;)d=c,c=e[s*o+a+1]>=t,tw[c<<2|d<<3].forEach(i);tw[c<<3].forEach(i)}function r(e){return 2*e[0]+e[1]*(o+1)*4}function i(e,t,n){e.forEach(function(e){var r,i=e[0],a=e[1],s=0|i,f=0|a,l=t[f*o+s];i>0&&i<o&&s===i&&(r=t[f*o+s-1],e[0]=i+(n-r)/(l-r)-.5),a>0&&a<u&&f===a&&(r=t[(f-1)*o+s],e[1]=a+(n-r)/(l-r)-.5)})}var o=1,u=1,s=a.thresholdSturges,f=i;return e.contour=t,e.size=function(t){if(!arguments.length)return[o,u];var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!(n>0&&r>0))throw new Error("invalid size");return o=n,u=r,e},e.thresholds=function(t){return arguments.length?(s="function"==typeof t?t:Rs(Array.isArray(t)?ew.call(t):t),e):s},e.smooth=function(t){return arguments.length?(f=t?i:$s,e):f===i},e}function qs(e,t,n){for(var r=e.width,i=e.height,a=(n<<1)+1,o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=e.data[u+o*r]),u>=n&&(u>=a&&(s-=e.data[u-a+o*r]),t.data[u-n+o*r]=s/Math.min(u+1,r-1+a-u,a))}function js(e,t,n){for(var r=e.width,i=e.height,a=(n<<1)+1,o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=e.data[o+u*r]),u>=n&&(u>=a&&(s-=e.data[o+(u-a)*r]),t.data[o+(u-n)*r]=s/Math.min(u+1,i-1+a-u,a))}function Fs(e){return e[0]}function Us(e){return e[1]}function Is(){function e(e){var n=new Float32Array(p*g),r=new Float32Array(p*g);e.forEach(function(e,t,r){var i=u(e,t,r)+h>>d,a=s(e,t,r)+h>>d;i>=0&&i<p&&a>=0&&a<g&&++n[i+a*p]}),qs({width:p,height:g,data:n},{width:p,height:g,data:r},c>>d),js({width:p,height:g,data:r},{width:p,height:g,data:n},c>>d),qs({width:p,height:g,data:n},{width:p,height:g,data:r},c>>d),js({width:p,height:g,data:r},{width:p,height:g,data:n},c>>d),qs({width:p,height:g,data:n},{width:p,height:g,data:r},c>>d),js({width:p,height:g,data:r},{width:p,height:g,data:n},c>>d);var i=m(n);if(!Array.isArray(i)){var o=a.max(n);i=a.tickStep(0,o,i),i=a.range(0,Math.floor(o/i)*i,i),i.shift()}return Ls().thresholds(i).size([p,g])(n).map(t)}function t(e){return e.value*=Math.pow(2,-2*d),e.coordinates.forEach(n),e}function n(e){e.forEach(r)}function r(e){e.forEach(i)}function i(e){e[0]=e[0]*Math.pow(2,d)-h,e[1]=e[1]*Math.pow(2,d)-h}function o(){return h=3*c,p=f+2*h>>d,g=l+2*h>>d,e}var u=Fs,s=Us,f=960,l=500,c=20,d=2,h=3*c,p=f+2*h>>d,g=l+2*h>>d,m=Rs(20);return e.x=function(t){return arguments.length?(u="function"==typeof t?t:Rs(+t),e):u},e.y=function(t){return arguments.length?(s="function"==typeof t?t:Rs(+t),e):s},e.size=function(e){if(!arguments.length)return[f,l];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return f=t,l=n,o()},e.cellSize=function(e){if(!arguments.length)return 1<<d;if(!((e=+e)>=1))throw new Error("invalid cell size");return d=Math.floor(Math.log(e)/Math.LN2),o()},e.thresholds=function(t){return arguments.length?(m="function"==typeof t?t:Rs(Array.isArray(t)?ew.call(t):t),e):m},e.bandwidth=function(e){if(!arguments.length)return Math.sqrt(c*(c+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return c=Math.round((Math.sqrt(4*e*e+1)-1)/2),o()},e}function Bs(e){jt.call(this,null,e)}function Ws(e){return function(t){for(var n=a.extent(t),r=n[0],i=n[1]-r,o=[],u=1;u<=e;++u)o.push(r+i*u/(e+1));return o}}function Vs(e){jt.call(this,null,e)}function Hs(e,t){return function n(){var r=t();return r.type=e,r.path=h.geoPath().projection(r),r.copy=r.copy||function(){var e=n();return lw.forEach(function(t){r.hasOwnProperty(t)&&e[t](r[t]())}),e.path.pointRadius(r.path.pointRadius()),e},r}}function Ys(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(cw[e]=Hs(e,t),this):cw.hasOwnProperty(e)?cw[e]:null}function Gs(e){return e&&e.path||fw}function Xs(e){jt.call(this,null,e)}function Zs(e,t){var n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}function Js(e){jt.call(this,null,e)}function Qs(e){jt.call(this,null,e)}function Ks(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var i=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(i),a};return r.context=function(t){return e.context(t),r},r}function ef(e){jt.call(this,[],e),
this.generator=h.geoGraticule()}function tf(e){jt.call(this,null,e),this.modified(!0)}function nf(e,t){var n=of(t.fit);t.extent?e.fitExtent(t.extent,n):t.size?e.fitSize(t.size,n):0}function rf(e){var t=Ys((e||"mercator").toLowerCase());return t||k("Unrecognized projection type: "+e),t()}function af(e,t,n){V(e[t])&&e[t](n)}function of(e){return e=W(e),1===e.length?e[0]:{type:ow,features:e.reduce(function(e,t){return t&&t.type===ow?e.push.apply(e,t.features):Zm(t)?e.push.apply(e,t):e.push(t),e},[])}}function uf(e){jt.call(this,null,e)}function sf(e,t){return function(){e.touch(t).run()}}function ff(e,t){var n=p.forceSimulation(e),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},lf(n,t,!0).on("end",function(){r=!0})}function lf(e,t,n,r){var i,a,o,u,s=W(t.forces);for(i=0,a=xw.length;i<a;++i)o=xw[i],o!==_w&&t.modified(o)&&e[o](t[o]);for(i=0,a=s.length;i<a;++i)u=_w+i,o=n||t.modified(_w,i)?df(s[i]):r&&cf(s[i],r)?e.force(u):null,o&&e.force(u,o);for(a=e.numForces||0;i<a;++i)e.force(_w+i,null);return e.numForces=s.length,e}function cf(e,t){var n,r;for(n in e)if(V(r=e[n])&&t.modified(w(r)))return 1;return 0}function df(e){var t,n;bw.hasOwnProperty(e.force)||k("Unrecognized force: "+e.force),t=bw[e.force]();for(n in e)V(t[n])&&hf(t[n],e[n],e);return t}function hf(e,t,n){e(V(t)?function(e){return t(e,n)}:t)}function pf(e,t,n){var r={};return e.each(function(e){var i=e.data;n(i)&&(r[t(i)]=e)}),e.lookup=r,e}function gf(e){jt.call(this,null,e)}function mf(e){return e.values}function vf(e){jt.call(this,null,e)}function yf(e,t,n){for(var r,i=0,a=t.length;i<a;++i)r=t[i],r in n&&e[r](n[r])}function bf(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}function _f(e){vf.call(this,e)}function xf(e){vf.call(this,e)}function wf(e){jt.call(this,null,e)}function kf(e){vf.call(this,e)}function Mf(e){jt.call(this,[],e)}function Ef(e){vf.call(this,e)}function Of(e){jt.call(this,null,e)}function Sf(){function e(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(Vw<<5)/t,e.height=Hw/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function t(e,t,n){for(var r,i,a,o=t.x,u=t.y,s=Math.sqrt(f[0]*f[0]+f[1]*f[1]),c=l(f),h=d()<.5?1:-1,p=-h;(r=c(p+=h))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=s));)if(t.x=o+i,t.y=u+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>f[0]||t.y+t.y1>f[1])&&(!n||!Cf(t,e,f[0]))&&(!n||Tf(t,n))){for(var g,m=t.sprite,v=t.width>>5,y=f[0]>>5,b=t.x-(v<<4),_=127&b,x=32-_,w=t.y1-t.y0,k=(t.y+t.y0)*y+(b>>5),M=0;M<w;M++){g=0;for(var E=0;E<=v;E++)e[k+E]|=g<<x|(E<v?(g=m[M*v+E])>>>_:0);k+=y}return t.sprite=null,!0}return!1}var n,r,i,a,o,u,s,f=[256,256],l=zf,c=[],d=Math.random,h={};return h.layout=function(){for(var l=e(wr()),h=Nf((f[0]>>5)*f[1]),p=null,g=c.length,m=-1,v=[],y=c.map(function(e){return{text:n(e),font:r(e),style:a(e),weight:o(e),rotate:u(e),size:~~i(e),padding:s(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size});++m<g;){var b=y[m];b.x=f[0]*(d()+.5)>>1,b.y=f[1]*(d()+.5)>>1,Af(l,b,y,m),b.hasText&&t(h,b,p)&&(v.push(b),p?Rf(p,b):p=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=f[0]>>1,b.y-=f[1]>>1)}return v},h.words=function(e){return arguments.length?(c=e,h):c},h.size=function(e){return arguments.length?(f=[+e[0],+e[1]],h):f},h.font=function(e){return arguments.length?(r=Pf(e),h):r},h.fontStyle=function(e){return arguments.length?(a=Pf(e),h):a},h.fontWeight=function(e){return arguments.length?(o=Pf(e),h):o},h.rotate=function(e){return arguments.length?(u=Pf(e),h):u},h.text=function(e){return arguments.length?(n=Pf(e),h):n},h.spiral=function(e){return arguments.length?(l=Yw[e]||e,h):l},h.fontSize=function(e){return arguments.length?(i=Pf(e),h):i},h.padding=function(e){return arguments.length?(s=Pf(e),h):s},h.random=function(e){return arguments.length?(d=e,h):d},h}function Af(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(Vw<<5)/a,Hw/a);var o,u,s,f,l,c=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,s=t.size<<1,t.rotate){var g=Math.sin(t.rotate*Ww),m=Math.cos(t.rotate*Ww),v=o*m,y=o*g,b=s*m,_=s*g;o=Math.max(Math.abs(v+_),Math.abs(v-_))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(s>h&&(h=s),c+o>=Vw<<5&&(c=0,d+=h,h=0),d+s>=Hw)break;i.translate((c+(o>>1))/a,(d+(s>>1))/a),t.rotate&&i.rotate(t.rotate*Ww),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=s,t.xoff=c,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,c+=o}for(var x=i.getImageData(0,0,(Vw<<5)/a,Hw/a).data,w=[];--r>=0;)if(t=n[r],t.hasText){for(o=t.width,u=o>>5,s=t.y1-t.y0,f=0;f<s*u;f++)w[f]=0;if(c=t.xoff,null==c)return;d=t.yoff;var k=0,M=-1;for(l=0;l<s;l++){for(f=0;f<o;f++){var E=u*l+(f>>5),O=x[(d+l)*(Vw<<5)+(c+f)<<2]?1<<31-f%32:0;w[E]|=O,k|=O}k?M=l:(t.y0++,s--,l--,d++)}t.y1=t.y0+M,t.sprite=w.slice(0,(t.y1-t.y0)*u)}}}function Cf(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),u=127&o,s=32-u,f=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c=0;c<f;c++){r=0;for(var d=0;d<=a;d++)if((r<<s|(d<a?(r=i[c*a+d])>>>u:0))&t[l+d])return!0;l+=n}return!1}function Rf(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Tf(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function zf(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function Df(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t}return[r,i]}}function Nf(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Pf(e){return"function"==typeof e?e:function(){return e}}function $f(e){jt.call(this,Sf(),e)}function Lf(e,t){for(var n,r=+(1/0),i=-(1/0),a=0,o=t.length;a<o;++a)n=e(t[a]),n<r&&(r=n),n>i&&(i=n);return[r,i]}function qf(e){return new Uint8Array(e)}function jf(e){return new Uint16Array(e)}function Ff(e){return new Uint32Array(e)}function Uf(){var e=8,t=[],n=Ff(0),r=Bf(0,e),i=Bf(0,e);return{data:function(){return t},seen:function(){return n=If(n,t.length)},add:function(e){for(var n,r=0,i=t.length,a=e.length;r<a;++r)n=e[r],n._index=i++,t.push(n)},remove:function(e,n){var a,o,u,s=t.length,f=Array(s-e),l=t;for(o=0;!n[o]&&o<s;++o)f[o]=t[o],l[o]=o;for(u=o;o<s;++o)a=t[o],n[o]?l[o]=-1:(l[o]=u,r[u]=r[o],i[u]=i[o],f[u]=a,a._index=u++),r[o]=0;return t=f,l},size:function(){return t.length},curr:function(){return r},prev:function(){return i},reset:function(e){i[e]=r[e]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){var a=r.length;(t>a||n>e)&&(e=Math.max(n,e),r=Bf(t,e,r),i=Bf(t,e))}}}function If(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Bf(e,t,n){var r=(t<257?qf:t<65537?jf:Ff)(e);return n&&r.set(n),r}function Wf(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this,a=i.bisect(i.range,e.value),o=e.index,u=a[0],s=a[1],f=o.length;for(n=0;n<u;++n)t[o[n]]|=r;for(n=s;n<f;++n)t[o[n]]|=r;return i}}}function Vf(){function e(e,t,n){if(!t.length)return[];var r,a,s,f=u,l=t.length,c=Array(l),d=Ff(l);for(s=0;s<l;++s)c[s]=e(t[s]),d[s]=s;if(c=Hf(c,d),f)r=o,a=i,o=Array(f+l),i=Ff(f+l),Yf(n,r,a,f,c,d,l,o,i);else{if(n>0)for(s=0;s<l;++s)d[s]+=n;o=c,i=d}return u=f+l,{index:d,value:c}}function t(e,t){var n,r,a,s=u;for(r=0;!t[i[r]]&&r<s;++r);for(a=r;r<s;++r)t[n=i[r]]||(i[a]=n,o[a]=o[r],++a);u=s-e}function n(e){for(var t=0,n=u;t<n;++t)i[t]=e[i[t]]}function r(e,t){var n;return t?n=t.length:(t=o,n=u),[a.bisectLeft(t,e[0],0,n),a.bisectRight(t,e[1],0,n)]}var i=Ff(0),o=[],u=0;return{insert:e,remove:t,bisect:r,reindex:n,index:function(){return i},size:function(){return u}}}function Hf(e,t){return e.sort.call(t,function(t,n){var r=e[t],i=e[n];return r<i?-1:r>i?1:0}),a.permute(e,t)}function Yf(e,t,n,r,i,a,o,u,s){var f,l=0,c=0;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(u[f]=t[l],s[f]=n[l++]):(u[f]=i[c],s[f]=a[c++]+e);for(;l<r;++l,++f)u[f]=t[l],s[f]=n[l];for(;c<o;++c,++f)u[f]=i[c],s[f]=a[c]+e}function Gf(e){jt.call(this,Uf(),e),this._indices=null,this._dims=null}function Xf(e){jt.call(this,null,e)}function Zf(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:nk,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var r=t.value,i=r?O(r)?r:r.user:nk,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),e.add(null,function(e){var t=e.cursor,n=this.value;return O(t)||(n=t.item,t=t.user),Jf(t&&t!==nk?t:n||t),n},{cursor:t})}function Jf(e){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=e)}function Qf(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||k("Unrecognized data set: "+t),n[t]}function Kf(e){return Qf(this,e).values.value}function el(e,t){we(t)||k("Second argument to changes must be a changeset.");var n=Qf(this,e);return n.modified=!0,this.pulse(n.input,t)}function tl(e,t){return el.call(this,e,ke().insert(t))}function nl(e,t){return el.call(this,e,ke().remove(t))}function rl(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function il(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function al(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function ol(e){var t=al(e),n=rl(e),r=il(e);e._renderer.background(e._background),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(function(t){try{t(n,r)}catch(i){e.error(i)}})}function ul(e,t,n){var r,i,a,o=e._renderer.canvas();return o&&(a=al(e),i=t.changedTouches?t.changedTouches[0]:t,r=$a(i,o),r[0]-=a[0],r[1]-=a[1]),t.dataflow=e,t.vega=sl(e,n,r),t.item=n,t}function sl(e,t,n){function r(e){var n,r=a;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(e){if(!e)return n;O(e)&&(e=r(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var a=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:Y(e),item:Y(t||{}),group:r,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}function fl(e){e=X({},e);var t=e.defaults;return t&&(Zm(t.prevent)&&(t.prevent=ce(t.prevent)),Zm(t.allow)&&(t.allow=ce(t.allow))),e}function ll(e,t){var n=e._eventConfig.defaults,r=n&&n.prevent,i=n&&n.allow;return r!==!1&&i!==!0&&(r===!0||i===!1||(r?r[t]:i?!i[t]:e.preventDefault()))}function cl(e,t,n){var r,i=this,a=new Ce(n),o=function(n,r){e===rk&&ll(i,t)&&n.preventDefault();try{a.receive(ul(i,n,r))}catch(o){i.error(o)}finally{i.run()}};if(e===ik)i.timer(o,t);else if(e===rk)i.addEventListener(t,o,ok);else if(e===ak?"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a}function dl(e){return e.item}function hl(e){var t=e.item.mark.source;return t.source||t}function pl(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function gl(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",dl),hl,pl(e)),this.on(this.events("view","mouseout",dl),hl,pl(t)),this}function ml(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=a.length;--e>=0;)for(n=a[e],t=n.sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this}function vl(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}function yl(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&(i.source=!0,e.signal(r.signal,t).run())}},r.debounce&&(i.update=G(r.debounce,i.update))),bl(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,function(){i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}}function bl(e,t,n,r){var i=vl("div",{class:uk});i.appendChild(vl("span",{class:sk},n.name||n.signal)),t.appendChild(i);var a=_l;switch(n.input){case"checkbox":a=xl;break;case"select":a=wl;break;case"radio":a=kl;break;case"range":a=Ml}a(e,i,n,r)}function _l(e,t,n,r){var i=vl("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",function(){e.update(i.value)}),e.elements=[i],e.set=function(e){i.value=e}}function xl(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=vl("input",i);t.appendChild(a),a.addEventListener("change",function(){e.update(a.checked)}),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function wl(e,t,n,r){var i=vl("select",{name:n.signal});n.options.forEach(function(e){var t={value:e};El(e,r)&&(t.selected=!0),i.appendChild(vl("option",t,e+""))}),t.appendChild(i),i.addEventListener("change",function(){e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(El(n.options[t],e))return void(i.selectedIndex=t)}}function kl(e,t,n,r){var i=vl("span",{class:fk});t.appendChild(i),e.elements=n.options.map(function(t){var a=lk+n.signal+"-"+t,o={id:a,type:"radio",name:n.signal,value:t};El(t,r)&&(o.checked=!0);var u=vl("input",o);return u.addEventListener("change",function(){e.update(t)}),i.appendChild(u),i.appendChild(vl("label",{for:a},t+"")),u}),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)El(n[r].value,t)&&(n[r].checked=!0)}}function Ml(e,t,n,r){function i(){l.textContent=f.value,e.update(+f.value)}r=void 0!==r?r:(+n.max+ +n.min)/2;var o=n.min||Math.min(0,+r)||0,u=n.max||Math.max(100,+r)||100,s=n.step||a.tickStep(o,u,100),f=vl("input",{type:"range",name:n.signal,min:o,max:u,step:s});f.value=r;var l=vl("label",{},+r);t.appendChild(f),t.appendChild(l),f.addEventListener("input",i),f.addEventListener("change",i),e.elements=[f],e.set=function(e){f.value=e,l.textContent=e}}function El(e,t){return e===t||e+""==t+""}function Ol(e,t,n,r,i){return t=t||new r(e.loader()),t.initialize(n,rl(e),il(e),al(e),i).background(e._background)}function Sl(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Al(e,t,n,r){var i=new r(e.loader(),Sl(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,al(e),e);return t&&t.handlers().forEach(function(e){i.on(e.type,e.handler)}),i}function Cl(e,t){var n,r,i=this,a=i._renderType,o=po(a);return e=i._el=e?Rl(i,e):null,o||i.error("Unrecognized renderer type: "+a),n=o.handler||Ua,r=e?o.renderer:o.headless,i._renderer=r?Ol(i,i._renderer,e,r):null,i._handler=Al(i,i._handler,e,n),i._redraw=!0,e&&(t=t?Rl(i,t):e.appendChild(vl("div",{class:"vega-bindings"})),i._bind.forEach(function(e){e.param.element&&(e.element=Rl(i,e.param.element))}),i._bind.forEach(function(e){yl(i,e.element||t,e)})),i}function Rl(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}function Tl(e,t,n){var r=po(t),i=r&&r.headless;return i?e.runAsync().then(function(){return Ol(e,null,null,i,n).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)}function zl(e,t){return e!==B_.Canvas&&e!==B_.SVG&&e!==B_.PNG?Promise.reject("Unrecognized image type: "+e):Tl(this,e,t).then(function(t){return e===B_.SVG?Dl(t.svg(),"image/svg+xml"):t.canvas().toDataURL("image/png")})}function Dl(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function Nl(e){return Tl(this,B_.Canvas,e).then(function(e){return e.canvas()})}function Pl(e){return Tl(this,B_.SVG,e).then(function(e){return e.svg()})}function $l(e,t){return e=e||t.autosize,E(e)?e:(e=e||"pad",{type:e})}function Ll(e,t){return e=e||t.padding,E(e)?{top:ql(e.top),bottom:ql(e.bottom),left:ql(e.left),right:ql(e.right)}:jl(ql(e))}function ql(e){return+e||0}function jl(e){return{top:e,bottom:e,left:e,right:e}}function Fl(e,t){k(e+' for "outer" push: '+S(t))}function Ul(e,t){var n=e.name;if(e.push===ck)t.signals[n]||Fl("No prior signal definition",n),dk.forEach(function(t){void 0!==e[t]&&Fl("Invalid property ",t)});else{var r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Il(e){this.type=e}function Bl(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}function Wl(e,t){if(!e)throw new Error("ASSERT: "+t)}function Vl(e){return e>=48&&e<=57}function Hl(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Yl(e){return"01234567".indexOf(e)>=0}function Gl(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Xl(e){return 10===e||13===e||8232===e||8233===e}function Zl(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&Zk.test(String.fromCharCode(e))}function Jl(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&Jk.test(String.fromCharCode(e))}function Ql(){for(var e;gk<mk&&(e=pk.charCodeAt(gk),Gl(e)||Xl(e));)++gk}function Kl(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)gk<mk&&Hl(pk[gk])?(r=pk[gk++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):Sc({},qk,Gk);return String.fromCharCode(i)}function ec(){var e,t,n,r;for(e=pk[gk],t=0,"}"===e&&Sc({},qk,Gk);gk<mk&&(e=pk[gk++],Hl(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&Sc({},qk,Gk),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function tc(){var e,t;for(e=pk.charCodeAt(gk++),t=String.fromCharCode(e),92===e&&(117!==pk.charCodeAt(gk)&&Sc({},qk,Gk),++gk,e=Kl("u"),e&&"\\"!==e&&Zl(e.charCodeAt(0))||Sc({},qk,Gk),t=e);gk<mk&&(e=pk.charCodeAt(gk),Jl(e));)++gk,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==pk.charCodeAt(gk)&&Sc({},qk,Gk),++gk,e=Kl("u"),e&&"\\"!==e&&Jl(e.charCodeAt(0))||Sc({},qk,Gk),t+=e);return t}function nc(){var e,t;for(e=gk++;gk<mk;){if(t=pk.charCodeAt(gk),92===t)return gk=e,tc();if(!Jl(t))break;++gk}return pk.slice(e,gk)}function rc(){var e,t,n;return e=gk,t=92===pk.charCodeAt(gk)?tc():nc(),n=1===t.length?_k:Qk.hasOwnProperty(t)?xk:"null"===t?wk:"true"===t||"false"===t?yk:_k,{type:n,value:t,start:e,end:gk}}function ic(){var e,t,n,r,i=gk,a=pk.charCodeAt(gk),o=pk[gk];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++gk,{type:Mk,value:String.fromCharCode(a),start:i,end:gk};default:if(e=pk.charCodeAt(gk+1),61===e)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return gk+=2,{type:Mk,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:gk};case 33:case 61:return gk+=2,61===pk.charCodeAt(gk)&&++gk,{type:Mk,value:pk.slice(i,gk),start:i,end:gk}}}return r=pk.substr(gk,4),">>>="===r?(gk+=4,{type:Mk,value:r,start:i,end:gk}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(gk+=3,{type:Mk,value:n,start:i,end:gk}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(gk+=2,{type:Mk,value:t,start:i,end:gk}):"<>=!+-*%&|^/".indexOf(o)>=0?(++gk,{type:Mk,value:o,start:i,end:gk}):void Sc({},qk,Gk)))}function ac(e){for(var t="";gk<mk&&Hl(pk[gk]);)t+=pk[gk++];return 0===t.length&&Sc({},qk,Gk),Zl(pk.charCodeAt(gk))&&Sc({},qk,Gk),{type:kk,value:parseInt("0x"+t,16),start:e,end:gk}}function oc(e){for(var t="0"+pk[gk++];gk<mk&&Yl(pk[gk]);)t+=pk[gk++];return(Zl(pk.charCodeAt(gk))||Vl(pk.charCodeAt(gk)))&&Sc({},qk,Gk),{type:kk,value:parseInt(t,8),octal:!0,start:e,end:gk}}function uc(){var e,t,n;if(n=pk[gk],Wl(Vl(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=gk,e="","."!==n){if(e=pk[gk++],n=pk[gk],"0"===e){if("x"===n||"X"===n)return++gk,ac(t);if(Yl(n))return oc(t);n&&Vl(n.charCodeAt(0))&&Sc({},qk,Gk)}for(;Vl(pk.charCodeAt(gk));)e+=pk[gk++];n=pk[gk]}if("."===n){for(e+=pk[gk++];Vl(pk.charCodeAt(gk));)e+=pk[gk++];n=pk[gk]}if("e"===n||"E"===n)if(e+=pk[gk++],n=pk[gk],"+"!==n&&"-"!==n||(e+=pk[gk++]),Vl(pk.charCodeAt(gk)))for(;Vl(pk.charCodeAt(gk));)e+=pk[gk++];else Sc({},qk,Gk);return Zl(pk.charCodeAt(gk))&&Sc({},qk,Gk),{type:kk,value:parseFloat(e),start:t,end:gk}}function sc(){var e,t,n,r,i="",a=!1;for(e=pk[gk],Wl("'"===e||'"'===e,"String literal must starts with a quote"),t=gk,++gk;gk<mk;){if(n=pk[gk++],n===e){e="";break}if("\\"===n)if(n=pk[gk++],n&&Xl(n.charCodeAt(0)))"\r"===n&&"\n"===pk[gk]&&++gk;else switch(n){case"u":case"x":"{"===pk[gk]?(++gk,i+=ec()):i+=Kl(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:Yl(n)?(r="01234567".indexOf(n),0!==r&&(a=!0),gk<mk&&Yl(pk[gk])&&(a=!0,r=8*r+"01234567".indexOf(pk[gk++]),"0123".indexOf(n)>=0&&gk<mk&&Yl(pk[gk])&&(r=8*r+"01234567".indexOf(pk[gk++]))),i+=String.fromCharCode(r)):i+=n}else{if(Xl(n.charCodeAt(0)))break;i+=n}}return""!==e&&Sc({},qk,Gk),{type:Ek,value:i,octal:a,start:t,end:gk}}function fc(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void Sc({},Wk)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{}catch(r){Sc({},Wk)}try{return new RegExp(e,t)}catch(i){return null}}function lc(){var e,t,n,r,i;for(e=pk[gk],Wl("/"===e,"Regular expression literal must start with a slash"),t=pk[gk++],n=!1,r=!1;gk<mk;)if(e=pk[gk++],t+=e,"\\"===e)e=pk[gk++],Xl(e.charCodeAt(0))&&Sc({},Vk),t+=e;else if(Xl(e.charCodeAt(0)))Sc({},Vk);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||Sc({},Vk),i=t.substr(1,t.length-2),{value:i,literal:t}}function cc(){var e,t,n;for(t="",n="";gk<mk&&(e=pk[gk],Jl(e.charCodeAt(0)));)++gk,"\\"===e&&gk<mk?Sc({},qk,Gk):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Sc({},Wk,n),{value:n,literal:t}}function dc(){var e,t,n,r;return vk=null,Ql(),e=gk,t=lc(),n=cc(),r=fc(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:gk}}function hc(e){return e.type===_k||e.type===xk||e.type===yk||e.type===wk}function pc(){var e;return Ql(),gk>=mk?{type:bk,start:gk,end:gk}:(e=pk.charCodeAt(gk),Zl(e)?rc():40===e||41===e||59===e?ic():39===e||34===e?sc():46===e?Vl(pk.charCodeAt(gk+1))?uc():ic():Vl(e)?uc():ic())}function gc(){var e;return e=vk,gk=e.end,vk=pc(),gk=e.end,e}function mc(){var e;e=gk,vk=pc(),gk=e}function vc(e){var t=new Il(Sk);return t.elements=e,t}function yc(e,t,n){var r=new Il("||"===e||"&&"===e?Dk:Ak);return r.operator=e,r.left=t,r.right=n,r}function bc(e,t){var n=new Il(Ck);return n.callee=e,n.arguments=t,n}function _c(e,t,n){var r=new Il(Rk);return r.test=e,r.consequent=t,r.alternate=n,r}function xc(e){var t=new Il(Tk);return t.name=e,t}function wc(e){var t=new Il(zk);return t.value=e.value,t.raw=pk.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function kc(e,t,n){var r=new Il(Nk);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function Mc(e){var t=new Il(Pk);return t.properties=e,t}function Ec(e,t,n){var r=new Il($k);return r.key=t,r.value=n,r.kind=e,r}function Oc(e,t){var n=new Il(Lk);return n.operator=e,n.argument=t,n.prefix=!0,n}function Sc(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return Wl(t<r.length,"Message reference must be in range"),r[t]});throw n=new Error(i),n.index=gk,n.description=i,n}function Ac(e){e.type===bk&&Sc(e,Bk),e.type===kk&&Sc(e,jk),e.type===Ek&&Sc(e,Fk),e.type===_k&&Sc(e,Uk),e.type===xk&&Sc(e,Ik),Sc(e,qk,e.value)}function Cc(e){var t=gc();t.type===Mk&&t.value===e||Ac(t)}function Rc(e){return vk.type===Mk&&vk.value===e}function Tc(e){return vk.type===xk&&vk.value===e}function zc(){var e=[];for(gk=vk.start,Cc("[");!Rc("]");)Rc(",")?(gc(),e.push(null)):(e.push(Yc()),Rc("]")||Cc(","));return gc(),vc(e)}function Dc(){var e;return gk=vk.start,e=gc(),e.type===Ek||e.type===kk?(e.octal&&Sc(e,Hk),wc(e)):xc(e.value)}function Nc(){var e,t,n,r;return gk=vk.start,e=vk,e.type===_k?(n=Dc(),Cc(":"),r=Yc(),Ec("init",n,r)):e.type!==bk&&e.type!==Mk?(t=Dc(),Cc(":"),r=Yc(),Ec("init",t,r)):void Ac(e)}function Pc(){var e,t,n,r=[],i={},a=String;for(gk=vk.start,Cc("{");!Rc("}");)e=Nc(),t=e.key.type===Tk?e.key.name:a(e.key.value),n="$"+t,Object.prototype.hasOwnProperty.call(i,n)?Sc({},Yk):i[n]=!0,r.push(e),Rc("}")||Cc(",");return Cc("}"),Mc(r)}function $c(){var e;return Cc("("),e=Gc(),Cc(")"),e}function Lc(){var e,t,n;if(Rc("("))return $c();if(Rc("["))return zc();if(Rc("{"))return Pc();if(e=vk.type,gk=vk.start,e===_k||Kk[vk.value])n=xc(gc().value);else if(e===Ek||e===kk)vk.octal&&Sc(vk,Hk),n=wc(gc());else{if(e===xk)throw new Error(Xk);e===yk?(t=gc(),t.value="true"===t.value,n=wc(t)):e===wk?(t=gc(),t.value=null,n=wc(t)):Rc("/")||Rc("/=")?(n=wc(dc()),mc()):Ac(gc())}return n}function qc(){var e=[];if(Cc("("),!Rc(")"))for(;gk<mk&&(e.push(Yc()),!Rc(")"));)Cc(",");return Cc(")"),e}function jc(){var e;return gk=vk.start,e=gc(),hc(e)||Ac(e),xc(e.value)}function Fc(){return Cc("."),jc()}function Uc(){var e;return Cc("["),e=Gc(),Cc("]"),e}function Ic(){var e,t,n;for(e=Lc();;)if(Rc("."))n=Fc(),e=kc(".",e,n);else if(Rc("("))t=qc(),e=bc(e,t);else{if(!Rc("["))break;n=Uc(),e=kc("[",e,n)}return e}function Bc(){var e=Ic();if(vk.type===Mk&&(Rc("++")||Rc("--")))throw new Error(Xk);return e}function Wc(){var e,t;if(vk.type!==Mk&&vk.type!==xk)t=Bc();else{if(Rc("++")||Rc("--"))throw new Error(Xk);if(Rc("+")||Rc("-")||Rc("~")||Rc("!"))e=gc(),t=Wc(),t=Oc(e.value,t);else{if(Tc("delete")||Tc("void")||Tc("typeof"))throw new Error(Xk);t=Bc()}}return t}function Vc(e){var t=0;if(e.type!==Mk&&e.type!==xk)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Hc(){var e,t,n,r,i,a,o,u,s,f;if(e=vk,s=Wc(),r=vk,i=Vc(r),0===i)return s;for(r.prec=i,gc(),t=[e,vk],o=Wc(),a=[s,r,o];(i=Vc(vk))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=yc(u,s,o),a.push(n);r=gc(),r.prec=i,a.push(r),t.push(vk),n=Wc(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=yc(a[f-1].value,a[f-2],n),f-=2;return n}function Yc(){var e,t,n;return e=Hc(),Rc("?")&&(gc(),t=Yc(),Cc(":"),n=Yc(),e=_c(e,t,n)),e}function Gc(){var e=Yc();if(Rc(","))throw new Error(Xk);return e}function Xc(e){pk=e,gk=0,mk=pk.length,vk=null,mc();var t=Gc();if(vk.type!==bk)throw new Error("Unexpect token after expression.");return t}function Zc(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&k("Missing arguments to clamp function."),t.length>3&&k("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),replace:n("replace",i),regexp:a,test:n("test",a),if:function(t){t.length<3&&k("Missing arguments to if function."),t.length>3&&k("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function Jc(e){function t(e){if(O(e))return e;var t=h[e.type];return null==t&&k("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(f),fields:Object.keys(l)};return f={},l={},n}e=e||{};var r=e.whitelist?ce(e.whitelist):{},i=e.blacklist?ce(e.blacklist):{},a=e.constants||eM,o=(e.functions||Zc)(t),u=e.globalvar,s=e.fieldvar,f={},l={},c=0,d=V(u)?u:function(e){return u+'["'+e+'"]'},h={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return c>0?t:i.hasOwnProperty(t)?k("Illegal identifier: "+t):a.hasOwnProperty(t)?a[t]:r.hasOwnProperty(t)?t:(f[t]=1,d(t))},MemberExpression:function(e){var n=!e.computed,r=t(e.object);n&&(c+=1);var i=t(e.property);return r===s&&(l[i]=1),n&&(c-=1),r+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&k("Illegal callee type: "+e.callee.type);var n=e.callee.name,r=e.arguments,i=o.hasOwnProperty(n)&&o[n];return i||k("Unrecognized function: "+n),V(i)?i(r):i+"("+r.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){c+=1;var n=t(e.key);return c-=1,n+":"+t(e.value)}};return n.functions=o,n.constants=a,n}function Qc(e,t,n){var r=e+":"+n,i=tM[r];return i&&i[0]===t||(tM[r]=i=[t,t(n)]),i[1]}function Kc(e,t){return Qc("format",d.format,t)(e)}function ed(e,t){return Qc("timeFormat",i.timeFormat,t)(e)}function td(e,t){return Qc("utcFormat",i.utcFormat,t)(e)}function nd(e,t){return Qc("timeParse",i.timeParse,t)(e)}function rd(e,t){return Qc("utcParse",i.utcParse,t)(e)}function id(e,t,n){return nM.setMonth(e),nM.setDate(t),ed(nM,n)}function ad(e){return id(e,1,"%B")}function od(e){return id(e,1,"%b")}function ud(e){return id(0,2+e,"%A")}function sd(e){return id(0,2+e,"%a")}function fd(e){return 1+~~(new Date(e).getMonth()/3)}function ld(e){return 1+~~(new Date(e).getUTCMonth()/3)}function cd(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function dd(){return cd(this.context.dataflow,"warn",arguments);
}function hd(){return cd(this.context.dataflow,"info",arguments)}function pd(){return cd(this.context.dataflow,"debug",arguments)}function gd(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function md(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),r=a-i,r>=n-t?[t,n]:[Math.min(Math.max(i,t),n-r),Math.min(Math.max(a,r),n)]}function vd(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function yd(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}function bd(){return rM?rM.screen:{}}function _d(){return rM?[rM.innerWidth,rM.innerHeight]:[void 0,void 0]}function xd(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function wd(e,t,n,r,i,a){var o,u,s=e[0],f=T(e);return f<s&&(o=s,s=f,f=o),o=Math.abs(t-s),u=Math.abs(f-t),o<u&&o<=n?r:u<=n?i:a}function kd(){var e=[].slice.call(arguments);return e.unshift({}),X.apply(null,e)}function Md(e){return e[e.length-1]-e[0]||0}function Ed(e,t){var n;return V(e)?e:O(e)?(n=t.scales[e])&&n.value:void 0}function Od(e,t,n){var r=uM+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(i){}}function Sd(e,t,n,r){if(t[0].type===iM)Od(n,r,t[0].value);else if(t[0].type===aM)for(e in n.scales)Od(n,r,e)}function Ad(e,t){var n=Ed(e,(t||this).context);return n&&n.range?n.range():[]}function Cd(e,t){var n=Ed(e,(t||this).context);return n?n.domain():[]}function Rd(e,t){var n=Ed(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Td(e,t,n){return ru(e||0,t||0,n||0)}function zd(e,t){var n=Ed(e,(t||this).context);return n?n.copy():void 0}function Dd(e,t,n){var r=Ed(e,(n||this).context);return r?r(t):void 0}function Nd(e,t,n){var r=Ed(e,(n||this).context);return r?Zm(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Pd(e,t,n,r,i){e=Ed(e,(i||this).context);var a=gr(t,n),o=e.domain(),u=o[0],s=o[o.length-1],f=vu(e,u,s);e.ticks&&(o=e.ticks(+r||15),u!==o[0]&&o.unshift(u),s!==o[o.length-1]&&o.push(s));for(var l=0,c=o.length;l<c;++l)a.stop(f(o[l]),e(o[l]));return a}function $d(e,t){return function(n,r,i){if(n){var a=Ed(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}function Ld(e,t,n){var r=Ed(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}function qd(e){var t=null;return function(n){return n?zr(n,t=t||Ar(e)):e}}function jd(e){var t=this.context.data[e];return t?t.values.value:[]}function Fd(e,t,n,r){t[0].type!==iM&&k("First argument to data functions must be a string literal.");var i=t[0].value,a=sM+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function Ud(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}function Id(e,t,n,r){t[0].type!==iM&&k("First argument to indata must be a string literal."),t[1].type!==iM&&k("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,o=oM+a;r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,a))}function Bd(e,t){var n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(nv).insert(t)),1}function Wd(e){return e.data}function Vd(e,t){var n=jd.call(t,e);return n.root&&n.root.lookup||dM}function Hd(e,t,n){var r=Vd(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(Wd):void 0}function Yd(e,t){var n=Vd(e,this)[t];return n?n.ancestors().map(Wd):void 0}function Gd(e,t,n,r){var i,a=t[0],o=t[t.length-1];return a>o&&(i=a,a=o,o=i),n=void 0===n||n,r=void 0===r||r,(n?a<=e:a<e)&&(r?e<=o:e<o)}function Xd(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e}function Zd(e,t){return e===t||e!==e&&t!==t||!(!Zm(e)||!Zm(t)||e.length!==t.length)&&Jd(e,t)}function Jd(e,t){for(var n=0,r=e.length;n<r;++n)if(!Zd(e[n],t[n]))return!1;return!0}function Qd(e){return function(t){for(var n in e)if(!Zd(t[n],e[n]))return!1;return!0}}function Kd(e,t,n,r,i,a){var o,u,s=this.context.dataflow,f=this.context.data[e],l=f.input,c=f.changes,d=s.stamp();if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<d)&&(f.changes=c=s.changeset(),c.stamp=d,s.runAfter(function(){f.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(o=n===!0?nv:Zm(n)||ge(n)?n:Qd(n),c.remove(o)),t&&c.insert(t),r&&(o=Qd(r),l.value.some(o)?c.remove(o):c.insert(r)),i)for(u in a)c.modify(i,u,a[u]);return 1}function eh(e,t){for(var n,r=t.fields,i=t.values,a=t.getter||(t.getter=[]),o=r.length,u=0;u<o;++u)if(a[u]=a[u]||A(r[u]),n=a[u](e),ee(n)&&(n=z(n)),ee(i[u])&&(i[u]=z(i[u])),t[hM+r[u]]){if(ee(i[u][0])&&(i[u]=i[u].map(z)),!Gd(n,i[u],!0,!1))return!1}else if(n!==i[u])return!1;return!0}function th(e,t){for(var n,r,i,a=t.intervals,o=a.length,u=0;u<o;++u){if(r=a[u].extent,n=a[u].getter||(a[u].getter=A(a[u].field)),i=n(e),!r||r[0]===r[1])return!1;if(ee(i)&&(i=z(i)),ee(r[0])&&(r=a[u].extent=r.map(z)),te(r[0])&&!Gd(i,r))return!1;if(O(r[0])&&r.indexOf(i)<0)return!1}return!0}function nh(e,t,n,r){for(var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=f?f[mM]&&f[mM].value:void 0,d=n===pM,h=l.length,p=0;p<h;++p)if(i=l[p],c&&d){if(a=a||{},o=a[u=i.unit]||0,o===-1)continue;if(s=r(t,i),a[u]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(u).count)return!1}else if(s=r(t,i),d^s)return s;return h&&d}function rh(e,t,n){return nh.call(this,e,t,n,eh)}function ih(e,t,n){return nh.call(this,e,t,n,th)}function ah(e,t,n,r){t[0].type!==iM&&k("First argument to indata must be a string literal.");var i=t[0].value,a=t.length>=2&&t[t.length-1].value,o="unit",u=oM+o;a!==pM||r.hasOwnProperty(u)||(r[u]=n.getData(i).indataRef(n,o)),Fd(e,t,n,r)}function oh(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=f?f[mM]&&f[mM].value:void 0,d=l[0],h=0;if(d){for(i=t?d.encodings.length:d.fields.length;h<i;++h)if(t&&d.encodings[h]===t||n&&d.fields[h]===n){a=h,u=d[hM+d.fields[h]];break}return c&&1===c.size&&(r=gM),c&&r===pM?(s=l.reduce(function(e,t){var n=e[t.unit]||(e[t.unit]=[]);return n.push({unit:t.unit,value:t.values[a]}),e},{}),o=Object.keys(s).map(function(e){return{unit:e,value:u?fh(s[e],gM):sh(s[e],gM)}})):o=l.map(function(e){return{unit:e.unit,value:e.values[a]}}),u?fh(o,r):sh(o,r)}}function uh(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=l[0],d=0;if(c){for(i=c.intervals.length;d<i;++d)if(a=c.intervals[d],t&&a.encoding===t||n&&a.field===n){if(!a.extent)return;o=d,s=a.extent.length>2;break}return u=l.reduce(function(e,t){var n=t.intervals[o].extent,r=s?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return s?e.push.apply(e,r):e.push(r),e},[]),s?sh(u,r):fh(u,r)}}function sh(e,t){for(var n,r,i,a,o={},u=0,s={},f=[],l=0,c=e.length;l<c;++l)n=e[l],r=n.unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],t===pM&&i.count!==u||f.push(i.value);return f.length?f:void 0}function fh(e,t){for(var n,r,i,a,o=t===pM?ch:lh,u=0,s=e.length;u<s;++u)n=e[u].value,ee(n[0])&&(n=n.map(z)),i=n[0],a=n[1],i>a&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!==+r[1]?r:void 0}function lh(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function ch(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function dh(e,t,n){return 1===arguments.length?vM[e]:(vM[e]=t,n&&(xM[e]=n),EM&&(EM.functions[e]=_M+e),this)}function hh(e){var t=Zc(e);yM.forEach(function(e){t[e]=bM+e});for(var n in vM)t[n]=_M+n;return t}function ph(e,t,n){var r,i,a={};try{e=O(e)?e:S(e)+"",r=Xc(e)}catch(o){k("Expression parse error: "+e)}return r.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,r=MM.visitors[n];r&&r(n,e.arguments,t,a)}}),i=EM(r),i.globals.forEach(function(e){var n=OM+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}}function gh(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function mh(e,t,n,r){return new gh(e,t,n,r)}function vh(e,t){return mh("operator",e,t)}function yh(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function bh(e,t){return t?{$field:e,$name:t}:{$field:e}}function _h(e,t){return{$compare:e,$order:t}}function xh(e,t){var n={$key:e};return t&&(n.$flat=!0),n}function wh(e){return E(e)?(e.order===RM?"-":"+")+kh(e.op,e.field):""}function kh(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function Mh(e){return e&&e.signal}function Eh(e,t){return null!=e?e:t}function Oh(e){return e&&e.signal||e}function Sh(e,t){var n=e.merge?Ch:e.stream?Rh:e.type?Th:k("Invalid stream specification: "+S(e));return n(e,t)}function Ah(e){return e===TM?zM:e||zM}function Ch(e,t){var n=e.merge.map(function(e){return Sh(e,t)}),r=zh({merge:n},e,t);return t.addStream(r).id}function Rh(e,t){var n=Sh(e.stream,t),r=zh({stream:n},e,t);return t.addStream(r).id}function Th(e,t){var n,r;return e.type===DM?(n=t.event(DM,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Ah(e.source),e.type),r=zh({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function zh(e,t,n){var r=t.between;return r&&(2!==r.length&&k('Stream "between" parameter must have 2 entries: '+S(t)),e.between=[Sh(r[0],n),Sh(r[1],n)]),r=t.filter?W(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Dh(t.marktype,t.markname,t.markrole)),t.source===TM&&r.push("inScope(event.item)"),r.length&&(e.filter=ph("("+r.join(")&&(")+")").$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Dh(e,t,n){var r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}function Nh(e,t,n){return wM=t||NM,kM=n||WM,Lh(e.trim()).map(qh)}function Ph(e){return kM.hasOwnProperty(e)}function $h(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Lh(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=$h(e,i,FM,PM+LM,$M+qM),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function qh(e){return"["===e[0]?jh(e):Fh(e)}function jh(e){var t,n,r=e.length,i=1;if(i=$h(e,i,$M,PM,$M),i===r)throw"Empty between selector: "+e;if(t=Lh(e.substring(1,i)),2!==t.length)throw"Between selector must have two elements: "+e;if(e=e.slice(i+1).trim(),e[0]!==IM)throw"Expected '>' after between selector: "+e;return t=t.map(qh),n=qh(e.slice(1).trim()),n.between?{between:t,stream:n}:(n.between=t,n)}function Fh(e){var t,n,r={source:wM},i=[],a=[0,0],o=0,u=0,s=e.length,f=0;if(e[s-1]===qM){if(f=e.lastIndexOf(LM),!(f>=0))throw"Unmatched right brace: "+e;try{a=Uh(e.substring(f+1,s-1))}catch(l){throw"Invalid throttle specification: "+e}e=e.slice(0,f).trim(),s=e.length,f=0}if(!s)throw e;if(e[0]===UM&&(o=++f),t=$h(e,f,jM),t<s&&(i.push(e.substring(u,t).trim()),u=f=++t),f=$h(e,f,PM),f===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,f).trim()),n=[],u=++f,u===s)throw"Unmatched left bracket: "+e;for(;f<s;){if(f=$h(e,f,$M),f===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,f).trim()),f<s-1&&e[++f]!==PM)throw"Expected left bracket: "+e;u=++f}if(!(s=i.length)||BM.test(i[s-1]))throw"Invalid event selector: "+e;return s>1?(r.type=i[1],o?r.markname=i[0].slice(1):Ph(i[0])?r.marktype=i[0]:r.source=i[0]):r.type=i[0],"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}function Uh(e){var t=e.split(FM);if(!e.length||t.length>2)throw e;return t.map(function(t){var n=+t;if(n!==n)throw e;return n})}function Ih(e,t,n){var r,i=e.events,a=e.update,o=e.encode,u=[],s="";i||k("Signal update missing events specification."),O(i)&&(i=Nh(i,t.isSubscope()?TM:zM)),i=W(i).filter(function(e){return e.signal||e.scale?(u.push(e),0):1}),i.length&&u.push(i.length>1?{merge:i}:i[0]),null!=o&&(a&&k("Signal encode and update are mutually exclusive."),a="encode(item(),"+S(o)+")"),s=O(a)?ph(a,t,VM):null!=a.expr?ph(a.expr,t,VM):null!=a.value?a.value:null!=a.signal?{$expr:"_.value",$params:{value:t.signalRef(a.signal)}}:k("Invalid signal update specification."),r={target:n,update:s},e.force&&(r.options={force:!0}),u.forEach(function(e){t.addUpdate(X(Bh(e,t),r))})}function Bh(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Sh(e,t)}}function Wh(e,t){var n=t.getSignal(e.name);if(e.update){var r=ph(e.update,t);n.update=r.$expr,n.params=r.$params}e.on&&e.on.forEach(function(e){Ih(e,t,n.id)})}function Vh(e){return function(t,n,r){return mh(e,n,t||void 0,r)}}function Hh(e){return kE.hasOwnProperty(e)}function Yh(e){return xE.hasOwnProperty(e)}function Gh(e){return wE.hasOwnProperty(e)}function Xh(e){return"quantile"===e}function Zh(e,t){var n=e.type||"linear";_E.hasOwnProperty(n)||k("Unrecognized scale type: "+S(n)),t.addScale(e.name,{type:n,domain:void 0})}function Jh(e,t){var n,r=t.getScale(e.name).params;r.domain=tp(e.domain,e,t),null!=e.range&&(r.range=dp(e,t,r)),null!=e.interpolate&&cp(e.interpolate,r),null!=e.nice&&lp(e.nice,r);for(n in e)r.hasOwnProperty(n)||"name"===n||(r[n]=Qh(e[n],t))}function Qh(e,t){return E(e)?e.signal?t.signalRef(e.signal):k("Unsupported object: "+S(e)):e}function Kh(e,t){return e.signal?t.signalRef(e.signal):e.map(function(e){return Qh(e,t)})}function ep(e){k("Can not find data set: "+S(e))}function tp(e,t,n){return e?e.signal?n.signalRef(e.signal):(Zm(e)?np:e.fields?ip:rp)(e,t,n):void(null==t.domainMin&&null==t.domainMax||k("No scale domain defined for domainMin/domainMax to override."))}function np(e,t,n){return e.map(function(e){return Qh(e,n)})}function rp(e,t,n){var r=n.getData(e.data);return r||ep(e.data),Hh(t.type)?r.valuesRef(n,e.field,up(e.sort,!1)):Xh(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function ip(e,t,n){var r=e.data,i=e.fields.reduce(function(e,t){return t=O(t)?{data:r,field:t}:Zm(t)||t.signal?ap(t,n):t,e.push(t),e},[]);return(Hh(t.type)?op:Xh(t.type)?sp:fp)(e,n,i)}function ap(e,t){var n="_:vega:_"+yE++,r=XM({});if(Zm(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+S(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,pE({})]),{data:n,field:"data"}}function op(e,t,n){var r,i,a,o;return r=n.map(function(e){var n=t.getData(e.data);return n||ep(e.data),n.countsRef(t,e.field)}),i=t.add(HM({groupby:AM,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:r})),a=t.add(XM({pulse:yh(i)})),o=t.add(vE({field:AM,sort:t.sortRef(up(e.sort,!0)),pulse:yh(a)})),yh(o)}function up(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?k("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&k("Multiple domain scales support op count only."):k("No field provided for sort aggregate op: "+e.op):E(e)?e.field="key":e={field:"key"}),e}function sp(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||ep(e.data),n.domainRef(t,e.field)});return yh(t.add(aE({values:r})))}function fp(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||ep(e.data),n.extentRef(t,e.field)});return yh(t.add(iE({extents:r})))}function lp(e,t){t.nice=E(e)?{interval:Qh(e.interval),step:Qh(e.step)}:Qh(e)}function cp(e,t){t.interpolate=Qh(e.type||e),null!=e.gamma&&(t.interpolateGamma=Qh(e.gamma))}function dp(e,t,n){var r=e.range,i=t.config.range;if(r.signal)return t.signalRef(r.signal);if(O(r)){if(i&&i.hasOwnProperty(r))return e=X({},e,{range:i[r]}),dp(e,t,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=Hh(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:k("Unrecognized scale range value: "+S(r))}else{if(r.scheme)return n.scheme=Qh(r.scheme,t),r.extent&&(n.schemeExtent=Kh(r.extent,t)),void(r.count&&(n.schemeCount=Qh(r.count,t)));if(r.step)return void(n.rangeStep=Qh(r.step,t));if(Hh(e.type)&&!Zm(r))return tp(r,e,t);Zm(r)||k("Unsupported range type: "+S(r))}return r.map(function(e){return Qh(e,t)})}function hp(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=pp(e[r],r,t));t.addProjection(e.name,n)}function pp(e,t,n){return Zm(e)?e.map(function(e){return pp(e,t,n)}):E(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:k("Unsupported parameter object: "+S(e)):e}function gp(e,t){var n="";return YE[t]?n:(e.x2&&(e.x?(GE[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(GE[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)}function mp(e,t,n,r){function i(e,i,a,o){var u=Ep(null,i,t,n,r),s=Ep(null,a,t,n,r),f=Ep(null,o,t,n,r);return"this."+e+"("+[u,s,f].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null}function vp(e,t,n,r){var i=ph(e,t);return i.$fields.forEach(function(e){r[e]=1}),X(n,i.$params),i.$expr}function yp(e,t,n,r){return bp(E(e)?e:{datum:e},t,n,r)}function bp(e,t,n,r){var i,a,o;if(e.signal)i="datum",o=vp(e.signal,t,n,r);else if(e.group||e.parent){for(a=Math.max(1,e.level||1),i="item";a-- >0;)i+=".mark.group";e.parent?(o=e.parent,i+=".datum"):o=e.group}else e.datum?(i="datum",o=e.datum):k("Invalid field reference: "+S(e));return e.signal||(O(o)?(r[o]=1,o=M(o).map(S).join("][")):o=bp(o,t,n,r)),i+"["+o+"]"}function _p(e,t,n,r,i){var a,o,u,s=wp(e.scale,n,r,i);return null!=e.range?(a=+e.range,o=s+".range()",t=0===a?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=s+"("+t+")"),e.band&&(u=xp(e.scale,n))&&(o=s+".bandwidth",a=+e.band,a=o+"()"+(1===a?"":"*"+a),u<0&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+s+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t}function xp(e,t){if(!O(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}function wp(e,t,n,r){var i;if(O(e))i=uM+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=S(i);else{for(i in t.scales)n[uM+i]=t.scaleRef(i);i=S(uM)+"+"+(e.signal?"("+vp(e.signal,t,n,r)+")":yp(e,t,n,r))}return"_["+i+"]"}function kp(e,t,n,r){return"this.gradient("+wp(e.gradient,t,n,r)+","+S(e.start)+","+S(e.stop)+","+S(e.count)+")"}function Mp(e,t,n,r){return E(e)?"("+Ep(null,e,t,n,r)+")":e}function Ep(e,t,n,r,i){if(null!=t.gradient)return kp(t,n,r,i);var a=t.signal?vp(t.signal,n,r,i):t.color?mp(t.color,n,r,i):null!=t.field?yp(t.field,n,r,i):void 0!==t.value?S(t.value):void 0;return null!=t.scale&&(a=_p(t,a,n,r,i)),void 0===a&&(a=null),null!=t.exponent&&(a="Math.pow("+a+","+Mp(t.exponent,n,r,i)+")"),null!=t.mult&&(a+="*"+Mp(t.mult,n,r,i)),null!=t.offset&&(a+="+"+Mp(t.offset,n,r,i)),t.round&&(a="Math.round("+a+")"),a}function Op(e,t,n){return e+"["+S(t)+"]="+n+";"}function Sp(e,t,n,r,i){var a="";return t.forEach(function(t){var o=Ep(e,t,n,r,i);a+=t.test?vp(t.test,n,r,i)+"?"+o+":":o}),Op("o",e,a)}function Ap(e,t,n,r){var i,a,o,u={},s="var o=item,datum=o.datum,$;";for(i in e)a=e[i],Zm(a)?s+=Sp(i,a,r,n,u):(o=Ep(i,a,r,n,u),s+=Op("o",i,o));return s+=gp(e,t),s+="return 1;",{$expr:s,$fields:Object.keys(u),$output:Object.keys(e)}}function Cp(e){return E(e)?X({},e):{value:e}}function Rp(e,t,n){return null!=n?(e[t]=E(n)&&!Zm(n)?n:{value:n},1):0}function Tp(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=X(e[r]||{},t[r]));return e}function zp(e,t,n,r,i,a){var o,u;a=a||{},a.encoders={$encode:o={}},e=Dp(e,t,n,r,i.config);for(u in e)o[u]=Ap(e[u],t,a,i);return a}function Dp(e,t,n,r,i){var a,o,u,s={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null),u=n===ZE?i.group:n===XE?X({},i.mark,i[t]):null;for(a in u)o=Pp(a,e)||("fill"===a||"stroke"===a)&&(Pp("fill",e)||Pp("stroke",e)),o||(s[a]=Np(u[a]));return W(r).forEach(function(t){var n=i.style&&i.style[t];for(var r in n)Pp(r,e)||(s[r]=Np(n[r]))}),e=X({},e),e.enter=X(s,e.enter),e}function Np(e){return e&&e.signal?{signal:e.signal}:{value:e}}function Pp(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function $p(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:Tp(a,o,HE)}}function Lp(e,t,n){return Eh(t[e],n[e])}function qp(e,t){return Eh(e.direction,t)===CE}function jp(e,t){return Eh(e.gradientLength,t.gradientLength||t.gradientWidth)}function Fp(e,t){return Eh(e.gradientThickness,t.gradientThickness||t.gradientHeight)}function Up(e,t){return Eh(e.columns,Eh(t.columns,+qp(e,t.symbolDirection)))}function Ip(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Bp(e,t,n){var r=t.config.style[n];return r&&r[e]}function Wp(e,t,n,r){var i,a,o,u,s,f,l={value:0},c=qp(e,n.gradientDirection),d=Fp(e,n),h=jp(e,n),p={};return c?(o=[0,1],u=[0,0],s=d,f=h):(o=[0,0],u=[1,0],s=h,f=d),p.enter=i={opacity:l,x:l,y:l},Rp(i,"stroke",Lp("gradientStrokeColor",e,n)),Rp(i,"strokeWidth",Lp("gradientStrokeWidth",e,n)),p.exit={opacity:l},p.update=a={x:l,y:l,fill:{gradient:t,start:o,stop:u},opacity:{value:1}},i.width=a.width=Cp(s),i.height=a.height=Cp(f),$p(hO,uO,null,void 0,void 0,p,r)}function Vp(e,t,n,r,i){var a,o,u,s,f,l,c={value:0},d=qp(e,n.gradientDirection),h=Fp(e,n),p=jp(e,n),g={},m="";return d?(u="y",f="y2",s="x",l="width",m="1-"):(u="x",f="x2",s="y",l="height"),g.enter=a={opacity:c},Rp(a,"stroke",Lp("gradientStrokeColor",e,n)),Rp(a,"strokeWidth",Lp("gradientStrokeWidth",e,n)),g.exit={opacity:c},g.update=o={opacity:{value:1}},a.fill=o.fill={scale:t,field:qE},a[u]=o[u]={signal:m+"datum."+PE,mult:p},a[s]=o[s]={value:0},a[f]=o[f]={signal:m+"datum."+$E,mult:p},a[l]=o[l]=Cp(h),$p(hO,aO,null,qE,i,g,r)}function Hp(e,t,n,r){var i,a,o,u,s={value:0},f=qp(e,t.gradientDirection),l=Cp(Fp(e,t)),c=jp(e,t),d=Lp("labelOverlap",e,t),h={},p="";return h.enter=i={opacity:s},Rp(i,"fill",Lp("labelColor",e,t)),Rp(i,"font",Lp("labelFont",e,t)),Rp(i,"fontSize",Lp("labelFontSize",e,t)),Rp(i,"fontWeight",Lp("labelFontWeight",e,t)),Rp(i,"limit",Eh(e.labelLimit,t.gradientLabelLimit)),h.exit={opacity:s},h.update=a={opacity:{value:1},text:{field:DE}},f?(i.align={value:"left"},i.baseline=a.baseline={signal:yO},o="y",u="x",p="1-"):(i.align=a.align={signal:vO},i.baseline={value:"top"},o="x",u="y"),i[o]=a[o]={signal:p+"datum."+PE,mult:c},i[u]=a[u]=l,l.offset=Eh(e.labelOffset,t.gradientLabelOffset)||0,e=$p(mO,sO,jE,qE,r,h,n),d&&(e.overlap={method:d,order:"datum."+zE}),e}function Yp(e,t,n,r,i,a,o,u){return{type:dO,name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:u}}function Gp(e,t,n,r,i){var a,o,u,s,f,l,c,d=n.entries,h=!(!d||!d.interactive),p=d?d.name:void 0,g=Lp("clipHeight",e,t),m=Lp("symbolOffset",e,t),v={data:"value"},y={},b=i+"?datum."+NE+":datum."+LE,_=g?Cp(g):{field:LE},x="datum."+zE,w="max(1,"+i+")";return y={enter:a={opacity:bO},exit:{opacity:bO},update:o={opacity:{value:1}}},e.fill||(Rp(a,"fill",t.symbolBaseFillColor),Rp(a,"stroke",t.symbolBaseStrokeColor)),Rp(a,"shape",Lp("symbolType",e,t)),Rp(a,"size",Lp("symbolSize",e,t)),Rp(a,"strokeWidth",Lp("symbolStrokeWidth",e,t)),Rp(a,"fill",Lp("symbolFillColor",e,t)),Rp(a,"stroke",Lp("symbolStrokeColor",e,t)),a.x=o.x={signal:b,mult:.5,offset:m},_.mult=.5,a.y=o.y=_,VE.forEach(function(t){e[t]&&(o[t]=a[t]={scale:e[t],field:qE})}),s=$p(gO,fO,null,qE,v,y,n.symbols),g&&(s.clip=!0),y={enter:a={opacity:bO},exit:{opacity:bO},update:o={opacity:{value:1},text:{field:DE}}},Rp(a,"align",Lp("labelAlign",e,t)),Rp(a,"baseline",Lp("labelBaseline",e,t)),Rp(a,"fill",Lp("labelColor",e,t)),Rp(a,"font",Lp("labelFont",e,t)),Rp(a,"fontSize",Lp("labelFontSize",e,t)),Rp(a,"fontWeight",Lp("labelFontWeight",e,t)),Rp(a,"limit",Lp("labelLimit",e,t)),u=Cp(m),u.offset=Lp("labelOffset",e,t),a.x=o.x={signal:b,offset:u},a.y=o.y=_,f=$p(mO,sO,jE,qE,v,y,n.labels),y={enter:{width:bO,height:g?Cp(g):bO,opacity:bO},exit:{opacity:bO},update:o={opacity:{value:1},row:{signal:null},column:{signal:null}}},qp(e,t.symbolDirection)?(l="ceil(item.mark.items.length/"+w+")",o.row.signal=x+"%"+l,o.column.signal="floor("+x+"/"+l+")",c={field:["row",x]}):(o.row.signal="floor("+x+"/"+w+")",o.column.signal=x+"%"+w,c={field:x}),o.column.signal=i+"?"+o.column.signal+":"+x,r={facet:{data:r,name:"value",groupby:zE}},e=Yp(JE,null,p,r,h,Tp(y,d,HE),[s,f]),e.sort=c,e}function Xp(e,t){return{align:Lp("gridAlign",e,t),center:{row:!0,column:!1},columns:Up(e,t),padding:{row:Lp("rowPadding",e,t),column:Lp("columnPadding",e,t)}}}function Zp(e,t,n,r){var i,a={value:0},o={};return o.enter=i={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:a},Rp(i,"align",Lp("titleAlign",e,t)),Rp(i,"baseline",Lp("titleBaseline",e,t)),Rp(i,"fill",Lp("titleColor",e,t)),Rp(i,"font",Lp("titleFont",e,t)),Rp(i,"fontSize",Lp("titleFontSize",e,t)),Rp(i,"fontWeight",Lp("titleFontWeight",e,t)),Rp(i,"limit",Lp("titleLimit",e,t)),o.exit={opacity:a},o.update={opacity:{value:1},text:Cp(e.title)},$p(mO,lO,FE,null,r,o,n)}function Jp(e,t){var n;return E(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Qp(e.path)+")":e.sphere&&(n="geoShape("+Qp(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Qp(e){return E(e)&&e.signal?e.signal:S(e)}function Kp(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===dO?JE:t||XE:t}function eg(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Kp(e),zindex:+e.zindex||void 0}}function tg(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function ng(e,t){var n=Ft(e.type);n||k("Unrecognized transform type: "+S(e.type));var r=mh(n.type.toLowerCase(),null,rg(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function rg(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)r=e.params[i],o[r.name]=ig(r,t,n);return o}function ig(e,t,n){var r=e.type,i=t[e.name];return"index"===r?og(e,t,n):void 0===i?void(e.required&&k("Missing required "+S(t.type)+" parameter: "+S(e.name))):"param"===r?ug(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!Mh(i)?i.map(function(t){return ag(e,t,n)}):ag(e,i,n)}function ag(e,t,n){var r=e.type;if(Mh(t))return dg(r)?k("Expression references can not be signals."):hg(r)?n.fieldRef(t):pg(r)?n.compareRef(t):n.signalRef(t.signal);var i=e.expr||hg(r);return i&&fg(t)?ph(t.expr,n):i&&lg(t)?bh(t.field):dg(r)?ph(t,n):cg(r)?yh(n.getData(t).values):hg(r)?bh(t):pg(r)?n.compareRef(t):t}function og(e,t,n){return O(t.from)||k('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function ug(e,t,n){var r=t[e.name];return e.array?(Zm(r)||k("Expected an array of sub-parameters. Instead: "+S(r)),r.map(function(t){return sg(e,t,n)})):sg(e,r,n)}function sg(e,t,n){var r,i,a,o,u;for(o=0,u=e.params.length;o<u;++o){i=e.params[o];for(a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||k("Unsupported parameter: "+S(t)),r=X(rg(i,t,n),i.key),yh(n.add(uE(r)))}function fg(e){return e&&e.expr}function lg(e){return e&&e.field}function cg(e){return"data"===e}function dg(e){return"expr"===e}function hg(e){return"field"===e}function pg(e){return"compare"===e}function gg(e,t,n){var r,i,a,o,u;return e?(r=e.facet)&&(t||k("Only group marks can be faceted."),null!=r.field?o=u=mg(r,n):(e.data?u=yh(n.getData(e.data).aggregate):(a=ng(X({type:"aggregate",groupby:W(r.groupby)},r.aggregate),n),a.params.key=n.keyRef(r.groupby),a.params.pulse=mg(r,n),o=u=yh(n.add(a))),i=n.keyRef(r.groupby,!0))):o=yh(n.add(XM(null,[{}]))),o||(o=mg(e,n)),{key:i,pulse:o,parent:u}}function mg(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:yh(t.getData(e.data).output)}function vg(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function yg(e){return O(e)?e:null}function bg(e,t,n){var r,i=kh(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function _g(e,t,n,r,i,a,o){var u,s,f=t[n]||(t[n]={}),l=wh(a),c=yg(i);if(null!=c&&(e=t.scope,c+=l?"|"+l:"",u=f[c]),!u){var d=a?{field:AM,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:yh(t.output)};l&&(d.sort=e.sortRef(a)),s=e.add(mh(r,void 0,d)),o&&(t.index[i]=s),u=yh(s),null!=c&&(f[c]=u)}return u}function xg(e,t,n){var r,i,a,o,u=e.from.facet,s=u.name,f=mg(u,t);u.name||k("Facet must have a name: "+S(u)),u.data||k("Facet must reference a data set: "+S(u)),u.field?o=t.add(sE({field:t.fieldRef(u.field),pulse:f})):u.groupby?o=t.add(KM({key:t.keyRef(u.groupby),group:yh(t.proxy(n.parent)),pulse:f})):k("Facet must specify groupby or field: "+S(u)),r=t.fork(),i=r.add(XM()),a=r.add(pE({pulse:yh(i)})),r.addData(s,new vg(r,i,i,a)),r.addSignal("parent",null),o.params.subflow={$subflow:Hg(e,r).toRuntime()}}function wg(e,t,n){var r=t.add(sE({pulse:n.pulse})),i=t.fork();i.add(pE()),i.addSignal("parent",null),r.params.subflow={$subflow:Hg(e,i).toRuntime()}}function kg(e,t,n){var r,i,a=e.remove,o=e.insert,u=e.toggle,s=e.modify,f=e.values,l=t.add(vh());r="if("+e.trigger+',modify("'+n+'",'+[o,a,u,s,f].map(function(e){return null==e?"null":e}).join(",")+"),0)",i=ph(r,t),l.update=i.$expr,l.params=i.$params}function Mg(e,t){var n,r,i,a,o,u,s,f,l,c,d,h,p,g=Kp(e),m=e.type===dO,v=e.from&&e.from.facet,y=e.layout||g===JE||g===ZE,b=g===XE||y||v,_=e.overlap;i=gg(e.from,m,t),r=t.add(JM({key:i.key||(e.key?bh(e.key):void 0),pulse:i.pulse,clean:!m})),l=yh(r),r=a=t.add(XM({pulse:l})),r=t.add(rE({markdef:eg(e),interactive:tg(e.interactive,t),clip:Jp(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:yh(r)})),c=yh(r),r=t.add(QM(zp(e.encode,e.type,g,e.style,t,{pulse:c}))),r.params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=ng(e,t);(n.metadata.generates||n.metadata.changes)&&k("Mark transforms should not generate new data."),n.params.pulse=yh(r),t.add(r=n)}),e.sort&&(r=t.add(gE({sort:t.compareRef(e.sort,!0),pulse:yh(r)}))),d=yh(r),(v||y)&&(y=t.add(mE({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:c,pulse:d})),h=yh(y)),o=t.add(GM({mark:c,pulse:h||d})),p=yh(o),m&&(b&&(n=t.operators,n.pop(),y&&n.pop()),t.pushState(d,h||p,l),v?xg(e,t,i):b?wg(e,t,i):Hg(e,t),t.popState(),b&&(y&&n.push(y),n.push(o))),_&&(r={method:_.method===!0?"parity":_.method,pulse:p},_.order&&(r.sort=t.compareRef({field:_.order})),_.bound&&(r.boundScale=t.scaleRef(_.bound.scale),r.boundOrient=_.bound.orient,r.boundTolerance=_.bound.tolerance),p=yh(t.add(oE(r)))),u=t.add(dE({pulse:p})),s=t.add(pE({pulse:yh(u)},void 0,t.parent())),null!=e.name&&(f=e.name,t.addData(f,new vg(t,a,u,s)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&k("Marks only support modify triggers."),kg(e,t,f)}))}function Eg(e,t){var n,r,i,a,o,u,s,f,l,c=t.config.legend,d=e.encode||{},h=d.legend||{},p=h.name||void 0,g=h.interactive,m=h.style,v=VE.reduce(function(t,n){return t||e[n]},0);return v||k("Missing valid scale for legend."),o=Og(e,t.scaleType(v)),u={orient:Lp("orient",e,c),title:null!=e.title,type:o},s=yh(t.add(XM(null,[u]))),h=Tp({enter:Ag(e,c),update:{offset:Cp(Lp("offset",e,c)),padding:Cp(Lp("padding",e,c)),titlePadding:Cp(Lp("titlePadding",e,c))}},h,HE),n={enter:{x:{value:0},y:{value:0}}},f=yh(t.add(nE(i={type:o,scale:t.scaleRef(v),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),o===BE?(a=[Wp(e,v,c,d.gradient),Hp(e,c,d.labels,f)],i.count=i.count||t.signalRef("max(2,2*floor(("+Oh(jp(e,c))+")/100))")):o===WE?a=[Vp(e,v,c,d.gradient,f),Hp(e,c,d.labels,f)]:(r=Xp(e,c),a=[Gp(e,c,d,f,Oh(r.columns))],i.size=Cg(e,t,a[0].marks)),a=[Yp(oO,null,null,s,g,n,a,r)],u.title&&a.push(Zp(e,c,d.title,s)),l=Yp(iO,m,p,s,g,h,a),e.zindex&&(l.zindex=e.zindex),Mg(l,t)}function Og(e,t){var n=e.type||IE;return e.type||1!==Sg(e)||!e.fill&&!e.stroke||(n=Gh(t)?BE:Yh(t)?WE:IE),n!==BE?n:Yh(t)?WE:BE}function Sg(e){return VE.reduce(function(t,n){return t+(e[n]?1:0)},0)}function Ag(e,t){var n={},r=Rp(n,"fill",Lp("fillColor",e,t))+Rp(n,"stroke",Lp("strokeColor",e,t))+Rp(n,"strokeWidth",Lp("strokeWidth",e,t))+Rp(n,"cornerRadius",Lp("cornerRadius",e,t))+Rp(n,"strokeDash",t.strokeDash);
return r?n:void 0}function Cg(e,t,n){var r,i,a,o;return a=Ip("strokeWidth",n[0].encode),i=e.size?'scale("'+e.size+'",datum)':Ip("size",n[0].encode,t),r=Rg(n[1].encode,t,jE),o="max(ceil(sqrt("+Oh(i)+")+"+Oh(a)+"),"+Oh(r)+")",ph(o,t)}function Rg(e,t,n){return Ip("fontSize",e)||Bp("fontSize",t,n)}function Tg(e,t,n){return'item.anchor==="'+RE+'"?'+e+':item.anchor==="'+TE+'"?'+t+":"+n}function zg(e,t){e=O(e)?{text:e}:e;var n,r,i,a=t.config.title,o=X({},e.encode);return n={orient:Lp("orient",e,a)},r=yh(t.add(XM(null,[n]))),o.name=e.name,o.interactive=e.interactive,i=Dg(e,a,o,r),e.zindex&&(i.zindex=e.zindex),Mg(i,t)}function Dg(e,t,n,r){var i,a,o,u,s={value:0},f=e.text,l=Lp("orient",e,t),c=Lp("anchor",e,t),d=l===EE||l===ME?-1:1,h=l===ME||l===SE,p={group:h?"width":"height"},g={};return o={field:p,mult:{signal:wO}},u=d<0?s:h?{field:{group:"height"}}:{field:{group:"width"}},g.enter=i={opacity:s},Rp(i,"fill",Lp("color",e,t)),Rp(i,"font",Lp("font",e,t)),Rp(i,"fontSize",Lp("fontSize",e,t)),Rp(i,"fontWeight",Lp("fontWeight",e,t)),g.exit={opacity:s},g.update=a={opacity:{value:1},text:Cp(f),anchor:Cp(c),orient:Cp(l),extent:{field:p},align:{signal:xO}},h?(a.x=o,a.y=u,a.angle=s,a.baseline={value:l===ME?SE:ME}):(a.x=u,a.y=o,a.angle={value:90*d},a.baseline={value:SE}),Rp(a,"offset",Lp("offset",e,t)||0),Rp(a,"frame",Lp("frame",e,t)),Rp(a,"angle",Lp("angle",e,t)),Rp(a,"baseline",Lp("baseline",e,t)),Rp(a,"limit",Lp("limit",e,t)),$p(mO,cO,e.style||UE,null,r,g,n)}function Ng(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(ng(e,t))}),e.on&&e.on.forEach(function(n){kg(n,t,e.name)}),t.addDataPipeline(e.name,Pg(e,t,n))}function Pg(e,t,n){var r,i,a,o,u,s=[],f=null,l=!1,c=!1;for(e.values?s.push(f=$g({$ingest:e.values,$format:e.format})):e.url?s.push(f=$g({$request:e.url,$format:e.format})):e.source&&(f=r=W(e.source).map(function(e){return yh(t.getData(e).output)}),s.push(null)),i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,f||u.source||s.push(f=$g()),s.push(o),u.generates&&(c=!0),u.modifies&&!c&&(l=!0),u.source?f=o:u.changes&&(f=null);return r&&(a=r.length-1,s[0]=cE({derive:l,pulse:a?r:r[0]}),(l||a)&&s.splice(1,0,$g())),f||s.push($g()),s.push(pE({})),s}function $g(e){var t=XM({},e);return t.metadata={source:!0},t}function Lg(e,t){var n=t.config,r=e.orient,i=r===ME||r===SE?n.axisX:n.axisY,a=n["axis"+r[0].toUpperCase()+r.slice(1)],o="band"===t.scaleType(e.scale)&&n.axisBand;return i||a||o?X({},n.axis,i,a,o):n.axis}function qg(e,t,n,r){var i,a,o,u,s,f=e.orient,l={value:0},c={};return c.enter=i={opacity:l},Rp(i,"stroke",Lp("domainColor",e,t)),Rp(i,"strokeWidth",Lp("domainWidth",e,t)),c.exit={opacity:l},c.update=a={opacity:{value:1}},f===ME||f===SE?(o="x",s="y"):(o="y",s="x"),u=o+"2",i[s]=l,a[o]=i[o]=jg(e,0),a[u]=i[u]=jg(e,1),$p(pO,KE,null,null,r,c,n)}function jg(e,t){return{scale:e.scale,range:t}}function Fg(e,t,n,r){var i,a,o,u,s,f,l,c,d=e.orient,h=e.gridScale,p=d===EE||d===ME?1:-1,g=p*e.offset||0,m={value:0},v={};return v.enter=i={opacity:m},Rp(i,"stroke",Lp("gridColor",e,t)),Rp(i,"strokeWidth",Lp("gridWidth",e,t)),Rp(i,"strokeDash",Lp("gridDash",e,t)),v.exit=a={opacity:m},v.update=o={},Rp(o,"opacity",Lp("gridOpacity",e,t)),u={scale:e.scale,field:qE,band:Lp("bandPosition",e,t),round:Lp("tickRound",e,t),extra:Lp("tickExtra",e,t),offset:Lp("tickOffset",e,t)},d===ME||d===SE?(s="x",f="y",c="height"):(s="y",f="x",c="width"),l=f+"2",o[s]=i[s]=a[s]=u,h?(i[f]={scale:h,range:0,mult:p,offset:g},o[l]=i[l]={scale:h,range:1,mult:p,offset:g}):(i[f]={value:g},o[l]=i[l]={signal:c,mult:p,offset:g}),$p(pO,eO,null,qE,r,v,n)}function Ug(e,t,n,r,i){var a,o,u,s,f,l=e.orient,c=l===EE||l===ME?-1:1,d={value:0},h={};return h.enter=a={opacity:d},Rp(a,"stroke",Lp("tickColor",e,t)),Rp(a,"strokeWidth",Lp("tickWidth",e,t)),h.exit=o={opacity:d},h.update=u={opacity:{value:1}},s=Cp(i),s.mult=c,f={scale:e.scale,field:qE,band:Lp("bandPosition",e,t),round:Lp("tickRound",e,t),extra:Lp("tickExtra",e,t),offset:Lp("tickOffset",e,t)},l===ME||l===SE?(u.y=a.y=d,u.y2=a.y2=s,u.x=a.x=o.x=f):(u.x=a.x=d,u.x2=a.x2=s,u.y=a.y=o.y=f),$p(pO,nO,null,qE,r,h,n)}function Ig(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Bg(e,t,n,r,i){var a,o,u,s,f,l=e.orient,c=l===EE||l===ME?-1:1,d=e.scale,h=Lp("labelBound",e,t),p=Lp("labelFlush",e,t),g=null!=p&&p!==!1&&(p=+p)===p,m=+Lp("labelFlushOffset",e,t),v=Lp("labelOverlap",e,t),y={value:0},b={};return b.enter=a={opacity:y},Rp(a,"angle",Lp("labelAngle",e,t)),Rp(a,"fill",Lp("labelColor",e,t)),Rp(a,"font",Lp("labelFont",e,t)),Rp(a,"fontSize",Lp("labelFontSize",e,t)),Rp(a,"fontWeight",Lp("labelFontWeight",e,t)),Rp(a,"limit",Lp("labelLimit",e,t)),b.exit=o={opacity:y},b.update=u={opacity:{value:1},text:{field:DE}},s=Cp(i),s.mult=c,s.offset=Cp(Lp("labelPadding",e,t)||0),s.offset.mult=c,f={scale:d,field:qE,band:.5,offset:Lp("tickOffset",e,t)},l===ME||l===SE?(u.y=a.y=s,u.x=a.x=o.x=f,Rp(u,"align",g?Ig(d,p,'"left"','"right"','"center"'):"center"),g&&m&&Rp(u,"dx",Ig(d,p,-m,m,0)),Rp(u,"baseline",l===ME?"bottom":"top")):(u.x=a.x=s,u.y=a.y=o.y=f,Rp(u,"align",l===OE?"left":"right"),Rp(u,"baseline",g?Ig(d,p,'"bottom"','"top"','"middle"'):"middle"),g&&m&&Rp(u,"dy",Ig(d,p,m,-m,0))),e=$p(mO,tO,jE,qE,r,b,n),(v||h)&&(e.overlap={method:v,order:"datum.index",bound:h?{scale:d,orient:l,tolerance:+h}:null}),e}function Wg(e,t,n,r){var i,a,o,u=e.orient,s=u===EE||u===ME?-1:1,f=u===ME||u===SE,l={};return l.enter=i={opacity:{value:0}},Rp(i,"align",Lp("titleAlign",e,t)),Rp(i,"fill",Lp("titleColor",e,t)),Rp(i,"font",Lp("titleFont",e,t)),Rp(i,"fontSize",Lp("titleFontSize",e,t)),Rp(i,"fontWeight",Lp("titleFontWeight",e,t)),Rp(i,"limit",Lp("titleLimit",e,t)),l.exit={opacity:{value:0}},l.update=a={opacity:{value:1},text:Cp(e.title)},o={scale:e.scale,range:.5},f?(a.x=o,a.angle={value:0},a.baseline={value:u===ME?"bottom":"top"}):(a.y=o,a.angle={value:90*s},a.baseline={value:"bottom"}),Rp(a,"angle",Lp("titleAngle",e,t)),Rp(a,"baseline",Lp("titleBaseline",e,t)),!Rp(a,"x",Lp("titleX",e,t))&&f&&!Pp("x",n)&&(l.enter.auto={value:!0}),!Rp(a,"y",Lp("titleY",e,t))&&!f&&!Pp("y",n)&&(l.enter.auto={value:!0}),$p(mO,rO,FE,null,r,l,n)}function Vg(e,t){var n,r,i,a,o,u,s=Lg(e,t),f=e.encode||{},l=f.axis||{},c=l.name||void 0,d=l.interactive,h=l.style;return n={orient:e.orient,ticks:!!Lp("ticks",e,s),labels:!!Lp("labels",e,s),grid:!!Lp("grid",e,s),domain:!!Lp("domain",e,s),title:!!Eh(e.title,!1)},r=yh(t.add(XM({},[n]))),l=Tp({update:{range:{signal:'abs(span(range("'+e.scale+'")))'},offset:Cp(Eh(e.offset,0)),position:Cp(Eh(e.position,0)),titlePadding:Cp(Lp("titlePadding",e,s)),minExtent:Cp(Lp("minExtent",e,s)),maxExtent:Cp(Lp("maxExtent",e,s))}},f.axis,HE),i=yh(t.add(YM({scale:t.scaleRef(e.scale),extra:t.property(Lp("tickExtra",e,s)),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u=[],n.grid&&u.push(Fg(e,s,f.grid,i)),n.ticks&&(a=Lp("tickSize",e,s),u.push(Ug(e,s,f.ticks,i,a))),n.labels&&(a=n.ticks?a:0,u.push(Bg(e,s,f.labels,i,a))),n.domain&&u.push(qg(e,s,f.domain,r)),n.title&&u.push(Wg(e,s,f.title,r)),o=Yp(QE,h,c,r,d,l,u),e.zindex&&(o.zindex=e.zindex),Mg(o,t)}function Hg(e,t,n){var r=W(e.signals),i=W(e.scales);return n||r.forEach(function(e){Ul(e,t)}),W(e.projections).forEach(function(e){hp(e,t)}),i.forEach(function(e){Zh(e,t)}),W(e.data).forEach(function(e){Ng(e,t)}),i.forEach(function(e){Jh(e,t)}),r.forEach(function(e){Wh(e,t)}),W(e.axes).forEach(function(e){Vg(e,t)}),W(e.marks).forEach(function(e){Mg(e,t)}),W(e.legends).forEach(function(e){Eg(e,t)}),e.title&&zg(e.title,t),t.parseLambdas(),t}function Yg(e,t){var n,r,i,a,o,u=t.config;return t.background=e.background||u.background,t.eventConfig=u.events,o=yh(t.root=t.add(vh())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",Ll(e.padding,u)),t.addSignal("autosize",$l(e.autosize,u)),W(e.signals).forEach(function(e){kO[e.name]||Ul(e,t)}),r=t.add(XM()),i=Tp({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(QM(zp(i,dO,ZE,e.style,t,{pulse:yh(r)}))),a=t.add(mE({layout:t.objectProperty(e.layout),legendMargin:u.legendMargin,autosize:t.signalRef("autosize"),mark:o,pulse:yh(i)})),t.operators.pop(),t.pushState(yh(i),yh(a),null),Hg(e,t,!0),t.operators.push(a),n=t.add(GM({mark:o,pulse:yh(a)})),n=t.add(dE({pulse:yh(n)})),n=t.add(pE({pulse:yh(n)})),t.addData("root",new vg(t,r,r,n)),t}function Gg(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Xg(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function Zg(e){return(Zm(e)?Jg:Qg)(e)}function Jg(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(r>0?",":"")+(E(t)?t.signal||Zg(t):S(t));return n+"]"}function Qg(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+S(t)+":"+(E(n)?n.signal||Zg(n):S(n));return r+"}"}function Kg(e){var t=em();return(e||[]).forEach(function(e){var n,r,i;if(e)for(n in e)if("style"===n){i=t.style||(t.style={});for(n in e.style)i[n]=X(i[n]||{},e.style[n])}else r=e[n],t[n]=E(r)&&!Zm(r)?X(E(t[n])?t[n]:{},r):r}),t}function em(){return{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:AO},area:{fill:AO},image:null,line:{stroke:AO,strokeWidth:SO},path:{stroke:AO},rect:{fill:AO},rule:{stroke:CO},shape:{stroke:AO},symbol:{fill:AO,size:64},text:{fill:CO,font:EO,fontSize:11},style:{"guide-label":{fill:CO,font:EO,fontSize:10},"guide-title":{fill:CO,font:EO,fontSize:11,fontWeight:"bold"},"group-title":{fill:CO,font:EO,fontSize:13,fontWeight:"bold"},point:{size:OO,strokeWidth:SO,shape:"circle"},circle:{size:OO,strokeWidth:SO},square:{size:OO,strokeWidth:SO,shape:"square"},cell:{fill:"transparent",stroke:TO}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:RO,grid:!1,gridWidth:1,gridColor:TO,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:RO,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:TO,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:RO,titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function tm(e,t){return E(e)||k("Input Vega specification must be an object."),Yg(e,new Gg(Kg([t,e.config]))).toRuntime()}function nm(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function rm(e,t){return nm(["_"],e,t)}function im(e,t){return nm(["datum","_"],e,t)}function am(e,t){return nm(["event"],e,t)}function om(e,t){return nm(["_","event"],e,t)}function um(e,t){return nm(["item","_"],e,t)}function sm(e,t,n){n=n||{};var r,i;for(r in e)i=e[r],i&&i.$expr&&i.$params&&sm(i.$params,t,n),n[r]=Zm(i)?i.map(function(e){return fm(e,t)}):fm(i,t);return n}function fm(e,t){if(!e||!E(e))return e;for(var n,r=0,i=zO.length;r<i;++r)if(n=zO[r],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function lm(e,t){return t.get(e.$ref)||k("Operator not defined: "+e.$ref)}function cm(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=_(im(e.$expr,t),e.$fields,e.$name))}function dm(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=re(e.$key,e.$flat))}function hm(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=A(e.$field,e.$name))}function pm(e,t){var n="c:"+e.$compare+"_"+e.$order,r=W(e.$compare).map(function(e){return e&&e.$tupleid?me:e});return t.fn[n]||(t.fn[n]=H(r,e.$order))}function gm(e,t){var n,r,i=e.$encode,a={};for(n in i)r=i[n],a[n]=_(um(r.$expr,t),r.$fields),a[n].output=r.$output;return a}function mm(e,t){return t}function vm(e,t){var n=e.$subflow;return function(e,r,i){var a=Om(n,t.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}function ym(){return me}function bm(e){return(e+"").toLowerCase()}function _m(e){return"operator"===bm(e)}function xm(e){return"collect"===bm(e)}function wm(e,t){_m(e.type)||!e.type?t.operator(e,e.update?rm(e.update,t):null):t.transform(e,e.type)}function km(e,t){var n,r;e.params&&((n=t.get(e.id))||k("Invalid operator id: "+e.id),r=sm(e.params,t),t.dataflow.connect(n,n.parameters(r)))}function Mm(e,t){var n,r=null!=e.filter?am(e.filter,t):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,r):e.merge&&(n=e.merge.map(t.get.bind(t)),i=n[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(t.get.bind(t)),i=i.between(n[0],n[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&k("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Em(e,t){var n=E(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,o=void 0;r||k("Source not defined: "+e.source),i=e.target&&e.target.$expr?am(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(o=sm(a.$params,t)),a=om(a.$expr,t)),t.update(e,r,i,a,o)}function Om(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){wm(e,t)}),n.forEach(function(e){km(e,t)}),(e.streams||[]).forEach(function(e){Mm(e,t)}),(e.updates||[]).forEach(function(e){Em(e,t)}),t.resolve()}function Sm(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n}function Am(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(function(e){n.update(t.signals[e],i[e],DO)}),Object.keys(r||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(nv).insert(r[e]))}),(e.subcontext||[]).forEach(function(e,n){var r=t.subcontext[n];r&&r.setState(e)})}function Cm(e,t,n){return new Rm(e,t,n)}function Rm(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Tm(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function zm(e,t,n){var r=n||vM;return Om(t,Cm(e,Hv,r))}function Dm(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===$O?r.left+r.right:0)}function Nm(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===$O?r.top+r.bottom:0)}function Pm(e){function t(){e._autosize=e._resize=1}var n=e._signals,r=n[NO],i=n[PO],a=n[$O];e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=Dm(e,n.size),t()},{size:r}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=Nm(e,n.size),t()},{size:i});var o=e.add(null,t,{pad:a});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}function $m(e,t,n,r,i,a){this.runAfter(function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(NO,n,LO),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(PO,r,LO),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter(function(){o.resize()})},!1,1)}function Lm(e){return this._runtime.getState(e||{data:qm,signals:jm,recurse:!0})}function qm(e,t){return t.modified&&Zm(t.input.value)&&e.indexOf("_:vega:_")}function jm(e,t){return!("parent"===e||t instanceof Hv.proxy)}function Fm(e){var t=this;return t.runAfter(function(){t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0})}),this}function Um(e,t){function n(t){e({timestamp:Date.now(),elapsed:t})}this._timers.push(b.interval(n,t))}function Im(e,t,n,r){var i=e.element();i&&i.setAttribute("title",Bm(r))}function Bm(e){return null==e?"":Zm(e)?Vm(e):E(e)&&!ee(e)?Wm(e):e+""}function Wm(e){return Object.keys(e).map(function(t){var n=e[t];return t+": "+(Zm(n)?Vm(n):Hm(n))}).join("\n")}function Vm(e){return"["+e.map(Hm).join(", ")+"]"}function Hm(e){return Zm(e)?"[]":E(e)&&!ee(e)?"{}":e}function Ym(e,t){var n=this;t=t||{},Lt.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||B_.Canvas,n._scenegraph=new Ca;var r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Im,n._redraw=!0,n._handler=(new Ua).scene(r),n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[];var i=zm(n,e,t.functions);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:X({},e)}}),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._background=i.background||null,n._eventConfig=fl(i.eventConfig),n._width=n.width(),n._height=n.height(),n._viewWidth=Dm(n,n._width),n._viewHeight=Nm(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Pm(n),Zf(n)}function Gm(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:k("Unrecognized signal name: "+S(t))}function Xm(e,t){var n=e._targets||[],r=n.filter(function(e){var n=e._update;return n&&n.handler===t});return r.length?r[0]:null}var Zm=Array.isArray,Jm=[],Qm=A("id"),Km=_(function(e){return e},Jm,"identity"),ev=_(function(){return 0},Jm,"zero"),tv=_(function(){return 1},Jm,"one"),nv=_(function(){return!0},Jm,"true"),rv=_(function(){return!1},Jm,"false"),iv=0,av=1,ov=2,uv=3,sv=4,fv={},lv=Symbol("vega_id"),cv=1,dv="_:mod:_",hv=Me.prototype;hv.set=function(e,t,n,r){var i=this,a=i[e],o=i[dv];return null!=t&&t>=0?(a[t]!==n||r)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||r)&&(i[e]=n,o[e]=Zm(n)?1+n.length:-1),i},hv.modified=function(e,t){var n,r=this[dv];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Zm(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&t>=0?t+1<r[e]||!!r[t+":"+e]:!!r[e]},hv.clear=function(){return this[dv]={},this};var pv=0,gv="pulse",mv=new Me,vv=1,yv=2,bv=Ee.prototype;bv.targets=function(){return this._targets||(this._targets=pe(Qm))},bv.set=function(e){return this.value!==e?(this.value=e,1):0},bv.skip=Oe(vv),bv.modified=Oe(yv),bv.parameters=function(e,t){function n(e,n,r){r instanceof Ee?(r!==u&&(t&&r.targets().add(u),l.push(r)),f.push({op:r,name:e,index:n})):s.set(e,n,r)}t=t!==!1;var r,i,a,o,u=this,s=u._argval=u._argval||new Me,f=u._argops=u._argops||[],l=[];for(r in e)if(i=e[r],r===gv)W(i).forEach(function(e){e instanceof Ee?e!==u&&(e.targets().add(u),l.push(e)):k("Pulse parameters must be operator instances.")}),u.source=i;else if(Zm(i))for(s.set(r,-1,Array(a=i.length)),o=0;o<a;++o)n(r,o,i[o]);else n(r,-1,i);return this.marshall().clear(),l},bv.marshall=function(e){var t,n,r,i,a,o=this._argval||mv,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)t=u[n],i=t.op,a=i.modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);return o},bv.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},bv.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,this.pulse=t,t||e};var _v=0,xv=Ce.prototype;xv._filter=nv,xv._apply=Km,xv.targets=function(){return this._targets||(this._targets=pe(Qm))},xv.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},xv.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},xv.filter=function(e){var t=Re(e);return this.targets().add(t),t},xv.apply=function(e){var t=Re(null,e);return this.targets().add(t),t},xv.merge=function(){var e=Re();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},xv.throttle=function(e){var t=-1;return this.filter(function(){var n=Date.now();return n-t>e?(t=n,1):0})},xv.debounce=function(e){var t=Re();return this.targets().add(Re(null,null,G(e,function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()}))),t},xv.between=function(e,t){var n=!1;return e.targets().add(Re(null,null,function(){n=!0})),t.targets().add(Re(null,null,function(){n=!1})),this.filter(function(){return n})};var wv=/^([A-Za-z]+:)?\/\//,kv="file://",Mv={boolean:ue,integer:z,number:z,date:fe,string:le,unknown:Km},Ev=[Be,He,Ve,We],Ov=["boolean","integer","number","date"],Sv={dsv:Ge,csv:Ye(","),tsv:Ye("\t"),json:Ze,topojson:st},Av={skip:!0},Cv={},Rv=1,Tv=2,zv=4,Dv=Rv|Tv,Nv=Rv|zv,Pv=Rv|Tv|zv,$v=8,Lv=16,qv=32,jv=64,Fv=_t.prototype;Fv.StopPropagation=Cv,Fv.ADD=Rv,Fv.REM=Tv,Fv.MOD=zv,Fv.ADD_REM=Dv,Fv.ADD_MOD=Nv,Fv.ALL=Pv,Fv.REFLOW=$v,Fv.SOURCE=Lv,Fv.NO_SOURCE=qv,Fv.NO_FIELDS=jv,Fv.fork=function(e){return new _t(this.dataflow).init(this,e)},Fv.clone=function(){var e=this.fork(Pv);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Pv|Lv)},Fv.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?(e=new _t(this.dataflow).init(this),e.add=e.source,e):e},Fv.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||t&jv||(n.fields=e.fields),t&Rv?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Tv?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&zv?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&qv?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},Fv.runAfter=function(e){this.dataflow.runAfter(e)},Fv.changed=function(e){var t=e||Pv;return t&Rv&&this.add.length||t&Tv&&this.rem.length||t&zv&&this.mod.length},Fv.reflow=function(e){if(e)return this.fork(Pv).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(zv,kt(this,Rv))),this},Fv.modifies=function(e){var t=W(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},Fv.modified=function(e){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?Zm(e)?e.some(function(e){return t[e]}):t[e]:!!t)},Fv.filter=function(e,t){var n=this;return e&Rv&&(n.addF=xt(n.addF,t)),e&Tv&&(n.remF=xt(n.remF,t)),e&zv&&(n.modF=xt(n.modF,t)),e&Lv&&(n.srcF=xt(n.srcF,t)),n},Fv.materialize=function(e){e=e||Pv;var t=this;return e&Rv&&t.addF&&(t.add=wt(t.add,t.addF),t.addF=null),e&Tv&&t.remF&&(t.rem=wt(t.rem,t.remF),t.remF=null),e&zv&&t.modF&&(t.mod=wt(t.mod,t.modF),t.modF=null),e&Lv&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},Fv.visit=function(e,t){var n,r,i=this,a=t;return e&Lv?(he(i.source,i.srcF,a),i):(e&Rv&&he(i.add,i.addF,a),e&Tv&&he(i.rem,i.remF,a),e&zv&&he(i.mod,i.modF,a),e&$v&&(n=i.source)&&(r=i.add.length+i.mod.length,r===n.length||(r?he(n,kt(i,Nv),a):he(n,i.srcF,a))),i)};var Uv=Q(Mt,_t);Uv.fork=function(e){var t=new _t(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,function(e){return t.add.push(e)}),e&t.REM&&this.visit(t.REM,function(e){return t.rem.push(e)}),e&t.MOD&&this.visit(t.MOD,function(e){return t.mod.push(e)})),t},Uv.changed=function(e){return this.changes&e},Uv.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?Zm(e)?e.some(function(e){return n[e]}):n[e]:0},Uv.filter=function(){k("MultiPulse does not support filtering.")},Uv.materialize=function(){k("MultiPulse does not support materialization.")},Uv.visit=function(e,t){var n=this,r=n.pulses,i=r.length,a=0;if(e&n.SOURCE)for(;a<i;++a)r[a].visit(e,t);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(e,t);return n};var Iv={skip:!1,force:!1},Bv=Nt.prototype;Bv.size=function(){return this.nodes.length},Bv.clear=function(){return this.nodes=[],this},Bv.peek=function(){return this.nodes[0]},Bv.push=function(e){var t=this.nodes;return t.push(e),Pt(t,0,t.length-1,this.cmp)},Bv.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,$t(t,0,this.cmp)):e=n,e},Bv.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,$t(t,0,this.cmp),n},Bv.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,$t(t,0,this.cmp)),e};var Wv=Lt.prototype;Wv.stamp=function(){return this._clock},Wv.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},Wv.cleanThreshold=1e4,Wv.add=Se,Wv.connect=Ae,Wv.rank=yt,Wv.rerank=bt,Wv.pulse=Dt,Wv.touch=Tt,Wv.update=zt,Wv.changeset=ke,Wv.ingest=dt,Wv.request=pt,Wv.events=Te,Wv.on=gt,Wv.run=Et,Wv.runAsync=St,Wv.runAfter=At,Wv._enqueue=Ct,Wv._getPulse=Rt,Wv.error=qt("error"),Wv.warn=qt("warn"),Wv.info=qt("info"),Wv.debug=qt("debug"),Wv.logLevel=qt("level");var Vv=Q(jt,Ee);Vv.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t},Vv.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},Vv.transform=function(){};var Hv={},Yv={values:Ht({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:Ht({name:"count",set:"cell.num"}),__count__:Ht({name:"count",set:"this.missing + this.valid"}),missing:Ht({name:"missing",set:"this.missing"}),valid:Ht({name:"valid",set:"this.valid"}),sum:Ht({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:Ht({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:Ht({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:Ht({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:Ht({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:Ht({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:Ht({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:Ht({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:Ht({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:Ht({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:Ht({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:Ht({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Ht({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Ht({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:Ht({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Ht({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Ht({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Ht({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Gv=Object.keys(Yv);t.random=Math.random;var Xv=fn.prototype;Xv.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Xv.add=function(e){this._add.push(e)},Xv.rem=function(e){this._rem.push(e)},Xv.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),f={};for(e=0;e<u;++e)f[a(i[e])]=1;for(e=0,t=0;e<o;++e)f[a(n=r[e])]?f[a(n)]=0:s[t++]=n;return this._rem=[],this._add=s},Xv.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;--r>=0;)t=e(n[r])+"",i.hasOwnProperty(t)||(i[t]=1,++a);return a},Xv.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Z(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Xv.argmin=function(e){return this.extent(e)[0]||{}},Xv.argmax=function(e){return this.extent(e)[1]||{}},Xv.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):+(1/0)},Xv.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-(1/0)},Xv.quartile=function(e){return this._get===e&&this._q||(this._q=tn(this.values(),e),this._get=e),this._q},Xv.q1=function(e){return this.quartile(e)[0]},Xv.q2=function(e){return this.quartile(e)[1]},Xv.q3=function(e){return this.quartile(e)[2]},Xv.ci=function(e){return this._get===e&&this._ci||(this._ci=en(this.values(),1e3,.05,e),this._get=e),this._ci},Xv.ci0=function(e){return this.ci(e)[0]},Xv.ci1=function(e){return this.ci(e)[1]},ln.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Gv},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Zv=Q(ln,jt);Zv.transform=function(e,t){var n,r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),i.modifies(this._outputs),r._drop=e.drop!==!1,e.cross&&r._dims.length>1&&(r._drop=!1,this.cross()),r.changes(i)},Zv.cross=function(){function e(e){var t,n,r,u;for(t in e)for(r=e[t].tuple,n=0;n<o;++n)a[n][u=r[i[n]]]=u}function t(e,u,s){var f,l,c=i[s],d=a[s++];for(f in d)u[c]=d[f],l=e?e+"|"+f:f,s<o?t(l,u,s):r[l]||n.cell(l,u)}var n=this,r=n.value,i=n._dnames,a=i.map(function(){return{}}),o=i.length;e(n._prev),e(r),t("",{},0)},Zv.init=function(e){function t(e){
for(var t,r=W(w(e)),a=0,o=r.length;a<o;++a)i[t=r[a]]||(i[t]=1,n.push(t))}var n=this._inputs=[],r=this._outputs=[],i={};this._dims=W(e.groupby),this._dnames=this._dims.map(function(e){var n=x(e);return t(e),r.push(n),n}),this.cellkey=e.key?e.key:Bt(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var a,o,u,s,f,l,c=e.fields||[null],d=e.ops||["count"],h=e.as||[],p=c.length,g={};for(p!==d.length&&k("Unmatched number of fields and aggregate ops."),l=0;l<p;++l)a=c[l],o=d[l],null==a&&"count"!==o&&k("Null aggregate field specified."),s=x(a),f=Wt(o,s,h[l]),r.push(f),"count"!==o?(u=g[s],u||(t(a),u=g[s]=[],u.field=a,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(Vt(o,f))):this._counts.push(f);return this._measures=this._measures.map(function(e){return Xt(e,e.field)}),{}},Zv.cellkey=Bt(),Zv.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},Zv.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new fn),n},Zv.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?xe(t.tuple,o):ye(o)},Zv.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),t=a.agg,n=0,r=t.length;n<r;++n)t[n].add(t[n].get(e),e)},Zv.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),t=a.agg,n=0,r=t.length;n<r;++n)t[n].rem(t[n].get(e),e)},Zv.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(t=e.agg,n=0,r=t.length;n<r;++n)t[n].set(i);return i},Zv.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,f=e.add,l=e.rem,c=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||l.push(t.tuple);for(r=0,i=this._alen;r<i;++r)f.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)t=o[r],(0===t.num&&s?l:c).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e},cn.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Jv=Q(cn,jt);Jv.transform=function(e,t){var n,r=this._bins(e),i=r.start,a=r.step,o=e.as||["bin0","bin1"],u=o[0],s=o[1];return e.modified()?(t=t.reflow(!0),n=t.SOURCE):n=t.modified(w(e.field))?t.ADD_MOD:t.ADD,t.visit(n,function(e){var t=r(e);e[u]=t,e[s]=null==t?null:i+a*(1+(t-i)/a)}),t.modifies(o)},Jv._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,i=Zt(e),a=i.start,o=i.stop,u=i.step;null!=(t=e.anchor)&&(n=t-(a+u*Math.floor((t-a)/u)),a+=n,o+=n);var s=function(e){var t=r(e);return null==t?null:(t=Math.max(a,Math.min(+t,o-u)),a+u*Math.floor((t-a)/u))};return s.start=a,s.stop=o,s.step=u,this.value=_(s,w(r),e.name||"bin_"+x(r))},hn.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};var Qv=Q(hn,jt);Qv.transform=function(e,t){var n=t.fork(t.ALL),r=dn(me,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),t.source&&t.source.root&&(this.value.root=t.source.root),n},Q(pn,Ee),mn.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Kv=Q(mn,jt);Kv.transform=function(e,t){function n(t){return function(n){for(var r,i=vn(u(n),e.case,a)||[],s=0,f=i.length;s<f;++s)o.test(r=i[s])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],f=n(function(e){i[e]=1+(i[e]||0)}),l=n(function(e){i[e]-=1});return r?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,l)),this._finish(t,s)},Kv._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},Kv._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],f=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=ye({}),r[u]=n,r[s]=i,f.add.push(r)):0===i?(r&&f.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,f.mod.push(r));return f.modifies(t)},yn.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};var ey=Q(yn,jt);ey.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1],u=!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");return u?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=bn(r,a,o,e.filter||nv)):n.mod=r,n.source=this.value,n.modifies(i)};var ty={kde:an,mixture:un,normal:rn,uniform:sn},ny="distributions",ry="function",iy="field",ay=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],oy={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:ay},{name:"weights",type:"number",array:!0}]};xn.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:ay.concat(oy)},{name:"as",type:"string",array:!0,default:["value","density"]}]};var uy=Q(xn,jt);uy.transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=_n(e.distribution,wn(t)),i=e.method||"pdf";"pdf"!==i&&"cdf"!==i&&k("Invalid density method: "+i),e.extent||r.data||k("Missing density extent parameter."),i=r[i];var o=e.as||["value","density"],u=e.extent||a.extent(r.data()),s=(u[1]-u[0])/(e.steps||100),f=a.range(u[0],u[1]+s/2,s).map(function(e){var t={};return t[o[0]]=e,t[o[1]]=i(e),ye(t)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n},kn.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};var sy=Q(kn,jt);sy.transform=function(e,t){var n,r=this.value,i=e.field,a=r[0],o=r[1],u=t.ADD;n=t.changed()||t.modified(i.fields)||e.modified("field"),n&&(u=t.SOURCE,a=+(1/0),o=-(1/0)),t.visit(u,function(e){var t=i(e);null!=t&&(t=+t,t<a&&(a=t),t>o&&(o=t))}),this.value=[a,o]};var fy=Q(Mn,Ee);fy.connect=function(e){return this.targets().add(e),e.source=this},fy.add=function(e){this.value.add.push(e)},fy.rem=function(e){this.value.rem.push(e)},fy.mod=function(e){this.value.mod.push(e)},fy.init=function(e){this.value.init(e,e.NO_SOURCE)},fy.evaluate=function(){return this.value};var ly=Q(En,jt);ly.activate=function(e){this._targets[this._targets.active++]=e},ly.subflow=function(e,t,n,r){var i,a,o=this.value,u=o.hasOwnProperty(e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[e])&&a.tuple,i=n.dataflow,u=i.add(new Mn(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=u,this.activate(u)),u},ly.transform=function(e,t){function n(e){return i.subflow(e,o,t)}var r=t.dataflow,i=this,a=e.key,o=e.subflow,u=this._keys,s=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=me(e),r=u.get(t);void 0!==r&&(u.delete(t),n(r).rem(e))}),t.visit(t.ADD,function(e){var t=a(e);u.set(me(e),t),n(t).add(e)}),s||t.modified(a.fields)?t.visit(t.MOD,function(e){var t=me(e),r=u.get(t),i=a(e);r===i?n(i).mod(e):(u.set(t,i),n(r).rem(e),n(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(u.get(me(e))).mod(e)}),s&&t.visit(t.REFLOW,function(e){var t=me(e),r=u.get(t),i=a(e);r!==i&&(u.set(t,i),n(r).rem(e),n(i).add(e))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),t},Q(On,Ee),An.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};var cy=Q(An,jt);cy.transform=function(e,t){function n(t){var n=me(t),r=f(t,e),a=i.get(n);r&&a?(i.delete(n),o.push(t)):r||a?l&&r&&!a&&s.push(t):(i.set(n,1),u.push(t))}var r=t.dataflow,i=this.value,a=t.fork(),o=a.add,u=a.rem,s=a.mod,f=e.expr,l=!0;return t.visit(t.REM,function(e){var t=me(e);i.has(t)?i.delete(t):u.push(e)}),t.visit(t.ADD,function(t){f(t,e)?o.push(t):i.set(me(t),1)}),t.visit(t.MOD,n),e.modified()&&(l=!1,t.visit(t.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},Rn.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]};var dy=Q(Rn,jt);dy.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=Cn(r,e.as||[]),a=i.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,o,u,s=r.map(function(t){return t(e)}),f=s.reduce(function(e,t){return Math.max(e,t.length)},0),l=0;l<f;++l){for(o=be(e),t=0;t<a;++t)o[i[t]]=null==(u=s[t][l])?null:u;n.add.push(o)}}),this.value=n.source=n.add,n.modifies(i)},Tn.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};var hy=Q(Tn,jt);hy.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(x),a=e.as||["key","value"],o=a[0],u=a[1],s=r.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,a=0;a<s;++a)t=be(e),t[o]=i[a],t[u]=r[a](e),n.add.push(t)}),this.value=n.source=n.add,n.modifies(a)},zn.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};var py=Q(zn,jt);py.transform=function(e,t){function n(t){t[i]=r(t,e)}var r=e.expr,i=e.as,a=e.modified(),o=e.initonly?t.ADD:a?t.SOURCE:t.modified(r.fields)?t.ADD_MOD:t.ADD;return a&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,n)};var gy=Q(Dn,jt);gy.transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),u=e.size-a.length,s=e.generator;if(u>0){for(n=[];--u>=0;)n.push(i=ye(s(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var my={value:"value",median:a.median,mean:a.mean,min:a.min,max:a.max},vy=[];Nn.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};var yy=Q(Nn,jt);yy.transform=function(e,t){var n,r,i,a,o,u,s,f,l,c,d=t.fork(t.ALL),h=Pn(e),p=$n(e),g=x(e.field),m=x(e.key),v=(e.groupby||[]).map(x),y=Ln(t.source,e.groupby,e.key,e.keyvals),b=[],_=this.value,w=y.domain.length;for(o=0,f=y.length;o<f;++o)for(n=y[o],i=n.values,r=NaN,s=0;s<w;++s)if(null==n[s]){for(a=y.domain[s],c={_impute:!0},u=0,l=i.length;u<l;++u)c[v[u]]=i[u];c[m]=a,c[g]=isNaN(r)?r=h(n,p):r,b.push(ye(c))}return b.length&&(d.add=d.materialize(d.ADD).add.concat(b)),_.length&&(d.rem=d.materialize(d.REM).rem.concat(_)),this.value=b,d},qn.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Gv},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var by=Q(qn,ln);by.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(n=r.value=r.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),r.changes(),t.visit(t.SOURCE,function(e){X(e,n[r.cellkey(e)].tuple)}),t.reflow(i).modifies(this._outputs)},by.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},Q(jn,Ee),Un.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};var _y=Q(Un,jt);_y.transform=function(e,t){var n,r,i,a=t,o=e.as,u=e.fields,s=e.index,f=e.values,l=null==e.default?null:e.default,c=e.modified(),d=c?t.SOURCE:t.ADD,h=u.length;return f?(r=f.length,h>1&&!o&&k('Multi-field lookup requires explicit "as" parameter.'),o&&o.length!==h*r&&k('The "as" parameter has too few output field names.'),o=o||f.map(x),n=function(e){for(var t,n,i=0,a=0;i<h;++i)if(n=s.get(u[i](e)),null==n)for(t=0;t<r;++t,++a)e[o[a]]=l;else for(t=0;t<r;++t,++a)e[o[a]]=f[t](n)}):(o||k("Missing output field names."),n=function(e){for(var t,n=0;n<h;++n)t=s.get(u[n](e)),e[o[n]]=null==t?l:t}),c?a=t.reflow(!0):(i=u.some(function(e){return t.modified(e.fields)}),d|=i?t.MOD:0),t.visit(d,n),a.modifies(o)},Q(In,Ee),Q(Wn,Ee),Q(Hn,jt),Hn.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},Yn.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Gv,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var xy=Q(Yn,ln);xy._transform=xy.transform,xy.transform=function(e,t){return this._transform(Gn(e,t),t)};var wy=Q(Jn,En);wy.transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(w(i)))&&k("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.mod(e)}):a.mod(e)}),t.visit(t.ADD,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.add(ye(e))}):a.add(e)}),t.visit(t.REM,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.rem(e)}):a.rem(e)}),t},Qn.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};var ky=Q(Qn,jt);ky.transform=function(e,t){var n,r,i=e.fields,a=Cn(e.fields,e.as||[]),o=i?function(e,t){return Kn(e,t,i,a)}:_e;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=me(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=o(e,ye({}));r[me(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(o(e,r[me(e)]))}),n};var My=Q(er,jt);My.transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var Ey=Q(tr,jt);Ey.transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=me(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=be(e);r[me(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(_e(e,r[me(e)]))})),n},nr.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};var Oy=Q(nr,jt);Oy.transform=function(e,n){function r(e){var n,r;u.length<o?u.push(e):(r=~~((s+1)*t.random()),r<u.length&&r>=f&&(n=u[r],l[me(n)]&&i.rem.push(n),u[r]=e)),++s}var i=n.fork(n.NO_SOURCE),a=e.modified("size"),o=e.size,u=this.value,s=this.count,f=0,l=u.reduce(function(e,t){return e[me(t)]=1,e},{});if(n.rem.length&&(n.visit(n.REM,function(e){var t=me(e);l[t]&&(l[t]=-1,i.rem.push(e)),--s}),u=u.filter(function(e){return l[me(e)]!==-1})),(n.rem.length||a)&&u.length<o&&n.source&&(f=s=u.length,n.visit(n.SOURCE,function(e){l[me(e)]||r(e)}),f=-1),a&&u.length>o){for(var c=0,d=u.length-o;c<d;++c)l[me(u[c])]=-1,i.rem.push(u[c]);u=u.slice(d)}return n.mod.length&&n.visit(n.MOD,function(e){l[me(e)]&&i.mod.push(e)}),n.add.length&&n.visit(n.ADD,r),(n.add.length||f<0)&&(i.add=u.filter(function(e){return!l[me(e)]})),this.count=s,this.value=i.source=u,i},rr.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]};var Sy=Q(rr,jt);Sy.transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=a.range(e.start,e.stop,e.step||1).map(ye),n.add=t.add.concat(this.value),n}};var Ay=Q(ir,jt);Ay.transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var Cy=Q(ar,jt);Cy.transform=function(e,t){function n(e){a.set(i(e),e)}var r=t.dataflow,i=e.field,a=this.value,o=!0;return e.modified("field")||t.modified(i.fields)?(a.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){a.delete(i(e))}),t.visit(t.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),t.fork()};var Ry=Q(or,jt);Ry.transform=function(e,t){var n=!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields);n&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var Ty={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=Ty.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){t=+t,t>0||k("ntile num must be greater than zero.");var n=Ty.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return t=+t,t>0||k("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},zy=Object.keys(Ty),Dy=sr.prototype;Dy.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},Dy.update=function(e,t){var n,r=this,i=r.cell,a=r.windows,o=e.data,u=a&&a.length;if(i){for(n=e.p0;n<e.i0;++n)i.rem(o[n]);for(n=e.p1;n<e.i1;++n)i.add(o[n]);i.set(t)}for(n=0;n<u;++n)a[n].update(e,t)},lr.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:zy.concat(Gv)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var Ny=Q(lr,jt);Ny.transform=function(e,t){function n(e){return a.group(s(e))}var r,i,a=this,o=a.state,u=e.modified();this.stamp=t.stamp,o&&!u||(o=a.state=new sr(e));var s=Bt(e.groupby);for(u||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,function(e){n(e).add(e)})):(t.visit(t.REM,function(e){n(e).remove(e)}),t.visit(t.ADD,function(e){n(e).add(e)})),r=0,i=a._mlen;r<i;++r)cr(a._mods[r],o,e);return a._mlen=0,a._mods=[],t.reflow(u).modifies(o.outputs)},Ny.group=function(e){var t=this,n=t.value[e];return n||(n=t.value[e]=dn(me),n.stamp=-1),n.stamp<t.stamp&&(n.stamp=t.stamp,t._mods[t._mlen++]=n),n};var Py=Object.freeze({aggregate:ln,bin:cn,collect:hn,compare:pn,countpattern:mn,cross:yn,density:xn,extent:kn,facet:En,field:On,filter:An,flatten:Rn,fold:Tn,formula:zn,generate:Dn,impute:Nn,joinaggregate:qn,key:jn,lookup:Un,multiextent:In,multivalues:Wn,params:Hn,pivot:Yn,prefacet:Jn,project:Qn,proxy:er,relay:tr,sample:nr,sequence:rr,sieve:ir,subflow:Mn,tupleindex:ar,values:or,window:lr}),$y="top",Ly="left",qy="right",jy="bottom",Fy="top-left",Uy="top-right",Iy="bottom-left",By="bottom-right",Wy="start",Vy="end",Hy="group",Yy="axis",Gy="title",Xy="frame",Zy="scope",Jy="legend",Qy="row-header",Ky="row-footer",eb="row-title",tb="column-header",nb="column-footer",rb="column-title",ib="padding",ab="symbol",ob="fit",ub="fit-x",sb="fit-y",fb="pad",lb="none",cb="all",db="each",hb="flush",pb="column",gb="row",mb=pr.prototype;mb.clone=function(){return new pr(this)},mb.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},mb.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},mb.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},mb.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},mb.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},mb.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},mb.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},mb.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,u=this.x1,s=this.x2,f=this.y1,l=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*l+a,i*u+r*l+o).add(r*s-i*f+a,i*s+r*f+o).add(r*s-i*l+a,i*s+r*l+o)},mb.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},mb.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},mb.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},mb.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},mb.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},mb.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},mb.width=function(){return this.x2-this.x1},mb.height=function(){return this.y2-this.y1};var vb=0;Q(vr,mr);var yb;["canvas","canvas-prebuilt"].some(function(e){try{yb=n(17)(e),"function"!=typeof yb&&(yb=null)}catch(t){yb=null}return yb});var bb=Mr.prototype;bb.pending=function(){return this._pending},bb.sanitizeURL=function(e){var t=this;return Er(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return Or(t),e}).catch(function(){return Or(t),null})},bb.loadImage=function(e){var t=this,n=kr();return Er(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){Or(t),i.loaded=!0},i.onerror=function(){Or(t),i.loaded=!1},i.src=r,i}).catch(function(e){return Or(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}})},bb.ready=function(){var e=this;return new Promise(function(t){function n(r){e.pending()?setTimeout(function(){n(!0)},10):t(r)}n(!1)})};var _b,xb={basis:{curve:o.curveBasis},"basis-closed":{curve:o.curveBasisClosed},"basis-open":{curve:o.curveBasisOpen},bundle:{curve:o.curveBundle,tension:"beta",value:.85},cardinal:{curve:o.curveCardinal,tension:"tension",value:0},"cardinal-open":{curve:o.curveCardinalOpen,tension:"tension",value:0},"cardinal-closed":{curve:o.curveCardinalClosed,tension:"tension",value:0},"catmull-rom":{curve:o.curveCatmullRom,tension:"alpha",value:.5},"catmull-rom-closed":{curve:o.curveCatmullRomClosed,tension:"alpha",value:.5},"catmull-rom-open":{curve:o.curveCatmullRomOpen,tension:"alpha",value:.5},linear:{curve:o.curveLinear},"linear-closed":{curve:o.curveLinearClosed},monotone:{horizontal:o.curveMonotoneY,vertical:o.curveMonotoneX},natural:{curve:o.curveNatural},step:{curve:o.curveStep},"step-after":{curve:o.curveStepAfter},"step-before":{curve:o.curveStepBefore}},wb={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},kb=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],Mb={},Eb={},Ob=[].join,Sb=["l",0,0,0,0,0,0,0],Ab=2*Math.PI,Cb=Math.sqrt(3)/2,Rb={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ab)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Cb*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Cb*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Cb*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Cb*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}}},Tb={},zb=Math.PI,Db=o.arc().startAngle(Zr).endAngle(Jr).padAngle(Qr).innerRadius(Kr).outerRadius(ei).cornerRadius(ti),Nb=o.area().x(Br).y1(Wr).y0(Xr).defined(ni),Pb=o.area().y(Wr).x1(Br).x0(Gr).defined(ni),$b=o.line().x(Br).y(Wr).defined(ni),Lb=Ur().x(Br).y(Wr).width(Vr).height(Yr).cornerRadius(ti),qb=o.symbol().type(ii).size(ri),jb=Ir().x(Br).y(Wr).defined(ni).size(Hr),Fb=2*Math.PI,Ub=Fb/4,Ib=Fb-1e-8;hi.beginPath=pi,hi.closePath=pi,hi.moveTo=gi,hi.lineTo=gi,hi.rect=function(e,t,n,r){gi(e,t),gi(e+n,t+r)},hi.quadraticCurveTo=function(e,t,n,r){gi(e,t),gi(n,r)},hi.bezierCurveTo=function(e,t,n,r,i,a){gi(e,t),gi(n,r),gi(i,a)},hi.arc=function(e,t,n,r,i,a){function o(e){f=n*Math.cos(e),l=n*Math.sin(e),f<c&&(c=f),f>d&&(d=f),l<h&&(h=l),l>p&&(p=l)}if(Math.abs(i-r)>Ib)return gi(e-n,t-n),void gi(e+n,t+n);var u,s,f,l,c=1/0,d=-(1/0),h=1/0,p=-(1/0);if(o(r),o(i),i!==r)if(r%=Fb,r<0&&(r+=Fb),i%=Fb,i<0&&(i+=Fb),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=Fb,u=r-r%Ub,s=0;s<4&&u>i;++s,u-=Ub)o(u);else for(u=r-r%Ub+Ub,s=0;s<4&&u<i;++s,u+=Ub)o(u);gi(e+c,t+h),gi(e+d,t+p)};var Bb,Wb,Vb=[],Hb=function(){return!0},Yb=zi("arc",ai),Gb=$i("area",oi,Di),Xb=1,Zb=.5,Jb=Ai(Bi),Qb={type:"group",tag:"g",nested:!1,attr:ji,bound:Ii,draw:Wi,pick:Vi,background:Fi,foreground:Ui},Kb={type:"image",tag:"image",nested:!1,attr:Zi,bound:Ji,draw:Qi,pick:Si(),get:Yi,xOffset:Gi,yOffset:Xi},e_=$i("line",ui,Ni),t_={type:"path",tag:"path",nested:!1,attr:Ki,bound:ta,draw:Mi(ea),pick:Ci(ea)},n_={type:"rect",tag:"path",nested:!1,attr:na,bound:ra,draw:Mi(ia),pick:Ci(ia)},r_={type:"rule",tag:"line",nested:!1,attr:aa,bound:oa,draw:sa,pick:Si(fa)},i_=zi("shape",fi),a_=zi("symbol",li),o_={height:pa,measureWidth:da,estimateWidth:la,width:la,canvas:ga};ga(!0);var u_={left:"start",center:"middle",right:"end"},s_=new pr,f_={type:"text",tag:"text",nested:!1,attr:_a,bound:xa,draw:wa,pick:Si(ka)},l_=$i("trail",ci,Pi),c_={arc:Yb,area:Gb,group:Qb,image:Kb,line:e_,path:t_,rect:n_,rule:r_,shape:i_,symbol:a_,text:f_,trail:l_},d_={mark:null},h_=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],p_=Ca.prototype;p_.toJSON=function(e){return Oa(this.root,e||0)},p_.mark=function(e,t,n){t=t||this.root.items[0];var r=Ra(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var g_=qa.prototype;g_.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},g_.element=function(){return this._el},g_.canvas=function(){return this._el&&this._el.firstChild},g_.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},g_.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},g_.on=function(){},g_.off=function(){},g_._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},g_.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},g_.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},g_.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then(function(t){var n=new MouseEvent(e.type,e),r=Ta(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)}).catch(function(){})},g_.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=La(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},g_.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,u=i.width(),s=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:u,height:s,left:a,top:o,right:a+u,bottom:o+s}}};var m_=Fa.prototype;m_.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},m_.element=function(){return this._el},m_.canvas=function(){return this._el&&this._el.firstChild},m_.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},m_.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},m_.dirty=function(){},m_.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},m_._render=function(){},m_.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},m_._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return r},m_.sanitizeURL=function(e){return this._load("sanitizeURL",e)},m_.loadImage=function(e){return this._load("loadImage",e);
};var v_=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],y_="mousemove",b_="mouseout",__="click",x_=Q(Ua,qa);x_.initialize=function(e,t,n){var r=this._canvas=e&&za(e,"canvas");if(r){var i=this;this.events.forEach(function(e){r.addEventListener(e,function(t){x_[e]?x_[e].call(i,t):i.fire(e,t)})})}return qa.prototype.initialize.call(this,e,t,n)},x_.canvas=function(){return this._canvas},x_.context=function(){return this._canvas.getContext("2d")},x_.events=v_,x_.DOMMouseScroll=function(e){this.fire("mousewheel",e)},x_.mousemove=Ia("mousemove","mouseover","mouseout"),x_.dragover=Ia("dragover","dragenter","dragleave"),x_.mouseout=Ba("mouseout"),x_.dragleave=Ba("dragleave"),x_.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},x_.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},x_.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},x_.touchmove=function(e){this.fire("touchmove",e,!0)},x_.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},x_.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(t.vegaType=e,e===__&&a&&a.href?this.handleHref(t,a,a.href):e!==y_&&e!==b_||this.handleTooltip(t,a,e!==b_),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},x_.on=function(e,t){var n=this.eventName(e),r=this._handlers,i=this._handlerIndex(r[n],e,t);return i<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},x_.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},x_.pickEvent=function(e){var t=$a(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},x_.pick=function(e,t,n,r,i){var a=this.context(),o=c_[e.marktype];return o.pick.call(this,a,e,t,n,r,i)};var w_=Va(),k_=Q(Ya,Fa),M_=Fa.prototype,E_=new pr;k_.initialize=function(e,t,n,r,i){return this._canvas=wr(1,1),e&&(Na(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),M_.initialize.call(this,e,t,n,r,i)},k_.resize=function(e,t,n,r){return M_.resize.call(this,e,t,n,r),Ha(this._canvas,this._width,this._height,this._origin,this._scale),this._redraw=!0,this},k_.canvas=function(){return this._canvas},k_.context=function(){return this._canvas?this._canvas.getContext("2d"):null},k_.dirty=function(e){var t=Xa(e.bounds,e.mark.group);this._dirty.union(t)},k_._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=Ga(t,a,n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},k_.draw=function(e,t,n){var r=c_[t.marktype];t.clip&&Wa(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},k_.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var O_=Q(Za,qa);O_.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(__,this._hrefHandler),r.removeEventListener(y_,this._tooltipHandler),r.removeEventListener(b_,this._tooltipHandler)),this._svg=r=e&&za(e,"svg"),r&&(r.addEventListener(__,this._hrefHandler),r.addEventListener(y_,this._tooltipHandler),r.addEventListener(b_,this._tooltipHandler)),qa.prototype.initialize.call(this,e,t,n)},O_.canvas=function(){return this._svg},O_.on=function(e,t){var n=this.eventName(e),r=this._handlers,i=this._handlerIndex(r[n],e,t);if(i<0){var a={type:e,handler:t,listener:Ja(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},O_.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var S_={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},A_={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},C_=Object.keys(A_),R_=S_.xmlns,T_=Q(eo,Fa),z_=Fa.prototype;T_.initialize=function(e,t,n,r){return e&&(this._svg=Da(e,0,"svg",R_),this._svg.setAttribute("class","marks"),Na(e,1),this._root=Da(this._svg,0,"g",R_),Na(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),z_.initialize.call(this,e,t,n,r)},T_.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),z_.background.apply(this,arguments)},T_.resize=function(e,t,n,r){return z_.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},T_.canvas=function(){return this._svg},T_.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in S_)e[t]=S_[t];var n=this._bgcolor?Qa("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+Ka("rect"):"";return Qa("svg",e)+n+this._svg.innerHTML+Ka("svg")},T_._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),Na(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},T_.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=Da(t,0,"defs",R_)),to(r,n.gradient[e],i++);for(e in n.clipping)r||(n.el=r=Da(t,0,"defs",R_)),no(r,n.clipping[e],i++);r&&(0===i?(t.removeChild(r),n.el=null):Na(r,i))},T_._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},T_.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},T_.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},T_._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=e.length;a<o;++a)t=e[a],n=t.mark,n.marktype!==r&&(r=n.marktype,i=c_[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,ro(t,s),n.items.forEach(function(e){e.dirty=s})),n.zdirty||(t.exit?(i.nested&&n.items.length?(u=n.items[0],u._svg&&this._update(i,u._svg,u)):t._svg&&(u=t._svg.parentNode,u&&u.removeChild(t._svg)),t._svg=null):(t=i.nested?n.items[0]:t,t._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,ro(t,s)),t._update=s)));return!this._dirtyAll},T_.draw=function(e,t,n){function r(e){var t=a.isDirty(e),n=ao(e,i,l,u.tag,o);t&&(a._update(u,n,e),f&&io(a,n,e)),l=n,++c}if(!this.isDirty(t))return t._svg;var i,a=this,o=this._svg,u=c_[t.marktype],s=t.interactive===!1?"none":null,f="g"===u.tag,l=null,c=0;return i=ao(t,e,n,"g",o),i.setAttribute("class",Pa(t)),f||i.style.setProperty("pointer-events",s),t.clip?i.setAttribute("clip-path",qi(a,t,t.group)):i.removeAttribute("clip-path"),u.nested?t.items.length&&r(t.items[0]):wi(t,r),Na(i,c),i};var D_=null,N_=null,P_={group:function(e,t,n){N_=t.__values__,D_=t.childNodes[1],e.foreground(uo,n,this),D_=t.childNodes[0],e.background(uo,n,this);var r=n.mark.interactive===!1?"none":null;r!==N_.events&&(D_.style.setProperty("pointer-events",r),N_.events=r)},text:function(e,t,n){var r=ma(n);r!==N_.text&&(t.textContent=r,N_.text=r),r=ya(n),r!==N_.font&&(t.style.setProperty("font",r),N_.font=r)}};T_._update=function(e,t,n){D_=t,N_=t.__values__,e.attr(uo,n,this);var r=P_[e.type];r&&r.call(this,e,t,n),this.style(D_,n)},T_.style=function(e,t){if(null!=t){var n,r,i,a,o;for(n=0,r=C_.length;n<r;++n)i=C_[n],o=t[i],o!==N_[i]&&(a=A_[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+so()+"#"+o.id+")"),e.style.setProperty(a,o+"")),N_[i]=o)}};var $_=Q(fo,Fa),L_=Fa.prototype;$_.resize=function(e,t,n,r){L_.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in S_)o[u]=S_[u];a.head=Qa("svg",o);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),s?a.bg=Qa("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+Ka("rect"):a.bg="",a.root=Qa("g",{transform:"translate("+i+")"}),a.foot=Ka("g")+Ka("svg"),this},$_.background=function(){var e=L_.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},$_.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},$_._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},$_.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(n=i.gradient[t],r=n.stops,a+=Qa("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=Qa("stop",{offset:r[e].offset,"stop-color":r[e].color})+Ka("stop");a+=Ka("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=Qa("clipPath",{id:t}),a+=n.path?Qa("path",{d:n.path})+Ka("path"):Qa("rect",{x:0,y:0,width:n.width,height:n.height})+Ka("rect"),a+=Ka("clipPath");return a.length>0?Qa("defs")+a+Ka("defs"):""};var q_;$_.attributes=function(e,t){return q_={},e(lo,t,this),q_},$_.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then(function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e})}return null},$_.mark=function(e){function t(t){var s=r.href(t);s&&(u+=Qa("a",s)),n="g"!==a?co(t,e,a,o):null,u+=Qa(a,r.attributes(i.attr,t),n),"text"===a?u+=ho(ma(t)):"g"===a&&(u+=Qa("path",r.attributes(i.background,t),co(t,e,"bgrect",o))+Ka("path"),u+=Qa("g",r.attributes(i.foreground,t))+r.markGroup(t)+Ka("g")),u+=Ka(a),s&&(u+=Ka("a"))}var n,r=this,i=c_[e.marktype],a=i.tag,o=this._defs,u="";return"g"!==a&&e.interactive===!1&&(n='style="pointer-events: none;"'),u+=Qa("g",{class:Pa(e),"clip-path":e.clip?qi(r,e,e.group):null},n),i.nested?e.items&&e.items.length&&t(e.items[0]):wi(e,t),u+Ka("g")},$_.markGroup=function(e){var t=this,n="";return wi(e,function(e){n+=t.mark(e)}),n};var j_="canvas",F_="png",U_="svg",I_="none",B_={Canvas:j_,PNG:F_,SVG:U_,None:I_},W_={};W_[j_]=W_[F_]={renderer:Ya,headless:Ya,handler:Ua},W_[U_]={renderer:eo,headless:fo,handler:Za},W_[I_]={};var V_=new pr,H_=1e-9,Y_=Q(bo,jt);Y_.transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=c_[a],u=o.bound,s=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),s=_o(i,u),i.items.forEach(function(e){e.bounds.clear().union(s)})):a===Hy||e.modified()?(t.visit(t.MOD,function(e){r.dirty(e)}),s.clear(),i.items.forEach(function(e){s.union(_o(e,u))}),i.role===Jy&&t.reflow()):(n=t.changed(t.REM),t.visit(t.ADD,function(e){s.union(_o(e,u))}),t.visit(t.MOD,function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(_o(e,u))}),n&&(s.clear(),i.items.forEach(function(e){s.union(e.bounds)}))),go(i),t.modifies("bounds")};var G_=":vega_identifier:";xo.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};var X_=Q(xo,jt);X_.transform=function(e,t){var n=wo(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++r)}),n.set(this.value=r),t};var Z_=Q(ko,jt);Z_.transform=function(e,t){var n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Mo(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r=n.marktype===Hy?vr:mr;return t.visit(t.ADD,function(e){r.call(e,n)}),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t};var J_=Q(Eo,jt),Q_={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&Oo(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};J_.transform=function(e,t){var n=Q_[e.method]||Q_.parity,r=t.materialize(t.SOURCE).source;if(r){e.sort&&(r=r.slice().sort(e.sort)),"greedy"===e.method&&(r=r.filter(Ao)),r.forEach(function(e){e.opacity=1});var i=r;if(i.length>=3&&So(i)){t=t.reflow(e.modified()).modifies("opacity");do i=n(i);while(i.length>=3&&So(i));i.length<3&&!T(r).opacity&&(i.length>1&&(T(i).opacity=0),T(r).opacity=1)}if(e.boundScale){var a=Co(e.boundScale,e.boundOrient,e.boundTolerance);r.forEach(function(e){a(e)||(e.opacity=0)})}return t}};var K_=Q(Ro,jt);K_.transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var ex=.5,tx=new pr,nx=Q(Io,jt);nx.transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&jo(n,t,e.layout),Bo(n,t,e)}),e.modified()&&t.reflow(),t};var rx=Object.freeze({bound:bo,identifier:xo,mark:ko,overlap:Eo,render:Ro,viewlayout:Io}),ix="log",ax="pow",ox="utc",ux="sqrt",sx="band",fx="time",lx="point",cx="linear",dx="ordinal",hx="quantile",px="quantize",gx="threshold",mx="bin-linear",vx="bin-ordinal",yx="sequential",bx=Array.prototype.map,_x=Array.prototype.slice,xx={identity:s.scaleIdentity,linear:s.scaleLinear,log:s.scaleLog,ordinal:s.scaleOrdinal,pow:s.scalePow,sqrt:s.scaleSqrt,quantile:s.scaleQuantile,quantize:s.scaleQuantize,threshold:s.scaleThreshold,time:s.scaleTime,utc:s.scaleUtc,band:iu,point:ou,sequential:lu,"bin-linear":su,"bin-ordinal":fu};for(var wx in xx)du(wx,xx[wx]);var kx=hu("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Mx=hu("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Ex=hu("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Ox=hu("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),Sx=hu("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),Ax=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(hu),Cx={blueorange:Ax},Rx={category10:f.schemeCategory10,accent:f.schemeAccent,dark2:f.schemeDark2,paired:f.schemePaired,pastel1:f.schemePastel1,pastel2:f.schemePastel2,set1:f.schemeSet1,set2:f.schemeSet2,set3:f.schemeSet3,category20:kx,category20b:Mx,category20c:Ex,tableau10:Ox,tableau20:Sx,viridis:f.interpolateViridis,magma:f.interpolateMagma,inferno:f.interpolateInferno,plasma:f.interpolatePlasma,rainbow:f.interpolateRainbow,sinebow:f.interpolateSinebow,blueorange:l.interpolateRgbBasis(T(Ax))};pu("blues","Blues"),pu("greens","Greens"),pu("greys","Greys"),pu("purples","Purples"),pu("reds","Reds"),pu("oranges","Oranges"),pu("brownbluegreen","BrBG"),pu("purplegreen","PRGn"),pu("pinkyellowgreen","PiYG"),pu("purpleorange","PuOr"),pu("redblue","RdBu"),pu("redgrey","RdGy"),pu("redyellowblue","RdYlBu"),pu("redyellowgreen","RdYlGn"),pu("spectral","Spectral"),pu("bluegreen","BuGn"),pu("bluepurple","BuPu"),pu("greenblue","GnBu"),pu("orangered","OrRd"),pu("purplebluegreen","PuBuGn"),pu("purpleblue","PuBu"),pu("purplered","PuRd"),pu("redpurple","RdPu"),pu("yellowgreenblue","YlGnBu"),pu("yellowgreen","YlGn"),pu("yelloworangebrown","YlOrBr"),pu("yelloworangered","YlOrRd");var Tx={millisecond:c.timeMillisecond,second:c.timeSecond,minute:c.timeMinute,hour:c.timeHour,day:c.timeDay,week:c.timeWeek,month:c.timeMonth,year:c.timeYear},zx={millisecond:c.utcMillisecond,second:c.utcSecond,minute:c.utcMinute,hour:c.utcHour,day:c.utcDay,week:c.utcWeek,month:c.utcMonth,year:c.utcYear},Dx=Q(Tu,jt);Dx.transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=null==e.count?e.values?e.values.length:10:ku(i,e.count),o=e.format||Ou(i,a,e.formatSpecifier),u=e.values?Mu(i,e.values,a):Eu(i,a);return r&&(n.rem=r),r=u.map(function(e,t){return ye({index:t/(u.length-1),value:e,label:o(e)})}),e.extra&&r.push(ye({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n};var Nx=Q(zu,jt);Nx.transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Du,a=e.key||me,o=this.value;return Zm(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(a))&&k("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=J().test(Nu),o.lookup=function(e){return o.get(a(e))}),t.visit(t.ADD,function(e){var t=a(e),n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(o.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=a(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))}),t.visit(t.REM,function(e){var t=a(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r};var Px=Q(Pu,jt);Px.transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,i=t.encode;if(Zm(i)){if(!n.changed()&&!i.every(function(e){return r[e]}))return t.StopPropagation;i=i[0],n.encode=null}var a="enter"===i,o=r.update||rv,u=r.enter||rv,s=r.exit||rv,f=(i&&!a?r[i]:o)||rv;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(t){u(t,e),o(t,e),f!==rv&&f!==o&&f(t,e)}),n.modifies(u.output),n.modifies(o.output),f!==rv&&f!==o&&n.modifies(f.output)),t.changed(t.REM)&&s!==rv&&(t.visit(t.REM,function(t){s(t,e)}),n.modifies(s.output)),a||f!==rv){var l=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(l,function(t){var r=u(t,e);(f(t,e)||r)&&n.mod.push(t)}),n.mod.length&&n.modifies(u.output)):t.visit(l,function(t){f(t,e)&&n.mod.push(t)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation};var $x="symbol",Lx="discrete",qx="gradient",jx={};jx[hx]=qu,jx[px]=Lu,jx[gx]=ju,jx[mx]=jx[vx]=Fu;var Fx=Q(Yu,jt);Fx.transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=this.value,s=e.type||$x,f=e.scale,l=null==e.count?5:ku(f,e.count),c=e.format||Ou(f,l,e.formatSpecifier),d=e.values||$u(f,l,s);return c=Uu(f,c,s),u&&(o.rem=u),s===$x?(V(i=e.size)?(e.values||0!==f(d[0])||(d=d.slice(1)),a=d.reduce(function(t,n){return Math.max(t,i(n,e))},0)):i=Y(a=i||8),u=d.map(function(t,n){return ye({index:n,label:c(t,n,d),value:t,offset:a,size:i(t,e)})})):s===qx?(n=e.values?f.domain():d,r=vu(f,n[0],T(n)),u=d.map(function(e,t){return ye({index:t,label:c(e,t,d),value:e,perc:r(e)})})):(i=d.length-1,r=Hu(f),u=d.map(function(e,t){return ye({index:t,label:c(e,t,d),value:e,perc:t?r(e):0,perc2:t===i?1:r(d[t+1])})})),o.source=u,o.add=u,this.value=u,o};var Ux=J({line:Ku,"line-radial":es,arc:ts,"arc-radial":ns,curve:rs,"curve-radial":is,"orthogonal-horizontal":as,"orthogonal-vertical":os,"orthogonal-radial":us,"diagonal-horizontal":ss,"diagonal-vertical":fs,"diagonal-radial":ls});Qu.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]};var Ix=Q(Qu,jt);Ix.transform=function(e,t){var n=e.sourceX||Gu,r=e.sourceY||Xu,i=e.targetX||Zu,a=e.targetY||Ju,o=e.as||"path",u=e.orient||"vertical",s=e.shape||"line",f=Ux.get(s+"-"+u)||Ux.get(s);return f||k("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[o]=f(n(e),r(e),i(e),a(e))}),t.reflow(e.modified()).modifies(o)},cs.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};var Bx=Q(cs,jt);Bx.transform=function(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],u=o[0],s=o[1],f=e.field||tv,l=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,d=t.source,h=d.map(f),p=h.length,g=l,m=(c-l)/a.sum(h),v=a.range(p);for(e.sort&&v.sort(function(e,t){return h[e]-h[t]}),n=0;n<p;++n)i=h[v[n]],r=d[v[n]],r[u]=g,r[s]=g+=i*m;return this.value=h,t.reflow(e.modified()).modifies(o)};var Wx=5,Vx=ce([cx,ax,ux]),Hx=ce([cx,ix,ax,ux,fx,ox]),Yx=ce(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]),Gx=Q(ds,jt);Gx.transform=function(e,t){var n,r=t.dataflow,i=this.value;i&&!e.modified("type")||(this.value=i=du((e.type||cx).toLowerCase())());for(n in e)if(!Yx[n]){if("padding"===n&&Hx[i.type])continue;V(i[n])?i[n](e[n]):r.warn("Unsupported scale property: "+n)}return ms(i,e,hs(i,e,r)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var Xx=Q(ws,jt);Xx.transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};var Zx="center",Jx="normalize";ks.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]};var hv=Q(ks,jt);hv.transform=function(e,t){var n,r,i,a,o=e.as||["y0","y1"],u=o[0],s=o[1],f=e.field||tv,l=e.offset===Zx?Ms:e.offset===Jx?Es:Os;for(n=Ss(t.source,e.groupby,e.sort,f),r=0,i=n.length,a=n.max;r<i;++r)l(n[r],a,f,u,s);return t.reflow(e.modified()).modifies(o)};var Qx=Object.freeze({axisticks:Tu,datajoin:zu,encode:Pu,legendentries:Yu,linkpath:Qu,pie:cs,scale:ds,sortitems:ws,stack:ks,validTicks:Mu}),Kx=Array.prototype,ew=Kx.slice,tw=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],nw=["size","smooth"],rw=["x","y","size","cellSize","bandwidth"];Bs.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]};var iw=Q(Bs,jt);iw.transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=e.count||10;return e.values?(n=Ls(),r=nw,i=e.values):(n=Is(),r=rw,i=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?o:Ws(o))),r.forEach(function(t){null!=e[t]&&n[t](e[t])}),this.value&&(a.rem=this.value),i=i&&i.length?n(i).map(ye):[],this.value=a.source=a.add=i,a};var aw="Feature",ow="FeatureCollection",uw="MultiPoint";Vs.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};var sw=Q(Vs,jt);sw.transform=function(e,t){var n,r=this._features,i=this._points,a=e.fields,o=a&&a[0],u=a&&a[1],s=e.geojson,f=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(w(s))||o&&t.modified(w(o))||u&&t.modified(w(u)),this.value&&!n||(f=t.SOURCE,this._features=r=[],this._points=i=[]),s&&t.visit(f,function(e){r.push(s(e))}),o&&u&&(t.visit(f,function(e){var t=o(e),n=u(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])}),r=r.concat({type:aw,geometry:{type:uw,coordinates:i}})),this.value={type:ow,features:r}};var fw=h.geoPath(),lw=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],cw={albers:h.geoAlbers,albersusa:h.geoAlbersUsa,azimuthalequalarea:h.geoAzimuthalEqualArea,azimuthalequidistant:h.geoAzimuthalEquidistant,conicconformal:h.geoConicConformal,conicequalarea:h.geoConicEqualArea,conicequidistant:h.geoConicEquidistant,equirectangular:h.geoEquirectangular,gnomonic:h.geoGnomonic,identity:h.geoIdentity,mercator:h.geoMercator,orthographic:h.geoOrthographic,stereographic:h.geoStereographic,transversemercator:h.geoTransverseMercator};for(var dw in cw)Ys(dw,cw[dw]);Xs.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};var hw=Q(Xs,jt);hw.transform=function(e,t){function n(e){e[o]=i(a(e))}var r=t.fork(t.ALL),i=this.value,a=e.field||Km,o=e.as||"path",u=r.SOURCE;!i||e.modified()?(this.value=i=Gs(e.projection),r.materialize().reflow()):u=a===Km||t.modified(a.fields)?r.ADD_MOD:r.ADD;var s=Zs(i,e.pointRadius);return r.visit(u,n),i.pointRadius(s),r.modifies(o)},Js.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};var pw=Q(Js,jt);pw.transform=function(e,t){function n(e){var t=i([a(e),o(e)]);t?(e[s]=t[0],e[f]=t[1]):(e[s]=void 0,e[f]=void 0)}var r,i=e.projection,a=e.fields[0],o=e.fields[1],u=e.as||["x","y"],s=u[0],f=u[1];return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(r=t.modified(a.fields)||t.modified(o.fields),t.visit(r?t.ADD_MOD:t.ADD,n)),t.modifies(u)},Qs.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};var gw=Q(Qs,jt);gw.transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||A("datum"),a=e.as||"shape",o=n.ADD_MOD;return r&&!e.modified()||(this.value=r=Ks(Gs(e.projection),i,e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,function(e){e[a]=r}),n.modifies(a)},ef.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};var mw=Q(ef,jt);mw.transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)V(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(xe(r[0],n)):t.add.push(ye(n)),r[0]=n,t};var vw=Q(tf,jt);vw.transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=rf(e.type),lw.forEach(function(t){null!=e[t]&&af(n,t,e[t])})):lw.forEach(function(t){e.modified(t)&&af(n,t,e[t])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&nf(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var yw=Object.freeze({contour:Bs,geojson:Vs,geopath:Xs,geopoint:Js,geoshape:Qs,graticule:ef,projection:tf}),bw={center:p.forceCenter,collide:p.forceCollide,nbody:p.forceManyBody,link:p.forceLink,x:p.forceX,y:p.forceY},_w="forces",xw=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ww=["static","iterations"],kw=["x","y","vx","vy"];uf.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:kw}]};var Mw=Q(uf,jt);Mw.transform=function(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(xw),a=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&lf(n,e,0,t)):(this.value=n=ff(t.source,e),n.on("tick",sf(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(ww)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation;return this.finish(e,t)},Mw.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if(n=i[a],n.name===_w&&"link"===n.op._argval.force)for(var u,s=n.op._argops,f=0,l=s.length;f<l;++f)if("links"===s[f].name&&(u=s[f].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(kw)};var Ew=Object.freeze({force:uf});gf.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var Ow=Q(gf,jt);Ow.transform=function(e,t){t.source||k("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each(function(e){e.children&&ge(e.data)&&i.rem.push(e.data)}),this.value=a=m.hierarchy({values:W(e.keys).reduce(function(e,t){return e.key(t),e},g.nest()).entries(i.source)},mf),n&&a.each(function(e){e.children&&(e=ye(e.data),i.add.push(e),i.source.push(e))}),pf(a,me,me)),i.source.root=a,i};var Sw=Q(vf,jt);Sw.transform=function(e,t){t.source&&t.source.root||k(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),yf(n,this.params,e);try{this.value=n(i)}catch(o){k(o)}return i.each(function(e){bf(e,r,a)}),t.reflow(e.modified()).modifies(a).modifies("leaf")};var Aw=["x","y","r","depth","children"];_f.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0
},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:Aw}]};var Cw=Q(_f,vf);Cw.layout=m.pack,Cw.params=["size","padding"],Cw.fields=Aw;var Rw=["x0","y0","x1","y1","depth","children"];xf.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:Rw}]};var Tw=Q(xf,vf);Tw.layout=m.partition,Tw.params=["size","round","padding"],Tw.fields=Rw,wf.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};var zw=Q(wf,jt);zw.transform=function(e,t){t.source||k("Stratify transform requires an upstream data source.");var n=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),i=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),i&&(this.value=pf(m.stratify().id(e.key).parentId(e.parentKey)(r.source),e.key,nv)),r.source.root=this.value,r};var Dw={tidy:m.tree,cluster:m.cluster},Nw=["x","y","depth","children"];kf.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:Nw}]};var Pw=Q(kf,vf);Pw.layout=function(e){var t=e||"tidy";return Dw.hasOwnProperty(t)?Dw[t]():void k("Unrecognized Tree layout method: "+t)},Pw.params=["size","nodeSize","separation"],Pw.fields=Nw,Mf.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};var $w=Q(Mf,jt);$w.transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||k("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,function(e){a[me(e)]=1}),r.each(function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[me(t)]&&a[me(n)]&&i.add.push(ye({source:n,target:t}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,function(e){a[me(e)]=1}),n.forEach(function(e){(a[me(e.source)]||a[me(e.target)])&&i.mod.push(e)})),i};var Lw={binary:m.treemapBinary,dice:m.treemapDice,slice:m.treemapSlice,slicedice:m.treemapSliceDice,squarify:m.treemapSquarify,resquarify:m.treemapResquarify},qw=["x0","y0","x1","y1","depth","children"];Ef.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:qw}]};var jw=Q(Ef,vf);jw.layout=function(){var e=m.treemap();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){Lw.hasOwnProperty(t)?e.tile(Lw[t]):k("Unrecognized Treemap layout method: "+t)},e},jw.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],jw.fields=qw;var Fw=Object.freeze({nest:gf,pack:_f,partition:xf,stratify:wf,tree:kf,treelinks:Mf,treemap:Ef});Of.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var Uw=Q(Of,jt),Iw=[[-1e5,-1e5],[1e5,1e5]];Uw.transform=function(e,t){var n,r,i,a,o=e.as||"path",u=t.source;for(n=v.voronoi().x(e.x).y(e.y),e.size?n.size(e.size):n.extent(e.extent||Iw),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return t.reflow(e.modified()).modifies(o)};var Bw=Object.freeze({voronoi:Of}),Ww=Math.PI/180,Vw=64,Hw=2048,Yw={archimedean:zf,rectangular:Df},Gw=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Xw=["text","font","rotate","fontSize","fontStyle","fontWeight"];$f.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Gw}]};var Zw=Q($f,jt);Zw.transform=function(e,n){function r(t){var r=e[t];return V(r)&&n.modified(r.fields)}var i=e.modified();if(i||n.changed(n.ADD_REM)||Xw.some(r)){var a,o=n.materialize(n.SOURCE).source,u=this.value,s=e.as||Gw,f=e.fontSize||14;if(V(f)?a=e.fontSizeRange:f=Y(f),a){var l=f,c=du("sqrt")().domain(Lf(l,o)).range(a);f=function(e){return c(l(e))}}o.forEach(function(e){e[s[0]]=NaN,e[s[1]]=NaN,e[s[3]]=0});for(var d,h,p=u.words(o).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(f).random(t.random).layout(),g=u.size(),m=g[0]>>1,v=g[1]>>1,y=0,b=p.length;y<b;++y)d=p[y],h=d.datum,h[s[0]]=d.x+m,h[s[1]]=d.y+v,h[s[2]]=d.font,h[s[3]]=d.size,h[s[4]]=d.style,h[s[5]]=d.weight,h[s[6]]=d.rotate;return n.reflow(i).modifies(s)}};var Jw=Object.freeze({wordcloud:$f});Gf.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var Qw=Q(Gf,jt);Qw.transform=function(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)});return n?this.reinit(e,t):this.eval(e,t)}return this.init(e,t)},Qw.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},u=this._dims=[],s=a.length,f=0;f<s;++f)n=i[f].fname,r=o[n]||(o[n]=Vf()),u.push(Wf(r,f,a[f]));return this.eval(e,t)},Qw.reinit=function(e,t){var n,r,i,a,o,u,s,f,l,c=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,g=this._dims,m=this.value,v=m.curr(),y=m.prev(),b=m.all(),_=c.rem=c.add,x=c.mod,w=h.length,k={};if(y.set(v),t.rem.length&&(o=this.remove(e,t,c)),t.add.length&&m.add(t.add),t.mod.length)for(u={},a=t.mod,s=0,f=a.length;s<f;++s)u[a[s]._index]=1;for(s=0;s<w;++s)l=d[s],(!g[s]||e.modified("fields",s)||t.modified(l.fields))&&(i=l.fname,(n=k[i])||(p[i]=r=Vf(),k[i]=n=r.insert(l,t.source,0)),g[s]=Wf(r,s,h[s]).onAdd(n,v));for(s=0,f=m.data().length;s<f;++s)o[s]||(y[s]!==v[s]?_.push(s):u[s]&&v[s]!==b&&x.push(s));return m.mask=(1<<w)-1,c},Qw.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},Qw.insert=function(e,t,n){var r,i,a,o=t.add,u=this.value,s=this._dims,f=this._indices,l=e.fields,c={},d=n.add,h=u.size(),p=h+o.length,g=s.length;u.resize(p,g),u.add(o);var m=u.curr(),v=u.prev(),y=u.all();for(r=0;r<g;++r)i=l[r].fname,a=c[i]||(c[i]=f[i].insert(l[r],o,h)),s[r].onAdd(a,m);for(;h<p;++h)v[h]=y,m[h]!==y&&d.push(h)},Qw.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,u=o.curr(),s=o.all(),f=e.mod;for(n=0,r=f.length;n<r;++n)i=f[n]._index,u[i]!==s&&a.push(i)},Qw.remove=function(e,t,n){var r,i,a,o,u=this._indices,s=this.value,f=s.curr(),l=s.prev(),c=s.all(),d={},h=n.rem,p=t.rem;for(r=0,i=p.length;r<i;++r)a=p[r]._index,d[a]=1,l[a]=o=f[a],f[a]=c,o!==c&&h.push(a);for(a in u)u[a].remove(i,d);return this.reindex(t,i,d),d},Qw.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)})},Qw.update=function(e,t,n){var r,i,a=this._dims,o=e.query,u=t.stamp,s=a.length,f=0;for(n.filters=0,i=0;i<s;++i)e.modified("query",i)&&(r=i,++f);if(1===f)f=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,f=0;i<s;++i)e.modified("query",i)&&(f|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return f},Qw.incrementAll=function(e,t,n,r){var i,a,o,u=this.value,s=u.seen(),f=u.curr(),l=u.prev(),c=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],g=h[1],m=d[0],v=d[1],y=e.one;if(p<m)for(i=p,a=Math.min(m,g);i<a;++i)o=c[i],s[o]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(p>m)for(i=m,a=Math.min(p,v);i<a;++i)o=c[i],s[o]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;if(g>v)for(i=Math.max(p,v),a=g;i<a;++i)o=c[i],s[o]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(g<v)for(i=Math.max(m,g),a=v;i<a;++i)o=c[i],s[o]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;e.range=t.slice()},Qw.incrementOne=function(e,t,n,r){var i,a,o,u=this.value,s=u.curr(),f=e.index(),l=e.bisect(e.range),c=e.bisect(t),d=c[0],h=c[1],p=l[0],g=l[1],m=e.one;if(d<p)for(i=d,a=Math.min(p,h);i<a;++i)o=f[i],s[o]^=m,n.push(o);else if(d>p)for(i=p,a=Math.min(d,g);i<a;++i)o=f[i],s[o]^=m,r.push(o);if(h>g)for(i=Math.max(d,g),a=h;i<a;++i)o=f[i],s[o]^=m,n.push(o);else if(h<g)for(i=Math.max(p,h),a=g;i<a;++i)o=f[i],s[o]^=m,r.push(o);e.range=t.slice()},Xf.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};var Kw=Q(Xf,jt);Kw.transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0===(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),f=function(e){return u[e]&n?null:o[e]};return a.filter(a.MOD,f),i&i-1?(a.filter(a.ADD,function(e){var t=u[e]&n,r=!t&&t^s[e]&n;return r?o[e]:null}),a.filter(a.REM,function(e){var t=u[e]&n,r=t&&!(t^(t^s[e]&n));return r?o[e]:null})):(a.filter(a.ADD,f),a.filter(a.REM,function(e){return(u[e]&n)===i?o[e]:null})),a.filter(a.SOURCE,function(e){return f(e._index)})};var ek=Object.freeze({crossfilter:Gf,resolvefilter:Xf}),tk="4.0.0-rc.2",nk="default",rk="view",ik="timer",ak="window",ok={trap:!1},uk="vega-bind",sk="vega-bind-name",fk="vega-bind-radio",lk="vega-option-",ck="outer",dk=["value","update","react","bind"];Il.prototype.visit=function(e){var t,n,r,i=this;if(e(i))return 1;for(t=Bl(i),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};var hk,pk,gk,mk,vk,yk=1,bk=2,_k=3,xk=4,wk=5,kk=6,Mk=7,Ek=8,Ok=9;hk={},hk[yk]="Boolean",hk[bk]="<end>",hk[_k]="Identifier",hk[xk]="Keyword",hk[wk]="Null",hk[kk]="Numeric",hk[Mk]="Punctuator",hk[Ek]="String",hk[Ok]="RegularExpression";var Sk="ArrayExpression",Ak="BinaryExpression",Ck="CallExpression",Rk="ConditionalExpression",Tk="Identifier",zk="Literal",Dk="LogicalExpression",Nk="MemberExpression",Pk="ObjectExpression",$k="Property",Lk="UnaryExpression",qk="Unexpected token %0",jk="Unexpected number",Fk="Unexpected string",Uk="Unexpected identifier",Ik="Unexpected reserved word",Bk="Unexpected end of input",Wk="Invalid regular expression",Vk="Invalid regular expression: missing /",Hk="Octal literals are not allowed in strict mode.",Yk="Duplicate data property in object literal not allowed in strict mode",Gk="ILLEGAL",Xk="Disabled.",Zk=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),Jk=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),Qk={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},Kk={if:1,this:1},eM={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},tM={},nM=new Date(2e3,0,1),rM="undefined"!=typeof window&&window||null,iM="Literal",aM="Identifier",oM="@",uM="%",sM=":",fM=$d("area",h.geoArea),lM=$d("bounds",h.geoBounds),cM=$d("centroid",h.geoCentroid),dM={},hM="bin_",pM="intersect",gM="union",mM="index:unit",vM={random:function(){return t.random()},isArray:Zm,isBoolean:K,isDate:ee,isNumber:te,isObject:E,isRegExp:ne,isString:O,isTuple:ge,toBoolean:ue,toDate:fe,toNumber:z,toString:le,pad:oe,peek:T,truncate:de,rgb:y.rgb,lab:y.lab,hcl:y.hcl,hsl:y.hsl,sequence:a.range,format:Kc,utcFormat:td,utcParse:rd,timeFormat:ed,timeParse:nd,monthFormat:ad,monthAbbrevFormat:od,dayFormat:ud,dayAbbrevFormat:sd,quarter:fd,utcquarter:ld,warn:dd,info:hd,debug:pd,inScope:gd,clampRange:md,pinchDistance:vd,pinchAngle:yd,screen:bd,containerSize:xd,windowSize:_d,span:Md,merge:kd,flush:wd,bandspace:Td,inrange:Gd,setdata:Bd,pathShape:qd,panLinear:L,panLog:q,panPow:j,zoomLinear:U,zoomLog:I,zoomPow:B,encode:Xd,modify:Kd},yM=["view","item","group","xy","x","y"],bM="event.vega.",_M="this.",xM={};dh("bandwidth",Rd,Sd),dh("copy",zd,Sd),dh("domain",Cd,Sd),dh("range",Ad,Sd),dh("invert",Nd,Sd),dh("scale",Dd,Sd),dh("gradient",Pd,Sd),dh("geoArea",fM,Sd),dh("geoBounds",lM,Sd),dh("geoCentroid",cM,Sd),dh("geoShape",Ld,Sd),dh("indata",Ud,Id),dh("data",jd,Fd),dh("vlSingle",rh,Fd),dh("vlSingleDomain",oh,Fd),dh("vlMulti",rh,ah),dh("vlMultiDomain",oh,ah),dh("vlInterval",ih,Fd),dh("vlIntervalDomain",uh,Fd),dh("treePath",Hd,Fd),dh("treeAncestors",Yd,Fd);var wM,kM,MM={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+S("$"+e)+"]"},functions:hh,constants:eM,visitors:xM},EM=Jc(MM),OM="$",SM={$tupleid:1,toString:function(){return":_tupleid_:"}},AM=bh("key"),CM="ascending",RM="descending",TM="scope",zM="view",DM="timer",NM="view",PM="[",$M="]",LM="{",qM="}",jM=":",FM=",",UM="@",IM=">",BM=/[[\]{}]/,WM={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},VM="var datum=event.item&&event.item.datum;",HM=Vh("aggregate"),YM=Vh("axisticks"),GM=Vh("bound"),XM=Vh("collect"),ZM=Vh("compare"),JM=Vh("datajoin"),QM=Vh("encode"),KM=Vh("facet"),eE=Vh("field"),tE=Vh("key"),nE=Vh("legendentries"),rE=Vh("mark"),iE=Vh("multiextent"),aE=Vh("multivalues"),oE=Vh("overlap"),uE=Vh("params"),sE=Vh("prefacet"),fE=Vh("projection"),lE=Vh("proxy"),cE=Vh("relay"),dE=Vh("render"),hE=Vh("scale"),pE=Vh("sieve"),gE=Vh("sortitems"),mE=Vh("viewlayout"),vE=Vh("values"),yE=0,bE=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],_E=ce(bE),xE=ce(bE.slice(4,9)),wE=ce(bE.slice(9)),kE=ce(bE.slice(1,6)),ME="top",EE="left",OE="right",SE="bottom",AE="center",CE="vertical",RE="start",TE="end",zE="index",DE="label",NE="offset",PE="perc",$E="perc2",LE="size",qE="value",jE="guide-label",FE="guide-title",UE="group-title",IE="symbol",BE="gradient",WE="discrete",VE=["size","shape","fill","stroke","strokeDash","opacity"],HE={name:1,interactive:1},YE=ce(["rule"]),GE=ce(["group","image","rect"]),XE="mark",ZE="frame",JE="scope",QE="axis",KE="axis-domain",eO="axis-grid",tO="axis-label",nO="axis-tick",rO="axis-title",iO="legend",aO="legend-band",oO="legend-entry",uO="legend-gradient",sO="legend-label",fO="legend-symbol",lO="legend-title",cO="title",dO="group",hO="rect",pO="rule",gO="symbol",mO="text",vO="datum."+PE+'<=0?"left":datum.'+PE+'>=1?"right":"center"',yO="datum."+PE+'<=0?"bottom":datum.'+PE+'>=1?"top":"middle"',bO={value:0};vg.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],u=null;for(e.add(t[0]);r<n;++r)t[r].params.pulse=yh(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(u=t[r]);return new vg(e,i,o,a,u)};var _O=vg.prototype;_O.countsRef=function(e,t,n){var r,i,a,o=this,u=o.counts||(o.counts={}),s=yg(t);return null!=s&&(e=o.scope,r=u[s]),r?n&&n.field&&bg(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:yh(o.output)},n&&n.field&&bg(e,a,n),i=e.add(HM(a)),r=e.add(XM({pulse:yh(i)})),r={agg:i,ref:yh(r)},null!=s&&(u[s]=r)),r.ref},_O.tuplesRef=function(){return yh(this.values)},_O.extentRef=function(e,t){return _g(e,this,"extent","extent",t,!1)},_O.domainRef=function(e,t){return _g(e,this,"domain","values",t,!1)},_O.valuesRef=function(e,t,n){return _g(e,this,"vals","values",t,n||!0)},_O.lookupRef=function(e,t){return _g(e,this,"lookup","tupleindex",t,!1)},_O.indataRef=function(e,t){return _g(e,this,"indata","tupleindex",t,!0,!0)};var xO=Tg(S(EE),S(OE),S(AE)),wO=Tg('+(item.orient==="'+OE+'")','+(item.orient!=="'+EE+'")',"0.5"),kO=ce(["width","height","padding","autosize"]),MO=Gg.prototype=Xg.prototype;MO.fork=function(){return new Xg(this)},MO.isSubscope=function(){return this._subid>0},MO.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},MO.id=function(){return(this._subid?this._subid+":":0)+this._id++},MO.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},MO.proxy=function(e){var t=e instanceof gh?yh(e):e;return this.add(lE({value:t}))},MO.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},MO.addUpdate=function(e){return this.updates.push(e),e},MO.finish=function(){function e(e,t,n){var r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}var t,n;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data){n=this.data[t],e(n.input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values");for(var r in n.index)e(n.index[r],t,"index:"+r)}return this},MO.pushState=function(e,t,n){this._encode.push(yh(this.add(pE({pulse:e})))),this._parent.push(t),this._lookup.push(n?yh(this.proxy(n)):null),this._markpath.push(-1)},MO.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},MO.parent=function(){return T(this._parent)},MO.encode=function(){return T(this._encode)},MO.lookup=function(){return T(this._lookup)},MO.markpath=function(){var e=this._markpath;return++e[e.length-1]},MO.fieldRef=function(e,t){if(O(e))return bh(e,t);e.signal||k("Unsupported field reference: "+S(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=yh(this.add(eE(n)))),i},MO.compareRef=function(e,t){function n(e){return Mh(e)?(i=!0,yh(r[e.signal])):e}var r=this.signals,i=!1,a=W(e.field).map(n),o=W(e.order).map(n);return t&&a.push(SM),i?yh(this.add(ZM({fields:a,orders:o}))):_h(a,o)},MO.keyRef=function(e,t){function n(e){return Mh(e)?(i=!0,yh(r[e.signal])):e}var r=this.signals,i=!1;return e=W(e).map(n),i?yh(this.add(tE({fields:e,flat:t}))):xh(e,t)},MO.sortRef=function(e){if(!e)return e;var t=[kh(e.op,e.field),SM],n=e.order||CM;return n.signal?yh(this.add(ZM({fields:t,orders:[n=this.signalRef(n.signal),n]}))):_h(t,[n,n])},MO.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},MO.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&k("Duplicate signal name: "+S(e));var n=t instanceof gh?t:this.add(vh(t));return this.signals[e]=n},MO.getSignal=function(e){return this.signals[e]||k("Unrecognized signal name: "+S(e)),this.signals[e]},MO.signalRef=function(e){return this.signals[e]?yh(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(vh(null))),yh(this.lambdas[e]))},MO.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=ph(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},MO.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},MO.objectProperty=function(e){return e&&E(e)?this.signalRef(e.signal||Zg(e)):e},MO.addBinding=function(e,t){this.bindings||k("Nested signals do not support binding: "+S(e)),this.bindings.push(X({signal:e},t))},MO.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&k("Duplicate scale or projection name: "+S(e)),this.scales[e]=this.add(t)},MO.addScale=function(e,t){this.addScaleProj(e,hE(t))},MO.addProjection=function(e,t){this.addScaleProj(e,fE(t))},MO.getScale=function(e){return this.scales[e]||k("Unrecognized scale name: "+S(e)),this.scales[e]},MO.projectionRef=MO.scaleRef=function(e){return yh(this.getScale(e))},MO.projectionType=MO.scaleType=function(e){return this.getScale(e).params.type},MO.addData=function(e,t){return this.data.hasOwnProperty(e)&&k("Duplicate data set name: "+S(e)),this.data[e]=t},MO.getData=function(e){return this.data[e]||k("Undefined data set name: "+S(e)),this.data[e]},MO.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&k("Duplicate data set name: "+S(e)),this.addData(e,vg.fromEntries(this,t))};var EO="sans-serif",OO=30,SO=2,AO="#4c78a8",CO="#000",RO="#888",TO="#ddd",zO=[{key:"$ref",parse:lm},{key:"$key",parse:dm},{key:"$expr",parse:cm},{key:"$field",parse:hm},{key:"$encode",parse:gm},{key:"$compare",parse:pm},{key:"$context",parse:mm},{key:"$subflow",parse:vm},{key:"$tupleid",parse:ym}],DO={skip:!0};Rm.prototype=Tm.prototype={fork:function(){var e=new Tm(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),xm(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.request(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach(function(e){n[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[bm(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:Sm,setState:Am};var NO="width",PO="height",$O="padding",LO={skip:!0},qO=Q(Ym,Lt);qO.run=function(e){if(Lt.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(t){this.error(t)}return this},qO.render=function(){return this._renderer&&(this._resize&&(this._resize=0,ol(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},qO.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},qO.container=function(){return this._el},qO.scenegraph=function(){return this._scenegraph},qO.origin=function(){return this._origin.slice()},qO.signal=function(e,t,n){var r=Gm(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},qO.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},qO.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},qO.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},qO.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},qO.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},qO.renderer=function(e){return arguments.length?(po(e)||k("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},qO.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},qO.loader=function(e){return arguments.length?(e!==this._loader&&(Lt.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},qO.resize=function(){return this._autosize=1,this},qO._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},qO._resizeView=$m,qO.addEventListener=function(e,t,n){var r=t;return n&&n.trap===!1||(r=Sl(this,t),r.raw=t),this._handler.on(e,r),this},qO.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;--a>=0;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},qO.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},qO.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},qO.addSignalListener=function(e,t){var n=Gm(this,e),r=Xm(n,t);return r||(r=Sl(this,function(){t(e,n.value)}),r.handler=t,this.on(n,null,r)),this},qO.removeSignalListener=function(e,t){var n=Gm(this,e),r=Xm(n,t);return r&&n._targets.remove(r),this},qO.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},qO.timer=Um,qO.events=cl,qO.finalize=ml,qO.hover=gl,qO.data=Kf,qO.change=el,qO.insert=tl,qO.remove=nl,qO.initialize=Cl,qO.toImageURL=zl,qO.toCanvas=Nl,qO.toSVG=Pl,qO.getState=Lm,qO.setState=Fm,X(Hv,Py,rx,Qx,yw,Ew,Fw,Bw,Jw,ek),t.timeFormatLocale=i.timeFormatDefaultLocale,t.formatLocale=d.formatDefaultLocale,t.version=tk,t.Dataflow=Lt,t.EventStream=Ce,t.Parameters=Me,t.Pulse=_t,t.MultiPulse=Mt,t.Operator=Ee,t.Transform=jt,t.changeset=ke,t.ingest=ye,t.isTuple=ge,t.definition=Ft,t.transform=Ut,t.transforms=Hv,t.tupleid=me,t.scale=du,t.scheme=gu,t.interpolate=bu,t.interpolateRange=mu,t.timeInterval=xu,t.utcInterval=wu,t.projection=Ys,t.View=Ym,t.parse=tm,t.expressionFunction=dh,t.runtime=Om,t.runtimeContext=Cm,t.bin=Zt,t.bootstrapCI=en,t.quartiles=tn,t.setRandom=Kt,t.randomInteger=nn,t.randomKDE=an,t.randomMixture=un,t.randomNormal=rn,t.randomUniform=sn,t.accessor=_,t.accessorName=x,t.accessorFields=w,t.id=Qm,t.identity=Km,t.zero=ev,t.one=tv,t.truthy=nv,t.falsy=rv,t.logger=R,t.None=iv,t.Error=av,t.Warn=ov,t.Info=uv,t.Debug=sv,t.panLinear=L,t.panLog=q,t.panPow=j,t.zoomLinear=U,t.zoomLog=I,t.zoomPow=B,t.array=W,t.compare=H,t.constant=Y,t.debounce=G,t.error=k,t.extend=X,t.extentIndex=Z,t.fastmap=J,t.field=A,t.inherits=Q,t.isArray=Zm,t.isBoolean=K,t.isDate=ee,t.isFunction=V,t.isNumber=te,t.isObject=E,t.isRegExp=ne,t.isString=O,t.key=re,t.merge=ie,t.pad=oe,t.peek=T,t.repeat=ae,t.splitAccessPath=M,t.stringValue=S,t.toBoolean=ue,t.toDate=fe,t.toNumber=z,t.toString=le,t.toSet=ce,t.truncate=de,t.visitArray=he,t.loader=ze,t.read=lt,t.inferType=Fe,t.inferTypes=Ue,t.typeParsers=Mv,t.formats=ft,t.Bounds=pr,t.Gradient=gr,t.GroupItem=vr,t.ResourceLoader=Mr,t.Item=mr,t.Scenegraph=Ca,t.Handler=qa,t.Renderer=Fa,t.CanvasHandler=Ua,t.CanvasRenderer=Ya,t.SVGHandler=Za,t.SVGRenderer=eo,t.SVGStringRenderer=fo,t.RenderType=B_,t.renderModule=po,t.Marks=c_,t.boundClip=go,t.boundContext=hi,t.boundStroke=di,t.boundItem=Ma,t.boundMark=Ea,t.pathCurves=Sr,t.pathSymbols=Nr,t.pathRectangle=Ur,t.pathTrail=Ir,t.pathParse=Ar,t.pathRender=zr,t.point=$a,t.domCreate=Ta,t.domFind=za,t.domChild=Da,t.domClear=Na,t.openTag=Qa,t.closeTag=Ka,t.font=ya,t.textMetrics=o_,t.resetSVGClipId=Li,t.sceneEqual=mo,t.pathEqual=vo,t.sceneToJSON=Oa,t.sceneFromJSON=Sa,t.sceneZOrder=xi,t.sceneVisit=wi,t.scenePickVisit=ki,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,n(1).Buffer)},function(e,t,n){(function(e){!function(e,r){r(t,n(34),n(21),n(8),n(40),n(20),n(39),n(38),n(11),n(12),n(19),n(36),n(35),n(9),n(37),n(41),n(10),n(22))}(this,function(t,r,i,a,o,u,s,f,l,c,d,h,p,g,m,v,y,b){"use strict";function _(e,t,n){return e.fields=t||[],e.fname=n,e}function x(e){return null==e?null:e.fname}function w(e){return null==e?null:e.fields}function k(e){throw Error(e)}function M(e){function t(){a.push(f+e.substring(n,r)),f="",n=r+1}var n,r,i,a=[],o=null,u=0,s=e.length,f="";for(e+="",n=r=0;r<s;++r)if("\\"===(i=e[r]))f+=e.substring(n,r),n=++r;else if(i===o)t(),o=null,u=-1;else{if(o)continue;n===u&&'"'===i?(n=r+1,o=i):n===u&&"'"===i?(n=r+1,o=i):"."!==i||u?"["===i?(n<r&&t(),u=n=r+1):"]"===i&&(u||k("Access path missing open bracket: "+e),0<u&&t(),u=0,n=r+1):n<r?t():n=r+1}return u&&k("Access path missing closing bracket: "+e),o&&k("Access path missing closing quote: "+e),n<r&&(r++,t()),a}function E(e){return e===Object(e)}function O(e){return"string"==typeof e}function S(e){return al(e)?"["+e.map(S)+"]":E(e)||O(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function A(e,t){var n=M(e),r="return _["+n.map(S).join("][")+"];";return _(Function("_",r),[e=1===n.length?n[0]:e],t||e)}function C(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function R(e){var t=e||hl;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return pl<=t&&C("error","ERROR",arguments),this},warn:function(){return gl<=t&&C("warn","WARN",arguments),this},info:function(){return ml<=t&&C("log","INFO",arguments),this},debug:function(){return vl<=t&&C("log","DEBUG",arguments),this}}}function T(e){return e[e.length-1]}function z(e){return null==e||""===e?null:+e}function D(e){return function(t){return e*Math.exp(t)}}function N(e){return function(t){return Math.log(e*t)}}function P(e){
return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function $(e,t,n,r){var i=n(e[0]),a=n(T(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function L(e,t){return $(e,t,z,sl)}function q(e,t){var n=Math.sign(e[0]);return $(e,t,N(n),D(n))}function j(e,t,n){return $(e,t,P(n),P(1/n))}function F(e,t,n,r,i){var a=r(e[0]),o=r(T(e)),u=null!=t?r(t):(a+o)/2;return[i(u+(a-u)*n),i(u+(o-u)*n)]}function U(e,t,n){return F(e,t,n,z,sl)}function I(e,t,n){var r=Math.sign(e[0]);return F(e,t,n,N(r),D(r))}function B(e,t,n,r){return F(e,t,n,P(r),P(1/r))}function W(e){return null!=e?al(e)?e:[e]:[]}function V(e){return"function"==typeof e}function H(e,t){var n,r,i,a,o,u,s,f,l,c=[],d=(e=W(e)).map(function(e,t){return null==e?null:(c.push(t),V(e)?e:M(e).map(S).join("]["))}),h=c.length-1,p=W(t),g="var u,v;return ";if(h<0)return null;for(r=0;r<=h;++r)V(i=d[n=c[r]])?(a="(u=this."+(u="f"+n)+"(a))",o="(v=this."+u+"(b))",(s=s||{})[u]=i):(a="(u=a["+i+"])",o="(v=b["+i+"])"),u="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==p[n]?f=-(l=1):(l=-1,f=1),g+="("+a+"<"+o+"||u==null)&&v!=null?"+f+":(u>v||v==null)&&u!=null?"+l+":"+u+"!==u&&v===v?"+f+":v!==v&&u===u?"+l+(n<h?":":":0");return i=Function("a","b",g+";"),s&&(i=i.bind(s)),e=e.reduce(function(e,t){return V(t)?(w(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),_(i,Object.keys(e))}function Y(e){return V(e)?e:function(){return e}}function G(e,t){function n(){t(i),r=i=null}var r,i;return function(t){i=t,r&&clearTimeout(r),r=setTimeout(n,e)}}function X(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e}function Z(e,t){var n,r,i,a,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(null!=(r=e[u])&&r<=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=e[u])&&(r<n&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(null!=(r=t(e[u],u,e))&&r<=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=t(e[u],u,e))&&(r<n&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]}function J(e){function t(e){return i.hasOwnProperty(e)&&i[e]!==yl}var n,r,i={};return n={size:0,empty:0,object:i,has:t,get:function(e){return t(e)?i[e]:void 0},set:function(e,r){return t(e)||(++n.size,i[e]===yl&&--n.empty),i[e]=r,this},delete:function(e){return t(e)&&(--n.size,++n.empty,i[e]=yl),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(e){return arguments.length?(r=e,n):r},clean:function(){var e,t,a={},o=0;for(e in i)(t=i[e])===yl||r&&r(t)||(a[e]=t,++o);n.size=o,n.empty=0,n.object=i=a}},e&&Object.keys(e).forEach(function(t){n.set(t,e[t])}),n}function Q(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}function K(e){return"boolean"==typeof e}function ee(e){return"[object Date]"===Object.prototype.toString.call(e)}function te(e){return"number"==typeof e}function ne(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function re(e,t){return e&&(e=t?W(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):W(e)),_(e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?S(e):M(e).map(S).join("]["))+"]"}).join("+'|'+")+";"):function(){return""},e,"key")}function ie(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),u=0,s=0,f=0;u<i&&s<a;++f)o[f]=0<e(t[u],n[s])?n[s++]:t[u++];for(;u<i;++u,++f)o[f]=t[u];for(;s<a;++s,++f)o[f]=n[s];return o}function ae(e,t){for(var n="";0<=--t;)n+=e;return n}function oe(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?ae(i,o)+a:"center"===r?ae(i,~~(o/2))+a+ae(i,Math.ceil(o/2)):a+ae(i,o)}function ue(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}function se(e){return te(e)?e:ee(e)?e:Date.parse(e)}function fe(e,t){return t=t||se,null==e||""===e?null:t(e)}function le(e){return null==e||""===e?null:e+""}function ce(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function de(e,t,n,r){var i=null!=r?r:"",a=e+"",o=a.length,u=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function he(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}function pe(e){var t=e||sl,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0)<=(i=n.indexOf(e))&&n.splice(i,1),n},n}function ge(e){return!(!e||!me(e))}function me(e){return e[bl]}function ve(e,t){return e[bl]=t,e}function ye(e){var t=e===Object(e)?e:{data:e};return me(t)?t:ve(t,_l++)}function be(e){return _e(e,ye({}))}function _e(e,t){for(var n in e)t[n]=e[n];return t}function xe(e,t){return ve(t,me(e))}function we(e){return e&&e.constructor===ke}function ke(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:ke,insert:function(t){for(var n=W(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=V(e)?r:t,i=W(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(e,t,r){var a={field:t,value:Y(r)};return V(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return V(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function s(e,t,n){n?e[t]=n(e):o.encode=t,a||(f[me(e)]=e)}var f,l,c,d,h,p,g;for(l=0,c=e.length;l<c;++l)o.add.push(ye(e[l]));for(f={},l=0,c=t.length;l<c;++l)f[me(p=t[l])]=p;for(l=0,c=r.length;l<c;++l)h=r[l],u.forEach(function(e){h(e)&&(f[me(e)]=e)});for(g in f)o.rem.push(f[g]);for(f={},l=0,c=n.length;l<c;++l)s((d=n[l]).tuple,d.field,d.value),o.modifies(d.field);for(l=0,c=i.length;l<c;++l)d=i[l],h=d.filter,u.forEach(function(e){h(e)&&s(e,d.field,d.value)}),o.modifies(d.field);if(a)o.mod=t.length||r.length?u.filter(function(e){return f.hasOwnProperty(me(e))}):u.slice();else for(g in f)o.mod.push(f[g]);return o}}}function Me(){Object.defineProperty(this,xl,{writable:!0,value:{}})}function Ee(e,t,n,r){this.id=++wl,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Oe(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function Se(e,t,n){this.id=++El,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ae(e,t,n){return new Se(e,t,n)}function Ce(e){return{options:e||{},sanitize:Te,load:Re,file:De,http:ze}}function Re(e,t){var n=this;return n.sanitize(e,t).then(function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)})}function Te(e,t){return t=X({},this.options,t),new Promise(function(n,r){var i,a,o,u,s={href:null};null!=e&&"string"==typeof e?(a=Sl.test(e),(u=t.baseURL)&&!a&&(Pe(e,"/")||"/"===u[u.length-1]||(e="/"+e),e=u+e),o=(i=Pe(e,Al))||"file"===t.mode||"http"!==t.mode&&!a&&Ne(),i?e=e.slice(Al.length):Pe(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(s,"localFile",{value:!!o}),s.href=e,t.target&&(s.target=t.target+""),n(s)):r("Sanitize failure, invalid URI: "+S(e))})}function ze(e,t){return(r=e,i=X({},this.options.http,t),a="function"==typeof fetch?fetch:n(14),a?a(r,i):Promise.reject("No fetch method available.")).then(function(e){if(!e.ok)throw e.status+""+e.statusText;return e.text()});var r,i,a}function De(e){return new Promise(function(t,n){var r=Ne();r?r.readFile(e,function(e,r){e?n(e):t(r)}):n("No file system access for "+e)})}function Ne(){var e=n(18);return e&&V(e.readFile)?e:null}function Pe(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function $e(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o,u=Rl.slice();for(r=0,i=e.length;r<i;++r){for(n=t?e[r][t]:e[r],a=0;a<u.length;++a)null==(o=n)||o!=o||u[a](n)||(u.splice(a,1),--a);if(0===u.length)return"string"}return Tl[Rl.indexOf(u[0])]}function Le(e,t){return t.reduce(function(t,n){return t[n]=$e(e,n),t},{})}function qe(e){return!(isNaN(+e)||e instanceof Date)}function je(e){return function(t,n){var r={delimiter:e};return Fe(t,n?X(n,r):r)}}function Fe(e,t){return t.header&&(e=t.header.map(S).join(t.delimiter)+"\n"+e),r.dsvFormat(t.delimiter).parse(e+"")}function Ue(t,n){var r,i,a,o=n&&n.property?A(n.property):sl;return!E(t)||(a=t,"function"==typeof e&&V(e.isBuffer)&&e.isBuffer(a))?o(JSON.parse(t)):(r=o(t),i&&i.copy?JSON.parse(JSON.stringify(r)):r)}function Ie(e){return e}function Be(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return We(e,t)})}:We(e,t)}function We(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=Ve(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function Ve(e,t){function n(e,t){t.length&&t.pop();for(var n=s[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(u(n[r],r));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,i)}function r(e){return u(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}var u=function(e){if(null==e)return Ie;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,f=e.length,l=new Array(f);for(l[0]=(t+=e[0])*r+a,l[1]=(n+=e[1])*i+o;s<f;)l[s]=e[s],++s;return l}}(e.transform),s=e.arcs;return function e(t){var n,a=t.type;switch(a){case"GeometryCollection":return{type:a,geometries:t.geometries.map(e)};case"Point":n=r(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(r);break;case"LineString":n=i(t.arcs);break;case"MultiLineString":n=t.arcs.map(i);break;case"Polygon":n=o(t.arcs);break;case"MultiPolygon":n=t.arcs.map(o);break;default:return null}return{type:a,coordinates:n}}(t)}function He(e,t){function n(e,t){for(var n in e){var i=e[n];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){r[e<0?~e:e]=1}),o.push(i)}}var r={},i={},a={},o=[],u=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++u],t[u]=n,t[r]=i)}),t.forEach(function(t){var n,r,o=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}(t),u=o[0],s=o[1];if(n=a[u])if(delete a[n.end],n.push(t),n.end=s,r=i[s]){delete i[r.start];var f=r===n?n:n.concat(r);i[f.start=n.start]=a[f.end=r.end]=f}else i[n.start]=a[n.end]=n;else if(n=i[s])if(delete i[n.start],n.unshift(t),n.start=u,r=a[u]){delete a[r.end];var l=r===n?n:r.concat(n);i[l.start=r.start]=a[l.end=n.end]=l}else i[n.start]=a[n.end]=n;else i[(n=[t]).start=u]=a[n.end=s]=n}),n(a,i),n(i,a),t.forEach(function(e){r[e<0?~e:e]||o.push([e])}),o}function Ye(e){return Ve(e,function(e,t,n){var r,i,a;if(1<arguments.length)r=function(e,t,n){function r(e){var t=e<0?~e:e;(s[t]||(s[t]=[])).push({i:e,g:o})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}var o,u=[],s=[];return function e(t){switch((o=t).type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":i(t.arcs);break;case"MultiLineString":case"Polygon":a(t.arcs);break;case"MultiPolygon":t.arcs.forEach(a)}}(t),s.forEach(null==n?function(e){u.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&u.push(e[0].i)}),u}(0,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:He(e,r)}}.apply(this,arguments))}function Ge(e,t){return 1<arguments.length?(zl[e]=t,this):zl.hasOwnProperty(e)?zl[e]:null}function Xe(e,t,n){var r=Ge((t=t||{}).type||"json");return r||k("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function(e,t,n){if(e.length){n=n||i.timeParse;var r,a,o,u,s,f,l,c=e.columns||Object.keys(e[0]);for("auto"===t&&(t=Le(e,c)),c=Object.keys(t),r=c.map(function(e){var r,a,o=t[e];if(o&&(0===o.indexOf("date:")||0===o.indexOf("utc:")))return("'"===(a=(r=o.split(/:(.+)?/,2))[1])[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1)),"utc"===r[0]?i.utcParse(a):n(a);if(!Cl[o])throw Error("Illegal format pattern: "+e+":"+o);return Cl[o]}),u=0,f=e.length,l=c.length;u<f;++u)for(a=e[u],s=0;s<l;++s)o=c[s],a[o]=r[s](a[o])}}(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e}function Ze(e,t,n,r,i,a){var o,u,s=X({},a,Dl);V(n)||(n=Y(n)),void 0===r?o=function(t){e.touch(n(t))}:V(r)?(u=new Ee(null,r,i,(!1)),o=function(t){var r,i=n(t);u.evaluate(t),we(r=u.value)?e.pulse(i,r,a):e.update(i,r,s)}):o=function(t){e.update(n(t),r,s)},t.apply(o)}function Je(e,t,n,r,i,a){var o,u;void 0===r?u=n:(o=V(r)?r:Y(r),(u=new Ee(null,r=n?function(e,t){var r=o(e,t);return n.skip()||(n.skip(r!==this.value).value=r),r}:o,i,(!1))).modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),t.targets().add(u)}function Qe(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Ke(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function et(e,t){var n=[];return he(e,t,function(e){n.push(e)}),n}function tt(e,t){var n={};return e.visit(t,function(e){n[me(e)]=1}),function(e){return n[me(e)]?null:e}}function nt(e,t,n,r){var i,a,o,u,s,f=this,l=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,o=0,u=(this.pulses=n).length;o<u;++o)if((i=n[o]).stamp===t){if(i.fields)for(s in a=f.fields||(f.fields={}),i.fields)a[s]=1;i.changed(f.ADD)&&(l|=f.ADD),i.changed(f.REM)&&(l|=f.REM),i.changed(f.MOD)&&(l|=f.MOD)}this.changes=l}function rt(e,t){try{t(e)}catch(t){e.error(t)}}function it(e){this.cmp=e,this.nodes=[]}function at(e,t,n,r){var i,a,o;for(i=e[n];t<n&&r(i,a=e[o=n-1>>1])<0;)e[n]=a,n=o;return e[n]=i}function ot(e,t,n){for(var r,i=t,a=e.length,o=e[t],u=2*t+1;u<a;)(r=u+1)<a&&0<=n(e[u],e[r])&&(u=r),e[t]=e[u],u=2*(t=u)+1;return e[t]=o,at(e,i,t,n)}function ut(){this._log=R(),this.logLevel(pl),this._clock=0,this._rank=0;try{this._loader=Ce()}catch(e){}this._touched=pe(ul),this._pulses={},this._pulse=null,this._heap=new it(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function st(e){return function(){return this._log[e].apply(this,arguments)}}function ft(e,t){Ee.call(this,e,null,t)}function lt(e){var t=ct(e);return t&&t.Definition||null}function ct(e){return e=e&&e.toLowerCase(),Ul.hasOwnProperty(e)?Ul[e]:null}function dt(e){return e&&e.length?1===e.length?e[0]:(t=e,function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function ht(e,t,n){return n||e+(t?"_"+t:"")}function pt(e,t){return Il[e](t)}function gt(e){return function(t){var n=X({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function mt(e,t){return e.idx-t.idx}function vt(e,t){var n=t||sl,r=function(e,t){var n,r=e.reduce(function e(n,r){function i(t){n[t]||e(n,n[t]=Il[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),n},e.reduce(function(e,t){return e[t.name]=t,e},{})),i=[];for(n in r)i.push(r[n]);return i.sort(mt)}(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",u="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return r.forEach(function(e){i+=e.init,o+=e.add,u+=e.rem}),e.slice().sort(mt).forEach(function(e){s+="t['"+e.out+"']="+e.set+";"}),s+="return t;",(a=Function("cell",a)).prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",u),a.prototype.set=Function("t",s),a.prototype.get=n,a.fields=e.map(function(e){return e.out}),a}function yt(e){var t,n,r,i,a,o,u,s,f=e.maxbins||20,l=e.base||10,c=Math.log(l),d=e.divide||[5,2],h=e.extent[0],p=e.extent[1],g=p-h;if(e.step)t=e.step;else if(e.steps){for(a=g/f,o=0,u=e.steps.length;o<u&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(f)/c),r=e.minstep||0,t=Math.max(r,Math.pow(l,Math.round(Math.log(g)/c)-n));Math.ceil(g/t)>f;)t*=l;for(o=0,u=d.length;o<u;++o)r<=(a=t/d[o])&&g/a<=f&&(t=a)}return i=0<=(a=Math.log(t))?0:1+~~(-a/c),s=Math.pow(l,-i-1),(e.nice||void 0===e.nice)&&(h=h<(a=Math.floor(h/t+s)*t)?a-t:a,p=Math.ceil(p/t)*t),{start:h,stop:p,step:t}}function bt(e,t){var n,r=[],i=e.length,a=-1;if(null==t)for(;++a<i;)isNaN(n=_t(e[a]))||r.push(n);else for(;++a<i;)isNaN(n=_t(t(e[a],a,e)))||r.push(n);return r}function _t(e){return null===e?NaN:+e}function xt(e,n,r,i){var o,u,s,f,l=bt(e,i),c=l.length,d=n;for(s=0,f=Array(d);s<d;++s){for(u=o=0;u<c;++u)o+=l[~~(t.random()*c)];f[s]=o/c}return[a.quantile(f.sort(a.ascending),r/2),a.quantile(f,1-r/2)]}function wt(e,t){var n=bt(e,t);return[a.quantile(n.sort(a.ascending),.25),a.quantile(n,.5),a.quantile(n,.75)]}function kt(e,n){var r,i,a=NaN,o={mean:function(e){return arguments.length?(r=e||0,a=NaN,o):r},stdev:function(e){return arguments.length?(i=null==e?1:e,a=NaN,o):i},sample:function(){var e,n,o=0,u=0;if(a==a)return o=a,a=NaN,o;for(;0===(e=(o=2*t.random()-1)*o+(u=2*t.random()-1)*u)||1<e;);return n=Math.sqrt(-2*Math.log(e)/e),a=r+u*n*i,r+o*n*i},pdf:function(e){var t=Math.exp(Math.pow(e-r,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*t},cdf:function(e){var t,n=(e-r)/i,a=Math.abs(n);if(37<a)t=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(t=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),t/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):t=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return 0<n?1-t:t},icdf:function(e){if(e<=0||1<=e)return NaN;var t=2*e-1,n=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*n)+Math.log(1-Math.pow(t,2))/2,o=Math.log(1-t*t)/n,u=(0<t?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return r+i*Math.SQRT2*u}};return o.mean(e).stdev(n)}function Mt(e,n){var r=kt(),i={},o=0;return i.data=function(t){return arguments.length?(o=(e=t)?t.length:0,i.bandwidth(n)):e},i.bandwidth=function(t){return arguments.length?(!(n=t)&&e&&(o=(r=e).length,u=wt(r),s=(u[2]-u[0])/1.34,n=1.06*Math.min(Math.sqrt(a.variance(r)),s)*Math.pow(o,-.2)),i):n;var r,o,u,s},i.sample=function(){return e[~~(t.random()*o)]+n*r.sample()},i.pdf=function(t){for(var i=0,a=0;a<o;++a)i+=r.pdf((t-e[a])/n);return i/n/o},i.cdf=function(t){for(var i=0,a=0;a<o;++a)i+=r.cdf((t-e[a])/n);return i/o},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)}function Et(e,n){var r,i={},a=0;return i.weights=function(e){return arguments.length?(r=function(e){var t,n=[],r=0;for(t=0;t<a;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<a;++t)n[t]/=r;return n}(n=e||[]),i):n},i.distributions=function(t){return arguments.length?(t?(a=t.length,e=t):(a=0,e=[]),i.weights(n)):e},i.sample=function(){for(var n=t.random(),i=e[a-1],o=r[0],u=0;u<a-1;o+=r[++u])if(n<o){i=e[u];break}return i.sample()},i.pdf=function(t){for(var n=0,i=0;i<a;++i)n+=r[i]*e[i].pdf(t);return n},i.cdf=function(t){for(var n=0,i=0;i<a;++i)n+=r[i]*e[i].cdf(t);return n},i.icdf=function(){throw Error("Mixture icdf not supported.")},i.distributions(e).weights(n)}function Ot(e,n){null==n&&(n=null==e?1:e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(a=i-(r=e||0),o):r},o.max=function(e){return arguments.length?(a=(i=e||0)-r,o):i},o.sample=function(){return r+a*t.random()},o.pdf=function(e){return r<=e&&e<=i?1/a:0},o.cdf=function(e){return e<r?0:i<e?1:(e-r)/a},o.icdf=function(e){return 0<=e&&e<=1?r+e*a:NaN},o.min(e).max(n)}function St(e){this._key=e?A(e):me,this.reset()}function At(e){ft.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Ct(e){ft.call(this,null,e)}function Rt(e,t,n){var r=e,i=t||[],a=n||[],o={},u=0;return{add:function(e){a.push(e)},remove:function(e){o[r(e)]=++u},size:function(){return i.length},data:function(e,t){return u&&(i=i.filter(function(e){return!o[r(e)]}),o={},u=0),t&&e&&i.sort(e),a.length&&(i=e?ie(e,i,a.sort(e)):i.concat(a),a=[]),i}}}function Tt(e){ft.call(this,[],e)}function zt(e){Ee.call(this,null,Dt,e)}function Dt(e){return this.value&&!e.modified()?this.value:H(e.fields,e.orders)}function Nt(e){ft.call(this,null,e)}function Pt(e){ft.call(this,null,e)}function $t(e){ft.call(this,null,e)}function Lt(e){ft.call(this,[1/0,-1/0],e)}function qt(e,t){Ee.call(this,e),this.parent=t}function jt(e){ft.call(this,{},e),this._keys=J();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function Ft(e){Ee.call(this,null,Ut,e)}function Ut(e){return this.value&&!e.modified()?this.value:al(e.name)?W(e.name).map(function(e){return A(e)}):A(e.name,e.as)}function It(e){ft.call(this,J(),e)}function Bt(e,t){return e?e.map(function(e,n){return t[n]||x(e)}):null}function Wt(e){ft.call(this,[],e)}function Vt(e){ft.call(this,[],e)}function Ht(e){ft.call(this,null,e)}function Yt(e){ft.call(this,[],e)}function Gt(e){ft.call(this,[],e)}function Xt(e){At.call(this,e)}function Zt(e){Ee.call(this,null,Jt,e)}function Jt(e){return this.value&&!e.modified()?this.value:re(e.fields,e.flat)}function Qt(e){ft.call(this,{},e)}function Kt(e){Ee.call(this,null,en,e)}function en(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=1/0,a=-1/0,o=e.extents;for(t=0,n=o.length;t<n;++t)(r=o[t])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function tn(e){Ee.call(this,null,nn,e)}function nn(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function rn(e){ft.call(this,null,e)}function an(e){At.call(this,e)}function on(e){jt.call(this,e)}function un(e){ft.call(this,null,e)}function sn(e){ft.call(this,null,e)}function fn(e){ft.call(this,null,e)}function ln(e){ft.call(this,[],e),this.count=0}function cn(e){ft.call(this,null,e)}function dn(e){ft.call(this,null,e),this.modified(!0)}function hn(e){ft.call(this,J(),e)}function pn(e){ft.call(this,null,e)}function gn(e){function t(e){W(w(e)).forEach(function(e){s[e]=1})}var n=W(e.ops),r=W(e.fields),i=W(e.params),a=W(e.as),o=this.outputs=[],u=this.windows=[],s={},f={},l=!0,c=[],d=[];t(e.sort),n.forEach(function(e,n){var s,h,p,g,m,v=r[n],y=x(v),b=ht(e,y,a[n]);if(t(v),o.push(b),oc.hasOwnProperty(e))u.push((s=e,h=r[n],p=i[n],g=b,{init:(m=oc[s](h,p)).init||fl,update:function(e,t){t[g]=m.next(e)}}));else{if(null==v&&"count"!==e&&k("Null aggregate field specified."),"count"===e)return void c.push(b);l=!1;var _=f[y];_||((_=f[y]=[]).field=v,d.push(_)),_.push(pt(e,b))}}),(c.length||d.length)&&(this.cell=function(e,t,n){e=e.map(function(e){return vt(e,e.field)});var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var u=r.data=new St;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(u&&u.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<i;++e)a[e].init()},r}(d,c,l)),this.inputs=Object.keys(s)}function mn(e){ft.call(this,{},e),this._mlen=0,this._mods=[]}function vn(e,t,n){var r=n.sort,i=r&&!n.ignorePeers,o=n.frame||[null,0],u=e.data(r),s=u.length,f=0,l=i?a.bisector(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:r||Y(-1)};for(t.init();f<s;++f)yn(c,o,f,s),i&&bn(c,l),t.update(c,u[f])}function yn(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function bn(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;0<n&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function _n(e){this.clear(),e&&this.union(e)}function xn(e,t){var n,r=[];return n={id:"gradient_"+Ic++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}function wn(e){this.mark=e,this.bounds=this.bounds||new _n}function kn(e){wn.call(this,e),this.items=this.items||[]}function Mn(e,t){return function(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}(e,t)||function(e,t){if(Uc)try{return new Uc(e,t)}catch(e){}return null}(e,t)||null}function En(){return("undefined"!=typeof Image?Image:null)||Uc&&Uc.Image||null||null}function On(e){this._pending=0,this._loader=e||Ce()}function Sn(e){e._pending+=1}function An(e){e._pending-=1}function Cn(e,t,n){var r=Vc.hasOwnProperty(e)&&Vc[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function Rn(e){var t,n,r,i,a,o,u,s,f,l,c,d=[];for(s=0,l=(t=e.slice().replace(Yc[0],"###$1").split(Yc[1]).slice(1)).length;s<l;++s){for(r=(n=t[s]).slice(1).trim().replace(Yc[2],"$1###$2").split(Yc[3]),i=[o=n.charAt(0)],f=0,c=r.length;f<c;++f)(a=+r[f])===a&&i.push(a);if(u=Hc[o.toLowerCase()],i.length-1>u)for(f=1,c=i.length;f<c;f+=u)d.push([o].concat(i.slice(f,f+u)));else d.push(i)}return d}function Tn(e){var t=Zc.call(e);if(Xc[t])return Xc[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],f=e[7],l=f*o,c=-s*u,d=s*o,h=f*u,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*g,w=r+g+_*p,k=n+m,M=r+v,E=k+_*v,O=M-_*m;return Xc[t]=[l*x+c*w,d*x+h*w,l*E+c*O,d*E+h*O,l*k+c*M,d*k+h*M]}function zn(e,t){var n=Jc[0]=e[0];if("a"===n||"A"===n)Jc[1]=t*e[1],Jc[2]=t*e[2],Jc[6]=t*e[6],Jc[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)Jc[r]=t*e[r];return Jc}function Dn(e,t,n,r,i){var a,o,u,s,f,l=null,c=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=zn(a,i)),a[0]){case"l":c+=a[1],d+=a[2],e.lineTo(c+n,d+r);break;case"L":c=a[1],d=a[2],e.lineTo(c+n,d+r);break;case"h":c+=a[1],e.lineTo(c+n,d+r);break;case"H":c=a[1],e.lineTo(c+n,d+r);break;case"v":d+=a[1],e.lineTo(c+n,d+r);break;case"V":d=a[1],e.lineTo(c+n,d+r);break;case"m":c+=a[1],d+=a[2],e.moveTo(c+n,d+r);break;case"M":c=a[1],d=a[2],e.moveTo(c+n,d+r);break;case"c":o=c+a[5],u=d+a[6],h=c+a[3],p=d+a[4],e.bezierCurveTo(c+a[1]+n,d+a[2]+r,h+n,p+r,o+n,u+r),c=o,d=u;break;case"C":c=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,c+n,d+r);break;case"s":o=c+a[3],u=d+a[4],h=2*c-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,c+a[1]+n,d+a[2]+r,o+n,u+r),h=c+a[1],p=d+a[2],c=o,d=u;break;case"S":o=a[3],u=a[4],h=2*c-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,u+r),c=o,d=u,h=a[1],p=a[2];break;case"q":o=c+a[3],u=d+a[4],h=c+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,u+r),c=o,d=u;break;case"Q":o=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),c=o,d=u,h=a[1],p=a[2];break;case"t":o=c+a[1],u=d+a[2],null===l[0].match(/[QqTt]/)?(h=c,p=d):"t"===l[0]?(h=2*c-s,p=2*d-f):"q"===l[0]&&(h=2*c-h,p=2*d-p),s=h,f=p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),d=u,h=(c=o)+a[1],p=d+a[2];break;case"T":o=a[1],u=a[2],h=2*c-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),c=o,d=u;break;case"a":Nn(e,c+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+c+n,a[7]+d+r]),c+=a[6],d+=a[7];break;case"A":Nn(e,c+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),c=a[6],d=a[7];break;case"z":case"Z":e.closePath()}l=a}}function Nn(e,t,n,r){for(var i=function(e,t,n,r,i,a,o,u,s){var f=Zc.call(arguments);if(Gc[f])return Gc[f];var l=o*(Math.PI/180),c=Math.sin(l),d=Math.cos(l),h=d*(u-e)*.5+c*(s-t)*.5,p=d*(s-t)*.5-c*(u-e)*.5,g=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);1<g&&(n*=g=Math.sqrt(g),r*=g);var m=d/n,v=c/n,y=-c/r,b=d/r,_=m*u+v*s,x=y*u+b*s,w=m*e+v*t,k=y*e+b*t,M=1/((w-_)*(w-_)+(k-x)*(k-x))-.25;M<0&&(M=0);var E=Math.sqrt(M);a==i&&(E=-E);var O=.5*(_+w)-E*(k-x),S=.5*(x+k)+E*(w-_),A=Math.atan2(x-S,_-O),C=Math.atan2(k-S,w-O)-A;C<0&&1===a?C+=2*Math.PI:0<C&&0===a&&(C-=2*Math.PI);for(var R=Math.ceil(Math.abs(C/(.5*Math.PI+.001))),T=[],z=0;z<R;++z){var D=A+z*C/R,N=A+(z+1)*C/R;T[z]=[O,S,D,N,n,r,c,d]}return Gc[f]=T}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=Tn(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}function Pn(e){return ed.hasOwnProperty(e)?ed[e]:function(e){if(!td.hasOwnProperty(e)){var t=Rn(e);td[e]={draw:function(e,n){Dn(e,t,0,0,Math.sqrt(n)/2)}}}return td[e]}(e)}function $n(e){return e.x}function Ln(e){return e.y}function qn(e){return e.width}function jn(e){return e.height}function Fn(e){return function(){return e}}function Un(){function e(e,s,f){var l,c=null!=s?s:+t.call(this,e),d=null!=f?f:+n.call(this,e),h=+r.call(this,e),p=+i.call(this,e),g=+a.call(this,e);if(o||(o=l=u.path()),g<=0)o.rect(c,d,h,p);else{var m=c+h,v=d+p;o.moveTo(c+g,d),o.lineTo(m-g,d),o.quadraticCurveTo(m,d,m,d+g),o.lineTo(m,v-g),o.quadraticCurveTo(m,v,m-g,v),o.lineTo(c+g,v),o.quadraticCurveTo(c,v,c,v-g),o.lineTo(c,d+g),o.quadraticCurveTo(c,d,c+g,d),o.closePath()}if(l)return o=null,l+""||null}var t=$n,n=Ln,r=qn,i=jn,a=Fn(0),o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Fn(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Fn(+t),e):n},e.width=function(t){return arguments.length?(r="function"==typeof t?t:Fn(+t),e):r},e.height=function(t){return arguments.length?(i="function"==typeof t?t:Fn(+t),e):i},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:Fn(+t),e):a},e.context=function(t){return arguments.length?(o=null==t?null:t,e):o},e}function In(){function e(e,t,n){var r=n/2;if(o){var i=f-t,a=e-s;if(i||a){var u=Math.sqrt(i*i+a*a),d=(i/=u)*l,h=(a/=u)*l,p=Math.atan2(a,i);c.moveTo(s-d,f-h),c.lineTo(e-i*r,t-a*r),c.arc(e,t,r,p-nd,p),c.lineTo(s+d,f+h),c.arc(s,f,l,p,p+nd)}else c.arc(e,t,r,0,2*nd);c.closePath()}else o=1;s=e,f=t,l=r}function t(t){var s,f,l,d=t.length,h=!1;for(null==c&&(c=l=u.path()),s=0;s<=d;++s)!(s<d&&a(f=t[s],s,t))===h&&(h=!h)&&(o=0),h&&e(+n(f,s,t),+r(f,s,t),+i(f,s,t));if(l)return c=null,l+""||null}var n,r,i,a,o,s,f,l,c=null;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.context=function(e){return arguments.length?(c=null==e?null:e,t):c},t}function Bn(e){return e.x||0}function Wn(e){return e.y||0}function Vn(e){return e.cornerRadius||0}function Hn(e){return!(!1===e.defined)}function Yn(e,t,n,r){return ud.context(e)(t,n,r)}function Gn(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e}function Xn(e){return Wc=e,Xn}function Zn(){}function Jn(e,t){Wc.add(e,t)}function Qn(e,t,n){return n.id?function(e,t,n){for(var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,u=n.x1+t.x2*r,s=n.y1+t.y2*i,f=t.stops,l=0,c=f.length,d=e.createLinearGradient(a,o,u,s);l<c;++l)d.addColorStop(f[l].offset,f[l].color);return d}(e,n,t.bounds):n}function Kn(e,t,n){return 0<(n*=null==t.fillOpacity?1:t.fillOpacity)&&(e.globalAlpha=n,e.fillStyle=Qn(e,t,t.fill),!0)}function er(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&0<(n*=null==t.strokeOpacity?1:t.strokeOpacity)&&(e.globalAlpha=n,e.strokeStyle=Qn(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||gd),e.lineDashOffset=t.strokeDashOffset||0),!0)}function tr(e,t){return e.zindex-t.zindex||e.index-t.index}function nr(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(tr)}function rr(e,t){var n,r,i=e.items;if(i&&i.length){var a=nr(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function ir(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=nr(e);for(a&&a.length&&(i=a),r=i.length;0<=--r;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;0<=--r;)if(!i[r].zindex&&(n=t(i[r])))return n;
return null}function ar(e){return function(t,n,r){rr(n,function(n){r&&!r.intersects(n.bounds)||or(e,t,n,n)})}}function or(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&Kn(t,n,i)&&t.fill(),n.stroke&&er(t,n,i)&&t.stroke()))}function ur(e){return e||(e=md),function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,ir(n,function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return e(t,n,r,i,a,o)?n:void 0})}}function sr(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,f=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(f&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function fr(e){return ur(sr(e))}function lr(e,t){return"translate("+e+","+t+")"}function cr(e){return lr(e.x||0,e.y||0)}function dr(e,t){function n(e,n){var r=n.x||0,i=n.y||0;e.translate(r,i),e.beginPath(),t(e,n),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",cr(n)),e("d",t(null,n))},bound:function(e,n){return t(Xn(e),n),Gn(e,n).translate(n.x||0,n.y||0)},draw:ar(n),pick:fr(n)}}function hr(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var i,a=sr(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(Xn(e),r),Gn(e,r[0]))},draw:(i=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||or(i,e,t.items[0],t.items)}),pick:function(e,t,n,r,i,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(i,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,a(e,u,n,r)?u[0]:null)},tip:n}}function pr(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+bd++),o=i.clipping[a]||(i.clipping[a]={id:a});return V(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function gr(e,t){var n=t.stroke?_d:0;e.beginPath(),Yn(e,t,n,n)}function mr(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function vr(e,t){return"center"===e?t/2:"right"===e?t:0}function yr(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function br(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=Rn(n)).path=n),Dn(e,r,t.x,t.y)}function _r(e,t){e.beginPath(),Yn(e,t)}function xr(e,t,n){var r,i,a,o;return!(!t.stroke||!er(e,t,n)||(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),0))}function wr(e){return pd=Or(e),kr(Ar(e))}function kr(e){return~~(.8*e.length*pd)}function Mr(e){return hd.font=Cr(e),Er(Ar(e))}function Er(e){return hd.measureText(e).width}function Or(e){return null!=e.fontSize?e.fontSize:11}function Sr(e){hd=e&&(hd=Mn(1,1))?hd.getContext("2d"):null,Rd.width=hd?Mr:wr}function Ar(e){var t=e.text;return null==t?"":0<e.limit?function(e){var t,n=+e.limit,r=e.text+"";if(hd?(hd.font=Cr(e),t=Er):(pd=Or(e),t=kr),t(r)<n)return r;var i,a=e.ellipsis||"",o="rtl"===e.dir,u=0,s=r.length;if(n-=t(a),o){for(;u<s;)i=u+s>>>1,t(r.slice(i))>n?u=i+1:s=i;return a+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),t(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+a}(e):t+""}function Cr(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/"/g,"'")),(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Or(e)+"px "+(n||"sans-serif")}function Rr(e){var t=e.baseline,n=Or(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}function Tr(e,t,n){var r,i,a=Rd.height(t),o=t.align,u=t.radius||0,s=t.x||0,f=t.y||0,l=t.dx||0,c=(t.dy||0)+Rr(t)-Math.round(.8*a);return u&&(i=(t.theta||0)-Math.PI/2,s+=u*Math.cos(i),f+=u*Math.sin(i)),r=Rd.width(t),"center"===o?l-=r/2:"right"===o&&(l-=r),e.set(l+=s,c+=f,l+r,c+a),t.angle&&!n&&e.rotate(t.angle*Math.PI/180,s,f),e.expand(n||!r?0:1)}function zr(e,t,n){var r=Dd[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new _n),e,n)}function Dr(e,t,n){var r,i,a,o,u=Dd[e.marktype],s=u.bound,f=e.items,l=f&&f.length;if(u.nested)return l?a=f[0]:(Nd.mark=e,a=Nd),o=zr(a,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new _n,l)for(r=0,i=f.length;r<i;++r)t.union(zr(f[r],s,n));return e.bounds=t}function Nr(e,t){return JSON.stringify(e,Pd,t)}function Pr(e){return function e(t){var n,r,i,a=t.marktype,o=t.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=t,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&e(o[r]);return a&&Dr(t),t}("string"==typeof e?JSON.parse(e):e)}function $r(e){arguments.length?this.root=Pr(e):(this.root=Lr({marktype:"group",name:"root",role:"frame"}),this.root.items=[new kn(this.root)])}function Lr(e,t){return{bounds:new _n,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function qr(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function jr(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Fr(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=qr(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function Ur(e,t){for(var n=e.childNodes,r=n.length;t<r;)e.removeChild(n[--r]);return e}function Ir(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Br(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Wr(e,t){this._active=null,this._handlers={},this._loader=e||Ce(),this._tooltip=t||Vr}function Vr(e,t,n,r){e.element().setAttribute("title",r||"")}function Hr(e){this._el=null,this._bgcolor=null,this._loader=new On(e)}function Yr(e,t){Wr.call(this,e,t),this._down=null,this._touch=null,this._first=!0}function Gr(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r)),this.fire(e,r)}}function Xr(e){return function(t){this.fire(e,t),this._active=null}}function Zr(e){Hr.call(this,e),this._redraw=!1,this._dirty=new _n}function Jr(e,t){Wr.call(this,e,t);var n=this;n._hrefHandler=Qr(n,function(e,t){t&&t.href&&n.handleHref(e,t,t.href)}),n._tooltipHandler=Qr(n,function(e,t){n.handleTooltip(e,t,e.type!==Fd)})}function Qr(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function Kr(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function ei(e){return"</"+e+">"}function ti(e){Hr.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function ni(e,t,n){var r,i,a;for((e=Fr(e,n,"linearGradient",Jd)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)(a=Fr(e,r,"stop",Jd)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);Ur(e,r)}function ri(e,t,n){var r;(e=Fr(e,n,"clipPath",Jd)).setAttribute("id",t.id),t.path?(r=Fr(e,0,"path",Jd)).setAttribute("d",t.path):((r=Fr(e,0,"rect",Jd)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height))}function ii(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function ai(e,t,n,r,i){var a,o,u,s=e._svg;if(!s&&(s=qr(a=t.ownerDocument,r,Jd),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},"g"===r))){var f=qr(a,"path",Jd);f.setAttribute("class","background"),s.appendChild(f),f.__data__=e;var l=qr(a,"g",Jd);s.appendChild(l),l.__data__=e}return(s.ownerSVGElement!==i||(u=(o=e).mark||o.group)&&1<u.items.length&&s.previousSibling!==n)&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function oi(e,t,n){t!==th[e]&&(null!=t?n?eh.setAttributeNS(n,e,t):eh.setAttribute(e,t):n?eh.removeAttributeNS(n,e):eh.removeAttribute(e),th[e]=t)}function ui(e){Hr.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function si(e,t,n,r){rh[r||e]=t}function fi(e,t,n,r){if(null==e)return"";var i,a,o,u,s,f="";for("bgrect"===n&&!1===t.interactive&&(f+="pointer-events: none; "),"text"===n&&(f+="font: "+Cr(e)+"; "),i=0,a=Zd.length;i<a;++i)o=Zd[i],u=Xd[o],null==(s=e[o])?"fill"===u&&(f+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(s.id&&(s="url(#"+(r.gradient[s.id]=s).id+")"),f+=u+": "+s+"; "):f+=u+": none; ";return f?'style="'+f.trim()+'"':null}function li(e,t){return e=String(e||"").toLowerCase(),1<arguments.length?(uh[e]=t,this):uh[e]}function ci(e){var t=e.clip;if(V(t))t(Xn(sh.clear()));else{if(!t)return;sh.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(sh)}function di(e,t,n){return e===t||("path"===n?hi(e,t):e instanceof Date&&t instanceof Date?+e==+t:te(e)&&te(t)?Math.abs(e-t)<=fh:e&&t&&(E(e)||E(t))?null!=e&&null!=t&&function(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;0<=r;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;0<=r;r--)if(n=i[r],!di(e[n],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function hi(e,t){return di(Rn(e),Rn(t))}function pi(e){ft.call(this,null,e)}function gi(e,t,n){return t(e.bounds.clear(),e,n)}function mi(e){ft.call(this,0,e)}function vi(e){ft.call(this,null,e)}function yi(e){ft.call(this,null,e)}function bi(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function _i(e){for(var t,n=1,r=e.length,i=e[0].bounds;n<r;i=t,++n)if(bi(i,t=e[n].bounds))return!0}function xi(e){var t=e.bounds;return 1<t.width()&&1<t.height()}function wi(e){ft.call(this,null,e)}function ki(e,t){for(var n=0,r=e.length;n<r;++n)t.push(e[n])}function Mi(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function Ei(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Oi(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function Si(e,t){return e.bounds[t]}function Ai(e,t,n){var r=E(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function Ci(e){return e<0?Math.ceil(-e):0}function Ri(e,t,n){function r(e,t){return Math.floor(Math.min(e,t))}function i(e,t){return Math.ceil(Math.max(e,t))}var a,o,u,s,f,l,c,d,h,p,g,m,v=function(e){for(var t,n,r=e.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(n=(t=r[a]).items,t.marktype===xc)switch(t.role){case wc:case kc:break;case Mc:ki(n,o.rowheaders);break;case Ec:ki(n,o.rowfooters);break;case Sc:ki(n,o.colheaders);break;case Ac:ki(n,o.colfooters);break;case Oc:o.rowtitle=n[0];break;case Cc:o.coltitle=n[0];break;default:ki(n,o.marks)}return o}(t),y=v.marks,b="flush"===n.bounds,_=b?Mi:Ei,x=new _n(0,0,0,0),w=Ai(n.align,qc),k=Ai(n.align,jc),M=Ai(n.padding,qc),E=Ai(n.padding,jc),O=n.offset,S=t.columns||n.columns||y.length,A=S<0?1:Math.ceil(y.length/S),C=A*S,R=[],T=[],z=0,D=[],N=[],P=0,$=y.length;for(o=0;o<S;++o)T[o]=0;for(o=0;o<A;++o)N[o]=0;for(o=0;o<$;++o)f=_(y[o]),u=o%S,s=~~(o/S),c=Math.ceil(_(y[o]).x2),d=Math.ceil(_(y[o]).y2),z=Math.max(z,c),P=Math.max(P,d),T[u]=Math.max(T[u],c),N[s]=Math.max(N[s],d),R.push(M+Ci(f.x1)),D.push(E+Ci(f.y1)),e.dirty(y[o]);for(o=0;o<$;++o)o%S==0&&(R[o]=0),o<S&&(D[o]=0);if("each"===w)for(u=1;u<S;++u){for(m=0,o=u;o<$;o+=S)m<R[o]&&(m=R[o]);for(o=u;o<$;o+=S)R[o]=m+T[u-1]}else if(w===Lc){for(o=m=0;o<$;++o)o%S&&m<R[o]&&(m=R[o]);for(o=0;o<$;++o)o%S&&(R[o]=m+z)}else for(w=!1,u=1;u<S;++u)for(o=u;o<$;o+=S)R[o]+=T[u-1];if("each"===k)for(s=1;s<A;++s){for(m=0,a=(o=s*S)+S;o<a;++o)m<D[o]&&(m=D[o]);for(o=s*S;o<a;++o)D[o]=m+N[s-1]}else if(k===Lc){for(m=0,o=S;o<$;++o)m<D[o]&&(m=D[o]);for(o=S;o<$;++o)D[o]=m+P}else for(k=!1,s=1;s<A;++s)for(a=(o=s*S)+S;o<a;++o)D[o]+=N[s-1];for(o=h=0;o<$;++o)c=(l=y[o]).x||0,l.x=h=R[o]+(o%S?h:0),l.bounds.translate(h-c,0);for(u=0;u<S;++u)for(p=0,o=u;o<$;o+=S)d=(l=y[o]).y||0,l.y=p+=D[o],l.bounds.translate(0,p-d);if(Ai(n.center,qc)&&1<A&&w)for(o=0;o<$;++o)l=y[o],0<(h=(f=w===Lc?z:T[o%S])-_(l).x2)&&(l.x+=c=h/2,l.bounds.translate(c,0));if(Ai(n.center,jc)&&1!==S&&k)for(o=0;o<$;++o)l=y[o],0<(p=(f=k===Lc?P:N[~~(o/S)])-_(l).y2)&&(l.y+=d=p/2,l.bounds.translate(0,d));for(o=0;o<$;++o)y[o].mark.bounds.clear();for(o=0;o<$;++o)l=y[o],e.dirty(l),x.union(l.mark.bounds.union(l.bounds));_=b?Oi:Si,g=Ai(n.headerBand,jc,null),h=Ti(e,v.rowheaders,y,S,A,-Ai(O,"rowHeader"),r,0,_,"x1",0,S,1,g),g=Ai(n.headerBand,qc,null),p=Ti(e,v.colheaders,y,S,S,-Ai(O,"columnHeader"),r,1,_,"y1",0,1,S,g),g=Ai(n.footerBand,jc,null),Ti(e,v.rowfooters,y,S,A,Ai(O,"rowFooter"),i,0,_,"x2",S-1,S,1,g),g=Ai(n.footerBand,qc,null),Ti(e,v.colfooters,y,S,S,Ai(O,"columnFooter"),i,1,_,"y2",C-S,1,S,g),v.rowtitle&&(m=h-Ai(O,"rowTitle"),g=Ai(n.titleBand,jc,.5),zi(e,v.rowtitle,m,0,x,g)),v.coltitle&&(m=p-Ai(O,"columnTitle"),g=Ai(n.titleBand,qc,.5),zi(e,v.coltitle,m,1,x,g))}function Ti(e,t,n,r,i,a,o,u,s,f,l,c,d,h){var p,g,m,v,y,b,_,x,w,k=n.length,M=0,E=0;if(!k)return M;for(p=l;p<k;p+=c)n[p]&&(M=o(M,s(n[p],f)));if(!t.length)return M;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),M+=a,g=0,v=t.length;g<v;++g)e.dirty(t[g]),t[g].mark.bounds.clear();for(p=l,g=0,v=t.length;g<v;++g,p+=c){for(y=(b=t[g]).mark.bounds,m=p;0<=m&&null==(_=n[m]);m-=d);u?(x=null==h?_.x:Math.round(_.bounds.x1+h*_.bounds.width()),w=M):(x=M,w=null==h?_.y:Math.round(_.bounds.y1+h*_.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,e.dirty(b),E=o(E,y[f])}return E}function zi(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function Di(e){ft.call(this,null,e)}function Ni(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Pi(e,t,n,r){var i,a,o,u,s=t.items[0],f=s.datum,l=f.orient,c=(u=+(o=f).grid,[o.ticks?u++:-1,o.labels?u++:-1,u+ +o.domain]),d=s.range,h=s.offset,p=s.position,g=s.minExtent,m=s.maxExtent,v=f.title&&s.items[c[2]].items[0],y=s.titlePadding,b=s.bounds,_=0,x=0;switch(ph.clear().union(b),b.clear(),-1<(i=c[0])&&b.union(s.items[i].bounds),-1<(i=c[1])&&b.union(s.items[i].bounds),l){case cc:_=p||0,x=-h,a=Math.max(g,Math.min(m,-b.y1)),v&&(a=$i(v,a,y,0,-1,b)),b.add(0,-a).add(d,0);break;case dc:_=-h,x=p||0,a=Math.max(g,Math.min(m,-b.x1)),v&&(a=$i(v,a,y,1,-1,b)),b.add(-a,0).add(0,d);break;case hc:_=n+h,x=p||0,a=Math.max(g,Math.min(m,b.x2)),v&&(a=$i(v,a,y,1,1,b)),b.add(0,0).add(a,d);break;case pc:_=p||0,x=r+h,a=Math.max(g,Math.min(m,b.y2)),v&&(a=$i(v,a,y,0,1,b)),b.add(0,0).add(d,a);break;default:_=s.x,x=s.y}return Gn(b.translate(_,x),s),Ni(s,"x",_+hh)|Ni(s,"y",x+hh)&&(s.bounds=ph,e.dirty(s),s.bounds=b,e.dirty(s)),s.mark.bounds.clear().union(b)}function $i(e,t,n,r,i,a){var o=e.bounds,u=0,s=0;return e.auto?(t+=n,r?u=(e.x||0)-(e.x=i*t):s=(e.y||0)-(e.y=i*t),o.translate(-u,-s),e.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),t+=o.width()):(a.add(o.x1,0).add(o.x2,0),t+=o.height())):a.union(o),t}function Li(e,t,n,r,i,a,o){var u,s,f,l,c,d=t.items[0],h=d.datum,p=h.orient,g=d.offset,m=d.bounds,v=0,y=0;switch(p===cc||p===pc?(f=i,v=n[p]):p!==dc&&p!==hc||(f=r,y=n[p]),ph.clear().union(m),m.clear(),d.items.forEach(function(e){m.union(e.bounds)}),u=Math.round(m.width())+2*d.padding-1,s=Math.round(m.height())+2*d.padding-1,h.type===Tc&&(l=d.items[0].items[0].items[0].items,c=l.reduce(function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e},{}),l.forEach(function(e){e.width=c[e.column],e.height=e.bounds.y2-e.y})),p){case dc:v-=n.leftWidth+g-Math.floor(f.x1),n.left+=s+n.margin;break;case hc:v+=g+Math.ceil(f.x2),n.right+=s+n.margin;break;case cc:y-=s+g-Math.floor(f.y1),n.top+=u+n.margin;break;case pc:y+=g+Math.ceil(f.y2),n.bottom+=u+n.margin;break;case gc:v+=g,y+=g;break;case mc:v+=a-u-g,y+=g;break;case vc:v+=g,y+=o-s-g;break;case yc:v+=a-u-g,y+=o-s-g;break;default:v=d.x,y=d.y}return Gn(m.set(v,y,v+u,y+s),d),Ni(d,"x",v)|Ni(d,"width",u)|Ni(d,"y",y)|Ni(d,"height",s)&&(d.bounds=ph,e.dirty(d),d.bounds=m,e.dirty(d)),d.mark.bounds.clear().union(m)}function qi(e,t,n){var r=e-t+2*n;return e?0<r?r:1:0}function ji(){function e(){var e=i().length,r=u[1]<u[0],s=u[r-0],h=u[1-r],p=qi(e,l,c);t=(h-s)/(p||1),f&&(t=Math.floor(t)),s+=(h-s-t*(e-l))*d,n=t*(1-l),f&&(s=Math.round(s),n=Math.round(n));var g=a.range(e).map(function(e){return s+t*e});return o(r?g.reverse():g)}var t,n,r=s.scaleOrdinal().unknown(void 0),i=r.domain,o=r.range,u=[0,1],f=!1,l=0,c=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},r.rangeRound=function(t){return u=[+t[0],+t[1]],f=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(f=!!t,e()):f},r.padding=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l=c,e()):l},r.paddingInner=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.paddingOuter=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,s,f=+e[0],l=+e[1],c=u[1]<u[0],d=c?o().reverse():o(),h=d.length-1;if(f==f&&l==l&&(l<f&&(s=f,f=l,l=s),!(l<d[0]||f>u[1-c])))return t=Math.max(0,a.bisectRight(d,f)-1),r=f===l?t:a.bisectRight(d,l)-1,f-d[t]>n+1e-10&&++t,c&&(s=t,t=h-r,r=h-s),r<t?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return ji().domain(i()).range(u).round(f).paddingInner(l).paddingOuter(c).align(d)},e()}function Fi(e){return Ah.call(e,function(e){return+e})}function Ui(e,t){return 1<arguments.length?(Rh[e]=(n=e,r=t,function(){var e,t,i=r();return i.invertRange||(i.invertRange=i.invert?(t=i,function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}):i.invertExtent?(e=i,function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}):void 0),i.type=n,i}),this):Rh.hasOwnProperty(e)?Rh[e]:void 0;var n,r}function Ii(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Bi(e,t){jh[e]=f["interpolate"+t],qh[e]=f["scheme"+t]}function Wi(e,t){if(1<arguments.length)return jh[e]=t,this;var n=e.split("-");return e=n[0],(n=+n[1]+1)&&qh.hasOwnProperty(e)?qh[e][n-1]:!n&&jh.hasOwnProperty(e)?jh[e]:void 0}function Vi(e,t){var n=t[0],r=T(t)-n;return function(t){return e(n+t*r)}}function Hi(e,t,n){var r=n-t;return r?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/r}:e.copy().domain([t,n]).range([0,1]).interpolate(Yi):Y(0)}function Yi(e,t){var n=t-e;return function(t){return e+t*n}}function Gi(e,t){var n,r=l[(n=e,"interpolate"+n.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join(""))];return null!=t&&r&&r.gamma?r.gamma(t):r}function Xi(e){return Fh.hasOwnProperty(e)&&Fh[e]}function Zi(e){return Uh.hasOwnProperty(e)&&Uh[e]}function Ji(e,t){var n;return E(t)&&(n=t.step,t=t.interval),O(t)&&(t="time"===e.type?Xi(t):"utc"===e.type?Zi(t):k("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function Qi(e,t,n){var r=e.range(),i=r[0],a=T(r);if(a<i&&(r=a,a=i,i=r),t=t.filter(function(t){return!((t=e(t))<i||a<t)}),0<n&&1<t.length){for(var o=[t[0],T(t)];t.length>n&&3<=t.length;)t=t.filter(function(e,t){return!(t%2)});t.length<3&&(t=o)}return t}function Ki(e,t){return e.ticks?e.ticks(t):e.domain()}function ea(e,t,n){var r,i,a=e.tickFormat?e.tickFormat(t,n):n?d.format(n):String;return e.type===mh?(r=a,i=function(e){var t=d.formatSpecifier(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return n=d.format(t),r=d.format(".1f")(1)[1],function(e){var t,i,a=n(e),o=a.indexOf(r);if(o<0)return a;for(t=function(e,t){var n,r=e.lastIndexOf("e");if(0<r)return r;for(r=e.length;--r>t;)if(48<=(n=e.charCodeAt(r))&&n<=57)return r+1}(a,o),i=t<a.length?a.slice(t):"";--t>o;)if("0"!==a[t]){++t;break}return a.slice(0,t)+i}}return d.format(t);var n,r}(n),function(e){return r(e)?i(e):""}):a}function ta(e){ft.call(this,null,e)}function na(e){ft.call(this,null,e)}function ra(){return ye({})}function ia(e){return e.exit}function aa(e){ft.call(this,null,e)}function oa(e,t,n){return n===Ih&&Bh[e.type]?(a=t,function(e,t,n){var r=n[t+1]||n.max||1/0,i=ua(e,a),o=ua(r,a);return i&&o?i+""+o:o?"< "+o:" "+i}):"discrete"===n?(i=t,function(e,t){return t?i(e):null}):(r=t,function(e){return r(e)});var r,i,a}function ua(e,t){return isFinite(e)?t(e):null}function sa(e){ft.call(this,[],e)}function fa(e){return e.source.x}function la(e){return e.source.y}function ca(e){return e.target.x}function da(e){return e.target.y}function ha(e){ft.call(this,{},e)}function pa(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function ga(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r}function ma(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),u=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function va(e){ft.call(this,null,e)}function ya(e){ft.call(this,null,e),this.modified(!0)}function ba(e,t,n){return V(e)&&(t||n)?Vi(e,_a(t||[0,1],n)):e}function _a(e,t){return t?e.slice().reverse():e}function xa(e){ft.call(this,null,e)}function wa(e){ft.call(this,null,e)}function ka(e,t,n,r,i){for(var a,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)(a=e[s])[r]=o,a[i]=o+=Math.abs(n(a))}function Ma(e,t,n,r,i){for(var a,o=1/e.sum,u=0,s=e.length,f=0,l=0;f<s;++f)(a=e[f])[r]=u,a[i]=u=o*(l+=Math.abs(n(a)))}function Ea(e,t,n,r,i){for(var a,o,u=0,s=0,f=e.length,l=0;l<f;++l)(a=n(o=e[l]))<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function Oa(e,t){return e-t}function Sa(e){return function(){return e}}function Aa(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=Ca(e,t[r]))return n;return 0}function Ca(e,t){for(var n,r,i,a,o,u,s,f,l,c,d=t[0],h=t[1],p=-1,g=0,m=e.length,v=m-1;g<m;v=g++){var y=e[g],b=y[0],_=y[1],x=e[v],w=x[0],k=x[1];if(c=void 0,a=s=y,u=l=t,((o=f=x)[0]-a[0])*(u[1]-a[1])==(u[0]-a[0])*(o[1]-a[1])&&(n=s[c=+(s[0]===f[0])],r=l[c],i=f[c],n<=r&&r<=i||i<=r&&r<=n))return 0;h<_!=h<k&&d<(w-b)*(h-_)/(k-_)+b&&(p=-p)}return p}function Ra(){}function Ta(){function e(e){var n=u(e);if(Array.isArray(n))n=n.slice().sort(Oa);else{var r=a.extent(e),i=r[0],o=r[1];n=a.tickStep(i,o,n),n=a.range(Math.floor(i/n)*n,Math.floor(o/n)*n,n)}return n.map(function(n){return t(e,n)})}function t(e,t){var r=[],a=[];return function(e,t,r){function a(e){var t,i,a=[e[0][0]+u,e[0][1]+s],o=[e[1][0]+u,e[1][1]+s],f=n(a),l=n(o);(t=p[f])?(i=h[l])?(delete p[t.end],delete h[i.start],t===i?(t.ring.push(o),r(t.ring)):h[t.start]=p[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete p[t.end],t.ring.push(o),p[t.end=l]=t):(t=h[l])?(i=p[f])?(delete h[t.start],delete p[i.end],t===i?(t.ring.push(o),r(t.ring)):h[i.start]=p[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(a),h[t.start=f]=t):h[f]=p[l]={start:f,end:l,ring:[a,o]}}var u,s,f,l,c,d,h=new Array,p=new Array;for(u=s=-1,l=e[0]>=t,Qh[l<<1].forEach(a);++u<i-1;)f=l,l=e[u+1]>=t,Qh[f|l<<1].forEach(a);for(Qh[l<<0].forEach(a);++s<o-1;){for(u=-1,l=e[s*i+i]>=t,c=e[s*i]>=t,Qh[l<<1|c<<2].forEach(a);++u<i-1;)f=l,l=e[s*i+i+u+1]>=t,d=c,c=e[s*i+u+1]>=t,Qh[f|l<<1|c<<2|d<<3].forEach(a);Qh[l|c<<3].forEach(a)}for(u=-1,c=e[s*i]>=t,Qh[c<<2].forEach(a);++u<i-1;)d=c,c=e[s*i+u+1]>=t,Qh[c<<2|d<<3].forEach(a);Qh[c<<3].forEach(a)}(e,t,function(n){s(n,e,t),0<function(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(n)?r.push([n]):a.push(n)}),a.forEach(function(e){for(var t,n=0,i=r.length;n<i;++n)if(-1!==Aa((t=r[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:t,coordinates:r}}function n(e){return 2*e[0]+e[1]*(i+1)*4}function r(e,t,n){e.forEach(function(e){var r,a=e[0],u=e[1],s=0|a,f=0|u,l=t[f*i+s];0<a&&a<i&&s===a&&(r=t[f*i+s-1],e[0]=a+(n-r)/(l-r)-.5),0<u&&u<o&&f===u&&(r=t[(f-1)*i+s],e[1]=u+(n-r)/(l-r)-.5)})}var i=1,o=1,u=a.thresholdSturges,s=r;return e.contour=t,e.size=function(t){if(!arguments.length)return[i,o];var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!(0<n&&0<r))throw new Error("invalid size");return i=n,o=r,e},e.thresholds=function(t){return arguments.length?(u="function"==typeof t?t:Sa(Array.isArray(t)?Jh.call(t):t),e):u},e.smooth=function(t){return arguments.length?(s=t?r:Ra,e):s===r},e}function za(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=e.data[u+o*r]),n<=u&&(a<=u&&(s-=e.data[u-a+o*r]),t.data[u-n+o*r]=s/Math.min(u+1,r-1+a-u,a))}function Da(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=e.data[o+u*r]),n<=u&&(a<=u&&(s-=e.data[o+(u-a)*r]),t.data[o+(u-n)*r]=s/Math.min(u+1,i-1+a-u,a))}function Na(e){return e[0]}function Pa(e){return e[1]}function $a(e){ft.call(this,null,e)}function La(e){ft.call(this,null,e)}function qa(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),1<arguments.length?(ip[e]=(n=e,r=t,function e(){var t=r();return t.type=n,t.path=h.geoPath().projection(t),t.copy=t.copy||function(){var n=e();return rp.forEach(function(e){t.hasOwnProperty(e)&&n[e](t[e]())}),n.path.pointRadius(t.path.pointRadius()),n},t}),this):ip.hasOwnProperty(e)?ip[e]:null;var n,r}function ja(e){return e&&e.path||np}function Fa(e){ft.call(this,null,e)}function Ua(e){ft.call(this,null,e)}function Ia(e){ft.call(this,null,e)}function Ba(e){ft.call(this,[],e),this.generator=h.geoGraticule()}function Wa(e){ft.call(this,null,e),this.modified(!0)}function Va(e,t,n){V(e[t])&&e[t](n)}function Ha(e){ft.call(this,null,e)}function Ya(e,t,n,r){var i,a,o,u,s=W(t.forces);for(i=0,a=fp.length;i<a;++i)(o=fp[i])!==sp&&t.modified(o)&&e[o](t[o]);for(i=0,a=s.length;i<a;++i)u=sp+i,(o=n||t.modified(sp,i)?Xa(s[i]):r&&Ga(s[i],r)?e.force(u):null)&&e.force(u,o);for(a=e.numForces||0;i<a;++i)e.force(sp+i,null);return e.numForces=s.length,e}function Ga(e,t){var n,r;for(n in e)if(V(r=e[n])&&t.modified(w(r)))return 1;return 0}function Xa(e){var t,n;for(n in up.hasOwnProperty(e.force)||k("Unrecognized force: "+e.force),t=up[e.force](),e)V(t[n])&&Za(t[n],e[n],e);return t}function Za(e,t,n){e(V(t)?function(e){return t(e,n)}:t)}function Ja(e,t,n){var r={};return e.each(function(e){var i=e.data;n(i)&&(r[t(i)]=e)}),e.lookup=r,e}function Qa(e){ft.call(this,null,e)}function Ka(e){return e.values}function eo(e){ft.call(this,null,e)}function to(e){eo.call(this,e)}function no(e){eo.call(this,e)}function ro(e){ft.call(this,null,e)}function io(e){eo.call(this,e)}function ao(e){ft.call(this,[],e)}function oo(e){eo.call(this,e)}function uo(e){ft.call(this,null,e)}function so(){function e(e,t,n){for(var r,i,a,o,u,l=t.x,d=t.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=f(s),g=c()<.5?1:-1,m=-g;(r=p(m+=g))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=h));)if(t.x=l+i,t.y=d+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1]||n&&lo(t,e,s[0])||n&&(u=n,!((o=t).x+o.x1>u[0].x&&o.x+o.x0<u[1].x&&o.y+o.y1>u[0].y&&o.y+o.y0<u[1].y)))){for(var v,y=t.sprite,b=t.width>>5,_=s[0]>>5,x=t.x-(b<<4),w=127&x,k=32-w,M=t.y1-t.y0,E=(t.y+t.y0)*_+(x>>5),O=0;O<M;O++){for(var S=v=0;S<=b;S++)e[E+S]|=v<<k|(S<b?(v=y[O*b+S])>>>w:0);E+=_}return!(t.sprite=null)}return!1}var t,n,r,i,a,o,u,s=[256,256],f=ho,l=[],c=Math.random,d={};return d.layout=function(){for(var f=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(Cp<<5)/t,e.height=Rp/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(Mn()),d=function(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),h=null,p=l.length,g=-1,m=[],v=l.map(function(e){return{text:t(e),font:n(e),style:i(e),weight:a(e),rotate:o(e),size:~~r(e),padding:u(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size});++g<p;){var y=v[g];y.x=s[0]*(c()+.5)>>1,y.y=s[1]*(c()+.5)>>1,fo(f,y,v,g),y.hasText&&e(d,y,h)&&(m.push(y),h?co(h,y):h=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=s[0]>>1,y.y-=s[1]>>1)}return m},d.words=function(e){return arguments.length?(l=e,d):l},d.size=function(e){return arguments.length?(s=[+e[0],+e[1]],d):s},d.font=function(e){return arguments.length?(n=po(e),d):n},d.fontStyle=function(e){return arguments.length?(i=po(e),d):i},d.fontWeight=function(e){return arguments.length?(a=po(e),d):a},d.rotate=function(e){return arguments.length?(o=po(e),d):o},d.text=function(e){return arguments.length?(t=po(e),d):t},d.spiral=function(e){return arguments.length?(f=Tp[e]||e,d):f},d.fontSize=function(e){return arguments.length?(r=po(e),d):r},d.padding=function(e){return arguments.length?(u=po(e),d):u},d.random=function(e){return arguments.length?(c=e,d):c},d}function fo(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(Cp<<5)/a,Rp/a);var o,u,s,f,l,c=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,s=t.size<<1,t.rotate){var g=Math.sin(t.rotate*Ap),m=Math.cos(t.rotate*Ap),v=o*m,y=o*g,b=s*m,_=s*g;o=Math.max(Math.abs(v+_),Math.abs(v-_))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(h<s&&(h=s),Cp<<5<=c+o&&(d+=h,h=c=0),Rp<=d+s)break;i.translate((c+(o>>1))/a,(d+(s>>1))/a),t.rotate&&i.rotate(t.rotate*Ap),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=s,t.xoff=c,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,c+=o}for(var x=i.getImageData(0,0,(Cp<<5)/a,Rp/a).data,w=[];0<=--r;)if((t=n[r]).hasText){for(u=(o=t.width)>>5,s=t.y1-t.y0,f=0;f<s*u;f++)w[f]=0;if(null==(c=t.xoff))return;d=t.yoff;var k=0,M=-1;for(l=0;l<s;l++){for(f=0;f<o;f++){var E=u*l+(f>>5),O=x[(d+l)*(Cp<<5)+(c+f)<<2]?1<<31-f%32:0;w[E]|=O,k|=O}k?M=l:(t.y0++,s--,l--,d++)}t.y1=t.y0+M,t.sprite=w.slice(0,(t.y1-t.y0)*u)}}}function lo(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),u=127&o,s=32-u,f=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c=0;c<f;c++){for(var d=r=0;d<=a;d++)if((r<<s|(d<a?(r=i[c*a+d])>>>u:0))&t[l+d])return!0;l+=n}return!1}function co(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function ho(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function po(e){return"function"==typeof e?e:function(){return e}}function go(e){ft.call(this,so(),e)}function mo(e){return new Uint32Array(e)}function vo(e,t,n){var r=(t<257?function(e){return new Uint8Array(e)}:t<65537?function(e){return new Uint16Array(e)}:mo)(e);return n&&r.set(n),r}function yo(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this.bisect(this.range,e.value),a=e.index,o=i[0],u=i[1],s=a.length;for(n=0;n<o;++n)t[a[n]]|=r;for(n=u;n<s;++n)t[a[n]]|=r;return this}}}function bo(){var e=mo(0),t=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];var u,s,f,l,c,d=n,h=i.length,p=Array(h),g=mo(h);for(f=0;f<h;++f)p[f]=r(i[f]),g[f]=f;if(c=g,(l=p).sort.call(c,function(e,t){var n=l[e],r=l[t];return n<r?-1:r<n?1:0}),p=a.permute(l,c),d)u=t,s=e,t=Array(d+h),e=mo(d+h),function(e,t,n,r,i,a,o,u,s){var f,l=0,c=0;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(u[f]=t[l],s[f]=n[l++]):(u[f]=i[c],s[f]=a[c++]+e);for(;l<r;++l,++f)u[f]=t[l],s[f]=n[l];for(;c<o;++c,++f)u[f]=i[c],s[f]=a[c]+e}(o,u,s,d,p,g,h,t,e);else{if(0<o)for(f=0;f<h;++f)g[f]+=o;
t=p,e=g}return n=d+h,{index:g,value:p}},remove:function(r,i){var a,o,u,s=n;for(o=0;!i[e[o]]&&o<s;++o);for(u=o;o<s;++o)i[a=e[o]]||(e[u]=a,t[u]=t[o],++u);n=s-r},bisect:function(e,r){var i;return r?i=r.length:(r=t,i=n),[a.bisectLeft(r,e[0],0,i),a.bisectRight(r,e[1],0,i)]},reindex:function(t){for(var r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}}function _o(e){var t,n,r,i,a;ft.call(this,(t=8,n=[],r=mo(0),i=vo(0,t),a=vo(0,t),{data:function(){return n},seen:function(){return e=r,t=n.length,r=e.length>=t?e:((i=i||new e.constructor(t)).set(e),i);var e,t,i},add:function(e){for(var t,r=0,i=n.length,a=e.length;r<a;++r)(t=e[r])._index=i++,n.push(t)},remove:function(e,t){var r,o,u,s=n.length,f=Array(s-e),l=n;for(o=0;!t[o]&&o<s;++o)f[o]=n[o],l[o]=o;for(u=o;o<s;++o)r=n[o],t[o]?l[o]=-1:(l[o]=u,i[u]=i[o],a[u]=a[o],(f[u]=r)._index=u++),i[o]=0;return n=f,l},size:function(){return n.length},curr:function(){return i},prev:function(){return a},reset:function(e){a[e]=i[e]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(e,t){i[e]|=t},clear:function(e,t){i[e]&=~t},resize:function(e,n){(i.length<e||t<n)&&(t=Math.max(n,t),i=vo(e,t,i),a=vo(e,t))}}),e),this._indices=null,this._dims=null}function xo(e){ft.call(this,null,e)}function wo(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:Ip,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var r=t.value,i=r?O(r)?r:r.user:Ip,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),e.add(null,function(e){var t,n=e.cursor,r=this.value;return O(n)||(r=n.item,n=n.user),t=n&&n!==Ip?n:r||n,"undefined"!=typeof document&&document.body&&(document.body.style.cursor=t),r},{cursor:t})}function ko(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||k("Unrecognized data set: "+t),n[t]}function Mo(e,t){we(t)||k("Second argument to changes must be a changeset.");var n=ko(this,e);return n.modified=!0,this.pulse(n.input,t)}function Eo(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Oo(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function So(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Ao(e,t,n){var r,i,a=e._renderer.canvas();return a&&(i=So(e),(r=Br(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.vega=function(e,t,n){function r(e){var n,r=a;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(e){if(!e)return n;O(e)&&(e=r(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var a=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:Y(e),item:Y(t||{}),group:r,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}(e,n,r),t.item=n,t}function Co(e){return e.item}function Ro(e){var t=e.item.mark.source;return t.source||t}function To(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function zo(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}function Do(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&(i.source=!0,e.signal(r.signal,t).run())}},r.debounce&&(i.update=G(r.debounce,i.update))),function(e,t,n,r){var i=zo("div",{class:Wp});i.appendChild(zo("span",{class:Vp},n.name||n.signal)),t.appendChild(i);var a=No;switch(n.input){case"checkbox":a=Po;break;case"select":a=$o;break;case"radio":a=Lo;break;case"range":a=qo}a(e,i,n,r)}(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,function(){i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}}function No(e,t,n,r){var i=zo("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",function(){e.update(i.value)}),e.elements=[i],e.set=function(e){i.value=e}}function Po(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=zo("input",i);t.appendChild(a),a.addEventListener("change",function(){e.update(a.checked)}),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function $o(e,t,n,r){var i=zo("select",{name:n.signal});n.options.forEach(function(e){var t={value:e};jo(e,r)&&(t.selected=!0),i.appendChild(zo("option",t,e+""))}),t.appendChild(i),i.addEventListener("change",function(){e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(jo(n.options[t],e))return void(i.selectedIndex=t)}}function Lo(e,t,n,r){var i=zo("span",{class:Hp});t.appendChild(i),e.elements=n.options.map(function(t){var a=Yp+n.signal+"-"+t,o={id:a,type:"radio",name:n.signal,value:t};jo(t,r)&&(o.checked=!0);var u=zo("input",o);return u.addEventListener("change",function(){e.update(t)}),i.appendChild(u),i.appendChild(zo("label",{for:a},t+"")),u}),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)jo(n[r].value,t)&&(n[r].checked=!0)}}function qo(e,t,n,r){function i(){l.textContent=f.value,e.update(+f.value)}r=void 0!==r?r:(+n.max+ +n.min)/2;var o=n.min||Math.min(0,+r)||0,u=n.max||Math.max(100,+r)||100,s=n.step||a.tickStep(o,u,100),f=zo("input",{type:"range",name:n.signal,min:o,max:u,step:s}),l=zo("label",{},+(f.value=r));t.appendChild(f),t.appendChild(l),f.addEventListener("input",i),f.addEventListener("change",i),e.elements=[f],e.set=function(e){f.value=e,l.textContent=e}}function jo(e,t){return e===t||e+""==t+""}function Fo(e,t,n,r,i){return(t=t||new r(e.loader())).initialize(n,Eo(e),Oo(e),So(e),i).background(e._background)}function Uo(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function Io(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}function Bo(e,t,n){var r=li(t),i=r&&r.headless;return i?e.runAsync().then(function(){return Fo(e,null,null,i,n).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)}function Wo(e){return+e||0}function Vo(e,t){k(e+' for "outer" push: '+S(t))}function Ho(e,t){var n=e.name;if(e.push===Gp)t.signals[n]||Vo("No prior signal definition",n),Xp.forEach(function(t){void 0!==e[t]&&Vo("Invalid property ",t)});else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Yo(e){this.type=e}function Go(e,t){if(!e)throw new Error("ASSERT: "+t)}function Xo(e){return 48<=e&&e<=57}function Zo(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function Jo(e){return 0<="01234567".indexOf(e)}function Qo(e){return 10===e||13===e||8232===e||8233===e}function Ko(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||92===e||128<=e&&Sg.test(String.fromCharCode(e))}function eu(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||92===e||128<=e&&Ag.test(String.fromCharCode(e))}function tu(){for(var e,t;qp<jp&&(e=Lp.charCodeAt(qp),32===(t=e)||9===t||11===t||12===t||160===t||5760<=t&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)||Qo(e));)++qp}function nu(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)qp<jp&&Zo(Lp[qp])?(r=Lp[qp++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):vu({},gg,Eg);return String.fromCharCode(i)}function ru(){var e,t,n,r;for(t=0,"}"===(e=Lp[qp])&&vu({},gg,Eg);qp<jp&&Zo(e=Lp[qp++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(1114111<t||"}"!==e)&&vu({},gg,Eg),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function iu(){var e,t;for(e=Lp.charCodeAt(qp++),t=String.fromCharCode(e),92===e&&(117!==Lp.charCodeAt(qp)&&vu({},gg,Eg),++qp,(e=nu("u"))&&"\\"!==e&&Ko(e.charCodeAt(0))||vu({},gg,Eg),t=e);qp<jp&&eu(e=Lp.charCodeAt(qp));)++qp,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Lp.charCodeAt(qp)&&vu({},gg,Eg),++qp,(e=nu("u"))&&"\\"!==e&&eu(e.charCodeAt(0))||vu({},gg,Eg),t+=e);return t}function au(){var e,t;return e=qp,{type:1===(t=92===Lp.charCodeAt(qp)?iu():function(){var e,t;for(e=qp++;qp<jp;){if(92===(t=Lp.charCodeAt(qp)))return qp=e,iu();if(!eu(t))break;++qp}return Lp.slice(e,qp)}()).length?Qp:Cg.hasOwnProperty(t)?Kp:"null"===t?eg:"true"===t||"false"===t?Zp:Qp,value:t,start:e,end:qp}}function ou(){var e,t,n,r,i=qp,a=Lp.charCodeAt(qp),o=Lp[qp];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++qp,{type:ng,value:String.fromCharCode(a),start:i,end:qp};default:if(61===(e=Lp.charCodeAt(qp+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return qp+=2,{type:ng,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:qp};case 33:case 61:return qp+=2,61===Lp.charCodeAt(qp)&&++qp,{type:ng,value:Lp.slice(i,qp),start:i,end:qp}}}return">>>="===(r=Lp.substr(qp,4))?{type:ng,value:r,start:i,end:qp+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:ng,value:n,start:i,end:qp+=3}:o===(t=n.substr(0,2))[1]&&0<="+-<>&|".indexOf(o)||"=>"===t?{type:ng,value:t,start:i,end:qp+=2}:0<="<>=!+-*%&|^/".indexOf(o)?{type:ng,value:o,start:i,end:++qp}:void vu({},gg,Eg)}function uu(){var e,t,n;if(Go(Xo((n=Lp[qp]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=qp,e="","."!==n){if(e=Lp[qp++],n=Lp[qp],"0"===e){if("x"===n||"X"===n)return++qp,function(e){for(var t="";qp<jp&&Zo(Lp[qp]);)t+=Lp[qp++];return 0===t.length&&vu({},gg,Eg),Ko(Lp.charCodeAt(qp))&&vu({},gg,Eg),{type:tg,value:parseInt("0x"+t,16),start:e,end:qp}}(t);if(Jo(n))return function(e){for(var t="0"+Lp[qp++];qp<jp&&Jo(Lp[qp]);)t+=Lp[qp++];return(Ko(Lp.charCodeAt(qp))||Xo(Lp.charCodeAt(qp)))&&vu({},gg,Eg),{type:tg,value:parseInt(t,8),octal:!0,start:e,end:qp}}(t);n&&Xo(n.charCodeAt(0))&&vu({},gg,Eg)}for(;Xo(Lp.charCodeAt(qp));)e+=Lp[qp++];n=Lp[qp]}if("."===n){for(e+=Lp[qp++];Xo(Lp.charCodeAt(qp));)e+=Lp[qp++];n=Lp[qp]}if("e"===n||"E"===n)if(e+=Lp[qp++],"+"!==(n=Lp[qp])&&"-"!==n||(e+=Lp[qp++]),Xo(Lp.charCodeAt(qp)))for(;Xo(Lp.charCodeAt(qp));)e+=Lp[qp++];else vu({},gg,Eg);return Ko(Lp.charCodeAt(qp))&&vu({},gg,Eg),{type:tg,value:parseFloat(e),start:t,end:qp}}function su(){var e,t,n,r;return Fp=null,tu(),e=qp,t=function(){var e,t,n,r;for(Go("/"===(e=Lp[qp]),"Regular expression literal must start with a slash"),t=Lp[qp++],r=n=!1;qp<jp;)if(t+=e=Lp[qp++],"\\"===e)Qo((e=Lp[qp++]).charCodeAt(0))&&vu({},wg),t+=e;else if(Qo(e.charCodeAt(0)))vu({},wg);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||vu({},wg),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(n=t="";qp<jp&&eu((e=Lp[qp]).charCodeAt(0));)++qp,"\\"===e&&qp<jp?vu({},gg,Eg):(n+=e,t+=e);return 0<=n.search(/[^gimuy]/g)&&vu({},xg,n),{value:n,literal:t}}(),r=function(e,t){var n=e;0<=t.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void vu({},xg)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:qp}}function fu(){var e;return tu(),jp<=qp?{type:Jp,start:qp,end:qp}:Ko(e=Lp.charCodeAt(qp))?au():40===e||41===e||59===e?ou():39===e||34===e?function(){var e,t,n,r,i="",a=!1;for(Go("'"===(e=Lp[qp])||'"'===e,"String literal must starts with a quote"),t=qp,++qp;qp<jp;){if((n=Lp[qp++])===e){e="";break}if("\\"===n)if((n=Lp[qp++])&&Qo(n.charCodeAt(0)))"\r"===n&&"\n"===Lp[qp]&&++qp;else switch(n){case"u":case"x":"{"===Lp[qp]?(++qp,i+=ru()):i+=nu(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:Jo(n)?(0!==(r="01234567".indexOf(n))&&(a=!0),qp<jp&&Jo(Lp[qp])&&(a=!0,r=8*r+"01234567".indexOf(Lp[qp++]),0<="0123".indexOf(n)&&qp<jp&&Jo(Lp[qp])&&(r=8*r+"01234567".indexOf(Lp[qp++]))),i+=String.fromCharCode(r)):i+=n}else{if(Qo(n.charCodeAt(0)))break;i+=n}}return""!==e&&vu({},gg,Eg),{type:rg,value:i,octal:a,start:t,end:qp}}():46===e?Xo(Lp.charCodeAt(qp+1))?uu():ou():Xo(e)?uu():ou()}function lu(){var e;return qp=(e=Fp).end,Fp=fu(),qp=e.end,e}function cu(){var e;e=qp,Fp=fu(),qp=e}function du(e,t,n){var r=new Yo("||"===e||"&&"===e?lg:ag);return r.operator=e,r.left=t,r.right=n,r}function hu(e){var t=new Yo(sg);return t.name=e,t}function pu(e){var t=new Yo(fg);return t.value=e.value,t.raw=Lp.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function gu(e,t,n){var r=new Yo(cg);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function mu(e,t,n){var r=new Yo(hg);return r.key=t,r.value=n,r.kind=e,r}function vu(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return Go(t<r.length,"Message reference must be in range"),r[t]});throw(n=new Error(i)).index=qp,n.description=i,n}function yu(e){e.type===Jp&&vu(e,_g),e.type===tg&&vu(e,mg),e.type===rg&&vu(e,vg),e.type===Qp&&vu(e,yg),e.type===Kp&&vu(e,bg),vu(e,gg,e.value)}function bu(e){var t=lu();t.type===ng&&t.value===e||yu(t)}function _u(e){return Fp.type===ng&&Fp.value===e}function xu(e){return Fp.type===Kp&&Fp.value===e}function wu(){var e,t,n=[];for(qp=Fp.start,bu("[");!_u("]");)_u(",")?(lu(),n.push(null)):(n.push(Tu()),_u("]")||bu(","));return lu(),e=n,(t=new Yo(ig)).elements=e,t}function ku(){var e;return qp=Fp.start,(e=lu()).type===rg||e.type===tg?(e.octal&&vu(e,kg),pu(e)):hu(e.value)}function Mu(){var e,t,n,r,i,a,o,u=[],s={},f=String;for(qp=Fp.start,bu("{");!_u("}");)i=r=n=void 0,qp=Fp.start,t="$"+((e=(n=Fp).type===Qp?(i=ku(),bu(":"),mu("init",i,Tu())):n.type!==Jp&&n.type!==ng?(r=ku(),bu(":"),mu("init",r,Tu())):void yu(n)).key.type===sg?e.key.name:f(e.key.value)),Object.prototype.hasOwnProperty.call(s,t)?vu({},Mg):s[t]=!0,u.push(e),_u("}")||bu(",");return bu("}"),a=u,(o=new Yo(dg)).properties=a,o}function Eu(){var e,t,n,r;if(_u("("))return bu("("),r=zu(),bu(")"),r;if(_u("["))return wu();if(_u("{"))return Mu();if(e=Fp.type,qp=Fp.start,e===Qp||Rg[Fp.value])n=hu(lu().value);else if(e===rg||e===tg)Fp.octal&&vu(Fp,kg),n=pu(lu());else{if(e===Kp)throw new Error(Og);e===Zp?((t=lu()).value="true"===t.value,n=pu(t)):e===eg?((t=lu()).value=null,n=pu(t)):_u("/")||_u("/=")?(n=pu(su()),cu()):yu(lu())}return n}function Ou(){var e=[];if(bu("("),!_u(")"))for(;qp<jp&&(e.push(Tu()),!_u(")"));)bu(",");return bu(")"),e}function Su(){var e,t;return qp=Fp.start,e=lu(),(t=e).type!==Qp&&t.type!==Kp&&t.type!==Zp&&t.type!==eg&&yu(e),hu(e.value)}function Au(){var e=function(){var e,t,n,r,i,a;for(e=Eu();;)if(_u("."))bu("."),e=gu(".",e,Su());else if(_u("("))t=Ou(),r=e,i=t,a=void 0,(a=new Yo(og)).callee=r,a.arguments=i,e=a;else{if(!_u("["))break;n=void 0,bu("["),n=zu(),bu("]"),e=gu("[",e,n)}return e}();if(Fp.type===ng&&(_u("++")||_u("--")))throw new Error(Og);return e}function Cu(){var e,t,n,r,i;if(Fp.type!==ng&&Fp.type!==Kp)t=Au();else{if(_u("++")||_u("--"))throw new Error(Og);if(_u("+")||_u("-")||_u("~")||_u("!"))e=lu(),t=Cu(),n=e.value,r=t,(i=new Yo(pg)).operator=n,i.argument=r,i.prefix=!0,t=i;else{if(xu("delete")||xu("void")||xu("typeof"))throw new Error(Og);t=Au()}}return t}function Ru(e){var t=0;if(e.type!==ng&&e.type!==Kp)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Tu(){var e,t,n,r,i,a,o;return e=function(){var e,t,n,r,i,a,o,u,s,f;if(e=Fp,s=Cu(),0===(i=Ru(r=Fp)))return s;for(r.prec=i,lu(),t=[e,Fp],a=[s,r,o=Cu()];0<(i=Ru(Fp));){for(;2<a.length&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=du(u,s,o),a.push(n);(r=lu()).prec=i,a.push(r),t.push(Fp),n=Cu(),a.push(n)}for(n=a[f=a.length-1],t.pop();1<f;)t.pop(),n=du(a[f-1].value,a[f-2],n),f-=2;return n}(),_u("?")&&(lu(),t=Tu(),bu(":"),n=Tu(),r=e,i=t,a=n,(o=new Yo(ug)).test=r,o.consequent=i,o.alternate=a,e=o),e}function zu(){var e=Tu();if(_u(","))throw new Error(Og);return e}function Du(e){function t(t,n,r){return function(i){return a=t,u=n,s=r,f=e((o=i)[0]),u&&(f=u+"("+f+")",0===u.lastIndexOf("new ",0)&&(f="("+f+")")),f+"."+a+(s<0?"":0===s?"()":"("+o.slice(1).map(e).join(",")+")");var a,o,u,s,f}}var n="new Date",r="String";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&k("Missing arguments to clamp function."),3<t.length&&k("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),indexof:t("indexOf",null),lastindexof:t("lastIndexOf",null),slice:t("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),replace:t("replace",r),regexp:"RegExp",test:t("test","RegExp"),if:function(t){t.length<3&&k("Missing arguments to if function."),3<t.length&&k("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function Nu(e,t,n){var r=e+":"+n,i=zg[r];return i&&i[0]===t||(zg[r]=i=[t,t(n)]),i[1]}function Pu(e,t){return Nu("timeFormat",i.timeFormat,t)(e)}function $u(e,t,n){return Dg.setMonth(e),Dg.setDate(t),Pu(Dg,n)}function Lu(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function qu(e,t){var n;return V(e)?e:O(e)?(n=t.scales[e])&&n.value:void 0}function ju(e,t,n){var r=$g+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(e){}}function Fu(e,t,n,r){if(t[0].type===Pg)ju(n,r,t[0].value);else if("Identifier"===t[0].type)for(e in n.scales)ju(n,r,e)}function Uu(e,t){return function(n,r,i){if(n){var a=qu(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}function Iu(e){var t=this.context.data[e];return t?t.values.value:[]}function Bu(e,t,n,r){t[0].type!==Pg&&k("First argument to data functions must be a string literal.");var i=t[0].value,a=Lg+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function Wu(e){return e.data}function Vu(e,t){var n=Iu.call(t,e);return n.root&&n.root.lookup||Ug}function Hu(e,t,n,r){var i,a=t[0],o=t[t.length-1];return o<a&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=e:a<e)&&(r?e<=o:e<o)}function Yu(e,t){return e===t||e!=e&&t!=t||!(!al(e)||!al(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!Yu(e[n],t[n]))return!1;return!0}(e,t)}function Gu(e){return function(t){for(var n in e)if(!Yu(t[n],e[n]))return!1;return!0}}function Xu(e,t){for(var n,r=t.fields,i=t.values,a=t.getter||(t.getter=[]),o=r.length,u=0;u<o;++u)if(a[u]=a[u]||A(r[u]),ee(n=a[u](e))&&(n=z(n)),ee(i[u])&&(i[u]=z(i[u])),t[Ig+r[u]]){if(ee(i[u][0])&&(i[u]=i[u].map(z)),!Hu(n,i[u],!0,!1))return!1}else if(n!==i[u])return!1;return!0}function Zu(e,t){for(var n,r,i=t.intervals,a=i.length,o=0;o<a;++o){if(n=i[o].extent,r=(i[o].getter||(i[o].getter=A(i[o].field)))(e),!n||n[0]===n[1])return!1;if(ee(r)&&(r=z(r)),ee(n[0])&&(n=i[o].extent=n.map(z)),te(n[0])&&!Hu(r,n))return!1;if(O(n[0])&&n.indexOf(r)<0)return!1}return!0}function Ju(e,t,n,r){for(var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=f?f[Vg]&&f[Vg].value:void 0,d=n===Bg,h=l.length,p=0;p<h;++p)if(i=l[p],c&&d){if(-1===(o=(a=a||{})[u=i.unit]||0))continue;if(s=r(t,i),a[u]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(u).count)return!1}else if(d^(s=r(t,i)))return s;return h&&d}function Qu(e,t,n){return Ju.call(this,e,t,n,Xu)}function Ku(e,t,n,r){t[0].type!==Pg&&k("First argument to indata must be a string literal.");var i=t[0].value;(2<=t.length&&t[t.length-1].value)!==Bg||r.hasOwnProperty("@unit")||(r["@unit"]=n.getData(i).indataRef(n,"unit")),Bu(0,t,n,r)}function es(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=f?f[Vg]&&f[Vg].value:void 0,d=l[0],h=0;if(d){for(i=t?d.encodings.length:d.fields.length;h<i;++h)if(t&&d.encodings[h]===t||n&&d.fields[h]===n){a=h,u=d[Ig+d.fields[h]];break}return c&&1===c.size&&(r=Wg),c&&r===Bg?(s=l.reduce(function(e,t){return(e[t.unit]||(e[t.unit]=[])).push({unit:t.unit,value:t.values[a]}),e},{}),o=Object.keys(s).map(function(e){return{unit:e,value:u?ns(s[e],Wg):ts(s[e],Wg)}})):o=l.map(function(e){return{unit:e.unit,value:e.values[a]}}),u?ns(o,r):ts(o,r)}}function ts(e,t){for(var n,r,i,a,o={},u=0,s={},f=[],l=0,c=e.length;l<c;++l)r=(n=e[l]).unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],t===Bg&&i.count!==u||f.push(i.value);return f.length?f:void 0}function ns(e,t){for(var n,r,i,a,o=t===Bg?is:rs,u=0,s=e.length;u<s;++u)ee((n=e[u].value)[0])&&(n=n.map(z)),i=n[0],(a=n[1])<i&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function rs(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function is(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function as(e,t,n){return 1===arguments.length?Hg[e]:(Hg[e]=t,n&&(Gg[e]=n),Qg&&(Qg.functions[e]="this."+e),this)}function os(e,t,n){var r,i,a={};try{r=function(e){qp=0,jp=(Lp=e).length,Fp=null,cu();var t=zu();if(Fp.type!==Jp)throw new Error("Unexpect token after expression.");return t}(e=O(e)?e:S(e)+"")}catch(n){k("Expression parse error: "+e)}return r.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,r=Jg.visitors[n];r&&r(n,e.arguments,t,a)}}),(i=Qg(r)).globals.forEach(function(e){var n=Kg+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}}function us(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function ss(e,t,n,r){return new us(e,t,n,r)}function fs(e,t){return ss("operator",e,t)}function ls(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function cs(e,t){return t?{$field:e,$name:t}:{$field:e}}function ds(e,t){return{$compare:e,$order:t}}function hs(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function ps(e){return e&&e.signal}function gs(e,t){return null!=e?e:t}function ms(e){return e&&e.signal||e}function vs(e,t){return(e.merge?ys:e.stream?bs:e.type?_s:k("Invalid stream specification: "+S(e)))(e,t)}function ys(e,t){var n=xs({merge:e.merge.map(function(e){return vs(e,t)})},e,t);return t.addStream(n).id}function bs(e,t){var n=xs({stream:vs(e.stream,t)},e,t);return t.addStream(n).id}function _s(e,t){var n,r,i;return e.type===am?(n=t.event(am,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((i=e.source)===rm?im:i||im,e.type),r=xs({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function xs(e,t,n){var r,i,a,o,u=t.between;return u&&(2!==u.length&&k('Stream "between" parameter must have 2 entries: '+S(t)),e.between=[vs(u[0],n),vs(u[1],n)]),u=t.filter?W(t.filter):[],(t.marktype||t.markname||t.markrole)&&u.push((r=t.marktype,i=t.markname,a=t.markrole,(o="event.item")+(r&&"*"!==r?"&&"+o+".mark.marktype==='"+r+"'":"")+(a?"&&"+o+".mark.role==='"+a+"'":"")+(i?"&&"+o+".mark.name==='"+i+"'":""))),t.source===rm&&u.push("inScope(event.item)"),u.length&&(e.filter=os("("+u.join(")&&(")+")").$expr),null!=(u=t.throttle)&&(e.throttle=+u),null!=(u=t.debounce)&&(e.debounce=+u),t.consume&&(e.consume=!0),e}function ws(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&0<=i.indexOf(a)?--o:r&&0<=r.indexOf(a)&&++o}return t}function ks(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=ws(e,i,dm,um+fm,sm+lm),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function Ms(e){return"["===e[0]?function(e){var t,n,r=e.length,i=1;if((i=ws(e,i,sm,um,sm))===r)throw"Empty between selector: "+e;if(2!==(t=ks(e.substring(1,i))).length)throw"Between selector must have two elements: "+e;if((e=e.slice(i+1).trim())[0]!==pm)throw"Expected '>' after between selector: "+e;return t=t.map(Ms),(n=Ms(e.slice(1).trim())).between?{between:t,stream:n}:(n.between=t,n)}(e):function(e){var t,n,r={source:Xg},i=[],a=[0,0],o=0,u=0,s=e.length,f=0;if(e[s-1]===lm){if(!(0<=(f=e.lastIndexOf(fm))))throw"Unmatched right brace: "+e;try{a=function(e){var t=e.split(dm);if(!e.length||2<t.length)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}(e.substring(f+1,s-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,f).trim(),s=e.length,f=0}if(!s)throw e;if(e[0]===hm&&(o=++f),(t=ws(e,f,cm))<s&&(i.push(e.substring(u,t).trim()),u=f=++t),(f=ws(e,f,um))===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,f).trim()),n=[],(u=++f)===s)throw"Unmatched left bracket: "+e;for(;f<s;){if((f=ws(e,f,sm))===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,f).trim()),f<s-1&&e[++f]!==um)throw"Expected left bracket: "+e;u=++f}if(!(s=i.length)||gm.test(i[s-1]))throw"Invalid event selector: "+e;1<s?(r.type=i[1],o?r.markname=i[0].slice(1):(l=i[0],Zg.hasOwnProperty(l)?r.marktype=i[0]:r.source=i[0])):r.type=i[0];var l;return"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}(e)}function Es(e,t,n){var r,i,a,o,u,s=e.events,f=e.update,l=e.encode,c=[];s||k("Signal update missing events specification."),O(s)&&(a=s,o=t.isSubscope()?rm:im,Xg=o||om,Zg=u||mm,s=ks(a.trim()).map(Ms)),(s=W(s).filter(function(e){return e.signal||e.scale?(c.push(e),0):1})).length&&c.push(1<s.length?{merge:s}:s[0]),null!=l&&(f&&k("Signal encode and update are mutually exclusive."),f="encode(item(),"+S(l)+")"),r=O(f)?os(f,t,vm):null!=f.expr?os(f.expr,t,vm):null!=f.value?f.value:null!=f.signal?{$expr:"_.value",$params:{value:t.signalRef(f.signal)}}:k("Invalid signal update specification."),i={target:n,update:r},e.force&&(i.options={force:!0}),c.forEach(function(e){var n,r;t.addUpdate(X((r=t,{source:(n=e).signal?r.signalRef(n.signal):n.scale?r.scaleRef(n.scale):vs(n,r)}),i))})}function Os(e){return function(t,n,r){return ss(e,n,t||void 0,r)}}function Ss(e){return Xm.hasOwnProperty(e)}function As(e){return Ym.hasOwnProperty(e)}function Cs(e){return"quantile"===e}function Rs(e,t){var n,r,i,a,o=t.getScale(e.name).params;for(n in o.domain=Ds(e.domain,e,t),null!=e.range&&(o.range=function e(t,n,r){var i=t.range,a=n.config.range;if(i.signal)return n.signalRef(i.signal);if(O(i)){if(a&&a.hasOwnProperty(i))return t=X({},t,{range:a[i]}),e(t,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=Ss(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:k("Unrecognized scale range value: "+S(i))}else{if(i.scheme)return r.scheme=Ts(i.scheme,n),i.extent&&(r.schemeExtent=(o=i.extent,u=n,o.signal?u.signalRef(o.signal):o.map(function(e){return Ts(e,u)}))),void(i.count&&(r.schemeCount=Ts(i.count,n)));if(i.step)return void(r.rangeStep=Ts(i.step,n));if(Ss(t.type)&&!al(i))return Ds(i,t,n);al(i)||k("Unsupported range type: "+S(i))}var o,u;return i.map(function(e){return Ts(e,n)})}(e,t,o)),null!=e.interpolate&&(r=e.interpolate,(i=o).interpolate=Ts(r.type||r),null!=r.gamma&&(i.interpolateGamma=Ts(r.gamma))),null!=e.nice&&(a=e.nice,o.nice=E(a)?{interval:Ts(a.interval),step:Ts(a.step)}:Ts(a)),e)o.hasOwnProperty(n)||"name"===n||(o[n]=Ts(e[n],t))}function Ts(e,t){return E(e)?e.signal?t.signalRef(e.signal):k("Unsupported object: "+S(e)):e}function zs(e){k("Can not find data set: "+S(e))}function Ds(e,t,n){return e?e.signal?n.signalRef(e.signal):(al(e)?function(e,t,n){return e.map(function(e){return Ts(e,n)})}:e.fields?function(e,t,n){var r=e.data,i=e.fields.reduce(function(e,t){return t=O(t)?{data:r,field:t}:al(t)||t.signal?function(e,t){var n="_:vega:_"+Wm++,r=xm({});if(al(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+S(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Fm({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e},[]);return(Ss(t.type)?function(e,t,n){var r,i,a;return r=n.map(function(e){var n=t.getData(e.data);return n||zs(e.data),n.countsRef(t,e.field)}),i=t.add(ym({groupby:tm,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:r})),a=t.add(xm({pulse:ls(i)})),ls(t.add(Bm({field:tm,sort:t.sortRef(Ns(e.sort,!0)),pulse:ls(a)})))}:Cs(t.type)?function(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||zs(e.data),n.domainRef(t,e.field)});return ls(t.add(Tm({values:r})))}:function(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||zs(e.data),n.extentRef(t,e.field)});return ls(t.add(Rm({extents:r})))})(e,n,i)}:function(e,t,n){var r=n.getData(e.data);return r||zs(e.data),Ss(t.type)?r.valuesRef(n,e.field,Ns(e.sort,!1)):Cs(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)})(e,t,n):void(null==t.domainMin&&null==t.domainMax||k("No scale domain defined for domainMin/domainMax to override."))}function Ns(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?k("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&k("Multiple domain scales support op count only."):k("No field provided for sort aggregate op: "+e.op):E(e)?e.field="key":e={field:"key"}),e}function Ps(e,t,n){return al(e)?e.map(function(e){return Ps(e,t,n)}):E(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:k("Unsupported parameter object: "+S(e)):e}function $s(e,t,n,r){var i=os(e,t);return i.$fields.forEach(function(e){r[e]=1}),X(n,i.$params),i.$expr}function Ls(e,t,n,r){return function e(t,n,r,i){var a,o,u;if(t.signal)a="datum",u=$s(t.signal,n,r,i);else if(t.group||t.parent){for(o=Math.max(1,t.level||1),a="item";0<o--;)a+=".mark.group";t.parent?(u=t.parent,a+=".datum"):u=t.group}else t.datum?(a="datum",u=t.datum):k("Invalid field reference: "+S(t));return t.signal||(O(u)?(i[u]=1,u=M(u).map(S).join("][")):u=e(u,n,r,i)),a+"["+u+"]"}(E(e)?e:{datum:e},t,n,r)}function qs(e,t,n,r,i){var a,o,u,s=js(e.scale,n,r,i);return null!=e.range?(o=s+".range()",t=0===(a=+e.range)?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=s+"("+t+")"),e.band&&(u=function(e,t){if(!O(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}(e.scale,n))&&(a=(o=s+".bandwidth")+"()"+(1===(a=+e.band)?"":"*"+a),u<0&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+s+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t}function js(e,t,n,r){var i;if(O(e))i=$g+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=S(i);else{for(i in t.scales)n[$g+i]=t.scaleRef(i);i=S($g)+"+"+(e.signal?"("+$s(e.signal,t,n,r)+")":Ls(e,t,n,r))}return"_["+i+"]"}function Fs(e,t,n,r){return E(e)?"("+Us(null,e,t,n,r)+")":e}function Us(e,t,n,r,i){if(null!=t.gradient)return o=n,u=r,s=i,"this.gradient("+js((a=t).gradient,o,u,s)+","+S(a.start)+","+S(a.stop)+","+S(a.count)+")";var a,o,u,s,f=t.signal?$s(t.signal,n,r,i):t.color?function(e,t,n,r){function i(e,i,a,o){return"this."+e+"("+[Us(null,i,t,n,r),Us(null,a,t,n,r),Us(null,o,t,n,r)].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null;
}(t.color,n,r,i):null!=t.field?Ls(t.field,n,r,i):void 0!==t.value?S(t.value):void 0;return null!=t.scale&&(f=qs(t,f,n,r,i)),void 0===f&&(f=null),null!=t.exponent&&(f="Math.pow("+f+","+Fs(t.exponent,n,r,i)+")"),null!=t.mult&&(f+="*"+Fs(t.mult,n,r,i)),null!=t.offset&&(f+="+"+Fs(t.offset,n,r,i)),t.round&&(f="Math.round("+f+")"),f}function Is(e,t,n){return e+"["+S(t)+"]="+n+";"}function Bs(e,t,n,r,i){var a="";return t.forEach(function(e){var t=Us(0,e,n,r,i);a+=e.test?$s(e.test,n,r,i)+"?"+t+":":t}),Is("o",e,a)}function Ws(e,t,n,r){var i,a,o,u,s,f={},l="var o=item,datum=o.datum,$;";for(i in e)a=e[i],l+=al(a)?Bs(i,a,r,n,f):Is("o",i,Us(0,a,r,n,f));return o=e,s="",mv[u=t]||(o.x2&&(o.x?(vv[u]&&(s+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),s+="o.width=o.x2-o.x;"):s+="o.x=o.x2-(o.width||0);"),o.xc&&(s+="o.x=o.xc-(o.width||0)/2;"),o.y2&&(o.y?(vv[u]&&(s+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),s+="o.height=o.y2-o.y;"):s+="o.y=o.y2-(o.height||0);"),o.yc&&(s+="o.y=o.yc-(o.height||0)/2;")),l+=s,{$expr:l+="return 1;",$fields:Object.keys(f),$output:Object.keys(e)}}function Vs(e){return E(e)?X({},e):{value:e}}function Hs(e,t,n){return null!=n?(e[t]=E(n)&&!al(n)?n:{value:n},1):0}function Ys(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=X(e[r]||{},t[r]));return e}function Gs(e,t,n,r,i,a){var o,u;for(u in(a=a||{}).encoders={$encode:o={}},e=function(e,t,n,r,i){var a,o,u={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null);for(a in o=n===bv?i.group:n===yv?X({},i.mark,i[t]):null)Zs(a,e)||("fill"===a||"stroke"===a)&&(Zs("fill",e)||Zs("stroke",e))||(u[a]=Xs(o[a]));return W(r).forEach(function(t){var n=i.style&&i.style[t];for(var r in n)Zs(r,e)||(u[r]=Xs(n[r]))}),(e=X({},e)).enter=X(u,e.enter),e}(e,t,n,r,i.config))o[u]=Ws(e[u],t,a,i);return a}function Xs(e){return e&&e.signal?{signal:e.signal}:{value:e}}function Zs(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function Js(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:Ys(a,o,gv)}}function Qs(e,t,n){return gs(t[e],n[e])}function Ks(e,t){return gs(e.direction,t)===ev}function ef(e,t){return gs(e.gradientLength,t.gradientLength||t.gradientWidth)}function tf(e,t){return gs(e.gradientThickness,t.gradientThickness||t.gradientHeight)}function nf(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function rf(e,t,n,r){var i,a,o,u,s={value:0},f=Ks(e,t.gradientDirection),l=Vs(tf(e,t)),c=ef(e,t),d=Qs("labelOverlap",e,t),h={},p="";return h.enter=i={opacity:s},Hs(i,"fill",Qs("labelColor",e,t)),Hs(i,"font",Qs("labelFont",e,t)),Hs(i,"fontSize",Qs("labelFontSize",e,t)),Hs(i,"fontWeight",Qs("labelFontWeight",e,t)),Hs(i,"limit",gs(e.labelLimit,t.gradientLabelLimit)),h.exit={opacity:s},h.update=a={opacity:{value:1},text:{field:nv}},f?(i.align={value:"left"},i.baseline=a.baseline={signal:Uv},o="y",u="x",p="1-"):(i.align=a.align={signal:Fv},i.baseline={value:"top"},o="x",u="y"),i[o]=a[o]={signal:p+"datum."+iv,mult:c},i[u]=a[u]=l,l.offset=gs(e.labelOffset,t.gradientLabelOffset)||0,e=Js(jv,Tv,sv,uv,r,h,n),d&&(e.overlap={method:d,order:"datum."+tv}),e}function af(e,t,n,r,i,a,o,u){return{type:Pv,name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:u}}function of(e,t){return{align:Qs("gridAlign",e,t),center:{row:!0,column:!1},columns:(n=e,r=t,gs(n.columns,gs(r.columns,+Ks(n,r.symbolDirection)))),padding:{row:Qs("rowPadding",e,t),column:Qs("columnPadding",e,t)}};var n,r}function uf(e){return E(e)&&e.signal?e.signal:S(e)}function sf(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===Pv?_v:t||yv:t}function ff(e,t){var n=lt(e.type);n||k("Unrecognized transform type: "+S(e.type));var r=ss(n.type.toLowerCase(),null,lf(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function lf(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)o[(r=e.params[i]).name]=cf(r,t,n);return o}function cf(e,t,n){var r,i,a,o=e.type,u=t[e.name];return"index"===o?function(e,t,n){return O(t.from)||k('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==u?"param"===o?(i=n,a=t[(r=e).name],r.array?(al(a)||k("Expected an array of sub-parameters. Instead: "+S(a)),a.map(function(e){return hf(r,e,i)})):hf(r,a,i)):"projection"===o?n.projectionRef(t[e.name]):e.array&&!ps(u)?u.map(function(t){return df(e,t,n)}):df(e,u,n):void(e.required&&k("Missing required "+S(t.type)+" parameter: "+S(e.name)))}function df(e,t,n){var r=e.type;if(ps(t))return pf(r)?k("Expression references can not be signals."):gf(r)?n.fieldRef(t):mf(r)?n.compareRef(t):n.signalRef(t.signal);var i,a,o=e.expr||gf(r);return o&&(a=t)&&a.expr?os(t.expr,n):o&&(i=t)&&i.field?cs(t.field):pf(r)?os(t,n):"data"===r?ls(n.getData(t).values):gf(r)?cs(t):mf(r)?n.compareRef(t):t}function hf(e,t,n){var r,i,a,o,u;for(o=0,u=e.params.length;o<u;++o){for(a in(i=e.params[o]).key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||k("Unsupported parameter: "+S(t)),r=X(lf(i,t,n),i.key),ls(n.add(Dm(r)))}function pf(e){return"expr"===e}function gf(e){return"field"===e}function mf(e){return"compare"===e}function vf(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ls(t.getData(e.data).output)}function yf(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function bf(e){return O(e)?e:null}function _f(e,t,n){var r,i=hs(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function xf(e,t,n,r,i,a,o){var u,s,f,l=t[n]||(t[n]={}),c=E(f=a)?(f.order===nm?"-":"+")+hs(f.op,f.field):"",d=bf(i);if(null!=d&&(e=t.scope,u=l[d+=c?"|"+c:""]),!u){var h=a?{field:tm,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:ls(t.output)};c&&(h.sort=e.sortRef(a)),s=e.add(ss(r,void 0,h)),o&&(t.index[i]=s),u=ls(s),null!=d&&(l[d]=u)}return u}function wf(e,t,n){var r,i=e.remove,a=e.insert,o=e.toggle,u=e.modify,s=e.values,f=t.add(fs());r=os("if("+e.trigger+',modify("'+n+'",'+[a,i,o,u,s].map(function(e){return null==e?"null":e}).join(",")+"),0)",t),f.update=r.$expr,f.params=r.$params}function kf(e,t){var n,r,i,a,o,u,s,f,l,c,d,h,p,g,m,v,y,b,_,x,w,M,O,A,C,R,T,z,D,N,P,$,L,q,j,F,U,I,B,V,H,Y,G=sf(e),Z=e.type===Pv,J=e.from&&e.from.facet,Q=e.layout||G===_v||G===bv,K=G===yv||Q||J,ee=e.overlap;g=e.from,m=Z,v=t,g?(y=g.facet)&&(m||k("Only group marks can be faceted."),null!=y.field?x=w=vf(y,v):(g.data?w=ls(v.getData(g.data).aggregate):((_=ff(X({type:"aggregate",groupby:W(y.groupby)},y.aggregate),v)).params.key=v.keyRef(y.groupby),_.params.pulse=vf(y,v),x=w=ls(v.add(_))),b=v.keyRef(y.groupby,!0))):x=ls(v.add(xm(null,[{}]))),x||(x=vf(g,v)),i={key:b,pulse:x,parent:w},l=ls(r=t.add(km({key:i.key||(e.key?cs(e.key):void 0),pulse:i.pulse,clean:!Z}))),r=a=t.add(xm({pulse:l})),c=ls(r=t.add(Cm({markdef:(T=e,{marktype:T.type,name:T.name||void 0,role:T.role||sf(T),zindex:+T.zindex||void 0}),interactive:(C=e.interactive,R=t,C&&C.signal?R.signalRef(C.signal):!1!==C),clip:(M=e.clip,O=t,E(M)&&(M.signal?A=M.signal:M.path?A="pathShape("+uf(M.path)+")":M.sphere&&(A="geoShape("+uf(M.sphere)+', {type: "Sphere"})')),A?O.signalRef(A):!!M),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ls(r)}))),(r=t.add(Mm(Gs(e.encode,e.type,G,e.style,t,{pulse:c})))).params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=ff(e,t);(n.metadata.generates||n.metadata.changes)&&k("Mark transforms should not generate new data."),n.params.pulse=ls(r),t.add(r=n)}),e.sort&&(r=t.add(Um({sort:t.compareRef(e.sort,!0),pulse:ls(r)}))),d=ls(r),(J||Q)&&(h=ls(Q=t.add(Im({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:c,pulse:d})))),p=ls(o=t.add(_m({mark:c,pulse:h||d}))),Z&&(K&&((n=t.operators).pop(),Q&&n.pop()),t.pushState(d,h||p,l),J?(q=t,j=i,V=(L=e).from.facet,H=V.name,Y=vf(V,q),V.name||k("Facet must have a name: "+S(V)),V.data||k("Facet must reference a data set: "+S(V)),V.field?B=q.add(Nm({field:q.fieldRef(V.field),pulse:Y})):V.groupby?B=q.add(Em({key:q.keyRef(V.groupby),group:ls(q.proxy(j.parent)),pulse:Y})):k("Facet must specify groupby or field: "+S(V)),U=(F=q.fork()).add(xm()),I=F.add(Fm({pulse:ls(U)})),F.addData(H,new yf(F,U,U,I)),F.addSignal("parent",null),B.params.subflow={$subflow:zf(L,F).toRuntime()}):K?(z=e,N=i,P=(D=t).add(Nm({pulse:N.pulse})),($=D.fork()).add(Fm()),$.addSignal("parent",null),P.params.subflow={$subflow:zf(z,$).toRuntime()}):zf(e,t),t.popState(),K&&(Q&&n.push(Q),n.push(o))),ee&&(r={method:!0===ee.method?"parity":ee.method,pulse:p},ee.order&&(r.sort=t.compareRef({field:ee.order})),ee.bound&&(r.boundScale=t.scaleRef(ee.bound.scale),r.boundOrient=ee.bound.orient,r.boundTolerance=ee.bound.tolerance),p=ls(t.add(zm(r)))),u=t.add(qm({pulse:p})),s=t.add(Fm({pulse:ls(u)},void 0,t.parent())),null!=e.name&&(f=e.name,t.addData(f,new yf(t,a,u,s)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&k("Marks only support modify triggers."),wf(e,t,f)}))}function Mf(e,t){var n,r,i,a,o,u,s,f,l,c,d,h,p,g,m,v,y,b,_,x,w,M,E,O,S,A,C,R,T,z,D,N,P,$,L,q,j,F,U,I,B,W,V,H,Y,G,X,Z,J,Q,K,ee,te,ne,re,ie,ae,oe,ue,se,fe,le,ce,de,he,pe,ge,me,ve,ye,be,_e,xe,we,ke,Me,Ee,Oe,Se,Ae,Ce,Re,Te,ze,De,Ne,Pe=t.config.legend,$e=e.encode||{},Le=$e.legend||{},qe=Le.name||void 0,je=Le.interactive,Fe=Le.style,Ue=pv.reduce(function(t,n){return t||e[n]},0);return Ue||k("Missing valid scale for legend."),o=function(e,t){var n=e.type||cv;e.type||1!==(i=e,pv.reduce(function(e,t){return e+(i[t]?1:0)},0))||!e.fill&&!e.stroke||(r=t,n=Gm.hasOwnProperty(r)?dv:As(t)?hv:cv);var r,i;return n!==dv?n:As(t)?hv:dv}(e,t.scaleType(Ue)),u={orient:Qs("orient",e,Pe),title:null!=e.title,type:o},s=ls(t.add(xm(null,[u]))),Le=Ys({enter:(c=e,d=Pe,h={},Hs(h,"fill",Qs("fillColor",c,d))+Hs(h,"stroke",Qs("strokeColor",c,d))+Hs(h,"strokeWidth",Qs("strokeWidth",c,d))+Hs(h,"cornerRadius",Qs("cornerRadius",c,d))+Hs(h,"strokeDash",d.strokeDash)?h:void 0),update:{offset:Vs(Qs("offset",e,Pe)),padding:Vs(Qs("padding",e,Pe)),titlePadding:Vs(Qs("titlePadding",e,Pe))}},Le,gv),n={enter:{x:{value:0},y:{value:0}}},f=ls(t.add(Am(i={type:o,scale:t.scaleRef(Ue),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),o===dv?(a=[(he=e,pe=Ue,ge=Pe,me=$e.gradient,ke={value:0},Me=Ks(he,ge.gradientDirection),Ee=tf(he,ge),Oe=ef(he,ge),Se={},Me?(be=[0,1],_e=[0,0],xe=Ee,we=Oe):(be=[0,0],_e=[1,0],xe=Oe,we=Ee),Se.enter=ve={opacity:ke,x:ke,y:ke},Hs(ve,"stroke",Qs("gradientStrokeColor",he,ge)),Hs(ve,"strokeWidth",Qs("gradientStrokeWidth",he,ge)),Se.exit={opacity:ke},Se.update=ye={x:ke,y:ke,fill:{gradient:pe,start:be,stop:_e},opacity:{value:1}},ve.width=ye.width=Vs(xe),ve.height=ye.height=Vs(we),Js($v,Rv,null,void 0,void 0,Se,me)),rf(e,Pe,$e.labels,f)],i.count=i.count||t.signalRef("max(2,2*floor(("+ms(ef(e,Pe))+")/100))")):o===hv?a=[(Z=e,J=Ue,Q=Pe,K=$e.gradient,ee=f,ue={value:0},se=Ks(Z,Q.gradientDirection),fe=tf(Z,Q),le=ef(Z,Q),ce={},de="",se?(re="y",ae="y2",ie="x",oe="width",de="1-"):(re="x",ae="x2",ie="y",oe="height"),ce.enter=te={opacity:ue},Hs(te,"stroke",Qs("gradientStrokeColor",Z,Q)),Hs(te,"strokeWidth",Qs("gradientStrokeWidth",Z,Q)),ce.exit={opacity:ue},ce.update=ne={opacity:{value:1}},te.fill=ne.fill={scale:J,field:uv},te[re]=ne[re]={signal:de+"datum."+iv,mult:le},te[ie]=ne[ie]={value:0},te[ae]=ne[ae]={signal:de+"datum."+av,mult:le},te[oe]=ne[oe]=Vs(fe),Js($v,Av,null,uv,ee,ce,K)),rf(e,Pe,$e.labels,f)]:(r=of(e,Pe),a=[(S=e,A=Pe,C=$e,R=f,T=ms(r.columns),j=C.entries,F=!(!j||!j.interactive),U=j?j.name:void 0,I=Qs("clipHeight",S,A),B=Qs("symbolOffset",S,A),W={data:"value"},V={},H=T+"?datum."+rv+":datum."+ov,Y=I?Vs(I):{field:ov},G="datum."+tv,X="max(1,"+T+")",V={enter:z={opacity:Iv},exit:{opacity:Iv},update:D={opacity:{value:1}}},S.fill||(Hs(z,"fill",A.symbolBaseFillColor),Hs(z,"stroke",A.symbolBaseStrokeColor)),Hs(z,"shape",Qs("symbolType",S,A)),Hs(z,"size",Qs("symbolSize",S,A)),Hs(z,"strokeWidth",Qs("symbolStrokeWidth",S,A)),Hs(z,"fill",Qs("symbolFillColor",S,A)),Hs(z,"stroke",Qs("symbolStrokeColor",S,A)),z.x=D.x={signal:H,mult:.5,offset:B},Y.mult=.5,z.y=D.y=Y,pv.forEach(function(e){S[e]&&(D[e]=z[e]={scale:S[e],field:uv})}),P=Js(qv,zv,null,uv,W,V,C.symbols),I&&(P.clip=!0),V={enter:z={opacity:Iv},exit:{opacity:Iv},update:D={opacity:{value:1},text:{field:nv}}},Hs(z,"align",Qs("labelAlign",S,A)),Hs(z,"baseline",Qs("labelBaseline",S,A)),Hs(z,"fill",Qs("labelColor",S,A)),Hs(z,"font",Qs("labelFont",S,A)),Hs(z,"fontSize",Qs("labelFontSize",S,A)),Hs(z,"fontWeight",Qs("labelFontWeight",S,A)),Hs(z,"limit",Qs("labelLimit",S,A)),(N=Vs(B)).offset=Qs("labelOffset",S,A),z.x=D.x={signal:H,offset:N},z.y=D.y=Y,$=Js(jv,Tv,sv,uv,W,V,C.labels),V={enter:{width:Iv,height:I?Vs(I):Iv,opacity:Iv},exit:{opacity:Iv},update:D={opacity:{value:1},row:{signal:null},column:{signal:null}}},Ks(S,A.symbolDirection)?(L="ceil(item.mark.items.length/"+X+")",D.row.signal=G+"%"+L,D.column.signal="floor("+G+"/"+L+")",q={field:["row",G]}):(D.row.signal="floor("+G+"/"+X+")",D.column.signal=G+"%"+X,q={field:G}),D.column.signal=T+"?"+D.column.signal+":"+G,(S=af(_v,null,U,R={facet:{data:R,name:"value",groupby:tv}},F,Ys(V,j,gv),[P,$])).sort=q,S)],i.size=(p=e,g=t,m=a[0].marks,b=nf("strokeWidth",m[0].encode),y=p.size?'scale("'+p.size+'",datum)':nf("size",m[0].encode),_=m[1].encode,x=g,w=sv,v=nf("fontSize",_)||(M="fontSize",E=w,(O=x.config.style[E])&&O[M]),os("max(ceil(sqrt("+ms(y)+")+"+ms(b)+"),"+ms(v)+")",g))),a=[af(Cv,null,null,s,je,n,a,r)],u.title&&a.push((Ae=e,Ce=Pe,Re=$e.title,Te=s,(Ne={}).enter=ze={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:De={value:0}},Hs(ze,"align",Qs("titleAlign",Ae,Ce)),Hs(ze,"baseline",Qs("titleBaseline",Ae,Ce)),Hs(ze,"fill",Qs("titleColor",Ae,Ce)),Hs(ze,"font",Qs("titleFont",Ae,Ce)),Hs(ze,"fontSize",Qs("titleFontSize",Ae,Ce)),Hs(ze,"fontWeight",Qs("titleFontWeight",Ae,Ce)),Hs(ze,"limit",Qs("titleLimit",Ae,Ce)),Ne.exit={opacity:De},Ne.update={opacity:{value:1},text:Vs(Ae.title)},Js(jv,Dv,fv,null,Te,Ne,Re))),l=af(Sv,Fe,qe,s,je,Le,a),e.zindex&&(l.zindex=e.zindex),kf(l,t)}function Ef(e,t,n){return'item.anchor==="start"?'+e+':item.anchor==="end"?'+t+":"+n}function Of(e,t){e=O(e)?{text:e}:e;var n,r,i,a=t.config.title,o=X({},e.encode);return n={orient:Qs("orient",e,a)},r=ls(t.add(xm(null,[n]))),o.name=e.name,o.interactive=e.interactive,i=function(e,t,n,r){var i,a,o,u,s={value:0},f=e.text,l=Qs("orient",e,t),c=Qs("anchor",e,t),d=l===Jm||l===Zm?-1:1,h=l===Zm||l===Km,p={group:h?"width":"height"},g={};return o={field:p,mult:{signal:Vv}},u=d<0?s:h?{field:{group:"height"}}:{field:{group:"width"}},g.enter=i={opacity:s},Hs(i,"fill",Qs("color",e,t)),Hs(i,"font",Qs("font",e,t)),Hs(i,"fontSize",Qs("fontSize",e,t)),Hs(i,"fontWeight",Qs("fontWeight",e,t)),g.exit={opacity:s},g.update=a={opacity:{value:1},text:Vs(f),anchor:Vs(c),orient:Vs(l),extent:{field:p},align:{signal:Wv}},h?(a.x=o,a.y=u,a.angle=s,a.baseline={value:l===Zm?Km:Zm}):(a.x=u,a.y=o,a.angle={value:90*d},a.baseline={value:Km}),Hs(a,"offset",Qs("offset",e,t)||0),Hs(a,"frame",Qs("frame",e,t)),Hs(a,"angle",Qs("angle",e,t)),Hs(a,"baseline",Qs("baseline",e,t)),Hs(a,"limit",Qs("limit",e,t)),Js(jv,Nv,e.style||lv,null,r,g,n)}(e,a,o,r),e.zindex&&(i.zindex=e.zindex),kf(i,t)}function Sf(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(ff(e,t))}),e.on&&e.on.forEach(function(n){wf(n,t,e.name)}),t.addDataPipeline(e.name,function(e,t,n){var r,i,a,o,u,s=[],f=null,l=!1,c=!1;for(e.values?s.push(f=Af({$ingest:e.values,$format:e.format})):e.url?s.push(f=Af({$request:e.url,$format:e.format})):e.source&&(f=r=W(e.source).map(function(e){return ls(t.getData(e).output)}),s.push(null)),i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,f||u.source||s.push(f=Af()),s.push(o),u.generates&&(c=!0),u.modifies&&!c&&(l=!0),u.source?f=o:u.changes&&(f=null);return r&&(a=r.length-1,s[0]=Lm({derive:l,pulse:a?r:r[0]}),(l||a)&&s.splice(1,0,Af())),f||s.push(Af()),s.push(Fm({})),s}(e,t,n))}function Af(e){var t=xm({},e);return t.metadata={source:!0},t}function Cf(e,t){return{scale:e.scale,range:t}}function Rf(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Tf(e,t){var n,r,i,a,o,u,s,f,l,c,d,h,p,g,m,v,y,b,_,x,w,k,M,E,O,S,A,C,R,T,z,D,N,P,$,L,q,j,F,U,I,B,W,V,H,Y,G,Z,J,Q,K,ee,te,ne,re,ie,ae,oe,ue,se,fe,le,ce,de,he,pe,ge,me,ve,ye,be,_e,xe,we,ke,Me,Ee,Oe,Se,Ae,Ce,Re,Te,ze,De,Ne,Pe,$e,Le=(s=e,l=(f=t).config,c=s.orient,d=c===Zm||c===Km?l.axisX:l.axisY,h=l["axis"+c[0].toUpperCase()+c.slice(1)],p="band"===f.scaleType(s.scale)&&l.axisBand,d||h||p?X({},l.axis,d,h,p):l.axis),qe=e.encode||{},je=qe.axis||{},Fe=je.name||void 0,Ue=je.interactive,Ie=je.style;return n={orient:e.orient,ticks:!!Qs("ticks",e,Le),labels:!!Qs("labels",e,Le),grid:!!Qs("grid",e,Le),domain:!!Qs("domain",e,Le),title:!!gs(e.title,!1)},r=ls(t.add(xm({},[n]))),je=Ys({update:{range:{signal:'abs(span(range("'+e.scale+'")))'},offset:Vs(gs(e.offset,0)),position:Vs(gs(e.position,0)),titlePadding:Vs(Qs("titlePadding",e,Le)),minExtent:Vs(Qs("minExtent",e,Le)),maxExtent:Vs(Qs("maxExtent",e,Le))}},qe.axis,gv),i=ls(t.add(bm({scale:t.scaleRef(e.scale),extra:t.property(Qs("tickExtra",e,Le)),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u=[],n.grid&&u.push((g=e,m=Le,v=qe.grid,y=i,S=g.orient,A=g.gridScale,R=(C=S===Jm||S===Zm?1:-1)*g.offset||0,(z={}).enter=b={opacity:T={value:0}},Hs(b,"stroke",Qs("gridColor",g,m)),Hs(b,"strokeWidth",Qs("gridWidth",g,m)),Hs(b,"strokeDash",Qs("gridDash",g,m)),z.exit=_={opacity:T},z.update=x={},Hs(x,"opacity",Qs("gridOpacity",g,m)),w={scale:g.scale,field:uv,band:Qs("bandPosition",g,m),round:Qs("tickRound",g,m),extra:Qs("tickExtra",g,m),offset:Qs("tickOffset",g,m)},S===Zm||S===Km?(k="x",M="y",O="height"):(k="y",M="x",O="width"),E=M+"2",x[k]=b[k]=_[k]=w,A?(b[M]={scale:A,range:0,mult:C,offset:R},x[E]=b[E]={scale:A,range:1,mult:C,offset:R}):(b[M]={value:R},x[E]=b[E]={signal:O,mult:C,offset:R}),Js(Lv,kv,null,uv,y,z,v))),n.ticks&&(a=Qs("tickSize",e,Le),u.push((D=e,N=Le,P=qe.ticks,$=i,L=a,B=D.orient,W=B===Jm||B===Zm?-1:1,(H={}).enter=q={opacity:V={value:0}},Hs(q,"stroke",Qs("tickColor",D,N)),Hs(q,"strokeWidth",Qs("tickWidth",D,N)),H.exit=j={opacity:V},H.update=F={opacity:{value:1}},(U=Vs(L)).mult=W,I={scale:D.scale,field:uv,band:Qs("bandPosition",D,N),round:Qs("tickRound",D,N),extra:Qs("tickExtra",D,N),offset:Qs("tickOffset",D,N)},B===Zm||B===Km?(F.y=q.y=V,F.y2=q.y2=U,F.x=q.x=j.x=I):(F.x=q.x=V,F.x2=q.x2=U,F.y=q.y=j.y=I),Js(Lv,Ev,null,uv,$,H,P)))),n.labels&&(a=n.ticks?a:0,u.push((Y=e,G=Le,Z=qe.labels,J=i,Q=a,ie=Y.orient,ae=ie===Jm||ie===Zm?-1:1,oe=Y.scale,ue=Qs("labelBound",Y,G),se=Qs("labelFlush",Y,G),fe=null!=se&&!1!==se&&(se=+se)===se,le=+Qs("labelFlushOffset",Y,G),ce=Qs("labelOverlap",Y,G),(he={}).enter=K={opacity:de={value:0}},Hs(K,"angle",Qs("labelAngle",Y,G)),Hs(K,"fill",Qs("labelColor",Y,G)),Hs(K,"font",Qs("labelFont",Y,G)),Hs(K,"fontSize",Qs("labelFontSize",Y,G)),Hs(K,"fontWeight",Qs("labelFontWeight",Y,G)),Hs(K,"limit",Qs("labelLimit",Y,G)),he.exit=ee={opacity:de},he.update=te={opacity:{value:1},text:{field:nv}},(ne=Vs(Q)).mult=ae,ne.offset=Vs(Qs("labelPadding",Y,G)||0),ne.offset.mult=ae,re={scale:oe,field:uv,band:.5,offset:Qs("tickOffset",Y,G)},ie===Zm||ie===Km?(te.y=K.y=ne,te.x=K.x=ee.x=re,Hs(te,"align",fe?Rf(oe,se,'"left"','"right"','"center"'):"center"),fe&&le&&Hs(te,"dx",Rf(oe,se,-le,le,0)),Hs(te,"baseline",ie===Zm?"bottom":"top")):(te.x=K.x=ne,te.y=K.y=ee.y=re,Hs(te,"align",ie===Qm?"left":"right"),Hs(te,"baseline",fe?Rf(oe,se,'"bottom"','"top"','"middle"'):"middle"),fe&&le&&Hs(te,"dy",Rf(oe,se,le,-le,0))),Y=Js(jv,Mv,sv,uv,J,he,Z),(ce||ue)&&(Y.overlap={method:ce,order:"datum.index",bound:ue?{scale:oe,orient:ie,tolerance:+ue}:null}),Y))),n.domain&&u.push((pe=e,ge=Le,me=qe.domain,ve=r,ke=pe.orient,(Ee={}).enter=ye={opacity:Me={value:0}},Hs(ye,"stroke",Qs("domainColor",pe,ge)),Hs(ye,"strokeWidth",Qs("domainWidth",pe,ge)),Ee.exit={opacity:Me},Ee.update=be={opacity:{value:1}},ke===Zm||ke===Km?(_e="x",we="y"):(_e="y",we="x"),xe=_e+"2",ye[we]=Me,be[_e]=ye[_e]=Cf(pe,0),be[xe]=ye[xe]=Cf(pe,1),Js(Lv,wv,null,null,ve,Ee,me))),n.title&&u.push((Oe=e,Se=Le,Ae=qe.title,Ce=r,De=Oe.orient,Ne=De===Jm||De===Zm?-1:1,Pe=De===Zm||De===Km,($e={}).enter=Re={opacity:{value:0}},Hs(Re,"align",Qs("titleAlign",Oe,Se)),Hs(Re,"fill",Qs("titleColor",Oe,Se)),Hs(Re,"font",Qs("titleFont",Oe,Se)),Hs(Re,"fontSize",Qs("titleFontSize",Oe,Se)),Hs(Re,"fontWeight",Qs("titleFontWeight",Oe,Se)),Hs(Re,"limit",Qs("titleLimit",Oe,Se)),$e.exit={opacity:{value:0}},$e.update=Te={opacity:{value:1},text:Vs(Oe.title)},ze={scale:Oe.scale,range:.5},Pe?(Te.x=ze,Te.angle={value:0},Te.baseline={value:De===Zm?"bottom":"top"}):(Te.y=ze,Te.angle={value:90*Ne},Te.baseline={value:"bottom"}),Hs(Te,"angle",Qs("titleAngle",Oe,Se)),Hs(Te,"baseline",Qs("titleBaseline",Oe,Se)),!Hs(Te,"x",Qs("titleX",Oe,Se))&&Pe&&!Zs("x",Ae)&&($e.enter.auto={value:!0}),!Hs(Te,"y",Qs("titleY",Oe,Se))&&!Pe&&!Zs("y",Ae)&&($e.enter.auto={value:!0}),Js(jv,Ov,fv,null,Ce,$e,Ae))),o=af(xv,Ie,Fe,r,Ue,je,u),e.zindex&&(o.zindex=e.zindex),kf(o,t)}function zf(e,t,n){var r=W(e.signals),i=W(e.scales);return n||r.forEach(function(e){Ho(e,t)}),W(e.projections).forEach(function(e){!function(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=Ps(e[r],r,t));t.addProjection(e.name,n)}(e,t)}),i.forEach(function(e){var n,r,i;r=t,i=(n=e).type||"linear",Hm.hasOwnProperty(i)||k("Unrecognized scale type: "+S(i)),r.addScale(n.name,{type:i,domain:void 0})}),W(e.data).forEach(function(e){Sf(e,t)}),i.forEach(function(e){Rs(e,t)}),r.forEach(function(e){!function(e,t){var n=t.getSignal(e.name);if(e.update){var r=os(e.update,t);n.update=r.$expr,n.params=r.$params}e.on&&e.on.forEach(function(e){Es(e,t,n.id)})}(e,t)}),W(e.axes).forEach(function(e){Tf(e,t)}),W(e.marks).forEach(function(e){kf(e,t)}),W(e.legends).forEach(function(e){Mf(e,t)}),e.title&&Of(e.title,t),t.parseLambdas(),t}function Df(e,t){var n,r,i,a,o,u,s,f,l,c,d=t.config;return t.background=e.background||d.background,t.eventConfig=d.events,o=ls(t.root=t.add(fs())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",(u=e.padding,s=d,E(u=u||s.padding)?{top:Wo(u.top),bottom:Wo(u.bottom),left:Wo(u.left),right:Wo(u.right)}:{top:f=Wo(u),bottom:f,left:f,right:f})),t.addSignal("autosize",(l=e.autosize,c=d,E(l=l||c.autosize)?l:{type:l=l||"pad"})),W(e.signals).forEach(function(e){Hv[e.name]||Ho(e,t)}),r=t.add(xm()),i=Ys({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(Mm(Gs(i,Pv,bv,e.style,t,{pulse:ls(r)}))),a=t.add(Im({layout:t.objectProperty(e.layout),legendMargin:d.legendMargin,autosize:t.signalRef("autosize"),mark:o,pulse:ls(i)})),t.operators.pop(),t.pushState(ls(i),ls(a),null),zf(e,t,!0),t.operators.push(a),n=t.add(_m({mark:o,pulse:ls(a)})),n=t.add(qm({pulse:ls(n)})),n=t.add(Fm({pulse:ls(n)})),t.addData("root",new yf(t,r,r,n)),t}function Nf(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Pf(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function $f(e){return(al(e)?function(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(0<r?",":"")+(E(t)?t.signal||$f(t):S(t));return n+"]"}:function(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(1<++i?",":"")+S(t)+":"+(E(n)?n.signal||$f(n):S(n));return r+"}"})(e)}function Lf(e){var t={padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:Jv},area:{fill:Jv},image:null,line:{stroke:Jv,strokeWidth:Zv},path:{stroke:Jv},rect:{fill:Jv},rule:{stroke:Qv},shape:{stroke:Jv},symbol:{fill:Jv,size:64},text:{fill:Qv,font:Gv,fontSize:11},style:{"guide-label":{fill:Qv,font:Gv,fontSize:10},"guide-title":{fill:Qv,font:Gv,fontSize:11,fontWeight:"bold"},"group-title":{fill:Qv,font:Gv,fontSize:13,fontWeight:"bold"},point:{size:Xv,strokeWidth:Zv,shape:"circle"},circle:{size:Xv,strokeWidth:Zv},square:{size:Xv,strokeWidth:Zv,shape:"square"},cell:{fill:"transparent",stroke:ey}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:Kv,grid:!1,gridWidth:1,gridColor:ey,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:Kv,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:ey,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:Kv,titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}};return(e||[]).forEach(function(e){var n,r,i;if(e)for(n in e)if("style"===n)for(n in i=t.style||(t.style={}),e.style)i[n]=X(i[n]||{},e.style[n]);else r=e[n],t[n]=E(r)&&!al(r)?X(E(t[n])?t[n]:{},r):r}),t}function qf(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function jf(e,t){return qf(["event"],e,t)}function Ff(e,t,n){var r,i;for(r in n=n||{},e)(i=e[r])&&i.$expr&&i.$params&&Ff(i.$params,t,n),n[r]=al(i)?i.map(function(e){return Uf(e,t)}):Uf(i,t);return n}function Uf(e,t){if(!e||!E(e))return e;for(var n,r=0,i=ty.length;r<i;++r)if(n=ty[r],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function If(e){return(e+"").toLowerCase()}function Bf(e,t){"operator"!==If(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?qf(["_"],e.update,t):null)}function Wf(e,t){var n=E(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,o=void 0;r||k("Source not defined: "+e.source),i=e.target&&e.target.$expr?jf(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(o=Ff(a.$params,t)),a=qf(["_","event"],a.$expr,t)),t.update(e,r,i,a,o)}function Vf(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){Bf(e,t)}),n.forEach(function(e){var n,r,i,a;r=t,(n=e).params&&((i=r.get(n.id))||k("Invalid operator id: "+n.id),a=Ff(n.params,r),r.dataflow.connect(i,i.parameters(a)))}),(e.streams||[]).forEach(function(e){var n,r,i,a,o;r=t,a=null!=(n=e).filter?jf(n.filter,r):void 0,o=null!=n.stream?r.get(n.stream):void 0,n.source?o=r.events(n.source,n.type,a):n.merge&&(o=(i=n.merge.map(r.get.bind(r)))[0].merge.apply(i[0],i.slice(1))),n.between&&(i=n.between.map(r.get.bind(r)),o=o.between(i[0],i[1])),n.filter&&(o=o.filter(a)),null!=n.throttle&&(o=o.throttle(+n.throttle)),null!=n.debounce&&(o=o.debounce(+n.debounce)),null==o&&k("Invalid stream definition: "+JSON.stringify(n)),n.consume&&o.consume(!0),r.stream(n,o)}),(e.updates||[]).forEach(function(e){Wf(e,t)}),t.resolve()}function Hf(e,t,n){return new Yf(e,t,n)}function Yf(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Gf(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function Xf(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===ay?r.left+r.right:0)}function Zf(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===ay?r.top+r.bottom:0)}function Jf(e,t){return t.modified&&al(t.input.value)&&e.indexOf("_:vega:_")}function Qf(e,t){return!("parent"===e||t instanceof Ul.proxy)}function Kf(e,t,n,r){var i,a,o=e.element();o&&o.setAttribute("title",null==(i=r)?"":al(i)?el(i):E(i)&&!ee(i)?(a=i,Object.keys(a).map(function(e){var t=a[e];return e+": "+(al(t)?el(t):tl(t))}).join("\n")):i+"")}function el(e){return"["+e.map(tl).join(", ")+"]"}function tl(e){return al(e)?"[]":E(e)&&!ee(e)?"{}":e}function nl(e,t){var n=this;t=t||{},ut.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||oh.Canvas,n._scenegraph=new $r;var r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Kf,n._redraw=!0,n._handler=(new Yr).scene(r),n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[];var i,a,o,u,s,f=(i=n,a=e,o=t.functions,Vf(a,Hf(i,Ul,o||Hg)));n._runtime=f,n._signals=f.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:X({},e)}}),f.root&&f.root.set(r),r.source=f.data.root.input,n.pulse(f.data.root.input,n.changeset().insert(r.items)),n._background=f.background||null,n._eventConfig=(u=f.eventConfig,(s=(u=X({},u)).defaults)&&(al(s.prevent)&&(s.prevent=ce(s.prevent)),al(s.allow)&&(s.allow=ce(s.allow))),u),n._width=n.width(),n._height=n.height(),n._viewWidth=Xf(n,n._width),n._viewHeight=Zf(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){function t(){e._autosize=e._resize=1}var n=e._signals,r=n[ry],i=n[iy],a=n[ay];e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=Xf(e,n.size),t()},{size:r}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=Zf(e,n.size),t()},{size:i});var o=e.add(null,t,{pad:a});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}(n),wo(n)}function rl(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:k("Unrecognized signal name: "+S(t))}function il(e,t){var n=(e._targets||[]).filter(function(e){var n=e._update;return n&&n.handler===t});return n.length?n[0]:null}var al=Array.isArray,ol=[],ul=A("id"),sl=_(function(e){return e},ol,"identity"),fl=_(function(){return 0},ol,"zero"),ll=_(function(){return 1},ol,"one"),cl=_(function(){return!0},ol,"true"),dl=_(function(){return!1},ol,"false"),hl=0,pl=1,gl=2,ml=3,vl=4,yl={},bl=Symbol("vega_id"),_l=1,xl="_:mod:_";(Xh=Me.prototype).set=function(e,t,n,r){var i=this[e],a=this[xl];return null!=t&&0<=t?(i[t]!==n||r)&&(i[t]=n,a[t+":"+e]=-1,a[e]=-1):(i!==n||r)&&(this[e]=n,a[e]=al(n)?1+n.length:-1),this},Xh.modified=function(e,t){var n,r=this[xl];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(al(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&0<=t?t+1<r[e]||!!r[t+":"+e]:!!r[e]},Xh.clear=function(){return this[xl]={},this};var wl=0,kl=new Me,Ml=Ee.prototype;Ml.targets=function(){return this._targets||(this._targets=pe(ul))},Ml.set=function(e){return this.value!==e?(this.value=e,1):0},Ml.skip=Oe(1),Ml.modified=Oe(2),Ml.parameters=function(e,t){function n(e,n,r){r instanceof Ee?(r!==u&&(t&&r.targets().add(u),l.push(r)),f.push({op:r,name:e,index:n})):s.set(e,n,r);
}t=!1!==t;var r,i,a,o,u=this,s=u._argval=u._argval||new Me,f=u._argops=u._argops||[],l=[];for(r in e)if(i=e[r],"pulse"===r)W(i).forEach(function(e){e instanceof Ee?e!==u&&(e.targets().add(u),l.push(e)):k("Pulse parameters must be operator instances.")}),u.source=i;else if(al(i))for(s.set(r,-1,Array(a=i.length)),o=0;o<a;++o)n(r,o,i[o]);else n(r,-1,i);return this.marshall().clear(),l},Ml.marshall=function(e){var t,n,r,i,a,o=this._argval||kl,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)a=(i=(t=u[n]).op).modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);return o},Ml.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},Ml.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,(this.pulse=t)||e);var t};var El=0,Ol=Se.prototype;Ol._filter=cl,Ol._apply=sl,Ol.targets=function(){return this._targets||(this._targets=pe(ul))},Ol.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},Ol.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},Ol.filter=function(e){var t=Ae(e);return this.targets().add(t),t},Ol.apply=function(e){var t=Ae(null,e);return this.targets().add(t),t},Ol.merge=function(){var e=Ae();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},Ol.throttle=function(e){var t=-1;return this.filter(function(){var n=Date.now();return e<n-t?(t=n,1):0})},Ol.debounce=function(e){var t=Ae();return this.targets().add(Ae(null,null,G(e,function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()}))),t},Ol.between=function(e,t){var n=!1;return e.targets().add(Ae(null,null,function(){n=!0})),t.targets().add(Ae(null,null,function(){n=!1})),this.filter(function(){return n})};var Sl=/^([A-Za-z]+:)?\/\//,Al="file://",Cl={boolean:ue,integer:z,number:z,date:fe,string:le,unknown:sl},Rl=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return qe(e)&&(e=+e)==~~e},qe,function(e){return!isNaN(Date.parse(e))}],Tl=["boolean","integer","number","date"],zl={dsv:Fe,csv:je(","),tsv:je("\t"),json:Ue,topojson:function(e,t){var n,r,i;return e=Ue(e,t),n=t&&(i=t.feature)?Be:t&&(i=t.mesh)?Ye:k("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r):k("Invalid TopoJSON object: "+i))&&r.features||[r]}},Dl={skip:!0},Nl={},Pl=Qe.prototype;Pl.StopPropagation=Nl,Pl.ADD=1,Pl.REM=2,Pl.MOD=4,Pl.ADD_REM=3,Pl.ADD_MOD=5,Pl.ALL=7,Pl.REFLOW=8,Pl.SOURCE=16,Pl.NO_SOURCE=32,Pl.NO_FIELDS=64,Pl.fork=function(e){return new Qe(this.dataflow).init(this,e)},Pl.clone=function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},Pl.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length&&((e=new Qe(this.dataflow).init(this)).add=e.source),e},Pl.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},Pl.runAfter=function(e){this.dataflow.runAfter(e)},Pl.changed=function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},Pl.reflow=function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,tt(this,1))),this},Pl.modifies=function(e){var t=W(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},Pl.modified=function(e){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?al(e)?e.some(function(e){return t[e]}):t[e]:!!t)},Pl.filter=function(e,t){var n=this;return 1&e&&(n.addF=Ke(n.addF,t)),2&e&&(n.remF=Ke(n.remF,t)),4&e&&(n.modF=Ke(n.modF,t)),16&e&&(n.srcF=Ke(n.srcF,t)),n},Pl.materialize=function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=et(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=et(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=et(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},Pl.visit=function(e,t){var n,r,i=this,a=t;return 16&e?he(i.source,i.srcF,a):(1&e&&he(i.add,i.addF,a),2&e&&he(i.rem,i.remF,a),4&e&&he(i.mod,i.modF,a),8&e&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||he(n,r?tt(i,5):i.srcF,a))),i};var $l=Q(nt,Qe);$l.fork=function(e){var t=new Qe(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,function(e){return t.add.push(e)}),e&t.REM&&this.visit(t.REM,function(e){return t.rem.push(e)}),e&t.MOD&&this.visit(t.MOD,function(e){return t.mod.push(e)})),t},$l.changed=function(e){return this.changes&e},$l.modified=function(e){var t=this.fields;return t&&this.changes&this.MOD?al(e)?e.some(function(e){return t[e]}):t[e]:0},$l.filter=function(){k("MultiPulse does not support filtering.")},$l.materialize=function(){k("MultiPulse does not support materialization.")};var Ll={skip:!($l.visit=function(e,t){var n=this.pulses,r=n.length,i=0;if(e&this.SOURCE)for(;i<r;++i)n[i].visit(e,t);else for(;i<r;++i)n[i].stamp===this.stamp&&n[i].visit(e,t);return this}),force:!1},ql=it.prototype;ql.size=function(){return this.nodes.length},ql.clear=function(){return this.nodes=[],this},ql.peek=function(){return this.nodes[0]},ql.push=function(e){var t=this.nodes;return t.push(e),at(t,0,t.length-1,this.cmp)},ql.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,ot(t,0,this.cmp)):e=n,e},ql.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,ot(t,0,this.cmp),n},ql.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,ot(t,0,this.cmp)),e};var jl=ut.prototype;jl.stamp=function(){return this._clock},jl.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},jl.cleanThreshold=1e4,jl.add=function(e,t,n,r){var i,a=1;return e instanceof Ee?i=e:e&&e.prototype instanceof Ee?i=new e:V(e)?i=new Ee(null,e):(a=0,i=new Ee(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},jl.connect=function(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)},jl.rank=function(e){e.rank=++this._rank},jl.rerank=function(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;0<=--r;)i.push(t=n[r]),t===e&&k("Cycle detected in dataflow graph.")},jl.pulse=function(e,t,n){this.touch(e,n||Ll);var r=new Qe(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._pulses[e.id]=t.pulse(r,i),this},jl.touch=function(e,t){var n=t||Ll;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},jl.update=function(e,t,n){var r=n||Ll;return(e.set(t)||r.force)&&this.touch(e,r),this},jl.changeset=ke,jl.ingest=function(e,t,n){return this.pulse(e,this.changeset().insert(Xe(t,n)))},jl.request=function(e,t,n){var r,i,a,o,u=this,s=u._pending||(r=u,(o=new Promise(function(e,t){i=e,a=t})).requests=0,o.done=function(){0==--o.requests&&r.runAfter(function(){e._pending=null;try{e.run(),i(e)}catch(e){a(e)}})},r._pending=o);s.requests+=1,u.loader().load(t,{context:"dataflow"}).then(function(t){u.ingest(e,t,n)},function(e){u.error("Loading failed",t,e)}).catch(function(e){u.error("Data ingestion failed",t,e)}).then(s.done,s.done)},jl.events=function(e,t,n,r){for(var i,a=this,o=Ae(n,r),u=function(e){e.dataflow=a;try{o.receive(e)}catch(e){a.error(e)}finally{a.run()}},s=0,f=(i="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):W(e)).length;s<f;++s)i[s].addEventListener(t,u);return o},jl.on=function(e,t,n,r,i){return(e instanceof Ee?Je:Ze)(this,e,t,n,r,i),this},jl.run=function(e){var t,n,r,i,a=this,o=0,u=a.logLevel();if(a._pending)return a.info("Awaiting requests, delaying dataflow run."),0;if(a._pulse)return a.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!a._touched.length)return a.info("Dataflow invoked, but nothing to do."),0;a._pulse=new Qe(a,(++a._clock),e),ml<=u&&(r=Date.now(),a.debug("-- START PROPAGATION ("+a._clock+") -----")),a._touched.forEach(function(e){a._enqueue(e,!0)}),a._touched=pe(ul);try{for(;0<a._heap.size();)(t=a._heap.pop()).rank===t.qrank?(n=t.run(a._getPulse(t,e)),vl<=u&&a.debug(t.id,n===Nl?"STOP":n,t),n!==Nl&&(a._pulse=n,t._targets&&t._targets.forEach(function(e){a._enqueue(e)})),++o):a._enqueue(t,!0)}catch(e){i=e}if(a._pulses={},a._pulse=null,ml<=u&&(r=Date.now()-r,a.info("> Pulse "+a._clock+": "+o+" operators; "+r+"ms")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,o,i)}catch(e){a.error(e)}if(a._postrun.length){var s=a._postrun;a._postrun=[],s.sort(function(e,t){return t.priority-e.priority}).forEach(function(e){rt(a,e.callback)})}return o},jl.runAsync=function(){return this._pending||Promise.resolve(this.run())},jl.runAfter=function(e,t,n){this._pulse||t?this._postrun.push({priority:n||0,callback:e}):rt(this,e)},jl._enqueue=function(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},jl._getPulse=function(e,t){var n,r=e.source,i=this._clock;return r&&al(r)?new nt(this,i,n=r.map(function(e){return e.pulse}),t):(n=this._pulses[e.id],r&&((r=r.pulse)&&r!==Nl?r.stamp===i&&n.target!==e?n=r:n.source=r.source:n.source=[]),n)},jl.error=st("error"),jl.warn=st("warn"),jl.info=st("info"),jl.debug=st("debug"),jl.logLevel=st("level");var Fl=Q(ft,Ee);Fl.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e)!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t);var t},Fl.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},Fl.transform=function(){};var Ul={},Il={values:gt({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:gt({name:"count",set:"cell.num"}),__count__:gt({name:"count",set:"this.missing + this.valid"}),missing:gt({name:"missing",set:"this.missing"}),valid:gt({name:"valid",set:"this.valid"}),sum:gt({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:gt({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:gt({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:gt({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:gt({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:gt({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:gt({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:gt({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:gt({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:gt({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:gt({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:gt({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:gt({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:gt({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:gt({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:gt({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:gt({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:gt({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Bl=Object.keys(Il);t.random=Math.random;var Wl=St.prototype;Wl.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Wl.add=function(e){this._add.push(e)},Wl.rem=function(e){this._rem.push(e)},Wl.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),f={};for(e=0;e<u;++e)f[a(i[e])]=1;for(t=e=0;e<o;++e)f[a(n=r[e])]?f[a(n)]=0:s[t++]=n;return this._rem=[],this._add=s},Wl.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;0<=--r;)t=e(n[r])+"",i.hasOwnProperty(t)||(i[t]=1,++a);return a},Wl.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Z(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Wl.argmin=function(e){return this.extent(e)[0]||{}},Wl.argmax=function(e){return this.extent(e)[1]||{}},Wl.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):1/0},Wl.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-1/0},Wl.quartile=function(e){return this._get===e&&this._q||(this._q=wt(this.values(),e),this._get=e),this._q},Wl.q1=function(e){return this.quartile(e)[0]},Wl.q2=function(e){return this.quartile(e)[1]},Wl.q3=function(e){return this.quartile(e)[2]},Wl.ci=function(e){return this._get===e&&this._ci||(this._ci=xt(this.values(),1e3,.05,e),this._get=e),this._ci},Wl.ci0=function(e){return this.ci(e)[0]},Wl.ci1=function(e){return this.ci(e)[1]},At.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Bl},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Vl=Q(At,ft);Vl.transform=function(e,t){var n,r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),i.modifies(this._outputs),r._drop=!1!==e.drop,e.cross&&1<r._dims.length&&(r._drop=!1,this.cross()),r.changes(i)},Vl.cross=function(){function e(e){var t,n,o,u;for(t in e)for(o=e[t].tuple,n=0;n<a;++n)i[n][u=o[r[n]]]=u}var t=this,n=t.value,r=t._dnames,i=r.map(function(){return{}}),a=r.length;e(t._prev),e(n),function e(o,u,s){var f,l,c=r[s],d=i[s++];for(f in d)u[c]=d[f],l=o?o+"|"+f:f,s<a?e(l,u,s):n[l]||t.cell(l,u)}("",{},0)},Vl.init=function(e){function t(e){for(var t,r=W(w(e)),a=0,o=r.length;a<o;++a)i[t=r[a]]||(i[t]=1,n.push(t))}var n=this._inputs=[],r=this._outputs=[],i={};this._dims=W(e.groupby),this._dnames=this._dims.map(function(e){var n=x(e);return t(e),r.push(n),n}),this.cellkey=e.key?e.key:dt(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var a,o,u,s,f,l,c=e.fields||[null],d=e.ops||["count"],h=e.as||[],p=c.length,g={};for(p!==d.length&&k("Unmatched number of fields and aggregate ops."),l=0;l<p;++l)a=c[l],o=d[l],null==a&&"count"!==o&&k("Null aggregate field specified."),f=ht(o,s=x(a),h[l]),r.push(f),"count"!==o?((u=g[s])||(t(a),(u=g[s]=[]).field=a,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(pt(o,f))):this._counts.push(f);return this._measures=this._measures.map(function(e){return vt(e,e.field)}),{}},Vl.cellkey=dt(),Vl.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},Vl.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new St),n},Vl.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?xe(t.tuple,o):ye(o)},Vl.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].add(t[n].get(e),e)},Vl.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].rem(t[n].get(e),e)},Vl.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(n=0,r=(t=e.agg).length;n<r;++n)t[n].set(i);return i},Vl.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,f=e.add,l=e.rem,c=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||l.push(t.tuple);for(r=0,i=this._alen;r<i;++r)f.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(t=o[r]).num&&s?l:c).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e},Ct.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Hl=Q(Ct,ft);Hl.transform=function(e,t){var n,r=this._bins(e),i=r.start,a=r.step,o=e.as||["bin0","bin1"],u=o[0],s=o[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(w(e.field))?t.ADD_MOD:t.ADD,t.visit(n,function(e){var t=r(e);e[u]=t,e[s]=null==t?null:i+a*(1+(t-i)/a)}),t.modifies(o)},Hl._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,i=yt(e),a=i.start,o=i.stop,u=i.step;null!=(t=e.anchor)&&(n=t-(a+u*Math.floor((t-a)/u)),a+=n,o+=n);var s=function(e){var t=r(e);return null==t?null:(t=Math.max(a,Math.min(+t,o-u)),a+u*Math.floor((t-a)/u))};return s.start=a,s.stop=o,s.step=u,this.value=_(s,w(r),e.name||"bin_"+x(r))},Tt.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Q(Tt,ft).transform=function(e,t){var n=t.fork(t.ALL),r=Rt(me,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),t.source&&t.source.root&&(this.value.root=t.source.root),n},Q(zt,Ee),Nt.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Yl=Q(Nt,ft);Yl.transform=function(e,t){function n(t){return function(n){for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(u(n),e.case,a)||[],s=0,f=i.length;s<f;++s)o.test(r=i[s])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],f=n(function(e){i[e]=1+(i[e]||0)}),l=n(function(e){i[e]-=1});return r?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,l)),this._finish(t,s)},Yl._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},Yl._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],f=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=ye({}),r[u]=n,r[s]=i,f.add.push(r)):0===i?(r&&f.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,f.mod.push(r));return f.modifies(t)},Pt.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Q(Pt,ft).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1];return!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter")?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,a,o=[],u={},s=e.length,f=0;f<s;++f)for(u[t]=a=e[f],i=0;i<s;++i)u[n]=e[i],r(u)&&(o.push(ye(u)),(u={})[t]=a);return o}(r,a,o,e.filter||cl)):n.mod=r,n.source=this.value,n.modifies(i)};var Gl={kde:Mt,mixture:Et,normal:kt,uniform:Ot},Xl="distributions",Zl="function",Jl="field",Ql=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Kl={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Ql},{name:"weights",type:"number",array:!0}]};$t.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Ql.concat(Kl)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Q($t,ft).transform=function(e,t){var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var i=function e(t,n){var r=t[Zl];Gl.hasOwnProperty(r)||k("Unknown distribution function: "+r);var i=Gl[r]();for(var a in t)a===Jl?i.data((t.from||n()).map(t[a])):a===Xl?i[a](t[a].map(function(t){return e(t,n)})):typeof i[a]===Zl&&i[a](t[a]);return i}(e.distribution,(n=t,function(){return n.materialize(n.SOURCE).source})),o=e.method||"pdf";"pdf"!==o&&"cdf"!==o&&k("Invalid density method: "+o),e.extent||i.data||k("Missing density extent parameter."),o=i[o];var u=e.as||["value","density"],s=e.extent||a.extent(i.data()),f=(s[1]-s[0])/(e.steps||100),l=a.range(s[0],s[1]+f/2,f).map(function(e){var t={};return t[u[0]]=e,t[u[1]]=o(e),ye(t)});this.value&&(r.rem=this.value),this.value=r.add=r.source=l}return r},Lt.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Q(Lt,ft).transform=function(e,t){var n=this.value,r=e.field,i=n[0],a=n[1],o=t.ADD;(t.changed()||t.modified(r.fields)||e.modified("field"))&&(o=t.SOURCE,i=1/0,a=-1/0),t.visit(o,function(e){var t=r(e);null!=t&&((t=+t)<i&&(i=t),a<t&&(a=t))}),this.value=[i,a]};var ec=Q(qt,Ee);ec.connect=function(e){return this.targets().add(e),e.source=this},ec.add=function(e){this.value.add.push(e)},ec.rem=function(e){this.value.rem.push(e)},ec.mod=function(e){this.value.mod.push(e)},ec.init=function(e){this.value.init(e,e.NO_SOURCE)},ec.evaluate=function(){return this.value};var tc=Q(jt,ft);tc.activate=function(e){this._targets[this._targets.active++]=e},tc.subflow=function(e,t,n,r){var i,a,o=this.value,u=o.hasOwnProperty(e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[e])&&a.tuple,u=(i=n.dataflow).add(new qt(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=u,this.activate(u)),u},tc.transform=function(e,t){function n(e){return i.subflow(e,o,t)}var r=t.dataflow,i=this,a=e.key,o=e.subflow,u=this._keys,s=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=me(e),r=u.get(t);void 0!==r&&(u.delete(t),n(r).rem(e))}),t.visit(t.ADD,function(e){var t=a(e);u.set(me(e),t),n(t).add(e)}),s||t.modified(a.fields)?t.visit(t.MOD,function(e){var t=me(e),r=u.get(t),i=a(e);r===i?n(i).mod(e):(u.set(t,i),n(r).rem(e),n(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(u.get(me(e))).mod(e)}),s&&t.visit(t.REFLOW,function(e){var t=me(e),r=u.get(t),i=a(e);r!==i&&(u.set(t,i),n(r).rem(e),n(i).add(e))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),t},Q(Ft,Ee),It.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Q(It,ft).transform=function(e,t){function n(t){var n=me(t),r=f(t,e),a=i.get(n);r&&a?(i.delete(n),o.push(t)):r||a?l&&r&&!a&&s.push(t):(i.set(n,1),u.push(t))}var r=t.dataflow,i=this.value,a=t.fork(),o=a.add,u=a.rem,s=a.mod,f=e.expr,l=!0;return t.visit(t.REM,function(e){var t=me(e);i.has(t)?i.delete(t):u.push(e)}),t.visit(t.ADD,function(t){f(t,e)?o.push(t):i.set(me(t),1)}),t.visit(t.MOD,n),e.modified()&&(l=!1,t.visit(t.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},Wt.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},Q(Wt,ft).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=Bt(r,e.as||[]),a=i.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,o,u,s=r.map(function(t){return t(e)}),f=s.reduce(function(e,t){return Math.max(e,t.length)},0),l=0;l<f;++l){for(o=be(e),t=0;t<a;++t)o[i[t]]=null==(u=s[t][l])?null:u;n.add.push(o)}}),this.value=n.source=n.add,n.modifies(i)},Vt.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Q(Vt,ft).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(x),a=e.as||["key","value"],o=a[0],u=a[1],s=r.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,a=0;a<s;++a)(t=be(e))[o]=i[a],t[u]=r[a](e),n.add.push(t)}),this.value=n.source=n.add,n.modifies(a)},Ht.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Q(Ht,ft).transform=function(e,t){var n=e.expr,r=e.as,i=e.modified(),a=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(a,function(t){t[r]=n(t,e)})},Q(Yt,ft).transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),u=e.size-a.length,s=e.generator;if(0<u){for(n=[];0<=--u;)n.push(i=ye(s(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var nc={value:"value",median:a.median,mean:a.mean,min:a.min,max:a.max},rc=[];Gt.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Q(Gt,ft).transform=function(e,t){var n,r,i,a,o,u,s,f,l,c,d,h=t.fork(t.ALL),p=function(e){var t,n=e.method||nc.value;return null!=nc[n]?n===nc.value?(t=void 0!==e.value?e.value:0,function(){return t}):nc[n]:void k("Unrecognized imputation method: "+n)}(e),g=(d=e.field,function(e){return e?d(e):NaN}),m=x(e.field),v=x(e.key),y=(e.groupby||[]).map(x),b=function(e,t,n,r){var i,a,o,u,s,f,l,c,d=function(e){return e(c)},h=[],p=r?r.slice():[],g={},m={};for(p.forEach(function(e,t){g[e]=t+1}),u=0,l=e.length;u<l;++u)c=e[u],f=n(c),s=g[f]||(g[f]=p.push(f)),a=(i=t?t.map(d):rc)+"",(o=m[a])||(o=m[a]=[],h.push(o),o.values=i),o[s-1]=c;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),_=[],w=this.value,M=b.domain.length;for(o=0,f=b.length;o<f;++o)for(i=(n=b[o]).values,r=NaN,s=0;s<M;++s)if(null==n[s]){for(a=b.domain[s],c={_impute:!0},u=0,l=i.length;u<l;++u)c[y[u]]=i[u];c[v]=a,c[m]=isNaN(r)?r=p(n,g):r,_.push(ye(c))}return _.length&&(h.add=h.materialize(h.ADD).add.concat(_)),w.length&&(h.rem=h.materialize(h.REM).rem.concat(w)),this.value=_,h},Xt.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Bl},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var ic=Q(Xt,At);ic.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(n=r.value=r.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),r.changes(),t.visit(t.SOURCE,function(e){X(e,n[r.cellkey(e)].tuple)}),t.reflow(i).modifies(this._outputs)},ic.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},Q(Zt,Ee),Qt.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Q(Qt,ft).transform=function(e,t){var n,r,i=t,a=e.as,o=e.fields,u=e.index,s=e.values,f=null==e.default?null:e.default,l=e.modified(),c=l?t.SOURCE:t.ADD,d=o.length;return s?(r=s.length,1<d&&!a&&k('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==d*r&&k('The "as" parameter has too few output field names.'),a=a||s.map(x),n=function(e){for(var t,n,i=0,l=0;i<d;++i)if(null==(n=u.get(o[i](e))))for(t=0;t<r;++t,++l)e[a[l]]=f;else for(t=0;t<r;++t,++l)e[a[l]]=s[t](n)}):(a||k("Missing output field names."),n=function(e){for(var t,n=0;n<d;++n)t=u.get(o[n](e)),e[a[n]]=null==t?f:t}),l?i=t.reflow(!0):c|=o.some(function(e){return t.modified(e.fields)})?t.MOD:0,t.visit(c,n),i.modifies(a)},Q(Kt,Ee),Q(tn,Ee),Q(rn,ft),rn.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},an.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Bl,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var ac=Q(an,At);ac._transform=ac.transform,ac.transform=function(e,t){return this._transform((r=t,i=(n=e).field,a=n.value,o=("count"===n.op?"__count__":n.op)||"sum",u=w(i).concat(w(a)),f=i,l=n.limit||0,d={},h=[],(c=r).visit(c.SOURCE,function(e){var t=f(e);d[t]||(d[t]=1,h.push(t))}),h.sort(function(e,t){return(e<t||null==e)&&null!=t?-1:(t<e||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0)}),s=l?h.slice(0,l):h,{key:n.key,groupby:n.groupby,ops:s.map(function(){return o}),fields:s.map(function(e){return n=i,r=a,_(function(e){return n(e)===t?r(e):NaN},u,(t=e)+"");var t,n,r}),as:s.map(function(e){return e+""}),modified:n.modified.bind(n)}),t);var n,r,i,a,o,u,s,f,l,c,d,h},Q(on,jt).transform=function(e,t){var n=this,r=e.subflow,i=e.field;
return(e.modified("field")||i&&t.modified(w(i)))&&k("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.mod(e)}):a.mod(e)}),t.visit(t.ADD,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.add(ye(e))}):a.add(e)}),t.visit(t.REM,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.rem(e)}):a.rem(e)}),t},un.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Q(un,ft).transform=function(e,t){var n,r,i=e.fields,a=Bt(e.fields,e.as||[]),o=i?function(e,t){return function(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}(e,t,i,a)}:_e;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=me(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=o(e,ye({}));r[me(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(o(e,r[me(e)]))}),n},Q(sn,ft).transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},Q(fn,ft).transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=me(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=be(e);r[me(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(_e(e,r[me(e)]))})),n},ln.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Q(ln,ft).transform=function(e,n){function r(e){var n,r;u.length<o?u.push(e):(r=~~((s+1)*t.random()))<u.length&&f<=r&&(n=u[r],l[me(n)]&&i.rem.push(n),u[r]=e),++s}var i=n.fork(n.NO_SOURCE),a=e.modified("size"),o=e.size,u=this.value,s=this.count,f=0,l=u.reduce(function(e,t){return e[me(t)]=1,e},{});if(n.rem.length&&(n.visit(n.REM,function(e){var t=me(e);l[t]&&(l[t]=-1,i.rem.push(e)),--s}),u=u.filter(function(e){return-1!==l[me(e)]})),(n.rem.length||a)&&u.length<o&&n.source&&(f=s=u.length,n.visit(n.SOURCE,function(e){l[me(e)]||r(e)}),f=-1),a&&u.length>o){for(var c=0,d=u.length-o;c<d;++c)l[me(u[c])]=-1,i.rem.push(u[c]);u=u.slice(d)}return n.mod.length&&n.visit(n.MOD,function(e){l[me(e)]&&i.mod.push(e)}),n.add.length&&n.visit(n.ADD,r),(n.add.length||f<0)&&(i.add=u.filter(function(e){return!l[me(e)]})),this.count=s,this.value=i.source=u,i},cn.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]},Q(cn,ft).transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=a.range(e.start,e.stop,e.step||1).map(ye),n.add=t.add.concat(this.value),n}},Q(dn,ft).transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},Q(hn,ft).transform=function(e,t){function n(e){a.set(i(e),e)}var r=t.dataflow,i=e.field,a=this.value,o=!0;return e.modified("field")||t.modified(i.fields)?(a.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){a.delete(i(e))}),t.visit(t.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),t.fork()},Q(pn,ft).transform=function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var oc={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=oc.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){0<(t=+t)||k("ntile num must be greater than zero.");var n=oc.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return 0<=r?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return 0<(t=+t)||k("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},uc=Object.keys(oc),sc=gn.prototype;sc.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},sc.update=function(e,t){var n,r=this.cell,i=this.windows,a=e.data,o=i&&i.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(a[n]);for(n=e.p1;n<e.i1;++n)r.add(a[n]);r.set(t)}for(n=0;n<o;++n)i[n].update(e,t)},mn.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:uc.concat(Bl)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var fc=Q(mn,ft);fc.transform=function(e,t){function n(e){return a.group(s(e))}var r,i,a=this,o=a.state,u=e.modified();this.stamp=t.stamp,o&&!u||(o=a.state=new gn(e));var s=dt(e.groupby);for(u||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,function(e){n(e).add(e)})):(t.visit(t.REM,function(e){n(e).remove(e)}),t.visit(t.ADD,function(e){n(e).add(e)})),r=0,i=a._mlen;r<i;++r)vn(a._mods[r],o,e);return a._mlen=0,a._mods=[],t.reflow(u).modifies(o.outputs)},fc.group=function(e){var t=this,n=t.value[e];return n||((n=t.value[e]=Rt(me)).stamp=-1),n.stamp<t.stamp&&(n.stamp=t.stamp,t._mods[t._mlen++]=n),n};var lc=Object.freeze({aggregate:At,bin:Ct,collect:Tt,compare:zt,countpattern:Nt,cross:Pt,density:$t,extent:Lt,facet:jt,field:Ft,filter:It,flatten:Wt,fold:Vt,formula:Ht,generate:Yt,impute:Gt,joinaggregate:Xt,key:Zt,lookup:Qt,multiextent:Kt,multivalues:tn,params:rn,pivot:an,prefacet:on,project:un,proxy:sn,relay:fn,sample:ln,sequence:cn,sieve:dn,subflow:qt,tupleindex:hn,values:pn,window:mn}),cc="top",dc="left",hc="right",pc="bottom",gc="top-left",mc="top-right",vc="bottom-left",yc="bottom-right",bc="start",_c="end",xc="group",wc="axis",kc="legend",Mc="row-header",Ec="row-footer",Oc="row-title",Sc="column-header",Ac="column-footer",Cc="column-title",Rc="padding",Tc="symbol",zc="fit",Dc="fit-x",Nc="fit-y",Pc="pad",$c="none",Lc="all",qc="column",jc="row",Fc=_n.prototype;Fc.clone=function(){return new _n(this)},Fc.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Fc.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Fc.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},Fc.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},Fc.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},Fc.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Fc.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},Fc.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,u=this.x1,s=this.x2,f=this.y1,l=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*l+a,i*u+r*l+o).add(r*s-i*f+a,i*s+r*f+o).add(r*s-i*l+a,i*s+r*l+o)},Fc.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},Fc.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},Fc.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},Fc.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},Fc.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},Fc.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},Fc.width=function(){return this.x2-this.x1},Fc.height=function(){return this.y2-this.y1};var Uc,Ic=0;Q(kn,wn),["canvas","canvas-prebuilt"].some(function(e){try{"function"!=typeof(Uc=n(17)(e))&&(Uc=null)}catch(e){Uc=null}return Uc});var Bc=On.prototype;Bc.pending=function(){return this._pending},Bc.sanitizeURL=function(e){var t=this;return Sn(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return An(t),e}).catch(function(){return An(t),null})},Bc.loadImage=function(e){var t=this,n=En();return Sn(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){An(t),i.loaded=!0},i.onerror=function(){An(t),i.loaded=!1},i.src=r,i}).catch(function(e){return An(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}})},Bc.ready=function(){var e=this;return new Promise(function(t){!function n(r){e.pending()?setTimeout(function(){n(!0)},10):t(r)}(!1)})};var Wc,Vc={basis:{curve:o.curveBasis},"basis-closed":{curve:o.curveBasisClosed},"basis-open":{curve:o.curveBasisOpen},bundle:{curve:o.curveBundle,tension:"beta",value:.85},cardinal:{curve:o.curveCardinal,tension:"tension",value:0},"cardinal-open":{curve:o.curveCardinalOpen,tension:"tension",value:0},"cardinal-closed":{curve:o.curveCardinalClosed,tension:"tension",value:0},"catmull-rom":{curve:o.curveCatmullRom,tension:"alpha",value:.5},"catmull-rom-closed":{curve:o.curveCatmullRomClosed,tension:"alpha",value:.5},"catmull-rom-open":{curve:o.curveCatmullRomOpen,tension:"alpha",value:.5},linear:{curve:o.curveLinear},"linear-closed":{curve:o.curveLinearClosed},monotone:{horizontal:o.curveMonotoneY,vertical:o.curveMonotoneX},natural:{curve:o.curveNatural},step:{curve:o.curveStep},"step-after":{curve:o.curveStepAfter},"step-before":{curve:o.curveStepBefore}},Hc={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Yc=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],Gc={},Xc={},Zc=[].join,Jc=["l",0,0,0,0,0,0,0],Qc=2*Math.PI,Kc=Math.sqrt(3)/2,ed={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Qc)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Kc*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Kc*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Kc*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Kc*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}}},td={},nd=Math.PI,rd=o.arc().startAngle(function(e){return e.startAngle||0}).endAngle(function(e){return e.endAngle||0}).padAngle(function(e){return e.padAngle||0}).innerRadius(function(e){return e.innerRadius||0}).outerRadius(function(e){return e.outerRadius||0}).cornerRadius(Vn),id=o.area().x(Bn).y1(Wn).y0(function(e){return(e.y||0)+(e.height||0)}).defined(Hn),ad=o.area().y(Wn).x1(Bn).x0(function(e){return(e.x||0)+(e.width||0)}).defined(Hn),od=o.line().x(Bn).y(Wn).defined(Hn),ud=Un().x(Bn).y(Wn).width(function(e){return e.width||0}).height(function(e){return e.height||0}).cornerRadius(Vn),sd=o.symbol().type(function(e){return Pn(e.shape||"circle")}).size(function(e){return null==e.size?64:e.size}),fd=In().x(Bn).y(Wn).defined(Hn).size(function(e){return e.size||1}),ld=2*Math.PI,cd=ld/4,dd=ld-1e-8;Xn.beginPath=Zn,Xn.closePath=Zn,Xn.moveTo=Jn,Xn.lineTo=Jn,Xn.rect=function(e,t,n,r){Jn(e,t),Jn(e+n,t+r)},Xn.quadraticCurveTo=function(e,t,n,r){Jn(e,t),Jn(n,r)},Xn.bezierCurveTo=function(e,t,n,r,i,a){Jn(e,t),Jn(n,r),Jn(i,a)},Xn.arc=function(e,t,n,r,i,a){function o(e){f=n*Math.cos(e),l=n*Math.sin(e),f<c&&(c=f),d<f&&(d=f),l<h&&(h=l),p<l&&(p=l)}if(Math.abs(i-r)>dd)return Jn(e-n,t-n),void Jn(e+n,t+n);var u,s,f,l,c=1/0,d=-1/0,h=1/0,p=-1/0;if(o(r),o(i),i!==r)if((r%=ld)<0&&(r+=ld),(i%=ld)<0&&(i+=ld),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=ld,u=r-r%cd,s=0;s<4&&i<u;++s,u-=cd)o(u);else for(u=r-r%cd+cd,s=0;s<4&&u<i;++s,u+=cd)o(u);Jn(e+c,t+h),Jn(e+d,t+p)};var hd,pd,gd=[],md=function(){return!0},vd=dr("arc",function(e,t){return rd.context(e)(t)}),yd=hr("area",function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?ad:id).curve(Cn(r,n.orient,n.tension)).context(e)(t)},function(e,t){var n="horizontal"===e[0].orient?t[1]:t[0],r="horizontal"===e[0].orient?"y":"x",i=0,a=e.length;if(1===a)return e[0];for(;i<a;){var o=i+a>>>1;e[o][r]<n?i=o+1:a=o}return i=Math.max(0,i-1),a=Math.min(e.length-1,a),n-e[i][r]<e[a][r]-n?e[i]:e[a]}),bd=1,_d=.5,xd=sr(gr),wd={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",cr(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&Gn(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;rr(t,function(t){var i,a=t.x||0,o=t.y||0,u=t.width||0,s=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&0<(i=null==t.opacity?1:t.opacity)&&(gr(e,t),t.fill&&Kn(e,t,i)&&e.fill(),t.stroke&&er(e,t,i)&&e.stroke()),t.clip&&(e.beginPath(),e.rect(0,0,u,s),e.clip()),n&&n.translate(-a,-o),rr(t,function(t){r.draw(e,t,n)}),n&&n.translate(a,o),e.restore()})},pick:function(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,u=n*e.pixelRatio,s=r*e.pixelRatio;return ir(t,function(f){var l,c,d,h;if(!(h=f.bounds)||h.contains(i,a))return c=f.x||0,d=f.y||0,e.save(),e.translate(c,d),c=i-c,d=a-d,!(l=ir(f,function(e){return i=c,a=d,(!1!==(t=e).interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(i,a)?o.pick(e,n,r,c,d):null;var t,i,a}))&&!1!==t.interactive&&(f.fill||f.stroke)&&xd(e,f,u,s)&&(l=f),e.restore(),l||null})},background:function(e,t){var n=t.stroke?_d:0;e("class","background"),e("d",Yn(null,t,n,n))},foreground:function(e,t,n){e("clip-path",t.clip?pr(n,t,t):null)}},kd={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=mr(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,u=(null!=t.height?t.height:r.height)||0,s=!1===t.aspect?"none":"xMidYMid";i-=vr(t.align,o),a-=yr(t.baseline,u),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",lr(i,a)),e("width",o),e("height",u),e("preserveAspectRatio",s)},bound:function(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=vr(t.align,a),i-=yr(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function(e,t,n){var r=this;rr(t,function(t){if(!n||n.intersects(t.bounds)){var i,a,o,u,s=mr(t,r),f=t.x||0,l=t.y||0,c=(null!=t.width?t.width:s.width)||0,d=(null!=t.height?t.height:s.height)||0;f-=vr(t.align,c),l-=yr(t.baseline,d),!1!==t.aspect&&(a=s.width/s.height,o=t.width/t.height,a==a&&o==o&&a!==o&&(o<a?(l+=(d-(u=c/a))/2,d=u):(f+=(c-(u=d*a))/2,c=u))),s.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(s,f,l,c,d))}})},pick:ur(),get:mr,xOffset:vr,yOffset:yr},Md=hr("line",function(e,t){var n=t[0],r=n.interpolate||"linear";return od.curve(Cn(r,n.orient,n.tension)).context(e)(t)},function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),a=e.length;0<=--a;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null}),Ed={type:"path",tag:"path",nested:!1,attr:function(e,t){e("transform",cr(t)),e("d",t.path)},bound:function(e,t){return br(Xn(e),t)?e.set(0,0,0,0):Gn(e,t)},draw:ar(br),pick:fr(br)},Od={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Yn(null,t))},bound:function(e,t){var n,r;return Gn(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:ar(_r),pick:fr(_r)},Sd={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",cr(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return Gn(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){rr(t,function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&xr(e,t,r)&&e.stroke()}})},pick:ur(function(e,t,n,r){return!!e.isPointInStroke&&xr(e,t,1)&&e.isPointInStroke(n,r)})},Ad=dr("shape",function(e,t){return(t.mark.shape||t.shape).context(e)(t)}),Cd=dr("symbol",function(e,t){return sd.context(e)(t)}),Rd={height:Or,measureWidth:Mr,estimateWidth:wr,width:wr,canvas:Sr};Sr(!0);var Td={left:"start",center:"middle",right:"end"},zd=new _n,Dd={arc:vd,area:yd,group:wd,image:kd,line:Md,path:Ed,rect:Od,rule:Sd,shape:Ad,symbol:Cd,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+Rr(t),a=t.x||0,o=t.y||0,u=t.angle||0,s=t.radius||0;s&&(n=(t.theta||0)-Math.PI/2,a+=s*Math.cos(n),o+=s*Math.sin(n)),e("text-anchor",Td[t.align]||"start"),u?(n=lr(a,o)+" rotate("+u+")",(r||i)&&(n+=" "+lr(r,i))):n=lr(a+r,o+i),e("transform",n)},bound:Tr,draw:function(e,t,n){rr(t,function(t){var r,i,a,o,u,s;n&&!n.intersects(t.bounds)||(s=Ar(t))&&0!==(r=null==t.opacity?1:t.opacity)&&(e.font=Cr(t),e.textAlign=t.align||"left",i=t.x||0,a=t.y||0,(o=t.radius)&&(u=(t.theta||0)-Math.PI/2,i+=o*Math.cos(u),a+=o*Math.sin(u)),t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*Math.PI/180),i=a=0),i+=t.dx||0,a+=(t.dy||0)+Rr(t),t.fill&&Kn(e,t,r)&&e.fillText(s,i,a),t.stroke&&er(e,t,r)&&e.strokeText(s,i,a),t.angle&&e.restore())})},pick:ur(function(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Tr(zd,t,!0),u=-t.angle*Math.PI/180,s=Math.cos(u),f=Math.sin(u),l=t.x,c=t.y,d=s*i-f*a+(l-l*s+c*f),h=f*i+s*a+(c-l*f-c*s);return o.contains(d,h)})},trail:hr("trail",function(e,t){return fd.context(e)(t)},function(e,t){for(var n,r,i=e.length;0<=--i;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null})},Nd={mark:null},Pd=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],$d=$r.prototype;$d.toJSON=function(e){return Nr(this.root,e||0)},$d.mark=function(e,t,n){var r=Lr(e,t=t||this.root.items[0]);return(t.items[n]=r).zindex&&(r.group.zdirty=!0),r};var Ld=Wr.prototype;Ld.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},Ld.element=function(){return this._el},Ld.canvas=function(){return this._el&&this._el.firstChild},Ld.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},Ld.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},Ld.on=function(){},Ld.off=function(){},Ld._handlerIndex=function(e,t,n){for(var r=e?e.length:0;0<=--r;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},Ld.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},Ld.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},Ld.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then(function(t){var n=new MouseEvent(e.type,e),r=qr(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)}).catch(function(){})},Ld.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=Dd[o.marktype]).tip){for((a=Br(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},Ld.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,u=i.width(),s=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:u,height:s,left:a,top:o,right:a+u,bottom:o+s}}};var qd=Hr.prototype;qd.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},qd.element=function(){return this._el},qd.canvas=function(){return this._el&&this._el.firstChild},qd.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},qd.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},qd.dirty=function(){},qd.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},qd._render=function(){},qd.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},qd._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return r},qd.sanitizeURL=function(e){return this._load("sanitizeURL",e)},qd.loadImage=function(e){return this._load("loadImage",e)};var jd="mousemove",Fd="mouseout",Ud="click",Id=Q(Yr,Wr);Id.initialize=function(e,t,n){var r=this._canvas=e&&jr(e,"canvas");if(r){var i=this;this.events.forEach(function(e){r.addEventListener(e,function(t){Id[e]?Id[e].call(i,t):i.fire(e,t)})})}return Wr.prototype.initialize.call(this,e,t,n)},Id.canvas=function(){return this._canvas},Id.context=function(){return this._canvas.getContext("2d")},Id.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],Id.DOMMouseScroll=function(e){this.fire("mousewheel",e)},Id.mousemove=Gr("mousemove","mouseover","mouseout"),Id.dragover=Gr("dragover","dragenter","dragleave"),Id.mouseout=Xr("mouseout"),Id.dragleave=Xr("dragleave"),Id.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},Id.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},Id.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},Id.touchmove=function(e){this.fire("touchmove",e,!0)},Id.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},Id.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if((t.vegaType=e)===Ud&&a&&a.href?this.handleHref(t,a,a.href):e!==jd&&e!==Fd||this.handleTooltip(t,a,e!==Fd),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},Id.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},Id.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return 0<=i&&r.splice(i,1),this},Id.pickEvent=function(e){var t=Br(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},Id.pick=function(e,t,n,r,i){var a=this.context();return Dd[e.marktype].pick.call(this,a,e,t,n,r,i)};var Bd="undefined"!=typeof window&&window.devicePixelRatio||1,Wd=Q(Zr,Hr),Vd=Hr.prototype,Hd=new _n;Wd.initialize=function(e,t,n,r,i){return this._canvas=Mn(1,1),e&&(Ur(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Vd.initialize.call(this,e,t,n,r,i)},Wd.resize=function(e,t,n,r){var i,a,o,u,s,f,l,c;return Vd.resize.call(this,e,t,n,r),i=this._canvas,a=this._width,o=this._height,u=this._origin,s=this._scale,f="undefined"!=typeof HTMLElement&&i instanceof HTMLElement&&null!=i.parentNode,l=i.getContext("2d"),c=f?Bd:s,i.width=a*c,i.height=o*c,f&&1!==c&&(i.style.width=a+"px",i.style.height=o+"px"),l.pixelRatio=c,l.setTransform(c,0,0,c,c*u[0],c*u[1]),this._redraw=!0,this},Wd.canvas=function(){return this._canvas},Wd.context=function(){return this._canvas?this._canvas.getContext("2d"):null},Wd.dirty=function(e){var t=function(e,t){if(null==t)return e;for(var n=Hd.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},Wd._render=function(e){var t,n,r,i=this.context(),a=this._origin,o=this._width,u=this._height,s=this._dirty;return i.save(),this._redraw||s.empty()?(this._redraw=!1,s=null):(t=i,r=a,(n=s).expand(1).round(),n.translate(-r[0]%1,-r[1]%1),t.beginPath(),t.rect(n.x1,n.y1,n.width(),n.height()),t.clip(),s=n),this.clear(-a[0],-a[1],o,u),this.draw(i,e,s),i.restore(),this._dirty.clear(),this},Wd.draw=function(e,t,n){var r=Dd[t.marktype];t.clip&&function(e,t){var n=t.clip;if(e.save(),e.beginPath(),V(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},Wd.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var Yd=Q(Jr,Wr);Yd.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(Ud,this._hrefHandler),r.removeEventListener(jd,this._tooltipHandler),r.removeEventListener(Fd,this._tooltipHandler)),this._svg=r=e&&jr(e,"svg"),r&&(r.addEventListener(Ud,this._hrefHandler),r.addEventListener(jd,this._tooltipHandler),r.addEventListener(Fd,this._tooltipHandler)),Wr.prototype.initialize.call(this,e,t,n)},Yd.canvas=function(){return this._svg},Yd.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:Qr(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},Yd.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return 0<=i&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var Gd={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Xd={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Zd=Object.keys(Xd),Jd=Gd.xmlns,Qd=Q(ti,Hr),Kd=Hr.prototype;Qd.initialize=function(e,t,n,r){return e&&(this._svg=Fr(e,0,"svg",Jd),this._svg.setAttribute("class","marks"),Ur(e,1),this._root=Fr(this._svg,0,"g",Jd),Ur(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Kd.initialize.call(this,e,t,n,r)},Qd.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Kd.background.apply(this,arguments)},Qd.resize=function(e,t,n,r){return Kd.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Qd.canvas=function(){return this._svg},Qd.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in Gd)e[t]=Gd[t];var n=this._bgcolor?Kr("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+ei("rect"):"";return Kr("svg",e)+n+this._svg.innerHTML+ei("svg")},Qd._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),Ur(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Qd.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=Fr(t,0,"defs",Jd)),ni(r,n.gradient[e],i++);for(e in n.clipping)r||(n.el=r=Fr(t,0,"defs",Jd)),ri(r,n.clipping[e],i++);r&&(0===i?(t.removeChild(r),n.el=null):Ur(r,i))},Qd._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},Qd.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},Qd.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},Qd._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=e.length;a<o;++a)(n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=Dd[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,ii(t,s),n.items.forEach(function(e){e.dirty=s})),n.zdirty||(t.exit?(i.nested&&n.items.length?(u=n.items[0])._svg&&this._update(i,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=i.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,ii(t,s)),t._update=s));return!this._dirtyAll},Qd.draw=function(e,t,n){function r(e){var t=a.isDirty(e),n=ai(e,i,l,u.tag,o);t&&(a._update(u,n,e),f&&function(e,t,n){t=t.lastChild;var r,i=0;rr(n,function(n){r=e.draw(t,n,r),++i}),Ur(t,1+i)}(a,n,e)),l=n,++c}if(!this.isDirty(t))return t._svg;var i,a=this,o=this._svg,u=Dd[t.marktype],s=!1===t.interactive?"none":null,f="g"===u.tag,l=null,c=0;return(i=ai(t,e,n,"g",o)).setAttribute("class",Ir(t)),f||i.style.setProperty("pointer-events",s),t.clip?i.setAttribute("clip-path",pr(a,t,t.group)):i.removeAttribute("clip-path"),u.nested?t.items.length&&r(t.items[0]):rr(t,r),Ur(i,c),i};var eh=null,th=null,nh={group:function(e,t,n){th=t.__values__,eh=t.childNodes[1],e.foreground(oi,n,this),eh=t.childNodes[0],e.background(oi,n,this);var r=!1===n.mark.interactive?"none":null;r!==th.events&&(eh.style.setProperty("pointer-events",r),th.events=r)},text:function(e,t,n){var r=Ar(n);r!==th.text&&(t.textContent=r,th.text=r),(r=Cr(n))!==th.font&&(t.style.setProperty("font",r),th.font=r)}};Qd._update=function(e,t,n){th=(eh=t).__values__,e.attr(oi,n,this);var r=nh[e.type];r&&r.call(this,e,t,n),this.style(eh,n)},Qd.style=function(e,t){var n,r,i,a,o,u;if(null!=t)for(n=0,r=Zd.length;n<r;++n)(o=t[i=Zd[n]])!==th[i]&&(a=Xd[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+(u=void 0,"undefined"==typeof window?"":(u=window.location).hash?u.href.slice(0,-u.hash.length):u.href)+"#"+o.id+")"),e.style.setProperty(a,o+"")),th[i]=o)};var rh,ih=Q(ui,Hr),ah=Hr.prototype;ih.resize=function(e,t,n,r){ah.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in Gd)o[u]=Gd[u];a.head=Kr("svg",o);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),a.bg=s?Kr("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+ei("rect"):"",a.root=Kr("g",{transform:"translate("+i+")"}),a.foot=ei("g")+ei("svg"),this},ih.background=function(){var e=ah.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},ih.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot;
},ih._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},ih.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(r=(n=i.gradient[t]).stops,a+=Kr("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=Kr("stop",{offset:r[e].offset,"stop-color":r[e].color})+ei("stop");a+=ei("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=Kr("clipPath",{id:t}),a+=n.path?Kr("path",{d:n.path})+ei("path"):Kr("rect",{x:0,y:0,width:n.width,height:n.height})+ei("rect"),a+=ei("clipPath");return 0<a.length?Kr("defs")+a+ei("defs"):""},ih.attributes=function(e,t){return rh={},e(si,t,this),rh},ih.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then(function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e})}return null},ih.mark=function(e){function t(t){var s=r.href(t);s&&(u+=Kr("a",s)),n="g"!==a?fi(t,e,a,o):null,u+=Kr(a,r.attributes(i.attr,t),n),"text"===a?u+=Ar(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===a&&(u+=Kr("path",r.attributes(i.background,t),fi(t,e,"bgrect",o))+ei("path"),u+=Kr("g",r.attributes(i.foreground,t))+r.markGroup(t)+ei("g")),u+=ei(a),s&&(u+=ei("a"))}var n,r=this,i=Dd[e.marktype],a=i.tag,o=this._defs,u="";return"g"!==a&&!1===e.interactive&&(n='style="pointer-events: none;"'),u+=Kr("g",{class:Ir(e),"clip-path":e.clip?pr(r,e,e.group):null},n),i.nested?e.items&&e.items.length&&t(e.items[0]):rr(e,t),u+ei("g")},ih.markGroup=function(e){var t=this,n="";return rr(e,function(e){n+=t.mark(e)}),n};var oh={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},uh={};uh.canvas=uh.png={renderer:Zr,headless:Zr,handler:Yr},uh.svg={renderer:ti,headless:ui,handler:Jr},uh.none={};var sh=new _n,fh=1e-9;Q(pi,ft).transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=Dd[a],u=o.bound,s=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),s=gi(i,u),i.items.forEach(function(e){e.bounds.clear().union(s)})):a===xc||e.modified()?(t.visit(t.MOD,function(e){r.dirty(e)}),s.clear(),i.items.forEach(function(e){s.union(gi(e,u))}),i.role===kc&&t.reflow()):(n=t.changed(t.REM),t.visit(t.ADD,function(e){s.union(gi(e,u))}),t.visit(t.MOD,function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(gi(e,u))}),n&&(s.clear(),i.items.forEach(function(e){s.union(e.bounds)}))),ci(i),t.modifies("bounds")};var lh=":vega_identifier:";mi.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Q(mi,ft).transform=function(e,t){var n=function(e){var t=e._signals[lh];return t||(e._signals[lh]=t=e.add(0)),t}(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++r)}),n.set(this.value=r),t},Q(vi,ft).transform=function(e,t){var n,r,i,a=this.value;a||((a=t.dataflow.scenegraph().mark(e.markdef,(r=(n=e).groups,i=n.parent,r&&1===r.size?r.get(Object.keys(r.object)[0]):r&&i?r.lookup(i):null),e.index)).group.context=e.context,e.context.group||(e.context.group=a.group),a.source=this,a.clip=e.clip,a.interactive=e.interactive,this.value=a);var o=a.marktype===xc?kn:wn;return t.visit(t.ADD,function(e){o.call(e,a)}),(e.modified("clip")||e.modified("interactive"))&&(a.clip=e.clip,a.interactive=!!e.interactive,a.zdirty=!0,t.reflow()),a.items=t.source,t};var ch=Q(yi,ft),dh={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&bi(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};ch.transform=function(e,t){var n=dh[e.method]||dh.parity,r=t.materialize(t.SOURCE).source;if(r){e.sort&&(r=r.slice().sort(e.sort)),"greedy"===e.method&&(r=r.filter(xi)),r.forEach(function(e){e.opacity=1});var i,a,o,u,s,f=r;if(3<=f.length&&_i(f)){for(t=t.reflow(e.modified()).modifies("opacity");3<=(f=n(f)).length&&_i(f););f.length<3&&!T(r).opacity&&(1<f.length&&(T(f).opacity=0),T(r).opacity=1)}if(e.boundScale){var l=(i=e.boundScale,a=e.boundOrient,o=e.boundTolerance,u=i.range(),s=new _n,a===cc||a===pc?s.set(u[0],-1/0,u[1],1/0):s.set(-1/0,u[0],1/0,u[1]),s.expand(o||1),function(e){return s.encloses(e.bounds)});r.forEach(function(e){l(e)||(e.opacity=0)})}return t}},Q(wi,ft).transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var hh=.5,ph=new _n;Q(Di,ft).transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&Ri(n,t,e.layout),function(e,t,n){var r,i,a,o,u,s,f=t.items,l=Math.max(0,t.width||0),c=Math.max(0,t.height||0),d=(new _n).set(0,0,l,c),h=d.clone(),p=d.clone(),g=[];for(u=0,s=f.length;u<s;++u)switch((i=f[u]).role){case wc:m=i.items[0].datum.orient,(o=m===dc||m===hc?h:p).union(Pi(e,i,l,c));break;case"title":r=i;break;case kc:g.push(i);break;case"frame":case"scope":case Mc:case Ec:case Oc:case Sc:case Ac:case Cc:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}var m;if(g.length)for(a={leftWidth:(y=e,b=g,b.reduce(function(e,t){var n=t.items[0];if(function(e,t,n){var r=t.padding-n.x,i=t.padding-n.y;if(t.datum.title){var a=t.items[1].items[0];i+=t.titlePadding+a.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),e.dirty(n))}(y,n,n.items[0].items[0]),n.datum.orient===dc){var r=ph.clear();n.items.forEach(function(e){r.union(e.bounds)}),e=Math.max(e,Math.round(r.width())+2*n.padding-1)}return e},0)),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},u=0,s=g.length;u<s;++u)if(o=Li(e,g[u],a,h,p,l,c),n.autosize&&n.autosize.type===zc){var v=g[u].items[0].datum.orient;v===dc||v===hc?d.add(o.x1,0).add(o.x2,0):v!==cc&&v!==pc||d.add(0,o.y1).add(0,o.y2)}else d.union(o);var y,b;d.union(h).union(p),r&&d.union(function(e,t,n,r,i){var a,o=t.items[0],u=o.orient,s=o.frame,f=o.anchor,l=o.offset,c=o.bounds,d=0,h=u===dc||u===hc?r:n,p=0,g=0;switch(s!==xc?u===dc?(d=i.y2,h=i.y1):u===hc?(d=i.y1,h=i.y2):(d=i.x1,h=i.x2):u===dc&&(d=r,h=0),a=f===bc?d:f===_c?h:(d+h)/2,ph.clear().union(c),u){case cc:p=a,g=i.y1-l;break;case dc:p=i.x1-l,g=a;break;case hc:p=i.x2+l,g=a;break;case pc:p=a,g=i.y2+l;break;default:p=o.x,g=o.y}return c.translate(p-o.x,g-o.y),Ni(o,"x",p)|Ni(o,"y",g)&&(o.bounds=ph,e.dirty(o),o.bounds=c,e.dirty(o)),t.bounds.clear().union(c)}(e,r,l,c,d)),!function(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,u=e._height,s=e.padding();if(!(e._autosize<1)&&a){var f=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,Math.ceil(n.x2-f)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===Rc&&(o-=s.left+s.right,u-=s.top+s.bottom),a===$c?(h=l=0,f=o,d=u):a===zc?(f=Math.max(0,o-l-c),d=Math.max(0,u-h-p)):a===Dc?(f=Math.max(0,o-l-c),u=d+h+p):a===Nc?(o=f+l+c,d=Math.max(0,u-h-p)):a===Pc&&(o=f+l+c,u=d+h+p),e._resizeView(o,u,f,d,[l,h],i.resize)}}(e,t,d,n)}(n,t,e)}),e.modified()&&t.reflow(),t};var gh=Object.freeze({bound:pi,identifier:mi,mark:vi,overlap:yi,render:wi,viewlayout:Di}),mh="log",vh="pow",yh="sqrt",bh="band",_h="point",xh="linear",wh="ordinal",kh="quantile",Mh="quantize",Eh="threshold",Oh="bin-ordinal",Sh="sequential",Ah=Array.prototype.map,Ch=Array.prototype.slice,Rh={identity:s.scaleIdentity,linear:s.scaleLinear,log:s.scaleLog,ordinal:s.scaleOrdinal,pow:s.scalePow,sqrt:s.scaleSqrt,quantile:s.scaleQuantile,quantize:s.scaleQuantize,threshold:s.scaleThreshold,time:s.scaleTime,utc:s.scaleUtc,band:ji,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(ji().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=T(e)-a}function r(e){var n=(e-a)/o;return t(u?Math.max(0,Math.min(1,n)):n)}var i=s.scaleLinear(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return n(e)}var n=s.scaleLinear(),r=[];return t.domain=function(e){return arguments.length?(r=Fi(e),n.domain([r[0],T(r)]),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(e){return n.invert(e)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(e,t){return!(t%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(a.bisect(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=Fi(e),t):n.slice()},t.range=function(e){return arguments.length?(r=Ch.call(e),t):r.slice()},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var Th in Rh)Ui(Th,Rh[Th]);var zh=Ii("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Dh=Ii("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Nh=Ii("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Ph=Ii("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),$h=Ii("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),Lh=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(Ii),qh={blueorange:Lh},jh={category10:f.schemeCategory10,accent:f.schemeAccent,dark2:f.schemeDark2,paired:f.schemePaired,pastel1:f.schemePastel1,pastel2:f.schemePastel2,set1:f.schemeSet1,set2:f.schemeSet2,set3:f.schemeSet3,category20:zh,category20b:Dh,category20c:Nh,tableau10:Ph,tableau20:$h,viridis:f.interpolateViridis,magma:f.interpolateMagma,inferno:f.interpolateInferno,plasma:f.interpolatePlasma,rainbow:f.interpolateRainbow,sinebow:f.interpolateSinebow,blueorange:l.interpolateRgbBasis(T(Lh))};Bi("blues","Blues"),Bi("greens","Greens"),Bi("greys","Greys"),Bi("purples","Purples"),Bi("reds","Reds"),Bi("oranges","Oranges"),Bi("brownbluegreen","BrBG"),Bi("purplegreen","PRGn"),Bi("pinkyellowgreen","PiYG"),Bi("purpleorange","PuOr"),Bi("redblue","RdBu"),Bi("redgrey","RdGy"),Bi("redyellowblue","RdYlBu"),Bi("redyellowgreen","RdYlGn"),Bi("spectral","Spectral"),Bi("bluegreen","BuGn"),Bi("bluepurple","BuPu"),Bi("greenblue","GnBu"),Bi("orangered","OrRd"),Bi("purplebluegreen","PuBuGn"),Bi("purpleblue","PuBu"),Bi("purplered","PuRd"),Bi("redpurple","RdPu"),Bi("yellowgreenblue","YlGnBu"),Bi("yellowgreen","YlGn"),Bi("yelloworangebrown","YlOrBr"),Bi("yelloworangered","YlOrRd");var Fh={millisecond:c.timeMillisecond,second:c.timeSecond,minute:c.timeMinute,hour:c.timeHour,day:c.timeDay,week:c.timeWeek,month:c.timeMonth,year:c.timeYear},Uh={millisecond:c.utcMillisecond,second:c.utcSecond,minute:c.utcMinute,hour:c.utcHour,day:c.utcDay,week:c.utcWeek,month:c.utcMonth,year:c.utcYear};Q(ta,ft).transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=null==e.count?e.values?e.values.length:10:Ji(i,e.count),o=e.format||ea(i,a,e.formatSpecifier),u=e.values?Qi(i,e.values,a):Ki(i,a);return r&&(n.rem=r),r=u.map(function(e,t){return ye({index:t/(u.length-1),value:e,label:o(e)})}),e.extra&&r.push(ye({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},Q(na,ft).transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||ra,a=e.key||me,o=this.value;return al(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(a))&&k("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=J().test(ia),o.lookup=function(e){return o.get(a(e))}),t.visit(t.ADD,function(e){var t=a(e),n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(o.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=a(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))}),t.visit(t.REM,function(e){var t=a(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r},Q(aa,ft).transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,i=t.encode;if(al(i)){if(!n.changed()&&!i.every(function(e){return r[e]}))return t.StopPropagation;i=i[0],n.encode=null}var a="enter"===i,o=r.update||dl,u=r.enter||dl,s=r.exit||dl,f=(i&&!a?r[i]:o)||dl;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(t){u(t,e),o(t,e),f!==dl&&f!==o&&f(t,e)}),n.modifies(u.output),n.modifies(o.output),f!==dl&&f!==o&&n.modifies(f.output)),t.changed(t.REM)&&s!==dl&&(t.visit(t.REM,function(t){s(t,e)}),n.modifies(s.output)),a||f!==dl){var l=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(l,function(t){var r=u(t,e);(f(t,e)||r)&&n.mod.push(t)}),n.mod.length&&n.modifies(u.output)):t.visit(l,function(t){f(t,e)&&n.mod.push(t)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation};var Ih="symbol",Bh={};Bh[kh]=function(e){var t=[-1/0].concat(e.quantiles());return t.max=1/0,t},Bh[Mh]=function(e){var t=e.domain(),n=t[0],r=T(t),i=e.range().length,a=new Array(i),o=0;for(a[0]=-1/0;++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=1/0,a},Bh[Eh]=function(e){var t=[-1/0].concat(e.domain());return t.max=1/0,t},Bh["bin-linear"]=Bh[Oh]=function(e){var t=e.domain();return t.max=t.pop(),t},Q(sa,ft).transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o,u,s,f=t.fork(t.NO_SOURCE|t.NO_FIELDS),l=this.value,c=e.type||Ih,d=e.scale,h=null==e.count?5:Ji(d,e.count),p=e.format||ea(d,h,e.formatSpecifier),g=e.values||(u=h,(s=Bh[(o=d).type])?s(o):Ki(o,u));return p=oa(d,p,c),l&&(f.rem=l),c===Ih?(V(i=e.size)?(e.values||0!==d(g[0])||(g=g.slice(1)),a=g.reduce(function(t,n){return Math.max(t,i(n,e))},0)):i=Y(a=i||8),l=g.map(function(t,n){return ye({index:n,label:p(t,n,g),value:t,offset:a,size:i(t,e)})})):"gradient"===c?(n=e.values?d.domain():g,r=Hi(d,n[0],T(n)),l=g.map(function(e,t){return ye({index:t,label:p(e,t,g),value:e,perc:r(e)})})):(i=g.length-1,r=function(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+T(t),a=i-r;if(e.type===Eh){var o=n?a/n:.1;a=(i+=o)-(r-=o)}return function(e){return(e-r)/a}}(d),l=g.map(function(e,t){return ye({index:t,label:p(e,t,g),value:e,perc:t?r(e):0,perc2:t===i?1:r(g[t+1])})})),f.source=l,f.add=l,this.value=l,f};var Wh=J({line:pa,"line-radial":function(e,t,n,r){return pa(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:ga,"arc-radial":function(e,t,n,r){return ga(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:ma,"curve-radial":function(e,t,n,r){return ma(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:e<n;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*i+","+t*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}});ha.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]},Q(ha,ft).transform=function(e,t){var n=e.sourceX||fa,r=e.sourceY||la,i=e.targetX||ca,a=e.targetY||da,o=e.as||"path",u=e.orient||"vertical",s=e.shape||"line",f=Wh.get(s+"-"+u)||Wh.get(s);return f||k("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[o]=f(n(e),r(e),i(e),a(e))}),t.reflow(e.modified()).modifies(o)},va.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Q(va,ft).transform=function(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],u=o[0],s=o[1],f=e.field||ll,l=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,d=t.source,h=d.map(f),p=h.length,g=l,m=(c-l)/a.sum(h),v=a.range(p);for(e.sort&&v.sort(function(e,t){return h[e]-h[t]}),n=0;n<p;++n)i=h[v[n]],(r=d[v[n]])[u]=g,r[s]=g+=i*m;return this.value=h,t.reflow(e.modified()).modifies(o)};var Vh=5,Hh=ce([xh,vh,yh]),Yh=ce([xh,mh,vh,yh,"time","utc"]),Gh=ce(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);Q(ya,ft).transform=function(e,t){var n,r=t.dataflow,i=this.value;for(n in i&&!e.modified("type")||(this.value=i=Ui((e.type||xh).toLowerCase())()),e)if(!Gh[n]){if("padding"===n&&Yh[i.type])continue;V(i[n])?i[n](e[n]):r.warn("Unsupported scale property: "+n)}return function(e,t,n){var r=t.round||!1,i=t.range;if(null!=t.rangeStep)i=function(e,t,n){e!==bh&&e!==_h&&k("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===_h?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*qi(n,i,r)]}(e.type,t,n);else if(t.scheme){if(V(i=function(e,t,n){var r,i=t.scheme.toLowerCase(),a=Wi(i),o=t.schemeExtent;return a||k("Unrecognized scheme name: "+t.scheme),n=e===Eh?n+1:e===Oh?n-1:e===kh||e===Mh?+t.schemeCount||Vh:n,e===Sh?ba(a,o,t.reverse):!o&&(r=Wi(i+"-"+n))?r:V(a)?function(e,t){for(var n=new Array(t),r=t+2,i=0;i<t;)n[i]=e(++i/r);return n}(ba(a,o),n):e===wh?a:a.slice(0,n)}(e.type,t,n)))return e.interpolator(i)}else if(i&&e.type===Sh)return e.interpolator(l.interpolateRgbBasis(_a(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate(Gi(t.interpolate,t.interpolateGamma)):V(e.round)?e.round(r):V(e.rangeRound)&&e.interpolate(r?l.interpolateRound:l.interpolate),i&&e.range(_a(i,t.reverse))}(i,e,function(e,t,n){var r,i,a=(r=e,i=t.domainRaw,i?(r.domain(i),i.length):-1);if(-1<a)return a;var o,u,s=t.domain,f=e.type,l=t.zero||void 0===t.zero&&Hh[f];if(!s)return 0;Yh[f]&&t.padding&&s[0]!==T(s)&&(c=f,d=s,h=t.range,p=t.padding,g=t.exponent,m=Math.abs(T(h)-h[0]),v=m/(m-2*p),y=c===mh?I(d,null,v):c===yh?B(d,null,v,.5):c===vh?B(d,null,v,g):U(d,null,v),(d=d.slice())[0]=y[0],d[d.length-1]=y[1],s=d);var c,d,h,p,g,m,v,y;return(l||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(o=(s=s.slice()).length-1||1,l&&(0<s[0]&&(s[0]=0),s[o]<0&&(s[o]=0)),null!=t.domainMin&&(s[0]=t.domainMin),null!=t.domainMax&&(s[o]=t.domainMax),null!=t.domainMid&&(((u=t.domainMid)<s[0]||u>s[o])&&n.warn("Scale domainMid exceeds domain min or max.",u),s.splice(o,0,u))),e.domain(s),f===wh&&e.unknown(void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&Ji(e,t.nice)||null),s.length}(i,e,r)),t.fork(t.NO_SOURCE|t.NO_FIELDS)},Q(xa,ft).transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};var Xh;wa.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]},(Xh=Q(wa,ft)).transform=function(e,t){var n,r,i,a,o=e.as||["y0","y1"],u=o[0],s=o[1],f=e.field||ll,l="center"===e.offset?ka:"normalize"===e.offset?Ma:Ea;for(r=0,i=(n=function(e,t,n,r){var i,a,o,u,s,f,l,c,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)s=e[a],f=t.map(p),(l=i[f])||(i[f]=l=[],h.push(l)),l.push(s);for(d=f=0,u=h.length;f<u;++f){for(l=h[f],c=a=0,o=l.length;a<o;++a)c+=Math.abs(r(l[a]));l.sum=c,d<c&&(d=c),n&&l.sort(n)}return h.max=d,h}(t.source,e.groupby,e.sort,f)).length,a=n.max;r<i;++r)l(n[r],a,f,u,s);return t.reflow(e.modified()).modifies(o)};var Zh=Object.freeze({axisticks:ta,datajoin:na,encode:aa,legendentries:sa,linkpath:ha,pie:va,scale:ya,sortitems:xa,stack:wa,validTicks:Qi}),Jh=Array.prototype.slice,Qh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Kh=["size","smooth"],ep=["x","y","size","cellSize","bandwidth"];$a.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]},Q($a,ft).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i,o,u=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=e.count||10;return e.values?(n=Ta(),r=Kh,i=e.values):(n=function(){function e(e){var n=new Float32Array(p*g),r=new Float32Array(p*g);e.forEach(function(e,t,r){var i=u(e,t,r)+h>>d,a=s(e,t,r)+h>>d;0<=i&&i<p&&0<=a&&a<g&&++n[i+a*p]}),za({width:p,height:g,data:n},{width:p,height:g,data:r},c>>d),Da({width:p,height:g,data:r},{width:p,height:g,data:n},c>>d),za({width:p,height:g,data:n},{width:p,height:g,data:r},c>>d),Da({width:p,height:g,data:r},{width:p,height:g,data:n},c>>d),za({width:p,height:g,data:n},{width:p,height:g,data:r},c>>d),Da({width:p,height:g,data:r},{width:p,height:g,data:n},c>>d);var i=m(n);if(!Array.isArray(i)){var o=a.max(n);i=a.tickStep(0,o,i),(i=a.range(0,Math.floor(o/i)*i,i)).shift()}return Ta().thresholds(i).size([p,g])(n).map(t)}function t(e){return e.value*=Math.pow(2,-2*d),e.coordinates.forEach(n),e}function n(e){e.forEach(r)}function r(e){e.forEach(i)}function i(e){e[0]=e[0]*Math.pow(2,d)-h,e[1]=e[1]*Math.pow(2,d)-h}function o(){return p=f+2*(h=3*c)>>d,g=l+2*h>>d,e}var u=Na,s=Pa,f=960,l=500,c=20,d=2,h=3*c,p=f+2*h>>d,g=l+2*h>>d,m=Sa(20);return e.x=function(t){return arguments.length?(u="function"==typeof t?t:Sa(+t),e):u},e.y=function(t){return arguments.length?(s="function"==typeof t?t:Sa(+t),e):s},e.size=function(e){if(!arguments.length)return[f,l];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(0<=t||0<=t))throw new Error("invalid size");return f=t,l=n,o()},e.cellSize=function(e){if(!arguments.length)return 1<<d;if(!(1<=(e=+e)))throw new Error("invalid cell size");return d=Math.floor(Math.log(e)/Math.LN2),o()},e.thresholds=function(t){return arguments.length?(m="function"==typeof t?t:Sa(Array.isArray(t)?Jh.call(t):t),e):m},e.bandwidth=function(e){if(!arguments.length)return Math.sqrt(c*(c+1));if(!(0<=(e=+e)))throw new Error("invalid bandwidth");return c=Math.round((Math.sqrt(4*e*e+1)-1)/2),o()},e}(),r=ep,i=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?s:(o=s,function(e){for(var t=a.extent(e),n=t[0],r=t[1]-n,i=[],u=1;u<=o;++u)i.push(n+r*u/(o+1));return i}))),r.forEach(function(t){null!=e[t]&&n[t](e[t])}),this.value&&(u.rem=this.value),i=i&&i.length?n(i).map(ye):[],this.value=u.source=u.add=i,u};var tp="FeatureCollection";La.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Q(La,ft).transform=function(e,t){var n,r=this._features,i=this._points,a=e.fields,o=a&&a[0],u=a&&a[1],s=e.geojson,f=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(w(s))||o&&t.modified(w(o))||u&&t.modified(w(u)),this.value&&!n||(f=t.SOURCE,this._features=r=[],this._points=i=[]),s&&t.visit(f,function(e){r.push(s(e))}),o&&u&&(t.visit(f,function(e){var t=o(e),n=u(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])}),r=r.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:tp,features:r}};var np=h.geoPath(),rp=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],ip={albers:h.geoAlbers,albersusa:h.geoAlbersUsa,azimuthalequalarea:h.geoAzimuthalEqualArea,azimuthalequidistant:h.geoAzimuthalEquidistant,conicconformal:h.geoConicConformal,conicequalarea:h.geoConicEqualArea,conicequidistant:h.geoConicEquidistant,equirectangular:h.geoEquirectangular,gnomonic:h.geoGnomonic,identity:h.geoIdentity,mercator:h.geoMercator,orthographic:h.geoOrthographic,stereographic:h.geoStereographic,transversemercator:h.geoTransverseMercator};for(var ap in ip)qa(ap,ip[ap]);Fa.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Q(Fa,ft).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||sl,a=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=ja(e.projection),n.materialize().reflow()):o=i===sl||t.modified(i.fields)?n.ADD_MOD:n.ADD;var u=function(e,t){var n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}(r,e.pointRadius);return n.visit(o,function(e){e[a]=r(i(e))}),r.pointRadius(u),n.modifies(a)},Ua.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Q(Ua,ft).transform=function(e,t){function n(e){var t=i([a(e),o(e)]);t?(e[s]=t[0],e[f]=t[1]):(e[s]=void 0,e[f]=void 0)}var r,i=e.projection,a=e.fields[0],o=e.fields[1],u=e.as||["x","y"],s=u[0],f=u[1];return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(r=t.modified(a.fields)||t.modified(o.fields),t.visit(r?t.ADD_MOD:t.ADD,n)),t.modifies(u)},Ia.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Q(Ia,ft).transform=function(e,t){var n,r,i,a,o=t.fork(t.ALL),u=this.value,s=e.field||A("datum"),f=e.as||"shape",l=o.ADD_MOD;return u&&!e.modified()||(this.value=(n=ja(e.projection),r=s,i=e.pointRadius,(a=null==i?function(e){return n(r(e))}:function(e){var t=n.pointRadius(),a=n.pointRadius(i)(r(e));return n.pointRadius(t),a}).context=function(e){return n.context(e),a},u=a),o.materialize().reflow(),l=o.SOURCE),o.visit(l,function(e){e[f]=u}),o.modifies(f)},Ba.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Q(Ba,ft).transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)V(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(xe(r[0],n)):t.add.push(ye(n)),r[0]=n,t},Q(Wa,ft).transform=function(e,t){var n,r,i,a,o=this.value;return!o||e.modified("type")?(this.value=o=function(e){var t=qa((e||"mercator").toLowerCase());return t||k("Unrecognized projection type: "+e),t()}(e.type),rp.forEach(function(t){null!=e[t]&&Va(o,t,e[t])})):rp.forEach(function(t){e.modified(t)&&Va(o,t,e[t])}),null!=e.pointRadius&&o.path.pointRadius(e.pointRadius),e.fit&&(n=o,a=(r=e).fit,i=1===(a=W(a)).length?a[0]:{type:tp,features:a.reduce(function(e,t){return t&&t.type===tp?e.push.apply(e,t.features):al(t)?e.push.apply(e,t):e.push(t),e},[])},r.extent?n.fitExtent(r.extent,i):r.size&&n.fitSize(r.size,i)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var op=Object.freeze({contour:$a,geojson:La,geopath:Fa,geopoint:Ua,geoshape:Ia,graticule:Ba,projection:Wa}),up={center:p.forceCenter,collide:p.forceCollide,nbody:p.forceManyBody,link:p.forceLink,x:p.forceX,y:p.forceY},sp="forces",fp=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],lp=["static","iterations"],cp=["x","y","vx","vy"];Ha.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:cp}]};var dp=Q(Ha,ft);dp.transform=function(e,t){var n,r,i,a,o,u,s,f,l=this.value,c=t.changed(t.ADD_REM),d=e.modified(fp),h=e.iterations||300;if(l?(c&&(t.modifies("index"),l.nodes(t.source)),(d||t.changed(t.MOD))&&Ya(l,e,0,t)):(this.value=(i=t.source,a=e,o=p.forceSimulation(i),u=!1,s=o.stop,f=o.restart,o.stopped=function(){return u},o.restart=function(){return u=!1,f()},o.stop=function(){return u=!0,s()},l=Ya(o,a,!0).on("end",function(){u=!0})),l.on("tick",(n=t.dataflow,r=this,function(){n.touch(r).run()})),e.static||(c=!0,l.tick()),t.modifies("index")),d||c||e.modified(lp)||t.changed()&&e.restart)if(l.alpha(Math.max(l.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(l.alphaMin(),1/h)),e.static)for(l.stop();0<=--h;)l.tick();else if(l.stopped()&&l.restart(),!c)return t.StopPropagation;return this.finish(e,t)},dp.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===sp&&"link"===n.op._argval.force)for(var u,s=n.op._argops,f=0,l=s.length;f<l;++f)if("links"===s[f].name&&(u=s[f].op.source)){
r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(cp)};var hp=Object.freeze({force:Ha});Qa.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},Q(Qa,ft).transform=function(e,t){t.source||k("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each(function(e){e.children&&ge(e.data)&&i.rem.push(e.data)}),this.value=a=m.hierarchy({values:W(e.keys).reduce(function(e,t){return e.key(t),e},g.nest()).entries(i.source)},Ka),n&&a.each(function(e){e.children&&(e=ye(e.data),i.add.push(e),i.source.push(e))}),Ja(a,me,me)),i.source.root=a,i},Q(eo,ft).transform=function(e,t){t.source&&t.source.root||k(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),function(e,t,n){for(var r,i=0,a=t.length;i<a;++i)(r=t[i])in n&&e[r](n[r])}(n,this.params,e);try{this.value=n(i)}catch(e){k(e)}return i.each(function(e){!function(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,a)}),t.reflow(e.modified()).modifies(a).modifies("leaf")};var pp=["x","y","r","depth","children"];to.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:pp}]};var gp=Q(to,eo);gp.layout=m.pack,gp.params=["size","padding"],gp.fields=pp;var mp=["x0","y0","x1","y1","depth","children"];no.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:mp}]};var vp=Q(no,eo);vp.layout=m.partition,vp.params=["size","round","padding"],vp.fields=mp,ro.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Q(ro,ft).transform=function(e,t){t.source||k("Stratify transform requires an upstream data source.");var n=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),i=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),i&&(this.value=Ja(m.stratify().id(e.key).parentId(e.parentKey)(r.source),e.key,cl)),r.source.root=this.value,r};var yp={tidy:m.tree,cluster:m.cluster},bp=["x","y","depth","children"];io.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:bp}]};var _p=Q(io,eo);_p.layout=function(e){var t=e||"tidy";return yp.hasOwnProperty(t)?yp[t]():void k("Unrecognized Tree layout method: "+t)},_p.params=["size","nodeSize","separation"],_p.fields=bp,ao.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Q(ao,ft).transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||k("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,function(e){a[me(e)]=1}),r.each(function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[me(t)]&&a[me(n)]&&i.add.push(ye({source:n,target:t}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,function(e){a[me(e)]=1}),n.forEach(function(e){(a[me(e.source)]||a[me(e.target)])&&i.mod.push(e)})),i};var xp={binary:m.treemapBinary,dice:m.treemapDice,slice:m.treemapSlice,slicedice:m.treemapSliceDice,squarify:m.treemapSquarify,resquarify:m.treemapResquarify},wp=["x0","y0","x1","y1","depth","children"];oo.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:wp}]};var kp=Q(oo,eo);kp.layout=function(){var e=m.treemap();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){xp.hasOwnProperty(t)?e.tile(xp[t]):k("Unrecognized Treemap layout method: "+t)},e},kp.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],kp.fields=wp;var Mp=Object.freeze({nest:Qa,pack:to,partition:no,stratify:ro,tree:io,treelinks:ao,treemap:oo});uo.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var Ep=Q(uo,ft),Op=[[-1e5,-1e5],[1e5,1e5]];Ep.transform=function(e,t){var n,r,i,a,o=e.as||"path",u=t.source;for(n=v.voronoi().x(e.x).y(e.y),e.size?n.size(e.size):n.extent(e.extent||Op),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return t.reflow(e.modified()).modifies(o)};var Sp=Object.freeze({voronoi:uo}),Ap=Math.PI/180,Cp=64,Rp=2048,Tp={archimedean:ho,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},zp=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Dp=["text","font","rotate","fontSize","fontStyle","fontWeight"];go.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:zp}]},Q(go,ft).transform=function(e,n){var r=e.modified();if(r||n.changed(n.ADD_REM)||Dp.some(function(t){var r=e[t];return V(r)&&n.modified(r.fields)})){var i,a=n.materialize(n.SOURCE).source,o=this.value,u=e.as||zp,s=e.fontSize||14;if(V(s)?i=e.fontSizeRange:s=Y(s),i){var f=s,l=Ui("sqrt")().domain(function(e,t){for(var n,r=1/0,i=-1/0,a=0,o=t.length;a<o;++a)(n=e(t[a]))<r&&(r=n),i<n&&(i=n);return[r,i]}(f,a)).range(i);s=function(e){return l(f(e))}}a.forEach(function(e){e[u[0]]=NaN,e[u[1]]=NaN,e[u[3]]=0});for(var c,d,h=o.words(a).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(t.random).layout(),p=o.size(),g=p[0]>>1,m=p[1]>>1,v=0,y=h.length;v<y;++v)(d=(c=h[v]).datum)[u[0]]=c.x+g,d[u[1]]=c.y+m,d[u[2]]=c.font,d[u[3]]=c.size,d[u[4]]=c.style,d[u[5]]=c.weight,d[u[6]]=c.rotate;return n.reflow(r).modifies(u)}};var Np=Object.freeze({wordcloud:go});_o.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var Pp=Q(_o,ft);Pp.transform=function(e,t){return this._dims?e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)})?this.reinit(e,t):this.eval(e,t):this.init(e,t)},Pp.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},u=this._dims=[],s=a.length,f=0;f<s;++f)r=o[n=i[f].fname]||(o[n]=bo()),u.push(yo(r,f,a[f]));return this.eval(e,t)},Pp.reinit=function(e,t){var n,r,i,a,o,u,s,f,l,c=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,g=this._dims,m=this.value,v=m.curr(),y=m.prev(),b=m.all(),_=c.rem=c.add,x=c.mod,w=h.length,k={};if(y.set(v),t.rem.length&&(o=this.remove(e,t,c)),t.add.length&&m.add(t.add),t.mod.length)for(u={},s=0,f=(a=t.mod).length;s<f;++s)u[a[s]._index]=1;for(s=0;s<w;++s)l=d[s],(!g[s]||e.modified("fields",s)||t.modified(l.fields))&&((n=k[i=l.fname])||(p[i]=r=bo(),k[i]=n=r.insert(l,t.source,0)),g[s]=yo(r,s,h[s]).onAdd(n,v));for(s=0,f=m.data().length;s<f;++s)o[s]||(y[s]!==v[s]?_.push(s):u[s]&&v[s]!==b&&x.push(s));return m.mask=(1<<w)-1,c},Pp.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},Pp.insert=function(e,t,n){var r,i,a,o=t.add,u=this.value,s=this._dims,f=this._indices,l=e.fields,c={},d=n.add,h=u.size(),p=h+o.length,g=s.length;u.resize(p,g),u.add(o);var m=u.curr(),v=u.prev(),y=u.all();for(r=0;r<g;++r)a=c[i=l[r].fname]||(c[i]=f[i].insert(l[r],o,h)),s[r].onAdd(a,m);for(;h<p;++h)v[h]=y,m[h]!==y&&d.push(h)},Pp.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,u=o.curr(),s=o.all(),f=e.mod;for(n=0,r=f.length;n<r;++n)u[i=f[n]._index]!==s&&a.push(i)},Pp.remove=function(e,t,n){var r,i,a,o,u=this._indices,s=this.value,f=s.curr(),l=s.prev(),c=s.all(),d={},h=n.rem,p=t.rem;for(r=0,i=p.length;r<i;++r)d[a=p[r]._index]=1,l[a]=o=f[a],o!==(f[a]=c)&&h.push(a);for(a in u)u[a].remove(i,d);return this.reindex(t,i,d),d},Pp.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)})},Pp.update=function(e,t,n){var r,i,a=this._dims,o=e.query,u=t.stamp,s=a.length,f=0;for(i=n.filters=0;i<s;++i)e.modified("query",i)&&(r=i,++f);if(1===f)f=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(f=i=0;i<s;++i)e.modified("query",i)&&(f|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return f},Pp.incrementAll=function(e,t,n,r){var i,a,o,u=this.value,s=u.seen(),f=u.curr(),l=u.prev(),c=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],g=h[1],m=d[0],v=d[1],y=e.one;if(p<m)for(i=p,a=Math.min(m,g);i<a;++i)s[o=c[i]]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(m<p)for(i=m,a=Math.min(p,v);i<a;++i)s[o=c[i]]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;if(v<g)for(i=Math.max(p,v),a=g;i<a;++i)s[o=c[i]]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(g<v)for(i=Math.max(m,g),a=v;i<a;++i)s[o=c[i]]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;e.range=t.slice()},Pp.incrementOne=function(e,t,n,r){var i,a,o,u=this.value.curr(),s=e.index(),f=e.bisect(e.range),l=e.bisect(t),c=l[0],d=l[1],h=f[0],p=f[1],g=e.one;if(c<h)for(i=c,a=Math.min(h,d);i<a;++i)u[o=s[i]]^=g,n.push(o);else if(h<c)for(i=h,a=Math.min(c,p);i<a;++i)u[o=s[i]]^=g,r.push(o);if(p<d)for(i=Math.max(c,p),a=d;i<a;++i)u[o=s[i]]^=g,n.push(o);else if(d<p)for(i=Math.max(h,d),a=p;i<a;++i)u[o=s[i]]^=g,r.push(o);e.range=t.slice()},xo.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Q(xo,ft).transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),f=function(e){return u[e]&n?null:o[e]};return a.filter(a.MOD,f),i&i-1?(a.filter(a.ADD,function(e){var t=u[e]&n;return!t&&t^s[e]&n?o[e]:null}),a.filter(a.REM,function(e){var t=u[e]&n;return!t||t^t^s[e]&n?null:o[e]})):(a.filter(a.ADD,f),a.filter(a.REM,function(e){return(u[e]&n)===i?o[e]:null})),a.filter(a.SOURCE,function(e){return f(e._index)})};var $p,Lp,qp,jp,Fp,Up=Object.freeze({crossfilter:_o,resolvefilter:xo}),Ip="default",Bp={trap:!1},Wp="vega-bind",Vp="vega-bind-name",Hp="vega-bind-radio",Yp="vega-option-",Gp="outer",Xp=["value","update","react","bind"];Yo.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};var Zp=1,Jp=2,Qp=3,Kp=4,eg=5,tg=6,ng=7,rg=8;($p={})[Zp]="Boolean",$p[Jp]="<end>",$p[Qp]="Identifier",$p[Kp]="Keyword",$p[eg]="Null",$p[tg]="Numeric",$p[ng]="Punctuator",$p[rg]="String",$p[9]="RegularExpression";var ig="ArrayExpression",ag="BinaryExpression",og="CallExpression",ug="ConditionalExpression",sg="Identifier",fg="Literal",lg="LogicalExpression",cg="MemberExpression",dg="ObjectExpression",hg="Property",pg="UnaryExpression",gg="Unexpected token %0",mg="Unexpected number",vg="Unexpected string",yg="Unexpected identifier",bg="Unexpected reserved word",_g="Unexpected end of input",xg="Invalid regular expression",wg="Invalid regular expression: missing /",kg="Octal literals are not allowed in strict mode.",Mg="Duplicate data property in object literal not allowed in strict mode",Eg="ILLEGAL",Og="Disabled.",Sg=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),Ag=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),Cg={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},Rg={if:1,this:1},Tg={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},zg={},Dg=new Date(2e3,0,1),Ng="undefined"!=typeof window&&window||null,Pg="Literal",$g="%",Lg=":",qg=Uu("area",h.geoArea),jg=Uu("bounds",h.geoBounds),Fg=Uu("centroid",h.geoCentroid),Ug={},Ig="bin_",Bg="intersect",Wg="union",Vg="index:unit",Hg={random:function(){return t.random()},isArray:al,isBoolean:K,isDate:ee,isNumber:te,isObject:E,isRegExp:ne,isString:O,isTuple:ge,toBoolean:ue,toDate:fe,toNumber:z,toString:le,pad:oe,peek:T,truncate:de,rgb:y.rgb,lab:y.lab,hcl:y.hcl,hsl:y.hsl,sequence:a.range,format:function(e,t){return Nu("format",d.format,t)(e)},utcFormat:function(e,t){return Nu("utcFormat",i.utcFormat,t)(e)},utcParse:function(e,t){return Nu("utcParse",i.utcParse,t)(e)},timeFormat:Pu,timeParse:function(e,t){return Nu("timeParse",i.timeParse,t)(e)},monthFormat:function(e){return $u(e,1,"%B")},monthAbbrevFormat:function(e){return $u(e,1,"%b")},dayFormat:function(e){return $u(0,2+e,"%A")},dayAbbrevFormat:function(e){return $u(0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},warn:function(){return Lu(this.context.dataflow,"warn",arguments)},info:function(){return Lu(this.context.dataflow,"info",arguments)},debug:function(){return Lu(this.context.dataflow,"debug",arguments)},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},clampRange:function(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),n-t<=(r=a-i)?[t,n]:[Math.min(Math.max(i,t),n-r),Math.min(Math.max(a,r),n)]},pinchDistance:function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){return Ng?Ng.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){return Ng?[Ng.innerWidth,Ng.innerHeight]:[void 0,void 0]},span:function(e){return e[e.length-1]-e[0]||0},merge:function(){var e=[].slice.call(arguments);return e.unshift({}),X.apply(null,e)},flush:function(e,t,n,r,i,a){var o,u,s=e[0],f=T(e);return f<s&&(o=s,s=f,f=o),(o=Math.abs(t-s))<(u=Math.abs(f-t))&&o<=n?r:u<=n?i:a},bandspace:function(e,t,n){return qi(e||0,t||0,n||0)},inrange:Hu,setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(cl).insert(t)),1},pathShape:function(e){var t=null;return function(n){return n?Dn(n,t=t||Rn(e)):e}},panLinear:L,panLog:q,panPow:j,zoomLinear:U,zoomLog:I,zoomPow:B,encode:function(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,a){var o,u,s=this.context.dataflow,f=this.context.data[e],l=f.input,c=f.changes,d=s.stamp();if(!1===s._trigger||!(l.value.length||t||r))return 0;if((!c||c.stamp<d)&&(f.changes=c=s.changeset(),c.stamp=d,s.runAfter(function(){f.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(o=!0===n?cl:al(n)||ge(n)?n:Gu(n),c.remove(o)),t&&c.insert(t),r&&(o=Gu(r),l.value.some(o)?c.remove(o):c.insert(r)),i)for(u in a)c.modify(i,u,a[u]);return 1}},Yg=["view","item","group","xy","x","y"],Gg={};as("bandwidth",function(e,t){var n=qu(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},Fu),as("copy",function(e,t){var n=qu(e,(t||this).context);return n?n.copy():void 0},Fu),as("domain",function(e,t){var n=qu(e,(t||this).context);return n?n.domain():[]},Fu),as("range",function(e,t){var n=qu(e,(t||this).context);return n&&n.range?n.range():[]},Fu),as("invert",function(e,t,n){var r=qu(e,(n||this).context);return r?al(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0},Fu),as("scale",function(e,t,n){var r=qu(e,(n||this).context);return r?r(t):void 0},Fu),as("gradient",function(e,t,n,r,i){e=qu(e,(i||this).context);var a=xn(t,n),o=e.domain(),u=o[0],s=o[o.length-1],f=Hi(e,u,s);e.ticks&&(u!==(o=e.ticks(+r||15))[0]&&o.unshift(u),s!==o[o.length-1]&&o.push(s));for(var l=0,c=o.length;l<c;++l)a.stop(f(o[l]),e(o[l]));return a},Fu),as("geoArea",qg,Fu),as("geoBounds",jg,Fu),as("geoCentroid",Fg,Fu),as("geoShape",function(e,t,n){var r=qu(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}},Fu),as("indata",function(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i},function(e,t,n,r){t[0].type!==Pg&&k("First argument to indata must be a string literal."),t[1].type!==Pg&&k("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,o="@"+a;r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,a))}),as("data",Iu,Bu),as("vlSingle",Qu,Bu),as("vlSingleDomain",es,Bu),as("vlMulti",Qu,Ku),as("vlMultiDomain",es,Ku),as("vlInterval",function(e,t,n){return Ju.call(this,e,t,n,Zu)},Bu),as("vlIntervalDomain",function(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=l[0],d=0;if(c){for(i=c.intervals.length;d<i;++d)if(a=c.intervals[d],t&&a.encoding===t||n&&a.field===n){if(!a.extent)return;o=d,s=2<a.extent.length;break}return u=l.reduce(function(e,t){var n=t.intervals[o].extent,r=s?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return s?e.push.apply(e,r):e.push(r),e},[]),s?ts(u,r):ns(u,r)}},Bu),as("treePath",function(e,t,n){var r=Vu(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(Wu):void 0},Bu),as("treeAncestors",function(e,t){var n=Vu(e,this)[t];return n?n.ancestors().map(Wu):void 0},Bu);var Xg,Zg,Jg={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+S("$"+e)+"]"},functions:function(e){var t=Du(e);for(var n in Yg.forEach(function(e){t[e]="event.vega."+e}),Hg)t[n]="this."+n;return t},constants:Tg,visitors:Gg},Qg=function(e){function t(e){if(O(e))return e;var t=h[e.type];return null==t&&k("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(f),fields:Object.keys(l)};return f={},l={},n}var r=(e=e||{}).whitelist?ce(e.whitelist):{},i=e.blacklist?ce(e.blacklist):{},a=e.constants||Tg,o=(e.functions||Du)(t),u=e.globalvar,s=e.fieldvar,f={},l={},c=0,d=V(u)?u:function(e){return u+'["'+e+'"]'},h={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return 0<c?t:i.hasOwnProperty(t)?k("Illegal identifier: "+t):a.hasOwnProperty(t)?a[t]:r.hasOwnProperty(t)?t:(f[t]=1,d(t))},MemberExpression:function(e){var n=!e.computed,r=t(e.object);n&&(c+=1);var i=t(e.property);return r===s&&(l[i]=1),n&&(c-=1),r+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&k("Illegal callee type: "+e.callee.type);var n=e.callee.name,r=e.arguments,i=o.hasOwnProperty(n)&&o[n];return i||k("Unrecognized function: "+n),V(i)?i(r):i+"("+r.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){c+=1;var n=t(e.key);return c-=1,n+":"+t(e.value)}};return n.functions=o,n.constants=a,n}(Jg),Kg="$",em={$tupleid:1,toString:function(){return":_tupleid_:"}},tm=cs("key"),nm="descending",rm="scope",im="view",am="timer",om="view",um="[",sm="]",fm="{",lm="}",cm=":",dm=",",hm="@",pm=">",gm=/[[\]{}]/,mm={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},vm="var datum=event.item&&event.item.datum;",ym=Os("aggregate"),bm=Os("axisticks"),_m=Os("bound"),xm=Os("collect"),wm=Os("compare"),km=Os("datajoin"),Mm=Os("encode"),Em=Os("facet"),Om=Os("field"),Sm=Os("key"),Am=Os("legendentries"),Cm=Os("mark"),Rm=Os("multiextent"),Tm=Os("multivalues"),zm=Os("overlap"),Dm=Os("params"),Nm=Os("prefacet"),Pm=Os("projection"),$m=Os("proxy"),Lm=Os("relay"),qm=Os("render"),jm=Os("scale"),Fm=Os("sieve"),Um=Os("sortitems"),Im=Os("viewlayout"),Bm=Os("values"),Wm=0,Vm=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],Hm=ce(Vm),Ym=ce(Vm.slice(4,9)),Gm=ce(Vm.slice(9)),Xm=ce(Vm.slice(1,6)),Zm="top",Jm="left",Qm="right",Km="bottom",ev="vertical",tv="index",nv="label",rv="offset",iv="perc",av="perc2",ov="size",uv="value",sv="guide-label",fv="guide-title",lv="group-title",cv="symbol",dv="gradient",hv="discrete",pv=["size","shape","fill","stroke","strokeDash","opacity"],gv={name:1,interactive:1},mv=ce(["rule"]),vv=ce(["group","image","rect"]),yv="mark",bv="frame",_v="scope",xv="axis",wv="axis-domain",kv="axis-grid",Mv="axis-label",Ev="axis-tick",Ov="axis-title",Sv="legend",Av="legend-band",Cv="legend-entry",Rv="legend-gradient",Tv="legend-label",zv="legend-symbol",Dv="legend-title",Nv="title",Pv="group",$v="rect",Lv="rule",qv="symbol",jv="text",Fv="datum."+iv+'<=0?"left":datum.'+iv+'>=1?"right":"center"',Uv="datum."+iv+'<=0?"bottom":datum.'+iv+'>=1?"top":"middle"',Iv={value:0};yf.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],u=null;for(e.add(t[0]);r<n;++r)t[r].params.pulse=ls(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(u=t[r]);return new yf(e,i,o,a,u)};var Bv=yf.prototype;Bv.countsRef=function(e,t,n){var r,i,a,o=this.counts||(this.counts={}),u=bf(t);return null!=u&&(e=this.scope,r=o[u]),r?n&&n.field&&_f(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:ls(this.output)},n&&n.field&&_f(e,a,n),r={agg:i=e.add(ym(a)),ref:ls(r=e.add(xm({pulse:ls(i)})))},null!=u&&(o[u]=r)),r.ref},Bv.tuplesRef=function(){return ls(this.values)},Bv.extentRef=function(e,t){return xf(e,this,"extent","extent",t,!1)},Bv.domainRef=function(e,t){return xf(e,this,"domain","values",t,!1)},Bv.valuesRef=function(e,t,n){return xf(e,this,"vals","values",t,n||!0)},Bv.lookupRef=function(e,t){return xf(e,this,"lookup","tupleindex",t,!1)},Bv.indataRef=function(e,t){return xf(e,this,"indata","tupleindex",t,!0,!0)};var Wv=Ef(S(Jm),S(Qm),S("center")),Vv=Ef('+(item.orient==="'+Qm+'")','+(item.orient!=="'+Jm+'")',"0.5"),Hv=ce(["width","height","padding","autosize"]),Yv=Nf.prototype=Pf.prototype;Yv.fork=function(){return new Pf(this)},Yv.isSubscope=function(){return 0<this._subid},Yv.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},Yv.id=function(){return(this._subid?this._subid+":":0)+this._id++},Yv.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},Yv.proxy=function(e){var t=e instanceof us?ls(e):e;return this.add($m({value:t}))},Yv.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},Yv.addUpdate=function(e){return this.updates.push(e),e},Yv.finish=function(){function e(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}var t,n;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data)for(var r in e((n=this.data[t]).input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values"),n.index)e(n.index[r],t,"index:"+r);return this},Yv.pushState=function(e,t,n){this._encode.push(ls(this.add(Fm({pulse:e})))),this._parent.push(t),this._lookup.push(n?ls(this.proxy(n)):null),this._markpath.push(-1)},Yv.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},Yv.parent=function(){return T(this._parent)},Yv.encode=function(){return T(this._encode)},Yv.lookup=function(){return T(this._lookup)},Yv.markpath=function(){var e=this._markpath;return++e[e.length-1]},Yv.fieldRef=function(e,t){if(O(e))return cs(e,t);e.signal||k("Unsupported field reference: "+S(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=ls(this.add(Om(n)))),i},Yv.compareRef=function(e,t){function n(e){return ps(e)?(i=!0,ls(r[e.signal])):e}var r=this.signals,i=!1,a=W(e.field).map(n),o=W(e.order).map(n);return t&&a.push(em),i?ls(this.add(wm({fields:a,orders:o}))):ds(a,o)},Yv.keyRef=function(e,t){var n,r=this.signals,i=!1;return e=W(e).map(function(e){return ps(e)?(i=!0,ls(r[e.signal])):e}),i?ls(this.add(Sm({fields:e,flat:t}))):(n={$key:e},t&&(n.$flat=!0),n)},Yv.sortRef=function(e){if(!e)return e;var t=[hs(e.op,e.field),em],n=e.order||"ascending";return n.signal?ls(this.add(wm({fields:t,orders:[n=this.signalRef(n.signal),n]}))):ds(t,[n,n])},Yv.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},Yv.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&k("Duplicate signal name: "+S(e));var n=t instanceof us?t:this.add(fs(t));return this.signals[e]=n},Yv.getSignal=function(e){return this.signals[e]||k("Unrecognized signal name: "+S(e)),this.signals[e]},Yv.signalRef=function(e){return this.signals[e]?ls(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(fs(null))),ls(this.lambdas[e]))},Yv.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=os(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},Yv.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},Yv.objectProperty=function(e){return e&&E(e)?this.signalRef(e.signal||$f(e)):e},Yv.addBinding=function(e,t){this.bindings||k("Nested signals do not support binding: "+S(e)),this.bindings.push(X({signal:e},t))},Yv.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&k("Duplicate scale or projection name: "+S(e)),this.scales[e]=this.add(t)},Yv.addScale=function(e,t){this.addScaleProj(e,jm(t))},Yv.addProjection=function(e,t){this.addScaleProj(e,Pm(t))},Yv.getScale=function(e){return this.scales[e]||k("Unrecognized scale name: "+S(e)),this.scales[e]},Yv.projectionRef=Yv.scaleRef=function(e){return ls(this.getScale(e))},Yv.projectionType=Yv.scaleType=function(e){return this.getScale(e).params.type},Yv.addData=function(e,t){return this.data.hasOwnProperty(e)&&k("Duplicate data set name: "+S(e)),this.data[e]=t},Yv.getData=function(e){return this.data[e]||k("Undefined data set name: "+S(e)),this.data[e]},Yv.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&k("Duplicate data set name: "+S(e)),this.addData(e,yf.fromEntries(this,t))};var Gv="sans-serif",Xv=30,Zv=2,Jv="#4c78a8",Qv="#000",Kv="#888",ey="#ddd",ty=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||k("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=re(e.$key,e.$flat))}},{key:"$expr",parse:function(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=_((r=e.$expr,i=t,qf(["datum","_"],r,i)),e.$fields,e.$name));var r,i}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;
return t.fn[n]||(t.fn[n]=A(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n,r,i=e.$encode,a={};for(n in i)r=i[n],a[n]=_(qf(["item","_"],r.$expr,t),r.$fields),a[n].output=r.$output;return a}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=W(e.$compare).map(function(e){return e&&e.$tupleid?me:e});return t.fn[n]||(t.fn[n]=H(r,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,i){var a=Vf(n,t.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}},{key:"$tupleid",parse:function(){return me}}],ny={skip:!0};Yf.prototype=Gf.prototype={fork:function(){var e=new Gf(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),"collect"===If(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.request(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach(function(e){n[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[If(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(function(e){n.update(t.signals[e],i[e],ny)}),Object.keys(r||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(cl).insert(r[e]))}),(e.subcontext||[]).forEach(function(e,n){var r=t.subcontext[n];r&&r.setState(e)})}};var ry="width",iy="height",ay="padding",oy={skip:!0},uy=Q(nl,ut);uy.run=function(e){if(ut.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(e){this.error(e)}return this},uy.render=function(){var e,t,n,r;return this._renderer&&(this._resize&&(this._resize=0,t=So(e=this),n=Eo(e),r=Oo(e),e._renderer.background(e._background),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(function(t){try{t(n,r)}catch(t){e.error(t)}})),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},uy.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},uy.container=function(){return this._el},uy.scenegraph=function(){return this._scenegraph},uy.origin=function(){return this._origin.slice()},uy.signal=function(e,t,n){var r=rl(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},uy.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},uy.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},uy.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},uy.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},uy.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},uy.renderer=function(e){return arguments.length?(li(e)||k("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},uy.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},uy.loader=function(e){return arguments.length?(e!==this._loader&&(ut.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},uy.resize=function(){return this._autosize=1,this},uy._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},uy._resizeView=function(e,t,n,r,i,a){this.runAfter(function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(ry,n,oy),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(iy,r,oy),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter(function(){o.resize()})},!1,1)},uy.addEventListener=function(e,t,n){var r=t;return n&&!1===n.trap||((r=Uo(this,t)).raw=t),this._handler.on(e,r),this},uy.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;0<=--a;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},uy.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},uy.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return 0<=n&&t.splice(n,1),this},uy.addSignalListener=function(e,t){var n=rl(this,e),r=il(n,t);return r||((r=Uo(this,function(){t(e,n.value)})).handler=t,this.on(n,null,r)),this},uy.removeSignalListener=function(e,t){var n=rl(this,e),r=il(n,t);return r&&n._targets.remove(r),this},uy.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},uy.timer=function(e,t){this._timers.push(b.interval(function(t){e({timestamp:Date.now(),elapsed:t})},t))},uy.events=function(e,t,n){var r,i=this,a=new Se(n),o=function(n,r){var o,u,s,f,l;"view"!==e||(u=t,s=(o=i)._eventConfig.defaults,f=s&&s.prevent,l=s&&s.allow,!1===f||!0===l||!0!==f&&!1!==l&&(f?!f[u]:l?l[u]:!o.preventDefault()))||n.preventDefault();try{a.receive(Ao(i,n,r))}catch(n){i.error(n)}finally{i.run()}};if("timer"===e)i.timer(o,t);else if("view"===e)i.addEventListener(t,o,Bp);else if("window"===e?"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a},uy.finalize=function(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;0<=--e;)i[e].stop();for(e=a.length;0<=--e;)for(t=(n=a[e]).sources.length;0<=--t;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},uy.hover=function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",Co),Ro,To(e)),this.on(this.events("view","mouseout",Co),Ro,To(t)),this},uy.data=function(e){return ko(this,e).values.value},uy.change=Mo,uy.insert=function(e,t){return Mo.call(this,e,ke().insert(t))},uy.remove=function(e,t){return Mo.call(this,e,ke().remove(t))},uy.initialize=function(e,t){var n,r,i,a,o,u,s=this,f=s._renderType,l=li(f);return e=s._el=e?Io(s,e):null,l||s.error("Unrecognized renderer type: "+f),n=l.handler||Yr,r=e?l.renderer:l.headless,s._renderer=r?Fo(s,s._renderer,e,r):null,s._handler=(a=(i=s)._handler,o=e,u=new n(i.loader(),Uo(i,i.tooltip())).scene(i.scenegraph().root).initialize(o,So(i),i),a&&a.handlers().forEach(function(e){u.on(e.type,e.handler)}),u),s._redraw=!0,e&&(t=t?Io(s,t):e.appendChild(zo("div",{class:"vega-bindings"})),s._bind.forEach(function(e){e.param.element&&(e.element=Io(s,e.param.element))}),s._bind.forEach(function(e){Do(s,e.element||t,e)})),s},uy.toImageURL=function(e,t){return e!==oh.Canvas&&e!==oh.SVG&&e!==oh.PNG?Promise.reject("Unrecognized image type: "+e):Bo(this,e,t).then(function(t){return e===oh.SVG?(n=t.svg(),r=new Blob([n],{type:"image/svg+xml"}),window.URL.createObjectURL(r)):t.canvas().toDataURL("image/png");var n,r})},uy.toCanvas=function(e){return Bo(this,oh.Canvas,e).then(function(e){return e.canvas()})},uy.toSVG=function(e){return Bo(this,oh.SVG,e).then(function(e){return e.svg()})},uy.getState=function(e){return this._runtime.getState(e||{data:Jf,signals:Qf,recurse:!0})},uy.setState=function(e){var t=this;return t.runAfter(function(){t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0})}),this},X(Ul,lc,gh,Zh,op,hp,Mp,Sp,Np,Up),t.timeFormatLocale=i.timeFormatDefaultLocale,t.formatLocale=d.formatDefaultLocale,t.version="4.0.0-rc.2",t.Dataflow=ut,t.EventStream=Se,t.Parameters=Me,t.Pulse=Qe,t.MultiPulse=nt,t.Operator=Ee,t.Transform=ft,t.changeset=ke,t.ingest=ye,t.isTuple=ge,t.definition=lt,t.transform=ct,t.transforms=Ul,t.tupleid=me,t.scale=Ui,t.scheme=Wi,t.interpolate=Gi,t.interpolateRange=Vi,t.timeInterval=Xi,t.utcInterval=Zi,t.projection=qa,t.View=nl,t.parse=function(e,t){return E(e)||k("Input Vega specification must be an object."),Df(e,new Nf(Lf([t,e.config]))).toRuntime()},t.expressionFunction=as,t.runtime=Vf,t.runtimeContext=Hf,t.bin=yt,t.bootstrapCI=xt,t.quartiles=wt,t.setRandom=function(e){t.random=e},t.randomInteger=function(e,n){null==n&&(n=e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(a=i-(r=e||0),o):r},o.max=function(e){return arguments.length?(a=(i=e||0)-r,o):i},o.sample=function(){return r+Math.floor(a*t.random())},o.pdf=function(e){return e===Math.floor(e)&&r<=e&&e<i?1/a:0},o.cdf=function(e){var t=Math.floor(e);return t<r?0:i<=t?1:(t-r+1)/a},o.icdf=function(e){return 0<=e&&e<=1?r-1+Math.floor(e*a):NaN},o.min(e).max(n)},t.randomKDE=Mt,t.randomMixture=Et,t.randomNormal=kt,t.randomUniform=Ot,t.accessor=_,t.accessorName=x,t.accessorFields=w,t.id=ul,t.identity=sl,t.zero=fl,t.one=ll,t.truthy=cl,t.falsy=dl,t.logger=R,t.None=hl,t.Error=pl,t.Warn=gl,t.Info=ml,t.Debug=vl,t.panLinear=L,t.panLog=q,t.panPow=j,t.zoomLinear=U,t.zoomLog=I,t.zoomPow=B,t.array=W,t.compare=H,t.constant=Y,t.debounce=G,t.error=k,t.extend=X,t.extentIndex=Z,t.fastmap=J,t.field=A,t.inherits=Q,t.isArray=al,t.isBoolean=K,t.isDate=ee,t.isFunction=V,t.isNumber=te,t.isObject=E,t.isRegExp=ne,t.isString=O,t.key=re,t.merge=ie,t.pad=oe,t.peek=T,t.repeat=ae,t.splitAccessPath=M,t.stringValue=S,t.toBoolean=ue,t.toDate=fe,t.toNumber=z,t.toString=le,t.toSet=ce,t.truncate=de,t.visitArray=he,t.loader=Ce,t.read=Xe,t.inferType=$e,t.inferTypes=Le,t.typeParsers=Cl,t.formats=Ge,t.Bounds=_n,t.Gradient=xn,t.GroupItem=kn,t.ResourceLoader=On,t.Item=wn,t.Scenegraph=$r,t.Handler=Wr,t.Renderer=Hr,t.CanvasHandler=Yr,t.CanvasRenderer=Zr,t.SVGHandler=Jr,t.SVGRenderer=ti,t.SVGStringRenderer=ui,t.RenderType=oh,t.renderModule=li,t.Marks=Dd,t.boundClip=ci,t.boundContext=Xn,t.boundStroke=Gn,t.boundItem=zr,t.boundMark=Dr,t.pathCurves=Cn,t.pathSymbols=Pn,t.pathRectangle=Un,t.pathTrail=In,t.pathParse=Rn,t.pathRender=Dn,t.point=Br,t.domCreate=qr,t.domFind=jr,t.domChild=Fr,t.domClear=Ur,t.openTag=Kr,t.closeTag=ei,t.font=Cr,t.textMetrics=Rd,t.resetSVGClipId=function(){bd=1},t.sceneEqual=di,t.pathEqual=hi,t.sceneToJSON=Nr,t.sceneFromJSON=Pr,t.sceneZOrder=nr,t.sceneVisit=rr,t.scenePickVisit=ir,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,n(1).Buffer)},function(e,t,n){(function(e){!function(e,n){n(t)}(this,function(t){"use strict";function r(e,t,n){return e.fields=t||[],e.fname=n,e}function i(e){return null==e?null:e.fname}function a(e){return null==e?null:e.fields}function o(e){throw Error(e)}function u(e){function t(){a.push(l+e.substring(n,r)),l="",n=r+1}var n,r,i,a=[],u=null,s=0,f=e.length,l="";for(e+="",n=r=0;r<f;++r)if("\\"===(i=e[r]))l+=e.substring(n,r),n=++r;else if(i===u)t(),u=null,s=-1;else{if(u)continue;n===s&&'"'===i?(n=r+1,u=i):n===s&&"'"===i?(n=r+1,u=i):"."!==i||s?"["===i?(n<r&&t(),s=n=r+1):"]"===i&&(s||o("Access path missing open bracket: "+e),0<s&&t(),s=0,n=r+1):n<r?t():n=r+1}return s&&o("Access path missing closing bracket: "+e),u&&o("Access path missing closing quote: "+e),n<r&&(r++,t()),a}function s(e){return e===Object(e)}function f(e){return"string"==typeof e}function l(e){return xv(e)?"["+e.map(l)+"]":s(e)||f(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function c(e,t){var n=u(e),i="return _["+n.map(l).join("][")+"];";return r(Function("_",i),[e=1===n.length?n[0]:e],t||e)}function d(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function h(e){var t=e||Cv;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return Rv<=t&&d("error","ERROR",arguments),this},warn:function(){return Tv<=t&&d("warn","WARN",arguments),this},info:function(){return zv<=t&&d("log","INFO",arguments),this},debug:function(){return Dv<=t&&d("log","DEBUG",arguments),this}}}function p(e){return e[e.length-1]}function g(e){return null==e||""===e?null:+e}function m(e){return function(t){return e*Math.exp(t)}}function v(e){return function(t){return Math.log(e*t)}}function y(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function b(e,t,n,r){var i=n(e[0]),a=n(p(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function _(e,t){return b(e,t,g,Mv)}function x(e,t){var n=Math.sign(e[0]);return b(e,t,v(n),m(n))}function w(e,t,n){return b(e,t,y(n),y(1/n))}function k(e,t,n,r,i){var a=r(e[0]),o=r(p(e)),u=null!=t?r(t):(a+o)/2;return[i(u+(a-u)*n),i(u+(o-u)*n)]}function M(e,t,n){return k(e,t,n,g,Mv)}function E(e,t,n){var r=Math.sign(e[0]);return k(e,t,n,v(r),m(r))}function O(e,t,n,r){return k(e,t,n,y(r),y(1/r))}function S(e){return null!=e?xv(e)?e:[e]:[]}function A(e){return"function"==typeof e}function C(e,t){var n,i,o,s,f,c,d,h,p,g=[],m=(e=S(e)).map(function(e,t){return null==e?null:(g.push(t),A(e)?e:u(e).map(l).join("]["))}),v=g.length-1,y=S(t),b="var u,v;return ";if(v<0)return null;for(i=0;i<=v;++i)A(o=m[n=g[i]])?(s="(u=this."+(c="f"+n)+"(a))",f="(v=this."+c+"(b))",(d=d||{})[c]=o):(s="(u=a["+o+"])",f="(v=b["+o+"])"),c="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==y[n]?h=-(p=1):(p=-1,h=1),b+="("+s+"<"+f+"||u==null)&&v!=null?"+h+":(u>v||v==null)&&u!=null?"+p+":"+c+"!==u&&v===v?"+h+":v!==v&&u===u?"+p+(n<v?":":":0");return o=Function("a","b",b+";"),d&&(o=o.bind(d)),e=e.reduce(function(e,t){return A(t)?(a(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),r(o,Object.keys(e))}function R(e){return A(e)?e:function(){return e}}function T(e,t){function n(){t(i),r=i=null}var r,i;return function(t){i=t,r&&clearTimeout(r),r=setTimeout(n,e)}}function z(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e}function D(e,t){var n,r,i,a,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(null!=(r=e[u])&&r<=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=e[u])&&(r<n&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(null!=(r=t(e[u],u,e))&&r<=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=t(e[u],u,e))&&(r<n&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]}function N(e){function t(e){return i.hasOwnProperty(e)&&i[e]!==Nv}var n,r,i={};return n={size:0,empty:0,object:i,has:t,get:function(e){return t(e)?i[e]:void 0},set:function(e,r){return t(e)||(++n.size,i[e]===Nv&&--n.empty),i[e]=r,this},delete:function(e){return t(e)&&(--n.size,++n.empty,i[e]=Nv),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(e){return arguments.length?(r=e,n):r},clean:function(){var e,t,a={},o=0;for(e in i)(t=i[e])===Nv||r&&r(t)||(a[e]=t,++o);n.size=o,n.empty=0,n.object=i=a}},e&&Object.keys(e).forEach(function(t){n.set(t,e[t])}),n}function P(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}function $(e){return"boolean"==typeof e}function L(e){return"[object Date]"===Object.prototype.toString.call(e)}function q(e){return"number"==typeof e}function j(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function F(e,t){return e&&(e=t?S(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):S(e)),r(e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?l(e):u(e).map(l).join("]["))+"]"}).join("+'|'+")+";"):function(){return""},e,"key")}function U(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),u=0,s=0,f=0;u<i&&s<a;++f)o[f]=0<e(t[u],n[s])?n[s++]:t[u++];for(;u<i;++u,++f)o[f]=t[u];for(;s<a;++s,++f)o[f]=n[s];return o}function I(e,t){for(var n="";0<=--t;)n+=e;return n}function B(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?I(i,o)+a:"center"===r?I(i,~~(o/2))+a+I(i,Math.ceil(o/2)):a+I(i,o)}function W(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}function V(e){return q(e)?e:L(e)?e:Date.parse(e)}function H(e,t){return t=t||V,null==e||""===e?null:t(e)}function Y(e){return null==e||""===e?null:e+""}function G(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function X(e,t,n,r){var i=null!=r?r:"",a=e+"",o=a.length,u=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function Z(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}function J(e){var t=e||Mv,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0)<=(i=n.indexOf(e))&&n.splice(i,1),n},n}function Q(e){return!(!e||!K(e))}function K(e){return e[Pv]}function ee(e,t){return e[Pv]=t,e}function te(e){var t=e===Object(e)?e:{data:e};return K(t)?t:ee(t,$v++)}function ne(e){return re(e,te({}))}function re(e,t){for(var n in e)t[n]=e[n];return t}function ie(e,t){return ee(t,K(e))}function ae(e){return e&&e.constructor===oe}function oe(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:oe,insert:function(t){for(var n=S(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=A(e)?r:t,i=S(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(e,t,r){var a={field:t,value:R(r)};return A(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return A(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function s(e,t,n){n?e[t]=n(e):o.encode=t,a||(f[K(e)]=e)}var f,l,c,d,h,p,g;for(l=0,c=e.length;l<c;++l)o.add.push(te(e[l]));for(f={},l=0,c=t.length;l<c;++l)f[K(p=t[l])]=p;for(l=0,c=r.length;l<c;++l)h=r[l],u.forEach(function(e){h(e)&&(f[K(e)]=e)});for(g in f)o.rem.push(f[g]);for(f={},l=0,c=n.length;l<c;++l)s((d=n[l]).tuple,d.field,d.value),o.modifies(d.field);for(l=0,c=i.length;l<c;++l)d=i[l],h=d.filter,u.forEach(function(e){h(e)&&s(e,d.field,d.value)}),o.modifies(d.field);if(a)o.mod=t.length||r.length?u.filter(function(e){return f.hasOwnProperty(K(e))}):u.slice();else for(g in f)o.mod.push(f[g]);return o}}}function ue(){Object.defineProperty(this,Lv,{writable:!0,value:{}})}function se(e,t,n,r){this.id=++qv,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function fe(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function le(e,t,n){this.id=++Uv,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function ce(e,t,n){return new le(e,t,n)}function de(e){return{options:e||{},sanitize:pe,load:he,file:me,http:ge}}function he(e,t){var n=this;return n.sanitize(e,t).then(function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)})}function pe(e,t){return t=z({},this.options,t),new Promise(function(n,r){var i,a,o,u,s={href:null};null!=e&&"string"==typeof e?(a=Bv.test(e),(u=t.baseURL)&&!a&&(ye(e,"/")||"/"===u[u.length-1]||(e="/"+e),e=u+e),o=(i=ye(e,Wv))||"file"===t.mode||"http"!==t.mode&&!a&&ve(),i?e=e.slice(Wv.length):ye(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(s,"localFile",{value:!!o}),s.href=e,t.target&&(s.target=t.target+""),n(s)):r("Sanitize failure, invalid URI: "+l(e))})}function ge(e,t){return(r=e,i=z({},this.options.http,t),a="function"==typeof fetch?fetch:n(14),a?a(r,i):Promise.reject("No fetch method available.")).then(function(e){if(!e.ok)throw e.status+""+e.statusText;return e.text()});var r,i,a}function me(e){return new Promise(function(t,n){var r=ve();r?r.readFile(e,function(e,r){e?n(e):t(r)}):n("No file system access for "+e)})}function ve(){var e=n(18);return e&&A(e.readFile)?e:null}function ye(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function be(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o,u=Hv.slice();for(r=0,i=e.length;r<i;++r){for(n=t?e[r][t]:e[r],a=0;a<u.length;++a)null==(o=n)||o!=o||u[a](n)||(u.splice(a,1),--a);if(0===u.length)return"string"}return Yv[Hv.indexOf(u[0])]}function _e(e,t){return t.reduce(function(t,n){return t[n]=be(e,n),t},{})}function xe(e){return!(isNaN(+e)||e instanceof Date)}function we(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function ke(e){function t(e,t){function n(){if(f)return Xv;if(l)return l=!1,Gv;var t,n,r=u;if(e.charCodeAt(r)===Zv){for(;u++<o&&e.charCodeAt(u)!==Zv||e.charCodeAt(++u)===Zv;);return(t=u)>=o?f=!0:(n=e.charCodeAt(u++))===Jv?l=!0:n===Qv&&(l=!0,e.charCodeAt(u)===Jv&&++u),e.slice(r+1,t-1).replace(/""/g,'"')}for(;u<o;){if((n=e.charCodeAt(t=u++))===Jv)l=!0;else if(n===Qv)l=!0,e.charCodeAt(u)===Jv&&++u;else if(n!==a)continue;return e.slice(r,t)}return f=!0,e.slice(r,o)}var r,i=[],o=e.length,u=0,s=0,f=o<=0,l=!1;for(e.charCodeAt(o-1)===Jv&&--o,e.charCodeAt(o-1)===Qv&&--o;(r=n())!==Xv;){for(var c=[];r!==Gv&&r!==Xv;)c.push(r),r=n();t&&null==(c=t(c,s++))||i.push(c)}return i}function n(t){return t.map(r).join(e)}function r(e){return null==e?"":i.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var i=new RegExp('["'+e+"\n\r]"),a=e.charCodeAt(0);return{parse:function(e,n){var r,i,a=t(e,function(e,t){if(r)return r(e,t-1);var a,o,u;i=e,r=n?(o=n,u=we(a=e),function(e,t){return o(u(e),t,a)}):we(e)});return a.columns=i||[],a},parseRows:t,format:function(t,n){var i,a,o;return null==n&&(i=t,a=Object.create(null),o=[],i.forEach(function(e){for(var t in e)t in a||o.push(a[t]=t)}),n=o),[n.map(r).join(e)].concat(t.map(function(t){return n.map(function(e){return r(t[e])}).join(e)})).join("\n")},formatRows:function(e){return e.map(n).join("\n")}}}function Me(e){return function(t,n){var r={delimiter:e};return Ee(t,n?z(n,r):r)}}function Ee(e,t){return t.header&&(e=t.header.map(l).join(t.delimiter)+"\n"+e),ke(t.delimiter).parse(e+"")}function Oe(t,n){var r,i,a,o=n&&n.property?c(n.property):Mv;return!s(t)||(a=t,"function"==typeof e&&A(e.isBuffer)&&e.isBuffer(a))?o(JSON.parse(t)):(r=o(t),i&&i.copy?JSON.parse(JSON.stringify(r)):r)}function Se(e){return e}function Ae(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return Ce(e,t)})}:Ce(e,t)}function Ce(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=Re(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function Re(e,t){function n(e,t){t.length&&t.pop();for(var n=s[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(u(n[r],r));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,i)}function r(e){return u(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}var u=function(e){if(null==e)return Se;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,f=e.length,l=new Array(f);for(l[0]=(t+=e[0])*r+a,l[1]=(n+=e[1])*i+o;s<f;)l[s]=e[s],++s;return l}}(e.transform),s=e.arcs;return function e(t){var n,a=t.type;switch(a){case"GeometryCollection":return{type:a,geometries:t.geometries.map(e)};case"Point":n=r(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(r);break;case"LineString":n=i(t.arcs);break;case"MultiLineString":n=t.arcs.map(i);break;case"Polygon":n=o(t.arcs);break;case"MultiPolygon":n=t.arcs.map(o);break;default:return null}return{type:a,coordinates:n}}(t)}function Te(e,t){function n(e,t){for(var n in e){var i=e[n];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){r[e<0?~e:e]=1}),o.push(i)}}var r={},i={},a={},o=[],u=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++u],t[u]=n,t[r]=i)}),t.forEach(function(t){var n,r,o=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}(t),u=o[0],s=o[1];if(n=a[u])if(delete a[n.end],n.push(t),n.end=s,r=i[s]){delete i[r.start];var f=r===n?n:n.concat(r);i[f.start=n.start]=a[f.end=r.end]=f}else i[n.start]=a[n.end]=n;else if(n=i[s])if(delete i[n.start],n.unshift(t),n.start=u,r=a[u]){delete a[r.end];var l=r===n?n:r.concat(n);i[l.start=r.start]=a[l.end=n.end]=l}else i[n.start]=a[n.end]=n;else i[(n=[t]).start=u]=a[n.end=s]=n}),n(a,i),n(i,a),t.forEach(function(e){r[e<0?~e:e]||o.push([e])}),o}function ze(e){return Re(e,function(e,t,n){var r,i,a;if(1<arguments.length)r=function(e,t,n){function r(e){var t=e<0?~e:e;(s[t]||(s[t]=[])).push({i:e,g:o})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}var o,u=[],s=[];return function e(t){switch((o=t).type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":i(t.arcs);break;case"MultiLineString":case"Polygon":a(t.arcs);break;case"MultiPolygon":t.arcs.forEach(a)}}(t),s.forEach(null==n?function(e){u.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&u.push(e[0].i)}),u}(0,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:Te(e,r)}}.apply(this,arguments))}function De(e,t){return 1<arguments.length?(Kv[e]=t,this):Kv.hasOwnProperty(e)?Kv[e]:null}function Ne(e,t,n,r){function i(t){return e(t=new Date((+t))),t}return(i.floor=i).ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date((+e)),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,u=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&0<a))return u;for(;u.push(o=new Date((+n))),t(n,a),e(n),o<n&&n<r;);return u},i.filter=function(n){return Ne(function(t){if(t<=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e<=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;0<=--r;)for(;t(e,1),!n(e););})},n&&(i.count=function(t,r){return ey.setTime(+t),ty.setTime(+r),e(ey),e(ty),Math.floor(n(ey,ty))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}function Pe(e){return Ne(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ry)/6048e5})}function $e(e){return Ne(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}function Le(e){if(0<=e.y&&e.y<100){var t=new Date((-1),e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function qe(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function je(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Fe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Ue(e){return e.replace(Ry,"\\$&")}function Ie(e){return new RegExp("^(?:"+e.map(Ue).join("|")+")","i")}function Be(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function We(e,t,n){var r=Ay.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ve(e,t,n){var r=Ay.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function He(e,t,n){var r=Ay.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Ye(e,t,n){var r=Ay.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ge(e,t,n){var r=Ay.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Xe(e,t,n){var r=Ay.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ze(e,t,n){var r=Ay.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function Je(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Qe(e,t,n){var r=Ay.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ke(e,t,n){var r=Ay.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function et(e,t,n){var r=Ay.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function tt(e,t,n){var r=Ay.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function nt(e,t,n){var r=Ay.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function rt(e,t,n){var r=Ay.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function it(e,t,n){var r=Ay.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function at(e,t,n){var r=Ay.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ot(e,t,n){var r=Cy.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ut(e,t,n){var r=Ay.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function st(e,t,n){var r=Ay.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function ft(e,t){return Fe(e.getDate(),t,2)}function lt(e,t){return Fe(e.getHours(),t,2)}function ct(e,t){return Fe(e.getHours()%12||12,t,2)}function dt(e,t){return Fe(1+sy.count(hy(e),e),t,3)}function ht(e,t){return Fe(e.getMilliseconds(),t,3)}function pt(e,t){return ht(e,t)+"000"}function gt(e,t){return Fe(e.getMonth()+1,t,2)}function mt(e,t){return Fe(e.getMinutes(),t,2)}function vt(e,t){return Fe(e.getSeconds(),t,2)}function yt(e){var t=e.getDay();return 0===t?7:t}function bt(e,t){return Fe(fy.count(hy(e),e),t,2)}function _t(e,t){var n=e.getDay();return e=4<=n||0===n?cy(e):cy.ceil(e),Fe(cy.count(hy(e),e)+(4===hy(e).getDay()),t,2)}function xt(e){return e.getDay()}function wt(e,t){return Fe(ly.count(hy(e),e),t,2)}function kt(e,t){return Fe(e.getFullYear()%100,t,2)}function Mt(e,t){return Fe(e.getFullYear()%1e4,t,4)}function Et(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+Fe(t/60|0,"0",2)+Fe(t%60,"0",2)}function Ot(e,t){return Fe(e.getUTCDate(),t,2)}function St(e,t){return Fe(e.getUTCHours(),t,2)}function At(e,t){return Fe(e.getUTCHours()%12||12,t,2)}function Ct(e,t){return Fe(1+my.count(xy(e),e),t,3)}function Rt(e,t){return Fe(e.getUTCMilliseconds(),t,3)}function Tt(e,t){return Rt(e,t)+"000"}function zt(e,t){return Fe(e.getUTCMonth()+1,t,2)}function Dt(e,t){return Fe(e.getUTCMinutes(),t,2)}function Nt(e,t){return Fe(e.getUTCSeconds(),t,2)}function Pt(e){var t=e.getUTCDay();return 0===t?7:t}function $t(e,t){return Fe(vy.count(xy(e),e),t,2)}function Lt(e,t){var n=e.getUTCDay();return e=4<=n||0===n?by(e):by.ceil(e),Fe(by.count(xy(e),e)+(4===xy(e).getUTCDay()),t,2)}function qt(e){return e.getUTCDay()}function jt(e,t){return Fe(yy.count(xy(e),e),t,2)}function Ft(e,t){return Fe(e.getUTCFullYear()%100,t,2)}function Ut(e,t){return Fe(e.getUTCFullYear()%1e4,t,4)}function It(){return"+0000"}function Bt(){return"%"}function Wt(e){return+e}function Vt(e){return Math.floor(+e/1e3)}function Ht(e){return wy=function(e){function t(e,t){return function(n){var r,i,a,o=[],u=-1,s=0,f=e.length;for(n instanceof Date||(n=new Date((+n)));++u<f;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(i=Sy[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function n(e,t){return function(n){var i,a,o=je(1900);if(r(o,e,n+="",0)!=n.length)return null;
if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||53<o.V)return null;"w"in o||(o.w=1),"Z"in o?(i=4<(a=(i=qe(je(o.y))).getUTCDay())||0===a?yy.ceil(i):yy(i),i=my.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(i=4<(a=(i=t(je(o.y))).getDay())||0===a?ly.ceil(i):ly(i),i=sy.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?qe(je(o.y)).getUTCDay():t(je(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,qe(o)):t(o)}}function r(e,t,n,r){for(var i,a,o=0,u=t.length,s=n.length;o<u;){if(s<=r)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=M[i in Sy?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var i=e.dateTime,a=e.date,o=e.time,u=e.periods,s=e.days,f=e.shortDays,l=e.months,c=e.shortMonths,d=Ie(u),h=Be(u),p=Ie(s),g=Be(s),m=Ie(f),v=Be(f),y=Ie(l),b=Be(l),_=Ie(c),x=Be(c),w={a:function(e){return f[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:ft,e:ft,f:pt,H:lt,I:ct,j:dt,L:ht,m:gt,M:mt,p:function(e){return u[+(12<=e.getHours())]},Q:Wt,s:Vt,S:vt,u:yt,U:bt,V:_t,w:xt,W:wt,x:null,X:null,y:kt,Y:Mt,Z:Et,"%":Bt},k={a:function(e){return f[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:Ot,e:Ot,f:Tt,H:St,I:At,j:Ct,L:Rt,m:zt,M:Dt,p:function(e){return u[+(12<=e.getUTCHours())]},Q:Wt,s:Vt,S:Nt,u:Pt,U:$t,V:Lt,w:qt,W:jt,x:null,X:null,y:Ft,Y:Ut,Z:It,"%":Bt},M={a:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.w=v[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=g[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=_.exec(t.slice(n));return r?(e.m=x[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=b[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,t,n){return r(e,i,t,n)},d:Ke,e:Ke,f:at,H:tt,I:tt,j:et,L:it,m:Qe,M:nt,p:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.p=h[r[0].toLowerCase()],n+r[0].length):-1},Q:ut,s:st,S:rt,u:Ve,U:He,V:Ye,w:We,W:Ge,x:function(e,t,n){return r(e,a,t,n)},X:function(e,t,n){return r(e,o,t,n)},y:Ze,Y:Xe,Z:Je,"%":ot};return w.x=t(a,w),w.X=t(o,w),w.c=t(i,w),k.x=t(a,k),k.X=t(o,k),k.c=t(i,k),{format:function(e){var n=t(e+="",w);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",Le);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",k);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,qe);return t.toString=function(){return e},t}}}(e),ky=wy.format,My=wy.parse,Ey=wy.utcFormat,Oy=wy.utcParse,wy}function Yt(e,t,n){var r=De((t=t||{}).type||"json");return r||o("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function(e,t,n){if(e.length){n=n||My;var r,i,a,o,u,s,f,l=e.columns||Object.keys(e[0]);for("auto"===t&&(t=_e(e,l)),l=Object.keys(t),r=l.map(function(e){var r,i,a=t[e];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return("'"===(i=(r=a.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?Oy(i):n(i);if(!Vv[a])throw Error("Illegal format pattern: "+e+":"+a);return Vv[a]}),o=0,s=e.length,f=l.length;o<s;++o)for(i=e[o],u=0;u<f;++u)a=l[u],i[a]=r[u](i[a])}}(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e}function Gt(e,t,n,r,i,a){var o,u,s=z({},a,zy);A(n)||(n=R(n)),void 0===r?o=function(t){e.touch(n(t))}:A(r)?(u=new se(null,r,i,(!1)),o=function(t){var r,i=n(t);u.evaluate(t),ae(r=u.value)?e.pulse(i,r,a):e.update(i,r,s)}):o=function(t){e.update(n(t),r,s)},t.apply(o)}function Xt(e,t,n,r,i,a){var o,u;void 0===r?u=n:(o=A(r)?r:R(r),(u=new se(null,r=n?function(e,t){var r=o(e,t);return n.skip()||(n.skip(r!==this.value).value=r),r}:o,i,(!1))).modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),t.targets().add(u)}function Zt(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Jt(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function Qt(e,t){var n=[];return Z(e,t,function(e){n.push(e)}),n}function Kt(e,t){var n={};return e.visit(t,function(e){n[K(e)]=1}),function(e){return n[K(e)]?null:e}}function en(e,t,n,r){var i,a,o,u,s,f=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,o=0,u=(this.pulses=n).length;o<u;++o)if((i=n[o]).stamp===t){if(i.fields)for(s in a=this.fields||(this.fields={}),i.fields)a[s]=1;i.changed(this.ADD)&&(f|=this.ADD),i.changed(this.REM)&&(f|=this.REM),i.changed(this.MOD)&&(f|=this.MOD)}this.changes=f}function tn(e,t){try{t(e)}catch(t){e.error(t)}}function nn(e){this.cmp=e,this.nodes=[]}function rn(e,t,n,r){var i,a,o;for(i=e[n];t<n&&r(i,a=e[o=n-1>>1])<0;)e[n]=a,n=o;return e[n]=i}function an(e,t,n){for(var r,i=t,a=e.length,o=e[t],u=2*t+1;u<a;)(r=u+1)<a&&0<=n(e[u],e[r])&&(u=r),e[t]=e[u],u=2*(t=u)+1;return e[t]=o,rn(e,i,t,n)}function on(){this._log=h(),this.logLevel(Rv),this._clock=0,this._rank=0;try{this._loader=de()}catch(e){}this._touched=J(kv),this._pulses={},this._pulse=null,this._heap=new nn(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function un(e){return function(){return this._log[e].apply(this,arguments)}}function sn(e,t){se.call(this,e,null,t)}function fn(e){var t=ln(e);return t&&t.Definition||null}function ln(e){return e=e&&e.toLowerCase(),Fy.hasOwnProperty(e)?Fy[e]:null}function cn(e){return e&&e.length?1===e.length?e[0]:(t=e,function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function dn(e,t,n){return n||e+(t?"_"+t:"")}function hn(e,t){return Uy[e](t)}function pn(e){return function(t){var n=z({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function gn(e,t){return e.idx-t.idx}function mn(e,t){var n=t||Mv,r=function(e,t){var n,r=e.reduce(function e(n,r){function i(t){n[t]||e(n,n[t]=Uy[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),n},e.reduce(function(e,t){return e[t.name]=t,e},{})),i=[];for(n in r)i.push(r[n]);return i.sort(gn)}(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",u="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return r.forEach(function(e){i+=e.init,o+=e.add,u+=e.rem}),e.slice().sort(gn).forEach(function(e){s+="t['"+e.out+"']="+e.set+";"}),s+="return t;",(a=Function("cell",a)).prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",u),a.prototype.set=Function("t",s),a.prototype.get=n,a.fields=e.map(function(e){return e.out}),a}function vn(e){var t,n,r,i,a,o,u,s,f=e.maxbins||20,l=e.base||10,c=Math.log(l),d=e.divide||[5,2],h=e.extent[0],p=e.extent[1],g=p-h;if(e.step)t=e.step;else if(e.steps){for(a=g/f,o=0,u=e.steps.length;o<u&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(f)/c),r=e.minstep||0,t=Math.max(r,Math.pow(l,Math.round(Math.log(g)/c)-n));Math.ceil(g/t)>f;)t*=l;for(o=0,u=d.length;o<u;++o)r<=(a=t/d[o])&&g/a<=f&&(t=a)}return i=0<=(a=Math.log(t))?0:1+~~(-a/c),s=Math.pow(l,-i-1),(e.nice||void 0===e.nice)&&(h=h<(a=Math.floor(h/t+s)*t)?a-t:a,p=Math.ceil(p/t)*t),{start:h,stop:p,step:t}}function yn(e,t){var n,r=[],i=e.length,a=-1;if(null==t)for(;++a<i;)isNaN(n=bn(e[a]))||r.push(n);else for(;++a<i;)isNaN(n=bn(t(e[a],a,e)))||r.push(n);return r}function bn(e){return null===e?NaN:+e}function _n(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function xn(e){var t;return 1===e.length&&(t=e,e=function(e,n){return _n(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;0<e(t[a],n)?i=a:r=a+1}return r}}}function wn(e){return null===e?NaN:+e}function kn(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n<=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(n<r&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n<=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(n<r&&(r=n),i<n&&(i=n));return[r,i]}function Mn(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}function En(e,t,n){var r,i,a,o,u=-1;if(n=+n,(e=+e)===(t=+t)&&0<n)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=On(e,t,n))||!isFinite(o))return[];if(0<o)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++u<i;)a[u]=(e+u)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++u<i;)a[u]=(e-u)/o;return r&&a.reverse(),a}function On(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return 0<=i?(Hy<=a?10:Yy<=a?5:Gy<=a?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(Hy<=a?10:Yy<=a?5:Gy<=a?2:1)}function Sn(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return Hy<=a?i*=10:Yy<=a?i*=5:Gy<=a&&(i*=2),t<e?-i:i}function An(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function Cn(e,t,n){if(null==n&&(n=wn),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(1<=t)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}}function Rn(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n<=n)for(r=n;++a<i;)null!=(n=e[a])&&r<n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n<=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r<n&&(r=n);return r}function Tn(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);0<=--i;)for(t=(r=e[i]).length;0<=--t;)n[--o]=r[t];return n}function zn(e,n,r,i){var a,o,u,s,f=yn(e,i),l=f.length,c=n;for(u=0,s=Array(c);u<c;++u){for(o=a=0;o<l;++o)a+=f[~~(t.random()*l)];s[u]=a/l}return[Cn(s.sort(_n),r/2),Cn(s,1-r/2)]}function Dn(e,t){var n=yn(e,t);return[Cn(n.sort(_n),.25),Cn(n,.5),Cn(n,.75)]}function Nn(e,n){var r,i,a=NaN,o={mean:function(e){return arguments.length?(r=e||0,a=NaN,o):r},stdev:function(e){return arguments.length?(i=null==e?1:e,a=NaN,o):i},sample:function(){var e,n,o=0,u=0;if(a==a)return o=a,a=NaN,o;for(;0===(e=(o=2*t.random()-1)*o+(u=2*t.random()-1)*u)||1<e;);return n=Math.sqrt(-2*Math.log(e)/e),a=r+u*n*i,r+o*n*i},pdf:function(e){var t=Math.exp(Math.pow(e-r,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*t},cdf:function(e){var t,n=(e-r)/i,a=Math.abs(n);if(37<a)t=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(t=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),t/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):t=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return 0<n?1-t:t},icdf:function(e){if(e<=0||1<=e)return NaN;var t=2*e-1,n=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*n)+Math.log(1-Math.pow(t,2))/2,o=Math.log(1-t*t)/n,u=(0<t?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return r+i*Math.SQRT2*u}};return o.mean(e).stdev(n)}function Pn(e,n){var r=Nn(),i={},a=0;return i.data=function(t){return arguments.length?(a=(e=t)?t.length:0,i.bandwidth(n)):e},i.bandwidth=function(t){return arguments.length?(!(n=t)&&e&&(a=(r=e).length,o=Dn(r),u=(o[2]-o[0])/1.34,n=1.06*Math.min(Math.sqrt(function(e,t){var n,r,i=e.length,a=0,o=-1,u=0,s=0;if(null==t)for(;++o<i;)isNaN(n=wn(e[o]))||(s+=(r=n-u)*(n-(u+=r/++a)));else for(;++o<i;)isNaN(n=wn(t(e[o],o,e)))||(s+=(r=n-u)*(n-(u+=r/++a)));if(1<a)return s/(a-1)}(r)),u)*Math.pow(a,-.2)),i):n;var r,a,o,u},i.sample=function(){return e[~~(t.random()*a)]+n*r.sample()},i.pdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.pdf((t-e[o])/n);return i/n/a},i.cdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.cdf((t-e[o])/n);return i/a},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)}function $n(e,n){var r,i={},a=0;return i.weights=function(e){return arguments.length?(r=function(e){var t,n=[],r=0;for(t=0;t<a;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<a;++t)n[t]/=r;return n}(n=e||[]),i):n},i.distributions=function(t){return arguments.length?(t?(a=t.length,e=t):(a=0,e=[]),i.weights(n)):e},i.sample=function(){for(var n=t.random(),i=e[a-1],o=r[0],u=0;u<a-1;o+=r[++u])if(n<o){i=e[u];break}return i.sample()},i.pdf=function(t){for(var n=0,i=0;i<a;++i)n+=r[i]*e[i].pdf(t);return n},i.cdf=function(t){for(var n=0,i=0;i<a;++i)n+=r[i]*e[i].cdf(t);return n},i.icdf=function(){throw Error("Mixture icdf not supported.")},i.distributions(e).weights(n)}function Ln(e,n){null==n&&(n=null==e?1:e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(a=i-(r=e||0),o):r},o.max=function(e){return arguments.length?(a=(i=e||0)-r,o):i},o.sample=function(){return r+a*t.random()},o.pdf=function(e){return r<=e&&e<=i?1/a:0},o.cdf=function(e){return e<r?0:i<e?1:(e-r)/a},o.icdf=function(e){return 0<=e&&e<=1?r+e*a:NaN},o.min(e).max(n)}function qn(e){this._key=e?c(e):K,this.reset()}function jn(e){sn.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Fn(e){sn.call(this,null,e)}function Un(e,t,n){var r=e,i=t||[],a=n||[],o={},u=0;return{add:function(e){a.push(e)},remove:function(e){o[r(e)]=++u},size:function(){return i.length},data:function(e,t){return u&&(i=i.filter(function(e){return!o[r(e)]}),o={},u=0),t&&e&&i.sort(e),a.length&&(i=e?U(e,i,a.sort(e)):i.concat(a),a=[]),i}}}function In(e){sn.call(this,[],e)}function Bn(e){se.call(this,null,Wn,e)}function Wn(e){return this.value&&!e.modified()?this.value:C(e.fields,e.orders)}function Vn(e){sn.call(this,null,e)}function Hn(e){sn.call(this,null,e)}function Yn(e){sn.call(this,null,e)}function Gn(e){sn.call(this,[1/0,-1/0],e)}function Xn(e,t){se.call(this,e),this.parent=t}function Zn(e){sn.call(this,{},e),this._keys=N();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function Jn(e){se.call(this,null,Qn,e)}function Qn(e){return this.value&&!e.modified()?this.value:xv(e.name)?S(e.name).map(function(e){return c(e)}):c(e.name,e.as)}function Kn(e){sn.call(this,N(),e)}function er(e,t){return e?e.map(function(e,n){return t[n]||i(e)}):null}function tr(e){sn.call(this,[],e)}function nr(e){sn.call(this,[],e)}function rr(e){sn.call(this,null,e)}function ir(e){sn.call(this,[],e)}function ar(e){sn.call(this,[],e)}function or(e){jn.call(this,e)}function ur(e){se.call(this,null,sr,e)}function sr(e){return this.value&&!e.modified()?this.value:F(e.fields,e.flat)}function fr(e){sn.call(this,{},e)}function lr(e){se.call(this,null,cr,e)}function cr(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=1/0,a=-1/0,o=e.extents;for(t=0,n=o.length;t<n;++t)(r=o[t])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function dr(e){se.call(this,null,hr,e)}function hr(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function pr(e){sn.call(this,null,e)}function gr(e){jn.call(this,e)}function mr(e){Zn.call(this,e)}function vr(e){sn.call(this,null,e)}function yr(e){sn.call(this,null,e)}function br(e){sn.call(this,null,e)}function _r(e){sn.call(this,[],e),this.count=0}function xr(e){sn.call(this,null,e)}function wr(e){sn.call(this,null,e),this.modified(!0)}function kr(e){sn.call(this,N(),e)}function Mr(e){sn.call(this,null,e)}function Er(e){function t(e){S(a(e)).forEach(function(e){c[e]=1})}var n=S(e.ops),r=S(e.fields),u=S(e.params),s=S(e.as),f=this.outputs=[],l=this.windows=[],c={},d={},h=!0,p=[],g=[];t(e.sort),n.forEach(function(e,n){var a,c,m,v,y,b=r[n],_=i(b),x=dn(e,_,s[n]);if(t(b),f.push(x),cb.hasOwnProperty(e))l.push((a=e,c=r[n],m=u[n],v=x,{init:(y=cb[a](c,m)).init||Ev,update:function(e,t){t[v]=y.next(e)}}));else{if(null==b&&"count"!==e&&o("Null aggregate field specified."),"count"===e)return void p.push(x);h=!1;var w=d[_];w||((w=d[_]=[]).field=b,g.push(w)),w.push(hn(e,x))}}),(p.length||g.length)&&(this.cell=function(e,t,n){e=e.map(function(e){return mn(e,e.field)});var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var u=r.data=new qn;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(u&&u.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<i;++e)a[e].init()},r}(g,p,h)),this.inputs=Object.keys(c)}function Or(e){sn.call(this,{},e),this._mlen=0,this._mods=[]}function Sr(e,t,n){var r=n.sort,i=r&&!n.ignorePeers,a=n.frame||[null,0],o=e.data(r),u=o.length,s=0,f=i?xn(r):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||R(-1)};for(t.init();s<u;++s)Ar(l,a,s,u),i&&Cr(l,f),t.update(l,o[s])}function Ar(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Cr(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;0<n&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function Rr(e){this.clear(),e&&this.union(e)}function Tr(e,t){var n,r=[];return n={id:"gradient_"+Yb++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}function zr(e){this.mark=e,this.bounds=this.bounds||new Rr}function Dr(e){zr.call(this,e),this.items=this.items||[]}function Nr(e,t){return function(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}(e,t)||function(e,t){if(Hb)try{return new Hb(e,t)}catch(e){}return null}(e,t)||null}function Pr(){return("undefined"!=typeof Image?Image:null)||Hb&&Hb.Image||null||null}function $r(e){this._pending=0,this._loader=e||de()}function Lr(e){e._pending+=1}function qr(e){e._pending-=1}function jr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Fr(){return new jr}function Ur(e){return function(){return e}}function Ir(e){return 1<=e?s_:e<=-1?-s_:Math.asin(e)}function Br(e){return e.innerRadius}function Wr(e){return e.outerRadius}function Vr(e){return e.startAngle}function Hr(e){return e.endAngle}function Yr(e){return e&&e.padAngle}function Gr(e,t,n,r,i,a,o){var u=e-n,s=t-r,f=(o?a:-a)/a_(u*u+s*s),l=f*s,c=-f*u,d=e+l,h=t+c,p=n+l,g=r+c,m=(d+p)/2,v=(h+g)/2,y=p-d,b=g-h,_=y*y+b*b,x=i-a,w=d*g-p*h,k=(b<0?-1:1)*a_(n_(0,x*x*_-w*w)),M=(w*b-y*k)/_,E=(-w*y-b*k)/_,O=(w*b+y*k)/_,S=(-w*y+b*k)/_,A=M-m,C=E-v,R=O-m,T=S-v;return R*R+T*T<A*A+C*C&&(M=O,E=S),{cx:M,cy:E,x01:-l,y01:-c,x11:M*(i/x-1),y11:E*(i/x-1)}}function Xr(e){this._context=e}function Zr(e){return new Xr(e)}function Jr(e){return e[0]}function Qr(e){return e[1]}function Kr(){function e(e){var u,s,f,l=e.length,c=!1;for(null==i&&(o=a(f=Fr())),u=0;u<=l;++u)!(u<l&&r(s=e[u],u,e))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(s,u,e),+n(s,u,e));if(f)return o=null,f+""||null}var t=Jr,n=Qr,r=Ur(!0),i=null,a=Zr,o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Ur(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Ur(+t),e):n},e.defined=function(t){return arguments.length?(r="function"==typeof t?t:Ur(!!t),e):r},e.curve=function(t){return arguments.length?(a=t,null!=i&&(o=a(i)),e):a},e.context=function(t){return arguments.length?(null==t?i=o=null:o=a(i=t),e):i},e}function ei(){function e(e){var t,l,c,d,h,p=e.length,g=!1,m=new Array(p),v=new Array(p);for(null==u&&(f=s(h=Fr())),t=0;t<=p;++t){if(!(t<p&&o(d=e[t],t,e))===g)if(g=!g)l=t,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),c=t-1;l<=c;--c)f.point(m[c],v[c]);f.lineEnd(),f.areaEnd()}g&&(m[t]=+n(d,t,e),v[t]=+i(d,t,e),f.point(r?+r(d,t,e):m[t],a?+a(d,t,e):v[t]))}if(h)return f=null,h+""||null}function t(){return Kr().defined(o).curve(s).context(u)}var n=Jr,r=null,i=Ur(0),a=Qr,o=Ur(!0),u=null,s=Zr,f=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:Ur(+t),r=null,e):n},e.x0=function(t){return arguments.length?(n="function"==typeof t?t:Ur(+t),e):n},e.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Ur(+t),e):r},e.y=function(t){return arguments.length?(i="function"==typeof t?t:Ur(+t),a=null,e):i},e.y0=function(t){return arguments.length?(i="function"==typeof t?t:Ur(+t),e):i},e.y1=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:Ur(+t),e):a},e.lineX0=e.lineY0=function(){return t().x(n).y(i)},e.lineY1=function(){return t().x(n).y(a)},e.lineX1=function(){return t().x(r).y(i)},e.defined=function(t){return arguments.length?(o="function"==typeof t?t:Ur(!!t),e):o},e.curve=function(t){return arguments.length?(s=t,null!=u&&(f=s(u)),e):s},e.context=function(t){return arguments.length?(null==t?u=f=null:f=s(u=t),e):u},e}function ti(){}function ni(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ri(e){this._context=e}function ii(e){this._context=e}function ai(e){this._context=e}function oi(e,t){this._basis=new ri(e),this._beta=t}function ui(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function si(e,t){this._context=e,this._k=(1-t)/6}function fi(e,t){this._context=e,this._k=(1-t)/6}function li(e,t){this._context=e,this._k=(1-t)/6}function ci(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>o_){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>o_){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function di(e,t){this._context=e,this._alpha=t}function hi(e,t){this._context=e,this._alpha=t}function pi(e,t){this._context=e,this._alpha=t}function gi(e){this._context=e}function mi(e){return e<0?-1:1}function vi(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(mi(a)+mi(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function yi(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function bi(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function _i(e){this._context=e}function xi(e){this._context=new wi(e)}function wi(e){this._context=e}function ki(e){this._context=e}function Mi(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(a[i[0]=0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;0<=t;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Ei(e,t){this._context=e,this._t=t}function Oi(e,t,n){var r=b_.hasOwnProperty(e)&&b_[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function Si(e){var t,n,r,i,a,o,u,s,f,l,c,d=[];for(s=0,l=(t=e.slice().replace(x_[0],"###$1").split(x_[1]).slice(1)).length;s<l;++s){for(r=(n=t[s]).slice(1).trim().replace(x_[2],"$1###$2").split(x_[3]),i=[o=n.charAt(0)],f=0,c=r.length;f<c;++f)(a=+r[f])===a&&i.push(a);if(u=__[o.toLowerCase()],i.length-1>u)for(f=1,c=i.length;f<c;f+=u)d.push([o].concat(i.slice(f,f+u)));else d.push(i)}return d}function Ai(e){var t=M_.call(e);if(k_[t])return k_[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],f=e[7],l=f*o,c=-s*u,d=s*o,h=f*u,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*g,w=r+g+_*p,k=n+m,M=r+v,E=k+_*v,O=M-_*m;return k_[t]=[l*x+c*w,d*x+h*w,l*E+c*O,d*E+h*O,l*k+c*M,d*k+h*M]}function Ci(e,t){var n=E_[0]=e[0];if("a"===n||"A"===n)E_[1]=t*e[1],E_[2]=t*e[2],E_[6]=t*e[6],E_[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)E_[r]=t*e[r];return E_}function Ri(e,t,n,r,i){var a,o,u,s,f,l=null,c=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=Ci(a,i)),a[0]){case"l":c+=a[1],d+=a[2],e.lineTo(c+n,d+r);break;case"L":c=a[1],d=a[2],e.lineTo(c+n,d+r);break;case"h":c+=a[1],e.lineTo(c+n,d+r);break;case"H":c=a[1],e.lineTo(c+n,d+r);break;case"v":d+=a[1],e.lineTo(c+n,d+r);break;case"V":d=a[1],e.lineTo(c+n,d+r);break;case"m":c+=a[1],d+=a[2],e.moveTo(c+n,d+r);break;case"M":c=a[1],d=a[2],e.moveTo(c+n,d+r);break;case"c":o=c+a[5],u=d+a[6],h=c+a[3],p=d+a[4],e.bezierCurveTo(c+a[1]+n,d+a[2]+r,h+n,p+r,o+n,u+r),c=o,d=u;break;case"C":c=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,c+n,d+r);break;case"s":o=c+a[3],u=d+a[4],h=2*c-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,c+a[1]+n,d+a[2]+r,o+n,u+r),h=c+a[1],p=d+a[2],c=o,d=u;break;case"S":o=a[3],u=a[4],h=2*c-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,u+r),c=o,d=u,h=a[1],p=a[2];break;case"q":o=c+a[3],u=d+a[4],h=c+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,u+r),c=o,d=u;break;case"Q":o=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),c=o,d=u,h=a[1],p=a[2];break;case"t":o=c+a[1],u=d+a[2],null===l[0].match(/[QqTt]/)?(h=c,p=d):"t"===l[0]?(h=2*c-s,p=2*d-f):"q"===l[0]&&(h=2*c-h,p=2*d-p),s=h,f=p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),d=u,h=(c=o)+a[1],p=d+a[2];break;case"T":o=a[1],u=a[2],h=2*c-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),c=o,d=u;break;case"a":Ti(e,c+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+c+n,a[7]+d+r]),c+=a[6],d+=a[7];break;case"A":Ti(e,c+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),c=a[6],d=a[7];break;case"z":case"Z":e.closePath()}l=a}}function Ti(e,t,n,r){for(var i=function(e,t,n,r,i,a,o,u,s){var f=M_.call(arguments);if(w_[f])return w_[f];var l=o*(Math.PI/180),c=Math.sin(l),d=Math.cos(l),h=d*(u-e)*.5+c*(s-t)*.5,p=d*(s-t)*.5-c*(u-e)*.5,g=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);1<g&&(n*=g=Math.sqrt(g),r*=g);var m=d/n,v=c/n,y=-c/r,b=d/r,_=m*u+v*s,x=y*u+b*s,w=m*e+v*t,k=y*e+b*t,M=1/((w-_)*(w-_)+(k-x)*(k-x))-.25;M<0&&(M=0);var E=Math.sqrt(M);a==i&&(E=-E);var O=.5*(_+w)-E*(k-x),S=.5*(x+k)+E*(w-_),A=Math.atan2(x-S,_-O),C=Math.atan2(k-S,w-O)-A;C<0&&1===a?C+=2*Math.PI:0<C&&0===a&&(C-=2*Math.PI);for(var R=Math.ceil(Math.abs(C/(.5*Math.PI+.001))),T=[],z=0;z<R;++z){var D=A+z*C/R,N=A+(z+1)*C/R;T[z]=[O,S,D,N,n,r,c,d]}return w_[f]=T}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=Ai(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}function zi(e){return A_.hasOwnProperty(e)?A_[e]:function(e){if(!C_.hasOwnProperty(e)){var t=Si(e);C_[e]={draw:function(e,n){Ri(e,t,0,0,Math.sqrt(n)/2)}}}return C_[e]}(e)}function Di(e){return e.x}function Ni(e){return e.y}function Pi(e){return e.width}function $i(e){return e.height}function Li(e){return function(){return e}}function qi(){function e(e,u,s){var f,l=null!=u?u:+t.call(this,e),c=null!=s?s:+n.call(this,e),d=+r.call(this,e),h=+i.call(this,e),p=+a.call(this,e);if(o||(o=f=Fr()),p<=0)o.rect(l,c,d,h);else{var g=l+d,m=c+h;o.moveTo(l+p,c),o.lineTo(g-p,c),o.quadraticCurveTo(g,c,g,c+p),o.lineTo(g,m-p),o.quadraticCurveTo(g,m,g-p,m),o.lineTo(l+p,m),o.quadraticCurveTo(l,m,l,m-p),o.lineTo(l,c+p),o.quadraticCurveTo(l,c,l+p,c),o.closePath()}if(f)return o=null,f+""||null}var t=Di,n=Ni,r=Pi,i=$i,a=Li(0),o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Li(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Li(+t),e):n},e.width=function(t){return arguments.length?(r="function"==typeof t?t:Li(+t),e):r},e.height=function(t){return arguments.length?(i="function"==typeof t?t:Li(+t),e):i},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:Li(+t),e):a},e.context=function(t){return arguments.length?(o=null==t?null:t,e):o},e}function ji(){function e(e,t,n){var r=n/2;if(o){var i=s-t,a=e-u;if(i||a){var c=Math.sqrt(i*i+a*a),d=(i/=c)*f,h=(a/=c)*f,p=Math.atan2(a,i);l.moveTo(u-d,s-h),l.lineTo(e-i*r,t-a*r),l.arc(e,t,r,p-R_,p),l.lineTo(u+d,s+h),l.arc(u,s,f,p,p+R_)}else l.arc(e,t,r,0,2*R_);l.closePath()}else o=1;u=e,s=t,f=r}function t(t){var u,s,f,c=t.length,d=!1;for(null==l&&(l=f=Fr()),u=0;u<=c;++u)!(u<c&&a(s=t[u],u,t))===d&&(d=!d)&&(o=0),d&&e(+n(s,u,t),+r(s,u,t),+i(s,u,t));if(f)return l=null,f+""||null}var n,r,i,a,o,u,s,f,l=null;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.context=function(e){return arguments.length?(l=null==e?null:e,t):l},t}function Fi(e){return e.x||0}function Ui(e){return e.y||0}function Ii(e){return e.cornerRadius||0}function Bi(e){return!(!1===e.defined)}function Wi(e,t,n,r){return P_.context(e)(t,n,r)}function Vi(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e}function Hi(e){return y_=e,Hi}function Yi(){}function Gi(e,t){y_.add(e,t)}function Xi(e,t,n){return n.id?function(e,t,n){for(var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,u=n.x1+t.x2*r,s=n.y1+t.y2*i,f=t.stops,l=0,c=f.length,d=e.createLinearGradient(a,o,u,s);l<c;++l)d.addColorStop(f[l].offset,f[l].color);return d}(e,n,t.bounds):n}function Zi(e,t,n){return 0<(n*=null==t.fillOpacity?1:t.fillOpacity)&&(e.globalAlpha=n,e.fillStyle=Xi(e,t,t.fill),!0)}function Ji(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&0<(n*=null==t.strokeOpacity?1:t.strokeOpacity)&&(e.globalAlpha=n,e.strokeStyle=Xi(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||B_),e.lineDashOffset=t.strokeDashOffset||0),!0)}function Qi(e,t){return e.zindex-t.zindex||e.index-t.index}function Ki(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(Qi)}function ea(e,t){var n,r,i=e.items;if(i&&i.length){var a=Ki(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function ta(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=Ki(e);for(a&&a.length&&(i=a),r=i.length;0<=--r;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;0<=--r;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function na(e){return function(t,n,r){ea(n,function(n){r&&!r.intersects(n.bounds)||ra(e,t,n,n)})}}function ra(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&Zi(t,n,i)&&t.fill(),n.stroke&&Ji(t,n,i)&&t.stroke()))}function ia(e){return e||(e=W_),function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,ta(n,function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return e(t,n,r,i,a,o)?n:void 0})}}function aa(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,f=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(f&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function oa(e){return ia(aa(e))}function ua(e,t){return"translate("+e+","+t+")"}function sa(e){return ua(e.x||0,e.y||0)}function fa(e,t){function n(e,n){var r=n.x||0,i=n.y||0;e.translate(r,i),e.beginPath(),t(e,n),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",sa(n)),
e("d",t(null,n))},bound:function(e,n){return t(Hi(e),n),Vi(e,n).translate(n.x||0,n.y||0)},draw:na(n),pick:oa(n)}}function la(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var i,a=aa(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(Hi(e),r),Vi(e,r[0]))},draw:(i=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||ra(i,e,t.items[0],t.items)}),pick:function(e,t,n,r,i,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(i,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,a(e,u,n,r)?u[0]:null)},tip:n}}function ca(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+Y_++),o=i.clipping[a]||(i.clipping[a]={id:a});return A(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function da(e,t){var n=t.stroke?G_:0;e.beginPath(),Wi(e,t,n,n)}function ha(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function pa(e,t){return"center"===e?t/2:"right"===e?t:0}function ga(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function ma(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=Si(n)).path=n),Ri(e,r,t.x,t.y)}function va(e,t){e.beginPath(),Wi(e,t)}function ya(e,t,n){var r,i,a,o;return!(!t.stroke||!Ji(e,t,n)||(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),0))}function ba(e){return I_=ka(e),_a(Ea(e))}function _a(e){return~~(.8*e.length*I_)}function xa(e){return U_.font=Oa(e),wa(Ea(e))}function wa(e){return U_.measureText(e).width}function ka(e){return null!=e.fontSize?e.fontSize:11}function Ma(e){U_=e&&(U_=Nr(1,1))?U_.getContext("2d"):null,ix.width=U_?xa:ba}function Ea(e){var t=e.text;return null==t?"":0<e.limit?function(e){var t,n=+e.limit,r=e.text+"";if(U_?(U_.font=Oa(e),t=wa):(I_=ka(e),t=_a),t(r)<n)return r;var i,a=e.ellipsis||"",o="rtl"===e.dir,u=0,s=r.length;if(n-=t(a),o){for(;u<s;)i=u+s>>>1,t(r.slice(i))>n?u=i+1:s=i;return a+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),t(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+a}(e):t+""}function Oa(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/"/g,"'")),(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ka(e)+"px "+(n||"sans-serif")}function Sa(e){var t=e.baseline,n=ka(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}function Aa(e,t,n){var r,i,a=ix.height(t),o=t.align,u=t.radius||0,s=t.x||0,f=t.y||0,l=t.dx||0,c=(t.dy||0)+Sa(t)-Math.round(.8*a);return u&&(i=(t.theta||0)-Math.PI/2,s+=u*Math.cos(i),f+=u*Math.sin(i)),r=ix.width(t),"center"===o?l-=r/2:"right"===o&&(l-=r),e.set(l+=s,c+=f,l+r,c+a),t.angle&&!n&&e.rotate(t.angle*Math.PI/180,s,f),e.expand(n||!r?0:1)}function Ca(e,t,n){var r=ux[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Rr),e,n)}function Ra(e,t,n){var r,i,a,o,u=ux[e.marktype],s=u.bound,f=e.items,l=f&&f.length;if(u.nested)return l?a=f[0]:(sx.mark=e,a=sx),o=Ca(a,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new Rr,l)for(r=0,i=f.length;r<i;++r)t.union(Ca(f[r],s,n));return e.bounds=t}function Ta(e,t){return JSON.stringify(e,fx,t)}function za(e){return function e(t){var n,r,i,a=t.marktype,o=t.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=t,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&e(o[r]);return a&&Ra(t),t}("string"==typeof e?JSON.parse(e):e)}function Da(e){arguments.length?this.root=za(e):(this.root=Na({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Dr(this.root)])}function Na(e,t){return{bounds:new Rr,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function Pa(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function $a(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function La(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=Pa(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function qa(e,t){for(var n=e.childNodes,r=n.length;t<r;)e.removeChild(n[--r]);return e}function ja(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Fa(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Ua(e,t){this._active=null,this._handlers={},this._loader=e||de(),this._tooltip=t||Ia}function Ia(e,t,n,r){e.element().setAttribute("title",r||"")}function Ba(e){this._el=null,this._bgcolor=null,this._loader=new $r(e)}function Wa(e,t){Ua.call(this,e,t),this._down=null,this._touch=null,this._first=!0}function Va(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r)),this.fire(e,r)}}function Ha(e){return function(t){this.fire(e,t),this._active=null}}function Ya(e){Ba.call(this,e),this._redraw=!1,this._dirty=new Rr}function Ga(e,t){Ua.call(this,e,t);var n=this;n._hrefHandler=Xa(n,function(e,t){t&&t.href&&n.handleHref(e,t,t.href)}),n._tooltipHandler=Xa(n,function(e,t){n.handleTooltip(e,t,e.type!==px)})}function Xa(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function Za(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function Ja(e){return"</"+e+">"}function Qa(e){Ba.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Ka(e,t,n){var r,i,a;for((e=La(e,n,"linearGradient",Ex)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)(a=La(e,r,"stop",Ex)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);qa(e,r)}function eo(e,t,n){var r;(e=La(e,n,"clipPath",Ex)).setAttribute("id",t.id),t.path?(r=La(e,0,"path",Ex)).setAttribute("d",t.path):((r=La(e,0,"rect",Ex)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height))}function to(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function no(e,t,n,r,i){var a,o,u,s=e._svg;if(!s&&(s=Pa(a=t.ownerDocument,r,Ex),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},"g"===r))){var f=Pa(a,"path",Ex);f.setAttribute("class","background"),s.appendChild(f),f.__data__=e;var l=Pa(a,"g",Ex);s.appendChild(l),l.__data__=e}return(s.ownerSVGElement!==i||(u=(o=e).mark||o.group)&&1<u.items.length&&s.previousSibling!==n)&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function ro(e,t,n){t!==Cx[e]&&(null!=t?n?Ax.setAttributeNS(n,e,t):Ax.setAttribute(e,t):n?Ax.removeAttributeNS(n,e):Ax.removeAttribute(e),Cx[e]=t)}function io(e){Ba.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function ao(e,t,n,r){Tx[r||e]=t}function oo(e,t,n,r){if(null==e)return"";var i,a,o,u,s,f="";for("bgrect"===n&&!1===t.interactive&&(f+="pointer-events: none; "),"text"===n&&(f+="font: "+Oa(e)+"; "),i=0,a=Mx.length;i<a;++i)o=Mx[i],u=kx[o],null==(s=e[o])?"fill"===u&&(f+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(s.id&&(s="url(#"+(r.gradient[s.id]=s).id+")"),f+=u+": "+s+"; "):f+=u+": none; ";return f?'style="'+f.trim()+'"':null}function uo(e,t){return e=String(e||"").toLowerCase(),1<arguments.length?(Px[e]=t,this):Px[e]}function so(e){var t=e.clip;if(A(t))t(Hi($x.clear()));else{if(!t)return;$x.set(0,0,e.group.width,e.group.height)}e.bounds.intersect($x)}function fo(e,t,n){return e===t||("path"===n?lo(e,t):e instanceof Date&&t instanceof Date?+e==+t:q(e)&&q(t)?Math.abs(e-t)<=Lx:e&&t&&(s(e)||s(t))?null!=e&&null!=t&&function(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;0<=r;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;0<=r;r--)if(n=i[r],!fo(e[n],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function lo(e,t){return fo(Si(e),Si(t))}function co(e){sn.call(this,null,e)}function ho(e,t,n){return t(e.bounds.clear(),e,n)}function po(e){sn.call(this,0,e)}function go(e){sn.call(this,null,e)}function mo(e){sn.call(this,null,e)}function vo(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function yo(e){for(var t,n=1,r=e.length,i=e[0].bounds;n<r;i=t,++n)if(vo(i,t=e[n].bounds))return!0}function bo(e){var t=e.bounds;return 1<t.width()&&1<t.height()}function _o(e){sn.call(this,null,e)}function xo(e,t){for(var n=0,r=e.length;n<r;++n)t.push(e[n])}function wo(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function ko(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Mo(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function Eo(e,t){return e.bounds[t]}function Oo(e,t,n){var r=s(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function So(e){return e<0?Math.ceil(-e):0}function Ao(e,t,n){function r(e,t){return Math.floor(Math.min(e,t))}function i(e,t){return Math.ceil(Math.max(e,t))}var a,o,u,s,f,l,c,d,h,p,g,m,v=function(e){for(var t,n,r=e.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(n=(t=r[a]).items,t.marktype===Ob)switch(t.role){case Sb:case Ab:break;case Cb:xo(n,o.rowheaders);break;case Rb:xo(n,o.rowfooters);break;case zb:xo(n,o.colheaders);break;case Db:xo(n,o.colfooters);break;case Tb:o.rowtitle=n[0];break;case Nb:o.coltitle=n[0];break;default:xo(n,o.marks)}return o}(t),y=v.marks,b="flush"===n.bounds,_=b?wo:ko,x=new Rr(0,0,0,0),w=Oo(n.align,Bb),k=Oo(n.align,Wb),M=Oo(n.padding,Bb),E=Oo(n.padding,Wb),O=n.offset,S=t.columns||n.columns||y.length,A=S<0?1:Math.ceil(y.length/S),C=A*S,R=[],T=[],z=0,D=[],N=[],P=0,$=y.length;for(o=0;o<S;++o)T[o]=0;for(o=0;o<A;++o)N[o]=0;for(o=0;o<$;++o)f=_(y[o]),u=o%S,s=~~(o/S),c=Math.ceil(_(y[o]).x2),d=Math.ceil(_(y[o]).y2),z=Math.max(z,c),P=Math.max(P,d),T[u]=Math.max(T[u],c),N[s]=Math.max(N[s],d),R.push(M+So(f.x1)),D.push(E+So(f.y1)),e.dirty(y[o]);for(o=0;o<$;++o)o%S==0&&(R[o]=0),o<S&&(D[o]=0);if("each"===w)for(u=1;u<S;++u){for(m=0,o=u;o<$;o+=S)m<R[o]&&(m=R[o]);for(o=u;o<$;o+=S)R[o]=m+T[u-1]}else if(w===Ib){for(o=m=0;o<$;++o)o%S&&m<R[o]&&(m=R[o]);for(o=0;o<$;++o)o%S&&(R[o]=m+z)}else for(w=!1,u=1;u<S;++u)for(o=u;o<$;o+=S)R[o]+=T[u-1];if("each"===k)for(s=1;s<A;++s){for(m=0,a=(o=s*S)+S;o<a;++o)m<D[o]&&(m=D[o]);for(o=s*S;o<a;++o)D[o]=m+N[s-1]}else if(k===Ib){for(m=0,o=S;o<$;++o)m<D[o]&&(m=D[o]);for(o=S;o<$;++o)D[o]=m+P}else for(k=!1,s=1;s<A;++s)for(a=(o=s*S)+S;o<a;++o)D[o]+=N[s-1];for(o=h=0;o<$;++o)c=(l=y[o]).x||0,l.x=h=R[o]+(o%S?h:0),l.bounds.translate(h-c,0);for(u=0;u<S;++u)for(p=0,o=u;o<$;o+=S)d=(l=y[o]).y||0,l.y=p+=D[o],l.bounds.translate(0,p-d);if(Oo(n.center,Bb)&&1<A&&w)for(o=0;o<$;++o)l=y[o],0<(h=(f=w===Ib?z:T[o%S])-_(l).x2)&&(l.x+=c=h/2,l.bounds.translate(c,0));if(Oo(n.center,Wb)&&1!==S&&k)for(o=0;o<$;++o)l=y[o],0<(p=(f=k===Ib?P:N[~~(o/S)])-_(l).y2)&&(l.y+=d=p/2,l.bounds.translate(0,d));for(o=0;o<$;++o)y[o].mark.bounds.clear();for(o=0;o<$;++o)l=y[o],e.dirty(l),x.union(l.mark.bounds.union(l.bounds));_=b?Mo:Eo,g=Oo(n.headerBand,Wb,null),h=Co(e,v.rowheaders,y,S,A,-Oo(O,"rowHeader"),r,0,_,"x1",0,S,1,g),g=Oo(n.headerBand,Bb,null),p=Co(e,v.colheaders,y,S,S,-Oo(O,"columnHeader"),r,1,_,"y1",0,1,S,g),g=Oo(n.footerBand,Wb,null),Co(e,v.rowfooters,y,S,A,Oo(O,"rowFooter"),i,0,_,"x2",S-1,S,1,g),g=Oo(n.footerBand,Bb,null),Co(e,v.colfooters,y,S,S,Oo(O,"columnFooter"),i,1,_,"y2",C-S,1,S,g),v.rowtitle&&(m=h-Oo(O,"rowTitle"),g=Oo(n.titleBand,Wb,.5),Ro(e,v.rowtitle,m,0,x,g)),v.coltitle&&(m=p-Oo(O,"columnTitle"),g=Oo(n.titleBand,Bb,.5),Ro(e,v.coltitle,m,1,x,g))}function Co(e,t,n,r,i,a,o,u,s,f,l,c,d,h){var p,g,m,v,y,b,_,x,w,k=n.length,M=0,E=0;if(!k)return M;for(p=l;p<k;p+=c)n[p]&&(M=o(M,s(n[p],f)));if(!t.length)return M;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),M+=a,g=0,v=t.length;g<v;++g)e.dirty(t[g]),t[g].mark.bounds.clear();for(p=l,g=0,v=t.length;g<v;++g,p+=c){for(y=(b=t[g]).mark.bounds,m=p;0<=m&&null==(_=n[m]);m-=d);u?(x=null==h?_.x:Math.round(_.bounds.x1+h*_.bounds.width()),w=M):(x=M,w=null==h?_.y:Math.round(_.bounds.y1+h*_.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,e.dirty(b),E=o(E,y[f])}return E}function Ro(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function To(e){sn.call(this,null,e)}function zo(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Do(e,t,n,r){var i,a,o,u,s=t.items[0],f=s.datum,l=f.orient,c=(u=+(o=f).grid,[o.ticks?u++:-1,o.labels?u++:-1,u+ +o.domain]),d=s.range,h=s.offset,p=s.position,g=s.minExtent,m=s.maxExtent,v=f.title&&s.items[c[2]].items[0],y=s.titlePadding,b=s.bounds,_=0,x=0;switch(Ix.clear().union(b),b.clear(),-1<(i=c[0])&&b.union(s.items[i].bounds),-1<(i=c[1])&&b.union(s.items[i].bounds),l){case mb:_=p||0,x=-h,a=Math.max(g,Math.min(m,-b.y1)),v&&(a=No(v,a,y,0,-1,b)),b.add(0,-a).add(d,0);break;case vb:_=-h,x=p||0,a=Math.max(g,Math.min(m,-b.x1)),v&&(a=No(v,a,y,1,-1,b)),b.add(-a,0).add(0,d);break;case yb:_=n+h,x=p||0,a=Math.max(g,Math.min(m,b.x2)),v&&(a=No(v,a,y,1,1,b)),b.add(0,0).add(a,d);break;case bb:_=p||0,x=r+h,a=Math.max(g,Math.min(m,b.y2)),v&&(a=No(v,a,y,0,1,b)),b.add(0,0).add(d,a);break;default:_=s.x,x=s.y}return Vi(b.translate(_,x),s),zo(s,"x",_+Ux)|zo(s,"y",x+Ux)&&(s.bounds=Ix,e.dirty(s),s.bounds=b,e.dirty(s)),s.mark.bounds.clear().union(b)}function No(e,t,n,r,i,a){var o=e.bounds,u=0,s=0;return e.auto?(t+=n,r?u=(e.x||0)-(e.x=i*t):s=(e.y||0)-(e.y=i*t),o.translate(-u,-s),e.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),t+=o.width()):(a.add(o.x1,0).add(o.x2,0),t+=o.height())):a.union(o),t}function Po(e,t,n,r,i,a,o){var u,s,f,l,c,d=t.items[0],h=d.datum,p=h.orient,g=d.offset,m=d.bounds,v=0,y=0;switch(p===mb||p===bb?(f=i,v=n[p]):p!==vb&&p!==yb||(f=r,y=n[p]),Ix.clear().union(m),m.clear(),d.items.forEach(function(e){m.union(e.bounds)}),u=Math.round(m.width())+2*d.padding-1,s=Math.round(m.height())+2*d.padding-1,h.type===$b&&(l=d.items[0].items[0].items[0].items,c=l.reduce(function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e},{}),l.forEach(function(e){e.width=c[e.column],e.height=e.bounds.y2-e.y})),p){case vb:v-=n.leftWidth+g-Math.floor(f.x1),n.left+=s+n.margin;break;case yb:v+=g+Math.ceil(f.x2),n.right+=s+n.margin;break;case mb:y-=s+g-Math.floor(f.y1),n.top+=u+n.margin;break;case bb:y+=g+Math.ceil(f.y2),n.bottom+=u+n.margin;break;case _b:v+=g,y+=g;break;case xb:v+=a-u-g,y+=g;break;case wb:v+=g,y+=o-s-g;break;case kb:v+=a-u-g,y+=o-s-g;break;default:v=d.x,y=d.y}return Vi(m.set(v,y,v+u,y+s),d),zo(d,"x",v)|zo(d,"width",u)|zo(d,"y",y)|zo(d,"height",s)&&(d.bounds=Ix,e.dirty(d),d.bounds=m,e.dirty(d)),d.mark.bounds.clear().union(m)}function $o(e,t,n){var r=e-t+2*n;return e?0<r?r:1:0}function Lo(){}function qo(e,t){var n=new Lo;if(e instanceof Lo)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function jo(){function e(r,a,o,u){if(a>=i.length)return null!=t&&r.sort(t),null!=n?n(r):r;for(var s,f,l,c=-1,d=r.length,h=i[a++],p=qo(),g=o();++c<d;)(l=p.get(s=h(f=r[c])+""))?l.push(f):p.set(s,[f]);return p.each(function(t,n){u(g,n,e(t,a,o,u))}),g}var t,n,r,i=[],a=[];return r={object:function(t){return e(t,0,Fo,Uo)},map:function(t){return e(t,0,Io,Bo)},entries:function(t){return function e(t,r){if(++r>i.length)return t;var o,u=a[r-1];return null!=n&&r>=i.length?o=t.entries():(o=[],t.each(function(t,n){o.push({key:n,values:e(t,r)})})),null!=u?o.sort(function(e,t){return u(e.key,t.key)}):o}(e(t,0,Io,Bo),0)},key:function(e){return i.push(e),r},sortKeys:function(e){return a[i.length-1]=e,r},sortValues:function(e){return t=e,r},rollup:function(e){return n=e,r}}}function Fo(){return{}}function Uo(e,t,n){e[t]=n}function Io(){return qo()}function Bo(e,t,n){e.set(t,n)}function Wo(){}function Vo(e){function t(t){var a=t+"",o=n.get(a);if(!o){if(i!==uw)return i;n.set(a,o=r.push(t))}return e[(o-1)%e.length]}var n=qo(),r=[],i=uw;return e=null==e?[]:ow.call(e),t.domain=function(e){if(!arguments.length)return r.slice();r=[],n=qo();for(var i,a,o=-1,u=e.length;++o<u;)n.has(a=(i=e[o])+"")||n.set(a,r.push(i));return t},t.range=function(n){return arguments.length?(e=ow.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(i=e,t):i},t.copy=function(){return Vo().domain(r).range(e).unknown(i)},t}function Ho(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Yo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Go(){}function Xo(e){var t;return e=(e+"").trim().toLowerCase(),(t=dw.exec(e))?new eu((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=hw.exec(e))?Zo(parseInt(t[1],16)):(t=pw.exec(e))?new eu(t[1],t[2],t[3],1):(t=gw.exec(e))?new eu(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=mw.exec(e))?Jo(t[1],t[2],t[3],t[4]):(t=vw.exec(e))?Jo(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=yw.exec(e))?nu(t[1],t[2]/100,t[3]/100,1):(t=bw.exec(e))?nu(t[1],t[2]/100,t[3]/100,t[4]):_w.hasOwnProperty(e)?Zo(_w[e]):"transparent"===e?new eu(NaN,NaN,NaN,0):null}function Zo(e){return new eu(e>>16&255,e>>8&255,255&e,1)}function Jo(e,t,n,r){return r<=0&&(e=t=n=NaN),new eu(e,t,n,r)}function Qo(e){return e instanceof Go||(e=Xo(e)),e?new eu((e=e.rgb()).r,e.g,e.b,e.opacity):new eu}function Ko(e,t,n,r){return 1===arguments.length?Qo(e):new eu(e,t,n,null==r?1:r)}function eu(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function tu(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function nu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new iu(e,t,n,r)}function ru(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof iu)return new iu(e.h,e.s,e.l,e.opacity);if(e instanceof Go||(e=Xo(e)),!e)return new iu;if(e instanceof iu)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(o=t===a?(n-r)/u+6*(n<r):n===a?(r-t)/u+2:(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=0<s&&s<1?0:o,new iu(o,u,s,e.opacity)}(e):new iu(e,t,n,null==r?1:r)}function iu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function au(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function ou(e){if(e instanceof su)return new su(e.l,e.a,e.b,e.opacity);if(e instanceof pu){if(isNaN(e.h))return new su(e.l,0,0,e.opacity);var t=e.h*xw;return new su(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof eu||(e=Qo(e));var n,r,i=du(e.r),a=du(e.g),o=du(e.b),u=fu((.2225045*i+.7168786*a+.0606169*o)/Mw);return i===a&&a===o?n=r=u:(n=fu((.4360747*i+.3850649*a+.1430804*o)/kw),r=fu((.0139322*i+.0971045*a+.7141733*o)/Ew)),new su(116*u-16,500*(n-u),200*(u-r),e.opacity)}function uu(e,t,n,r){return 1===arguments.length?ou(e):new su(e,t,n,null==r?1:r)}function su(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function fu(e){return Cw<e?Math.pow(e,1/3):e/Aw+Ow}function lu(e){return Sw<e?e*e*e:Aw*(e-Ow)}function cu(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function du(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hu(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof pu)return new pu(e.h,e.c,e.l,e.opacity);if(e instanceof su||(e=ou(e)),0===e.a&&0===e.b)return new pu(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*ww;return new pu(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new pu(e,t,n,null==r?1:r)}function pu(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function gu(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof mu)return new mu(e.h,e.s,e.l,e.opacity);e instanceof eu||(e=Qo(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=($w*r+Nw*t-Pw*n)/($w+Nw-Pw),a=r-i,o=(Dw*(n-i)-Tw*a)/zw,u=Math.sqrt(o*o+a*a)/(Dw*i*(1-i)),s=u?Math.atan2(o,a)*ww-120:NaN;return new mu(s<0?s+360:s,u,i,e.opacity)}(e):new mu(e,t,n,null==r?1:r)}function mu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function vu(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function yu(e){var t=e.length-1;return function(n){var r=n<=0?n=0:1<=n?t-(n=1):Math.floor(n*t),i=e[r],a=e[r+1],o=0<r?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return vu((n-r/t)*t,o,i,a,u)}}function bu(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return vu((n-r/t)*t,i,a,o,u)}}function _u(e){return function(){return e}}function xu(e,t){return function(n){return e+n*t}}function wu(e,t){var n=t-e;return n?xu(e,180<n||n<-180?n-360*Math.round(n/360):n):_u(isNaN(e)?t:e)}function ku(e){return 1==(e=+e)?Mu:function(t,n){return n-t?(r=t,i=n,a=e,r=Math.pow(r,a),i=Math.pow(i,a)-r,a=1/a,function(e){return Math.pow(r+e*i,a)}):_u(isNaN(t)?n:t);var r,i,a}}function Mu(e,t){var n=t-e;return n?xu(e,n):_u(isNaN(e)?t:e)}function Eu(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=Ko(t[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=e(a),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=u(e),r+""}}}function Ou(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Tu(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function Su(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}}function Au(e,t){return t-=e=+e,function(n){return e+t*n}}function Cu(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Tu(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function Ru(e,t){var n,r,i,a,o,u=Vw.lastIndex=Hw.lastIndex=0,s=-1,f=[],l=[];for(e+="",t+="";(n=Vw.exec(e))&&(r=Hw.exec(t));)(i=r.index)>u&&(i=t.slice(u,i),f[s]?f[s]+=i:f[++s]=i),(n=n[0])===(r=r[0])?f[s]?f[s]+=r:f[++s]=r:(f[++s]=null,l.push({i:s,x:Au(n,r)})),u=Hw.lastIndex;return u<t.length&&(i=t.slice(u),f[s]?f[s]+=i:f[++s]=i),f.length<2?l[0]?(o=l[0].x,function(e){return o(e)+""}):(a=t,function(){return a}):(t=l.length,function(e){for(var n,r=0;r<t;++r)f[(n=l[r]).i]=n.x(e);return f.join("")})}function Tu(e,t){var n,r=typeof t;return null==t||"boolean"===r?_u(t):("number"===r?Au:"string"===r?(n=Xo(t))?(t=n,Iw):Ru:t instanceof Xo?Iw:t instanceof Date?Su:Array.isArray(t)?Ou:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Cu:Au)(e,t)}function zu(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}}function Du(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Yw,skewX:Math.atan(s)*Yw,scaleX:o,scaleY:u}}function Nu(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var u,s,f,l,c,d,h,p,g=[],m=[];return a=e(a),o=e(o),function(e,r,i,a,o,u){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:Au(e,i)},{i:s-2,x:Au(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,g,m),u=a.rotate,s=o.rotate,f=g,l=m,u!==s?(180<u-s?s+=360:180<s-u&&(u+=360),l.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Au(u,s)})):s&&f.push(i(f)+"rotate("+s+r),c=a.skewX,d=o.skewX,h=g,p=m,c!==d?p.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Au(c,d)}):d&&h.push(i(h)+"skewX("+d+r),function(e,t,n,r,a,o){if(e!==n||t!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:Au(e,n)},{i:u-2,x:Au(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,g,m),a=o=null,function(e){for(var t,n=-1,r=m.length;++n<r;)g[(t=m[n]).i]=t.x(e);return g.join("")}}}function Pu(e){return((e=Math.exp(e))+1/e)/2}function $u(e){return function(t,n){var r=e((t=ru(t)).h,(n=ru(n)).h),i=Mu(t.s,n.s),a=Mu(t.l,n.l),o=Mu(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function Lu(e){return function(t,n){var r=e((t=hu(t)).h,(n=hu(n)).h),i=Mu(t.c,n.c),a=Mu(t.l,n.l),o=Mu(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function qu(e){return function t(n){function r(t,r){var i=e((t=gu(t)).h,(r=gu(r)).h),a=Mu(t.s,r.s),o=Mu(t.l,r.l),u=Mu(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}function ju(e){return function(){return e}}function Fu(e){return+e}function Uu(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ju(t)}function Iu(e,t,n,r){var i=e[0],a=e[1],o=t[0],u=t[1];return a<i?(i=n(a,i),o=r(u,o)):(i=n(i,a),o=r(o,u)),function(e){return o(i(e))}}function Bu(e,t,n,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),u=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<i;)a[u]=n(e[u],e[u+1]),o[u]=r(t[u],t[u+1]);return function(t){var n=Wy(e,t,1,i)-1;return o[n](a[n](t))}}function Wu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Vu(e,t){function n(){return i=2<Math.min(u.length,s.length)?Bu:Iu,a=o=null,r}function r(t){return(a||(a=i(u,s,l?(n=e,function(e,t){var r=n(e=+e,t=+t);return function(n){return n<=e?0:t<=n?1:r(n)}}):e,f)))(+t);var n}var i,a,o,u=ak,s=ak,f=Tu,l=!1;return r.invert=function(e){return(o||(o=i(s,u,Uu,l?(n=t,function(e,t){var r=n(e=+e,t=+t);return function(n){return n<=0?e:1<=n?t:r(n)}}):t)))(+e);var n},r.domain=function(e){return arguments.length?(u=aw.call(e,Fu),n()):u.slice()},r.range=function(e){return arguments.length?(s=ow.call(e),n()):s.slice()},r.rangeRound=function(e){return s=ow.call(e),f=zu,n()},r.clamp=function(e){return arguments.length?(l=!!e,n()):l},r.interpolate=function(e){return arguments.length?(f=e,n()):f},n()}function Hu(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+e.slice(n+1)]}function Yu(e){return(e=Hu(Math.abs(e)))?e[1]:NaN}function Gu(e){return new Xu(e)}function Xu(e){if(!(t=ok.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function Zu(e,t){var n=Hu(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array((-i)).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function Ju(e){return e}function Qu(e){function t(e){function t(e){var t,o,f,l=v,x=y;if("c"===m)x=b(e)+x,e="";else{var w=(e=+e)<0;if(e=b(Math.abs(e),p),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(0<i){if(!+e[r])break e;i=0}}return 0<i?e.slice(0,i)+e.slice(t+1):e}(e)),w&&0==+e&&(w=!1),l=(w?"("===i?i:"-":"-"===i||"("===i?"":i)+l,x=("s"===m?ck[8+Uw/3]:"")+x+(w&&"("===i?")":""),_)for(t=-1,o=e.length;++t<o;)if((f=e.charCodeAt(t))<48||57<f){x=(46===f?u+e.slice(t+1):e.slice(t))+x,e=e.slice(0,t);break}}h&&!c&&(e=a(e,1/0));var k=l.length+e.length+x.length,M=k<d?new Array(d-k+1).join(n):"";switch(h&&c&&(e=a(M+e,M.length?d-x.length:1/0),M=""),r){case"<":e=l+e+x+M;break;case"=":e=l+M+e+x;break;case"^":e=M.slice(0,k=M.length>>1)+l+e+x+M.slice(k);break;default:e=M+l+e+x}return s(e)}var n=(e=Gu(e)).fill,r=e.align,i=e.sign,l=e.symbol,c=e.zero,d=e.width,h=e.comma,p=e.precision,g=e.trim,m=e.type;"n"===m?(h=!0,m="g"):lk[m]||(null==p&&(p=12),g=!0,m="g"),(c||"0"===n&&"="===r)&&(c=!0,n="0",r="=");var v="$"===l?o[0]:"#"===l&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===l?o[1]:/[%p]/.test(m)?f:"",b=lk[m],_=/[defgprs%]/.test(m);return p=null==p?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),t.toString=function(){return e+""},t}var n,r,i,a=e.grouping&&e.thousands?(r=e.grouping,i=e.thousands,function(e,t){for(var n=e.length,a=[],o=0,u=r[0],s=0;0<n&&0<u&&(t<s+u+1&&(u=Math.max(1,t-s)),a.push(e.substring(n-=u,n+u)),!((s+=u+1)>t));)u=r[o=(o+1)%r.length];return a.reverse().join(i)}):Ju,o=e.currency,u=e.decimal,s=e.numerals?(n=e.numerals,function(e){return e.replace(/[0-9]/g,function(e){return n[+e]})}):Ju,f=e.percent||"%";return{format:t,formatPrefix:function(e,n){var r=t(((e=Gu(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Yu(n)/3))),a=Math.pow(10,-i),o=ck[8+i/3];return function(e){return r(a*e)+o}}}}function Ku(e){return uk=Qu(e),sk=uk.format,fk=uk.formatPrefix,uk}function es(e,t,n){var r,i,a,o,u,s,f=e[0],l=e[e.length-1],c=Sn(f,l,null==t?10:t);switch((n=Gu(null==n?",f":n)).type){case"s":var d=Math.max(Math.abs(f),Math.abs(l));return null!=n.precision||isNaN((u=c,s=d,r=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Yu(s)/3)))-Yu(Math.abs(u)))))||(n.precision=r),fk(n,d);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN((a=c,o=Math.max(Math.abs(f),Math.abs(l)),a=Math.abs(a),o=Math.abs(o)-a,r=Math.max(0,Yu(o)-Yu(a))+1))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN((i=c,r=Math.max(0,-Yu(Math.abs(i)))))||(n.precision=r-2*("%"===n.type))}return sk(n)}function ts(e){var t=e.domain;return e.ticks=function(e){var n=t();return En(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return es(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,u=i[a],s=i[o];return s<u&&(r=u,u=s,s=r,r=a,a=o,o=r),0<(r=On(u,s,n))?r=On(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=On(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,n)),0<r?(i[a]=Math.floor(u/r)*r,i[o]=Math.ceil(s/r)*r,t(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[o]=Math.floor(s*r)/r,t(i)),e},e}function ns(){var e=Vu(Uu,Au);return e.copy=function(){return Wu(e,ns())},ts(e)}function rs(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function is(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:ju(t)}function as(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function os(e){return isFinite(e)?+("1e"+e):e<0?0:e}function us(e){return 10===e?os:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function ss(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function fs(e){return function(t){return-e(-t)}}function ls(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function cs(){var e=1,t=Vu(function(t,n){return(n=ls(n,e)-(t=ls(t,e)))?function(r){return(ls(r,e)-t)/n}:ju(n)},function(t,n){return n=ls(n,e)-(t=ls(t,e)),function(r){return ls(t+n*r,1/e)}}),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return Wu(t,cs().exponent(e))},ts(t)}function ds(e){return new Date(e)}function hs(e){return e instanceof Date?+e:+new Date((+e))}function ps(e,t,n,r,i,a,o,u,s){function f(u){return(o(u)<u?p:a(u)<u?g:i(u)<u?m:r(u)<u?v:t(u)<u?n(u)<u?y:b:e(u)<u?_:x)(u)}function l(t,n,r,i){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-n)/t,o=xn(function(e){return e[2]}).right(w,a);o===w.length?(i=Sn(n/yk,r/yk,t),t=e):o?(i=(o=w[a/w[o-1][2]<w[o][2]/a?o-1:o])[1],t=o[0]):(i=Math.max(Sn(n,r,t),1),t=u)}return null==i?t:t.every(i)}var c=Vu(Uu,Au),d=c.invert,h=c.domain,p=s(".%L"),g=s(":%S"),m=s("%I:%M"),v=s("%I %p"),y=s("%a %d"),b=s("%b %d"),_=s("%B"),x=s("%Y"),w=[[o,1,dk],[o,5,5*dk],[o,15,15*dk],[o,30,30*dk],[a,1,hk],[a,5,5*hk],[a,15,15*hk],[a,30,30*hk],[i,1,pk],[i,3,3*pk],[i,6,6*pk],[i,12,12*pk],[r,1,gk],[r,2,2*gk],[n,1,mk],[t,1,vk],[t,3,3*vk],[e,1,yk]];
return c.invert=function(e){return new Date(d(e))},c.domain=function(e){return arguments.length?h(aw.call(e,hs)):h().map(ds)},c.ticks=function(e,t){var n,r=h(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=l(e,i,a,t))?n.range(i,a+1):[],o?n.reverse():n},c.tickFormat=function(e,t){return null==t?f:s(t)},c.nice=function(e,t){var n=h();return(e=l(e,n[0],n[n.length-1],t))?h(rs(n,e)):c},c.copy=function(){return Wu(c,ps(e,t,n,r,i,a,o,u,s))},c}function gs(){function e(){var e=i().length,r=o[1]<o[0],c=o[r-0],d=o[1-r],h=$o(e,s,f);t=(d-c)/(h||1),u&&(t=Math.floor(t)),c+=(d-c-t*(e-s))*l,n=t*(1-s),u&&(c=Math.round(c),n=Math.round(n));var p=Mn(e).map(function(e){return c+t*e});return a(r?p.reverse():p)}var t,n,r=Vo().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,l=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s=f,e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},r.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],f=+e[1],l=o[1]<o[0],c=l?a().reverse():a(),d=c.length-1;if(s==s&&f==f&&(f<s&&(u=s,s=f,f=u),!(f<c[0]||s>o[1-l])))return t=Math.max(0,Wy(c,s)-1),r=s===f?t:Wy(c,f)-1,s-c[t]>n+1e-10&&++t,l&&(u=t,t=d-r,r=d-u),r<t?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return gs().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(l)},e()}function ms(e){return bk.call(e,function(e){return+e})}function vs(e,t){return 1<arguments.length?(xk[e]=(n=e,r=t,function(){var e,t,i=r();return i.invertRange||(i.invertRange=i.invert?(t=i,function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}):i.invertExtent?(e=i,function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}):void 0),i.type=n,i}),this):xk.hasOwnProperty(e)?xk[e]:void 0;var n,r}function ys(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function bs(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function _s(e){return Bw(e[e.length-1])}function xs(e){(e<0||1<e)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return UM.h=360*e-100,UM.s=1.5-1.5*t,UM.l=.8-.9*t,UM+""}function ws(e){var t;return e=(.5-e)*Math.PI,IM.r=255*(t=Math.sin(e))*t,IM.g=255*(t=Math.sin(e+BM))*t,IM.b=255*(t=Math.sin(e+WM))*t,IM+""}function ks(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Ms(e,t){JM[e]=XM["interpolate"+t],ZM[e]=XM["scheme"+t]}function Es(e,t){if(1<arguments.length)return JM[e]=t,this;var n=e.split("-");return e=n[0],(n=+n[1]+1)&&ZM.hasOwnProperty(e)?ZM[e][n-1]:!n&&JM.hasOwnProperty(e)?JM[e]:void 0}function Os(e,t){var n=t[0],r=p(t)-n;return function(t){return e(n+t*r)}}function Ss(e,t,n){var r=n-t;return r?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/r}:e.copy().domain([t,n]).range([0,1]).interpolate(As):R(0)}function As(e,t){var n=t-e;return function(t){return e+t*n}}function Cs(e,t){var n,r=ik[(n=e,"interpolate"+n.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join(""))];return null!=t&&r&&r.gamma?r.gamma(t):r}function Rs(e){return QM.hasOwnProperty(e)&&QM[e]}function Ts(e){return KM.hasOwnProperty(e)&&KM[e]}function zs(e,t){var n;return s(t)&&(n=t.step,t=t.interval),f(t)&&(t="time"===e.type?Rs(t):"utc"===e.type?Ts(t):o("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function Ds(e,t,n){var r=e.range(),i=r[0],a=p(r);if(a<i&&(r=a,a=i,i=r),t=t.filter(function(t){return!((t=e(t))<i||a<t)}),0<n&&1<t.length){for(var o=[t[0],p(t)];t.length>n&&3<=t.length;)t=t.filter(function(e,t){return!(t%2)});t.length<3&&(t=o)}return t}function Ns(e,t){return e.ticks?e.ticks(t):e.domain()}function Ps(e,t,n){var r,i,a=e.tickFormat?e.tickFormat(t,n):n?sk(n):String;return e.type===Wx?(r=a,i=function(e){var t=Gu(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return n=sk(t),r=sk(".1f")(1)[1],function(e){var t,i,a=n(e),o=a.indexOf(r);if(o<0)return a;for(t=function(e,t){var n,r=e.lastIndexOf("e");if(0<r)return r;for(r=e.length;--r>t;)if(48<=(n=e.charCodeAt(r))&&n<=57)return r+1}(a,o),i=t<a.length?a.slice(t):"";--t>o;)if("0"!==a[t]){++t;break}return a.slice(0,t)+i}}return sk(t);var n,r}(n),function(e){return r(e)?i(e):""}):a}function $s(e){sn.call(this,null,e)}function Ls(e){sn.call(this,null,e)}function qs(){return te({})}function js(e){return e.exit}function Fs(e){sn.call(this,null,e)}function Us(e,t,n){return n===eE&&tE[e.type]?(a=t,function(e,t,n){var r=n[t+1]||n.max||1/0,i=Is(e,a),o=Is(r,a);return i&&o?i+""+o:o?"< "+o:" "+i}):"discrete"===n?(i=t,function(e,t){return t?i(e):null}):(r=t,function(e){return r(e)});var r,i,a}function Is(e,t){return isFinite(e)?t(e):null}function Bs(e){sn.call(this,[],e)}function Ws(e){return e.source.x}function Vs(e){return e.source.y}function Hs(e){return e.target.x}function Ys(e){return e.target.y}function Gs(e){sn.call(this,{},e)}function Xs(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function Zs(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r}function Js(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),u=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function Qs(e){sn.call(this,null,e)}function Ks(e){sn.call(this,null,e),this.modified(!0)}function ef(e,t,n){return A(e)&&(t||n)?Os(e,tf(t||[0,1],n)):e}function tf(e,t){return t?e.slice().reverse():e}function nf(e){sn.call(this,null,e)}function rf(e){sn.call(this,null,e)}function af(e,t,n,r,i){for(var a,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)(a=e[s])[r]=o,a[i]=o+=Math.abs(n(a))}function of(e,t,n,r,i){for(var a,o=1/e.sum,u=0,s=e.length,f=0,l=0;f<s;++f)(a=e[f])[r]=u,a[i]=u=o*(l+=Math.abs(n(a)))}function uf(e,t,n,r,i){for(var a,o,u=0,s=0,f=e.length,l=0;l<f;++l)(a=n(o=e[l]))<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function sf(e,t){return e-t}function ff(e){return function(){return e}}function lf(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=cf(e,t[r]))return n;return 0}function cf(e,t){for(var n,r,i,a,o,u,s,f,l,c,d=t[0],h=t[1],p=-1,g=0,m=e.length,v=m-1;g<m;v=g++){var y=e[g],b=y[0],_=y[1],x=e[v],w=x[0],k=x[1];if(c=void 0,a=s=y,u=l=t,((o=f=x)[0]-a[0])*(u[1]-a[1])==(u[0]-a[0])*(o[1]-a[1])&&(n=s[c=+(s[0]===f[0])],r=l[c],i=f[c],n<=r&&r<=i||i<=r&&r<=n))return 0;h<_!=h<k&&d<(w-b)*(h-_)/(k-_)+b&&(p=-p)}return p}function df(){}function hf(){function e(e){var n=o(e);if(Array.isArray(n))n=n.slice().sort(sf);else{var r=kn(e),i=r[0],a=r[1];n=Sn(i,a,n),n=Mn(Math.floor(i/n)*n,Math.floor(a/n)*n,n)}return n.map(function(n){return t(e,n)})}function t(e,t){var r=[],o=[];return function(e,t,r){function o(e){var t,i,a=[e[0][0]+u,e[0][1]+s],o=[e[1][0]+u,e[1][1]+s],f=n(a),l=n(o);(t=p[f])?(i=h[l])?(delete p[t.end],delete h[i.start],t===i?(t.ring.push(o),r(t.ring)):h[t.start]=p[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete p[t.end],t.ring.push(o),p[t.end=l]=t):(t=h[l])?(i=p[f])?(delete h[t.start],delete p[i.end],t===i?(t.ring.push(o),r(t.ring)):h[i.start]=p[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(a),h[t.start=f]=t):h[f]=p[l]={start:f,end:l,ring:[a,o]}}var u,s,f,l,c,d,h=new Array,p=new Array;for(u=s=-1,l=e[0]>=t,lE[l<<1].forEach(o);++u<i-1;)f=l,l=e[u+1]>=t,lE[f|l<<1].forEach(o);for(lE[l<<0].forEach(o);++s<a-1;){for(u=-1,l=e[s*i+i]>=t,c=e[s*i]>=t,lE[l<<1|c<<2].forEach(o);++u<i-1;)f=l,l=e[s*i+i+u+1]>=t,d=c,c=e[s*i+u+1]>=t,lE[f|l<<1|c<<2|d<<3].forEach(o);lE[l|c<<3].forEach(o)}for(u=-1,c=e[s*i]>=t,lE[c<<2].forEach(o);++u<i-1;)d=c,c=e[s*i+u+1]>=t,lE[c<<2|d<<3].forEach(o);lE[c<<3].forEach(o)}(e,t,function(n){u(n,e,t),0<function(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(n)?r.push([n]):o.push(n)}),o.forEach(function(e){for(var t,n=0,i=r.length;n<i;++n)if(-1!==lf((t=r[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:t,coordinates:r}}function n(e){return 2*e[0]+e[1]*(i+1)*4}function r(e,t,n){e.forEach(function(e){var r,o=e[0],u=e[1],s=0|o,f=0|u,l=t[f*i+s];0<o&&o<i&&s===o&&(r=t[f*i+s-1],e[0]=o+(n-r)/(l-r)-.5),0<u&&u<a&&f===u&&(r=t[(f-1)*i+s],e[1]=u+(n-r)/(l-r)-.5)})}var i=1,a=1,o=An,u=r;return e.contour=t,e.size=function(t){if(!arguments.length)return[i,a];var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!(0<n&&0<r))throw new Error("invalid size");return i=n,a=r,e},e.thresholds=function(t){return arguments.length?(o="function"==typeof t?t:ff(Array.isArray(t)?fE.call(t):t),e):o},e.smooth=function(t){return arguments.length?(u=t?r:df,e):u===r},e}function pf(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=e.data[u+o*r]),n<=u&&(a<=u&&(s-=e.data[u-a+o*r]),t.data[u-n+o*r]=s/Math.min(u+1,r-1+a-u,a))}function gf(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=e.data[o+u*r]),n<=u&&(a<=u&&(s-=e.data[o+(u-a)*r]),t.data[o+(u-n)*r]=s/Math.min(u+1,i-1+a-u,a))}function mf(e){return e[0]}function vf(e){return e[1]}function yf(e){sn.call(this,null,e)}function bf(e){sn.call(this,null,e)}function _f(){return new xf}function xf(){this.reset()}function wf(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}function kf(e){return 1<e?0:e<-1?YE:Math.acos(e)}function Mf(e){return 1<e?GE:e<-1?-GE:Math.asin(e)}function Ef(){}function Of(e,t){e&&dO.hasOwnProperty(e.type)&&dO[e.type](e,t)}function Sf(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Af(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Sf(e[n],t,1);t.polygonEnd()}function Cf(e,t){e&&cO.hasOwnProperty(e.type)?cO[e.type](e,t):Of(e,t)}function Rf(){gO.point=zf}function Tf(){Df(pE,gE)}function zf(e,t){gO.point=Df,pE=e,gE=t,mE=e*=QE,vE=nO(t=(t*=QE)/2+XE),yE=uO(t)}function Df(e,t){var n=(e*=QE)-mE,r=0<=n?1:-1,i=r*n,a=nO(t=(t*=QE)/2+XE),o=uO(t),u=yE*o,s=vE*a+u*nO(i),f=u*r*uO(i);hO.add(tO(f,s)),mE=e,vE=a,yE=o}function Nf(e){return[tO(e[1],e[0]),Mf(e[2])]}function Pf(e){var t=e[0],n=e[1],r=nO(n);return[r*nO(t),r*uO(t),uO(n)]}function $f(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Lf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function qf(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function jf(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ff(e){var t=fO(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Uf(e,t){SE.push(AE=[bE=e,xE=e]),t<_E&&(_E=t),wE<t&&(wE=t)}function If(e,t){var n=Pf([e*QE,t*QE]);if(OE){var r=Lf(OE,n),i=Lf([r[1],-r[0],0],r);Ff(i),i=Nf(i);var a,o=e-kE,u=0<o?1:-1,s=i[0]*JE*u,f=180<KE(o);f^(u*kE<s&&s<u*e)?(a=i[1]*JE,wE<a&&(wE=a)):f^(u*kE<(s=(s+360)%360-180)&&s<u*e)?(a=-i[1]*JE)<_E&&(_E=a):(t<_E&&(_E=t),wE<t&&(wE=t)),f?e<kE?Gf(bE,e)>Gf(bE,xE)&&(xE=e):Gf(e,xE)>Gf(bE,xE)&&(bE=e):bE<=xE?(e<bE&&(bE=e),xE<e&&(xE=e)):kE<e?Gf(bE,e)>Gf(bE,xE)&&(xE=e):Gf(e,xE)>Gf(bE,xE)&&(bE=e)}else SE.push(AE=[bE=e,xE=e]);t<_E&&(_E=t),wE<t&&(wE=t),OE=n,kE=e}function Bf(){vO.point=If}function Wf(){AE[0]=bE,AE[1]=xE,vO.point=Uf,OE=null}function Vf(e,t){if(OE){var n=e-kE;mO.add(180<KE(n)?n+(0<n?360:-360):n)}else ME=e,EE=t;gO.point(e,t),If(e,t)}function Hf(){gO.lineStart()}function Yf(){Vf(ME,EE),gO.lineEnd(),KE(mO)>HE&&(bE=-(xE=180)),AE[0]=bE,AE[1]=xE,OE=null}function Gf(e,t){return(t-=e)<0?t+360:t}function Xf(e,t){return e[0]-t[0]}function Zf(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Jf(e,t){e*=QE;var n=nO(t*=QE);Qf(n*nO(e),n*uO(e),uO(t))}function Qf(e,t,n){TE+=(e-TE)/++CE,zE+=(t-zE)/CE,DE+=(n-DE)/CE}function Kf(){yO.point=el}function el(e,t){e*=QE;var n=nO(t*=QE);IE=n*nO(e),BE=n*uO(e),WE=uO(t),yO.point=tl,Qf(IE,BE,WE)}function tl(e,t){e*=QE;var n=nO(t*=QE),r=n*nO(e),i=n*uO(e),a=uO(t),o=tO(fO((o=BE*a-WE*i)*o+(o=WE*r-IE*a)*o+(o=IE*i-BE*r)*o),IE*r+BE*i+WE*a);RE+=o,NE+=o*(IE+(IE=r)),PE+=o*(BE+(BE=i)),$E+=o*(WE+(WE=a)),Qf(IE,BE,WE)}function nl(){yO.point=Jf}function rl(){yO.point=al}function il(){ol(FE,UE),yO.point=Jf}function al(e,t){FE=e,UE=t,e*=QE,t*=QE,yO.point=ol;var n=nO(t);IE=n*nO(e),BE=n*uO(e),WE=uO(t),Qf(IE,BE,WE)}function ol(e,t){e*=QE;var n=nO(t*=QE),r=n*nO(e),i=n*uO(e),a=uO(t),o=BE*a-WE*i,u=WE*r-IE*a,s=IE*i-BE*r,f=fO(o*o+u*u+s*s),l=Mf(f),c=f&&-l/f;LE+=c*o,qE+=c*u,jE+=c*s,RE+=l,NE+=l*(IE+(IE=r)),PE+=l*(BE+(BE=i)),$E+=l*(WE+(WE=a)),Qf(IE,BE,WE)}function ul(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function sl(e,t){return[YE<e?e-ZE:e<-YE?e+ZE:e,t]}function fl(e,t,n){return(e%=ZE)?t||n?ul(cl(e),dl(t,n)):cl(e):t||n?dl(t,n):sl}function ll(e){return function(t,n){return[YE<(t+=e)?t-ZE:t<-YE?t+ZE:t,n]}}function cl(e){var t=ll(e);return t.invert=ll(-e),t}function dl(e,t){function n(e,t){var n=nO(t),u=nO(e)*n,s=uO(e)*n,f=uO(t),l=f*r+u*i;return[tO(s*a-l*o,u*r-f*i),Mf(l*a+s*o)]}var r=nO(e),i=uO(e),a=nO(t),o=uO(t);return n.invert=function(e,t){var n=nO(t),u=nO(e)*n,s=uO(e)*n,f=uO(t),l=f*a-s*o;return[tO(s*a+f*o,u*r+l*i),Mf(l*r-u*i)]},n}function hl(e,t){(t=Pf(t))[0]-=e,Ff(t);var n=kf(-t[1]);return((-t[2]<0?-n:n)+ZE-HE)%ZE}function pl(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:Ef,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function gl(e,t){return KE(e[0]-t[0])<HE&&KE(e[1]-t[1])<HE}function ml(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function vl(e,t,n,r,i){var a,o,u=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(gl(r,o)){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);i.lineEnd()}else u.push(n=new ml(r,e,null,(!0))),s.push(n.o=new ml(r,null,n,(!1))),u.push(n=new ml(o,e,null,(!1))),s.push(n.o=new ml(o,null,n,(!0)))}}),u.length){for(s.sort(t),yl(u),yl(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var f,l,c=u[0];;){for(var d=c,h=!0;d.v;)if((d=d.n)===c)return;f=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=f.length;a<o;++a)i.point((l=f[a])[0],l[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(f=d.p.z,a=f.length-1;0<=a;--a)i.point((l=f[a])[0],l[1]);else r(d.x,d.p.x,-1,i);d=d.p}f=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function yl(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function bl(e,t,n,r){return function(i){function a(t,n){e(t,n)&&i.point(t,n)}function o(e,t){g.point(e,t)}function u(){b.point=o,g.lineStart()}function s(){b.point=a,g.lineEnd()}function f(e,t){p.push([e,t]),v.point(e,t)}function l(){v.lineStart(),p=[]}function c(){f(p[0][0],p[0][1]),v.lineEnd();var e,t,n,r,a=v.clean(),o=m.result(),u=o.length;if(p.pop(),d.push(p),p=null,u)if(1&a){if(0<(t=(n=o[0]).length-1)){for(y||(i.polygonStart(),y=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else 1<u&&2&a&&o.push(o.pop().concat(o.shift())),h.push(o.filter(_l))}var d,h,p,g=t(i),m=pl(),v=t(m),y=!1,b={point:a,lineStart:u,lineEnd:s,polygonStart:function(){b.point=f,b.lineStart=l,b.lineEnd=c,h=[],d=[]},polygonEnd:function(){b.point=a,b.lineStart=u,b.lineEnd=s,h=Tn(h);var e=function(e,t){var n=t[0],r=t[1],i=uO(r),a=[uO(n),-nO(n),0],o=0,u=0;bO.reset(),1===i?r=GE+HE:-1===i&&(r=-GE-HE);for(var s=0,f=e.length;s<f;++s)if(c=(l=e[s]).length)for(var l,c,d=l[c-1],h=d[0],p=d[1]/2+XE,g=uO(p),m=nO(p),v=0;v<c;++v,h=b,g=x,m=w,d=y){var y=l[v],b=y[0],_=y[1]/2+XE,x=uO(_),w=nO(_),k=b-h,M=0<=k?1:-1,E=M*k,O=YE<E,S=g*x;if(bO.add(tO(S*M*uO(E),m*w+S*nO(E))),o+=O?k+M*ZE:k,O^n<=h^n<=b){var A=Lf(Pf(d),Pf(y));Ff(A);var C=Lf(a,A);Ff(C);var R=(O^0<=k?-1:1)*Mf(C[2]);(R<r||r===R&&(A[0]||A[1]))&&(u+=O^0<=k?1:-1)}}return(o<-HE||o<HE&&bO<-HE)^1&u}(d,r);h.length?(y||(i.polygonStart(),y=!0),vl(h,xl,e,n,i)):e&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),h=d=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};return b}}function _l(e){return 1<e.length}function xl(e,t){return((e=e.x)[0]<0?e[1]-GE-HE:GE-e[1])-((t=t.x)[0]<0?t[1]-GE-HE:GE-t[1])}function wl(e){function t(e,t){return nO(e)*nO(t)>i}function n(e,t,n){var r=[1,0,0],a=Lf(Pf(e),Pf(t)),o=$f(a,a),u=a[0],s=o-u*u;if(!s)return!n&&e;var f=i*o/s,l=-i*u/s,c=Lf(r,a),d=jf(r,f);qf(d,jf(a,l));var h=c,p=$f(d,h),g=$f(h,h),m=p*p-g*($f(d,d)-1);if(!(m<0)){var v=fO(m),y=jf(h,(-p-v)/g);if(qf(y,d),y=Nf(y),!n)return y;var b,_=e[0],x=t[0],w=e[1],k=t[1];x<_&&(b=_,_=x,x=b);var M=x-_,E=KE(M-YE)<HE;if(!E&&k<w&&(b=w,w=k,k=b),E||M<HE?E?0<w+k^y[1]<(KE(y[0]-_)<HE?w:k):w<=y[1]&&y[1]<=k:YE<M^(_<=y[0]&&y[0]<=x)){var O=jf(h,(-p+v)/g);return qf(O,d),[y,Nf(O)]}}}function r(t,n){var r=o?e:YE-e,i=0;return t<-r?i|=1:r<t&&(i|=2),n<-r?i|=4:r<n&&(i|=8),i}var i=nO(e),a=6*QE,o=0<i,u=KE(i)>HE;return bl(t,function(e){var i,a,s,f,l;return{lineStart:function(){f=s=!1,l=1},point:function(c,d){var h,p=[c,d],g=t(c,d),m=o?g?0:r(c,d):g?r(c+(c<0?YE:-YE),d):0;if(!i&&(f=s=g)&&e.lineStart(),g!==s&&(!(h=n(i,p))||gl(i,h)||gl(p,h))&&(p[0]+=HE,p[1]+=HE,g=t(p[0],p[1])),g!==s)l=0,g?(e.lineStart(),h=n(p,i),e.point(h[0],h[1])):(h=n(i,p),e.point(h[0],h[1]),e.lineEnd()),i=h;else if(u&&i&&o^g){var v;m&a||!(v=n(p,i,!0))||(l=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||i&&gl(i,p)||e.point(p[0],p[1]),i=p,s=g,a=m},lineEnd:function(){s&&e.lineEnd(),i=null},clean:function(){return l|(f&&s)<<1}}},function(t,n,r,i){!function(e,t,n,r,i,a){if(n){var o=nO(t),u=uO(t),s=r*n;null==i?(i=t+r*ZE,a=t-s/2):(i=hl(o,i),a=hl(o,a),(0<r?i<a:a<i)&&(i+=r*ZE));for(var f,l=i;0<r?a<l:l<a;l-=s)f=Nf([o,-u*nO(l),-u*uO(l)]),e.point(f[0],f[1])}}(i,e,a,r,t,n)},o?[0,-e]:[-YE,e-YE])}function kl(e,t,n,r){function i(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function a(i,a,u,f){var l=0,c=0;if(null==i||(l=o(i,u))!==(c=o(a,u))||s(i,a)<0^0<u)for(;f.point(0===l||3===l?e:n,1<l?r:t),(l=(l+u+4)%4)!==c;);else f.point(a[0],a[1])}function o(r,i){return KE(r[0]-e)<HE?0<i?0:3:KE(r[0]-n)<HE?0<i?2:1:KE(r[1]-t)<HE?0<i?1:0:0<i?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){function s(e,t){i(e,t)&&x.point(e,t)}function f(a,o){var u=i(a,o);if(c&&d.push([a,o]),b)h=a,p=o,b=!1,(g=u)&&(x.lineStart(),x.point(a,o));else if(u&&y)x.point(a,o);else{var s=[m=Math.max(wO,Math.min(xO,m)),v=Math.max(wO,Math.min(xO,v))],f=[a=Math.max(wO,Math.min(xO,a)),o=Math.max(wO,Math.min(xO,o))];!function(e,t,n,r,i,a){var o,u=e[0],s=e[1],f=0,l=1,c=t[0]-u,d=t[1]-s;if(o=n-u,c||!(0<o)){if(o/=c,c<0){if(o<f)return;o<l&&(l=o)}else if(0<c){if(l<o)return;f<o&&(f=o)}if(o=i-u,c||!(o<0)){if(o/=c,c<0){if(l<o)return;f<o&&(f=o)}else if(0<c){if(o<f)return;o<l&&(l=o)}if(o=r-s,d||!(0<o)){if(o/=d,d<0){if(o<f)return;o<l&&(l=o)}else if(0<d){if(l<o)return;f<o&&(f=o)}if(o=a-s,d||!(o<0)){if(o/=d,d<0){if(l<o)return;f<o&&(f=o)}else if(0<d){if(o<f)return;o<l&&(l=o)}return 0<f&&(e[0]=u+f*c,e[1]=s+f*d),l<1&&(t[0]=u+l*c,t[1]=s+l*d),!0}}}}}(s,f,e,t,n,r)?u&&(x.lineStart(),x.point(a,o),_=!1):(y||(x.lineStart(),x.point(s[0],s[1])),x.point(f[0],f[1]),u||x.lineEnd(),_=!1)}m=a,v=o,y=u}var l,c,d,h,p,g,m,v,y,b,_,x=o,w=pl(),k={point:s,lineStart:function(){k.point=f,c&&c.push(d=[]),b=!0,y=!1,m=v=NaN},lineEnd:function(){l&&(f(h,p),g&&y&&w.rejoin(),l.push(w.result())),k.point=s,y&&x.lineEnd()},polygonStart:function(){x=w,l=[],c=[],_=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=c.length;n<i;++n)for(var a,o,u=c[n],s=1,f=u.length,l=u[0],d=l[0],h=l[1];s<f;++s)a=d,o=h,l=u[s],d=l[0],h=l[1],o<=r?r<h&&(h-o)*(e-a)<(d-a)*(r-o)&&++t:h<=r&&(d-a)*(r-o)<(h-o)*(e-a)&&--t;return t}(),n=_&&t,i=(l=Tn(l)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&vl(l,u,t,a,o),o.polygonEnd()),x=o,l=c=d=null}};return k}}function Ml(e,t,n){var r=Mn(e,t-HE,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function El(e,t,n){var r=Mn(e,t-HE,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Ol(e){return e}function Sl(){DO.point=Al}function Al(e,t){DO.point=Cl,kO=EO=e,MO=OO=t}function Cl(e,t){zO.add(OO*e-EO*t),EO=e,OO=t}function Rl(){Cl(kO,MO)}function Tl(e,t){jO+=e,FO+=t,++UO}function zl(){GO.point=Dl}function Dl(e,t){GO.point=Nl,Tl(CO=e,RO=t)}function Nl(e,t){var n=e-CO,r=t-RO,i=fO(n*n+r*r);IO+=i*(CO+e)/2,BO+=i*(RO+t)/2,WO+=i,Tl(CO=e,RO=t)}function Pl(){GO.point=Tl}function $l(){GO.point=ql}function Ll(){jl(SO,AO)}function ql(e,t){GO.point=jl,Tl(SO=CO=e,AO=RO=t)}function jl(e,t){var n=e-CO,r=t-RO,i=fO(n*n+r*r);IO+=i*(CO+e)/2,BO+=i*(RO+t)/2,WO+=i,VO+=(i=RO*e-CO*t)*(CO+e),HO+=i*(RO+t),YO+=3*i,Tl(CO=e,RO=t)}function Fl(e){this._context=e}function Ul(e,t){tS.point=Il,ZO=QO=e,JO=KO=t}function Il(e,t){QO-=e,KO-=t,eS.add(fO(QO*QO+KO*KO)),QO=e,KO=t}function Bl(){this._string=[]}function Wl(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Vl(e,t){function n(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),Cf(e,r(i))),i.result()}var r,i,a=4.5;return n.area=function(e){return Cf(e,r(DO)),DO.result()},n.measure=function(e){return Cf(e,r(tS)),tS.result()},n.bounds=function(e){return Cf(e,r(qO)),qO.result()},n.centroid=function(e){return Cf(e,r(GO)),GO.result()},n.projection=function(t){return arguments.length?(r=null==t?(e=null,Ol):(e=t).stream,n):e},n.context=function(e){return arguments.length?(i=null==e?(t=null,new Bl):new Fl(t=e),"function"!=typeof a&&i.pointRadius(a),n):t},n.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),n):a},n.projection(e).context(t)}function Hl(e){return function(t){var n=new Yl;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Yl(){}function Gl(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Cf(n,e.stream(qO)),t(qO.result()),null!=r&&e.clipExtent(r),e}function Xl(e,t,n){return Gl(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,u])},n)}function Zl(e,t,n){return Xl(e,[[0,0],t],n)}function Jl(e,t,n){return Gl(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])},n)}function Ql(e,t,n){return Gl(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])},n)}function Kl(e,t){return+t?function(e,t){function n(r,i,a,o,u,s,f,l,c,d,h,p,g,m){var v=f-r,y=l-i,b=v*v+y*y;if(4*t<b&&g--){var _=o+d,x=u+h,w=s+p,k=fO(_*_+x*x+w*w),M=Mf(w/=k),E=KE(KE(w)-1)<HE||KE(a-c)<HE?(a+c)/2:tO(x,_),O=e(E,M),S=O[0],A=O[1],C=S-r,R=A-i,T=y*C-v*R;(t<T*T/b||.3<KE((v*C+y*R)/b-.5)||o*d+u*h+s*p<rS)&&(n(r,i,a,o,u,s,S,A,E,_/=k,x/=k,w,g,m),m.point(S,A),n(S,A,E,_,x,w,f,l,c,d,h,p,g,m))}}return function(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function i(){v=NaN,w.point=a,t.lineStart()}function a(r,i){var a=Pf([r,i]),o=e(r,i);n(v,y,m,b,_,x,v=o[0],y=o[1],m=r,b=a[0],_=a[1],x=a[2],nS,t),t.point(v,y)}function o(){w.point=r,t.lineEnd()}function u(){i(),w.point=s,w.lineEnd=f}function s(e,t){a(l=e,t),c=v,d=y,h=b,p=_,g=x,w.point=a}function f(){n(v,y,m,b,_,x,c,d,l,h,p,g,nS,t),(w.lineEnd=o)()}var l,c,d,h,p,g,m,v,y,b,_,x,w={point:r,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),w.lineStart=u},polygonEnd:function(){t.polygonEnd(),w.lineStart=i}};return w}}(e,t):(n=e,Hl({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}));var n}function ec(e,t,n,r){function i(e,r){return[u*e-s*r+t,n-s*e-u*r]}var a=nO(r),o=uO(r),u=a*e,s=o*e,f=a/e,l=o/e,c=(o*n-a*t)/e,d=(o*t+a*n)/e;return i.invert=function(e,t){return[f*e-l*t+c,d-l*e-f*t]},i}function tc(e){return nc(function(){return e})()}function nc(e){function t(e){return d(e[0]*QE,e[1]*QE)}function n(e){return(e=d.invert(e[0],e[1]))&&[e[0]*JE,e[1]*JE]}function r(){var e=ec(g,0,0,k).apply(null,a(y,b)),t=(k?ec:function(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r})(g,m-e[0],v-e[1],k);return o=fl(_,x,w),c=ul(a,t),d=ul(o,c),l=Kl(c,A),i()}function i(){return h=p=null,t}var a,o,u,s,f,l,c,d,h,p,g=150,m=480,v=250,y=0,b=0,_=0,x=0,w=0,k=0,M=null,E=_O,O=null,S=Ol,A=.5;return t.stream=function(e){return h&&p===e?h:h=iS((t=o,Hl({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})(E(l(S(p=e))))));var t},t.preclip=function(e){return arguments.length?(E=e,M=void 0,i()):E},t.postclip=function(e){return arguments.length?(S=e,O=u=s=f=null,i()):S},t.clipAngle=function(e){return arguments.length?(E=+e?wl(M=e*QE):(M=null,_O),i()):M*JE},t.clipExtent=function(e){return arguments.length?(S=null==e?(O=u=s=f=null,Ol):kl(O=+e[0][0],u=+e[0][1],s=+e[1][0],f=+e[1][1]),i()):null==O?null:[[O,u],[s,f]]},t.scale=function(e){return arguments.length?(g=+e,r()):g},t.translate=function(e){return arguments.length?(m=+e[0],v=+e[1],r()):[m,v]},t.center=function(e){return arguments.length?(y=e[0]%360*QE,b=e[1]%360*QE,r()):[y*JE,b*JE]},t.rotate=function(e){return arguments.length?(_=e[0]%360*QE,x=e[1]%360*QE,w=2<e.length?e[2]%360*QE:0,r()):[_*JE,x*JE,w*JE]},t.angle=function(e){return arguments.length?(k=e%360*QE,r()):k*JE},t.precision=function(e){return arguments.length?(l=Kl(c,A=e*e),i()):fO(A)},t.fitExtent=function(e,n){return Xl(t,e,n)},t.fitSize=function(e,n){return Zl(t,e,n)},t.fitWidth=function(e,n){return Jl(t,e,n)},t.fitHeight=function(e,n){return Ql(t,e,n)},function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function rc(e){var t=0,n=YE/3,r=nc(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*QE,n=e[1]*QE):[t*JE,n*JE]},i}function ic(e,t){function n(e,t){var n=fO(a-2*i*uO(t))/i;return[n*uO(e*=i),o-n*nO(e)]}var r=uO(e),i=(r+uO(t))/2;if(KE(i)<HE)return function(e){function t(e,t){return[e*n,uO(t)/n]}var n=nO(e);return t.invert=function(e,t){return[e/n,Mf(t*n)]},t}(e);var a=1+r*(2*i-r),o=fO(a)/i;return n.invert=function(e,t){var n=o-t;return[tO(e,KE(n))/i*sO(n),Mf((a-(e*e+n*n)*i*i)/(2*i))]},n}function ac(){return rc(ic).scale(155.424).center([0,33.6442])}function oc(){return ac().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function uc(e){return function(t,n){var r=nO(t),i=nO(n),a=e(r*i);return[a*i*uO(t),a*uO(n)]}}function sc(e){return function(t,n){var r=fO(t*t+n*n),i=e(r),a=uO(i),o=nO(i);return[tO(t*a,r*o),Mf(r&&n*a/r)]}}function fc(e,t){return[e,aO(lO((GE+t)/2))]}function lc(e){function t(){var t=YE*u(),o=a(function(e){function t(t){return(t=e(t[0]*QE,t[1]*QE))[0]*=JE,t[1]*=JE,t}return e=fl(e[0]*QE,e[1]*QE,2<e.length?e[2]*QE:0),t.invert=function(t){return(t=e.invert(t[0]*QE,t[1]*QE))[0]*=JE,t[1]*=JE,t},t}(a.rotate()).invert([0,0]));return f(null==l?[[o[0]-t,o[1]-t],[o[0]+t,o[1]+t]]:e===fc?[[Math.max(o[0]-t,l),n],[Math.min(o[0]+t,r),i]]:[[l,Math.max(o[1]-t,n)],[r,Math.min(o[1]+t,i)]])}var n,r,i,a=tc(e),o=a.center,u=a.scale,s=a.translate,f=a.clipExtent,l=null;return a.scale=function(e){return arguments.length?(u(e),t()):u()},a.translate=function(e){return arguments.length?(s(e),t()):s()},a.center=function(e){return arguments.length?(o(e),t()):o()},a.clipExtent=function(e){return arguments.length?(null==e?l=n=r=i=null:(l=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),t()):null==l?null:[[l,n],[r,i]]},t()}function cc(e){return lO((GE+e)/2)}function dc(e,t){function n(e,t){0<a?t<-GE+HE&&(t=-GE+HE):GE-HE<t&&(t=GE-HE);var n=a/oO(cc(t),i);return[n*uO(i*e),a-n*nO(i*e)]}var r=nO(e),i=e===t?uO(e):aO(r/nO(t))/aO(cc(t)/cc(e)),a=r*oO(cc(e),i)/i;return i?(n.invert=function(e,t){var n=a-t,r=sO(i)*fO(e*e+n*n);return[tO(e,KE(n))/i*sO(n),2*eO(oO(a/r,1/i))-GE]},n):fc}function hc(e,t){return[e,t]}function pc(e,t){function n(e,t){var n=a-t,r=i*e;return[n*uO(r),a-n*nO(r)]}var r=nO(e),i=e===t?uO(e):(r-nO(t))/(t-e),a=r/i+e;return KE(i)<HE?hc:(n.invert=function(e,t){var n=a-t;return[tO(e,KE(n))/i*sO(n),a-sO(i)*fO(e*e+n*n)]},n)}function gc(e,t){var n=nO(t),r=nO(e)*n;return[n*uO(e)/r,uO(t)/r]}function mc(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?Ol:Hl({point:function(i,a){this.stream.point(i*e+n,a*t+r)}})}function vc(e,t){return[nO(t)*uO(e),uO(t)]}function yc(e,t){var n=nO(t),r=1+nO(e)*n;return[n*uO(e)/r,uO(t)/r]}function bc(e,t){return[aO(lO((GE+t)/2)),-e]}function _c(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),1<arguments.length?(fS[e]=(n=e,r=t,function e(){var t=r();return t.type=n,t.path=Vl().projection(t),t.copy=t.copy||function(){var n=e();return sS.forEach(function(e){t.hasOwnProperty(e)&&n[e](t[e]())}),n.path.pointRadius(t.path.pointRadius()),n},t}),this):fS.hasOwnProperty(e)?fS[e]:null;var n,r}function xc(e){return e&&e.path||uS}function wc(e){sn.call(this,null,e)}function kc(e){sn.call(this,null,e)}function Mc(e){sn.call(this,null,e)}function Ec(e){sn.call(this,[],e),this.generator=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Mn(rO(a/m)*m,i,m).map(d).concat(Mn(rO(f/v)*v,s,v).map(h)).concat(Mn(rO(r/p)*p,n,p).filter(function(e){return KE(e%m)>HE}).map(l)).concat(Mn(rO(u/g)*g,o,g).filter(function(e){return KE(e%v)>HE}).map(c))}var n,r,i,a,o,u,s,f,l,c,d,h,p=10,g=p,m=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(h(s).slice(1),d(i).reverse().slice(1),h(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],f=+t[0][1],s=+t[1][1],i<a&&(t=a,a=i,i=t),s<f&&(t=f,f=s,s=t),e.precision(y)):[[a,f],[i,s]]},e.extentMinor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],n<r&&(t=r,r=n,n=t),o<u&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.stepMinor=function(t){return arguments.length?(p=+t[0],g=+t[1],e):[p,g]},e.precision=function(t){return arguments.length?(y=+t,l=Ml(u,o,90),c=El(r,n,y),d=Ml(f,s,90),h=El(a,i,y),e):y},e.extentMajor([[-180,-90+HE],[180,90-HE]]).extentMinor([[-180,-80-HE],[180,80+HE]])}()}function Oc(e){sn.call(this,null,e),this.modified(!0)}function Sc(e,t,n){A(e[t])&&e[t](n)}function Ac(e){return function(){return e}}function Cc(){return 1e-6*(Math.random()-.5)}function Rc(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,u,s,f,l,c,d,h=e._root,p={data:r},g=e._x0,m=e._y0,v=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((f=t>=(a=(g+v)/2))?g=a:v=a,(l=n>=(o=(m+y)/2))?m=o:y=o,!(h=(i=h)[c=l<<1|f]))return i[c]=p,e;if(u=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===u&&n===s)return p.next=h,i?i[c]=p:e._root=p,e;for(;i=i?i[c]=new Array(4):e._root=new Array(4),(f=t>=(a=(g+v)/2))?g=a:v=a,(l=n>=(o=(m+y)/2))?m=o:y=o,(c=l<<1|f)==(d=(o<=s)<<1|a<=u););return i[d]=h,i[c]=p,e}function Tc(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function zc(e){return e[0]}function Dc(e){return e[1]}function Nc(e,t,n){var r=new Pc(null==t?zc:t,null==n?Dc:n,NaN,NaN,NaN,NaN);
return null==e?r:r.addAll(e)}function Pc(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function $c(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}function Lc(e){return e.x+e.vx}function qc(e){return e.y+e.vy}function jc(e){return e.index}function Fc(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Uc(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new Ic(r)}function Ic(e){this._=e}function Bc(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Wc(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=hS,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function Vc(){return xS||(MS(Hc),xS=kS.now()+wS)}function Hc(){xS=0}function Yc(){this._call=this._time=this._next=null}function Gc(e,t,n){var r=new Yc;return r.restart(e,t,n),r}function Xc(){xS=(_S=kS.now())+wS,mS=vS=0;try{!function(){Vc(),++mS;for(var e,t=pS;t;)0<=(e=xS-t._time)&&t._call.call(null,e),t=t._next;--mS}()}finally{mS=0,function(){for(var e,t,n=pS,r=1/0;n;)n._call?(r>n._time&&(r=n._time),n=(e=n)._next):(t=n._next,n._next=null,n=e?e._next=t:pS=t);gS=e,Jc(r)}(),xS=0}}function Zc(){var e=kS.now(),t=e-_S;bS<t&&(wS-=t,_S=e)}function Jc(e){mS||(vS&&(vS=clearTimeout(vS)),24<e-xS?(e<1/0&&(vS=setTimeout(Xc,e-kS.now()-wS)),yS&&(yS=clearInterval(yS))):(yS||(_S=kS.now(),yS=setInterval(Zc,bS)),mS=1,MS(Xc)))}function Qc(e){return e.x}function Kc(e){return e.y}function ed(e){sn.call(this,null,e)}function td(e,t,n,r){var i,a,o,u,s=S(t.forces);for(i=0,a=CS.length;i<a;++i)(o=CS[i])!==AS&&t.modified(o)&&e[o](t[o]);for(i=0,a=s.length;i<a;++i)u=AS+i,(o=n||t.modified(AS,i)?rd(s[i]):r&&nd(s[i],r)?e.force(u):null)&&e.force(u,o);for(a=e.numForces||0;i<a;++i)e.force(AS+i,null);return e.numForces=s.length,e}function nd(e,t){var n,r;for(n in e)if(A(r=e[n])&&t.modified(a(r)))return 1;return 0}function rd(e){var t,n;for(n in SS.hasOwnProperty(e.force)||o("Unrecognized force: "+e.force),t=SS[e.force](),e)A(t[n])&&id(t[n],e[n],e);return t}function id(e,t,n){e(A(t)?function(e){return t(e,n)}:t)}function ad(e,t,n){var r={};return e.each(function(e){var i=e.data;n(i)&&(r[t(i)]=e)}),e.lookup=r,e}function od(e,t){return e.parent===t.parent?1:2}function ud(e,t){return e+t.x}function sd(e,t){return Math.max(e,t.y)}function fd(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;0<=--r;)t+=n[r].value;else t=1;e.value=t}function ld(e,t){var n,r,i,a,o,u=new pd(e),s=+e.value&&(u.value=e.value),f=[u];for(null==t&&(t=cd);n=f.pop();)if(s&&(n.value=+n.data.value),(i=t(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;0<=a;--a)f.push(r=n.children[a]=new pd(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(hd)}function cd(e){return e.children}function dd(e){e.data=e.data.data}function hd(e){for(var t=0;e.height=t,(e=e.parent)&&e.height<++t;);}function pd(e){this.data=e,this.depth=this.height=0,this.parent=null}function gd(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(NS.call(e))).length,a=[];r<i;)t=e[r],n&&yd(n,t)?++r:(n=_d(a=md(a,t)),r=0);return n}function md(e,t){var n,r;if(bd(t,e))return[t];for(n=0;n<e.length;++n)if(vd(t,e[n])&&bd(xd(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(vd(xd(e[n],e[r]),t)&&vd(xd(e[n],t),e[r])&&vd(xd(e[r],t),e[n])&&bd(wd(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function vd(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function yd(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return 0<n&&r*r+i*i<n*n}function bd(e,t){for(var n=0;n<t.length;++n)if(!yd(e,t[n]))return!1;return!0}function _d(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return xd(e[0],e[1]);case 3:return wd(e[0],e[1],e[2])}var t}function xd(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,u=t.r,s=a-n,f=o-r,l=u-i,c=Math.sqrt(s*s+f*f);return{x:(n+a+s/c*l)/2,y:(r+o+f/c*l)/2,r:(c+i+u)/2}}function wd(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,u=t.y,s=t.r,f=n.x,l=n.y,c=n.r,d=r-o,h=r-f,p=i-u,g=i-l,m=s-a,v=c-a,y=r*r+i*i-a*a,b=y-o*o-u*u+s*s,_=y-f*f-l*l+c*c,x=h*p-d*g,w=(p*_-g*b)/(2*x)-r,k=(g*m-p*v)/x,M=(h*b-d*_)/(2*x)-i,E=(d*v-h*m)/x,O=k*k+E*E-1,S=2*(a+w*k+M*E),A=w*w+M*M-a*a,C=-(O?(S+Math.sqrt(S*S-4*O*A))/(2*O):A/S);return{x:r+w+k*C,y:i+M+E*C,r:C}}function kd(e,t,n){var r,i,a,o,u=e.x-t.x,s=e.y-t.y,f=u*u+s*s;f?(i=t.r+n.r,i*=i,o=e.r+n.r,(o*=o)<i?(r=(f+o-i)/(2*f),a=Math.sqrt(Math.max(0,o/f-r*r)),n.x=e.x-r*u-a*s,n.y=e.y-r*s+a*u):(r=(f+i-o)/(2*f),a=Math.sqrt(Math.max(0,i/f-r*r)),n.x=t.x+r*u-a*s,n.y=t.y+r*s+a*u)):(n.x=t.x+n.r,n.y=t.y)}function Md(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return 0<n&&r*r+i*i<n*n}function Ed(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function Od(e){this._=e,this.next=null,this.previous=null}function Sd(e){if("function"!=typeof e)throw new Error;return e}function Ad(){return 0}function Cd(e){return function(){return e}}function Rd(e){return Math.sqrt(e.value)}function Td(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function zd(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,u=e(n)*t||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=function(e){if(!(i=e.length))return 0;var t,n,r,i,a,o,u,s,f,l,c;if((t=e[0]).x=0,t.y=0,!(1<i))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(2<i))return t.r+n.r;kd(n,t,r=e[2]),t=new Od(t),n=new Od(n),r=new Od(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(u=3;u<i;++u){kd(t._,n._,r=e[u]),r=new Od(r),s=n.next,f=t.previous,l=n._.r,c=t._.r;do if(l<=c){if(Md(s._,r._)){n=s,(t.next=n).previous=t,--u;continue e}l+=s._.r,s=s.next}else{if(Md(f._,r._)){((t=f).next=n).previous=t,--u;continue e}c+=f._.r,f=f.previous}while(s!==f.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=Ed(t);(r=r.next)!==n;)(o=Ed(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=gd(t),u=0;u<i;++u)(t=e[u]).x-=r.x,t.y-=r.y;return r.r}(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function Dd(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Nd(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Pd(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(r-t)/e.value;++u<s;)(a=o[u]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*f}function $d(e){return e.id}function Ld(e){return e.parentId}function qd(e,t){return e.parent===t.parent?1:2}function jd(e){var t=e.children;return t?t[0]:e.t}function Fd(e){var t=e.children;return t?t[t.length-1]:e.t}function Ud(e,t){this._=e,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Id(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(i-n)/e.value;++u<s;)(a=o[u]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*f}function Bd(e,t,n,r,i,a){for(var o,u,s,f,l,c,d,h,p,g,m,v=[],y=t.children,b=0,_=0,x=y.length,w=t.value;b<x;){for(s=i-n,f=a-r;!(l=y[_++].value)&&_<x;);for(c=d=l,m=l*l*(g=Math.max(f/s,s/f)/(w*e)),p=Math.max(d/m,m/c);_<x;++_){if(l+=u=y[_].value,u<c&&(c=u),d<u&&(d=u),m=l*l*g,p<(h=Math.max(d/m,m/c))){l-=u;break}p=h}v.push(o={value:l,dice:s<f,children:y.slice(b,_)}),o.dice?Pd(o,n,r,i,w?r+=f*l/w:a):Id(o,n,r,w?n+=s*l/w:i,a),w-=l,b=_}return v}function Wd(e){sn.call(this,null,e)}function Vd(e){return e.values}function Hd(e){sn.call(this,null,e)}function Yd(e){Hd.call(this,e)}function Gd(e){Hd.call(this,e)}function Xd(e){sn.call(this,null,e)}function Zd(e){Hd.call(this,e)}function Jd(e){sn.call(this,[],e)}function Qd(e){Hd.call(this,e)}function Kd(e){return function(){return e}}function eh(e){return e[0]}function th(e){return e[1]}function nh(){this._=null}function rh(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ih(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ah(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function oh(e){for(;e.L;)e=e.L;return e}function uh(e,t,n,r){var i=[null,null],a=tA.push(i)-1;return i.left=e,i.right=t,n&&fh(i,e,t,n),r&&fh(i,t,e,r),KS[e.index].halfedges.push(a),KS[t.index].halfedges.push(a),i}function sh(e,t,n){var r=[t,n];return r.left=e,r}function fh(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function lh(e,t,n,r,i){var a,o=e[0],u=e[1],s=o[0],f=o[1],l=0,c=1,d=u[0]-s,h=u[1]-f;if(a=t-s,d||!(0<a)){if(a/=d,d<0){if(a<l)return;a<c&&(c=a)}else if(0<d){if(c<a)return;l<a&&(l=a)}if(a=r-s,d||!(a<0)){if(a/=d,d<0){if(c<a)return;l<a&&(l=a)}else if(0<d){if(a<l)return;a<c&&(c=a)}if(a=n-f,h||!(0<a)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(0<h){if(c<a)return;l<a&&(l=a)}if(a=i-f,h||!(a<0)){if(a/=h,h<0){if(c<a)return;l<a&&(l=a)}else if(0<h){if(a<l)return;a<c&&(c=a)}return(0<l||c<1)&&(0<l&&(e[0]=[s+l*d,f+l*h]),c<1&&(e[1]=[s+c*d,f+c*h])),!0}}}}}function ch(e,t,n,r,i){var a=e[1];if(a)return!0;var o,u,s=e[0],f=e.left,l=e.right,c=f[0],d=f[1],h=l[0],p=l[1],g=(c+h)/2,m=(d+p)/2;if(p===d){if(g<t||r<=g)return;if(h<c){if(s){if(s[1]>=i)return}else s=[g,n];a=[g,i]}else{if(s){if(s[1]<n)return}else s=[g,i];a=[g,n]}}else if(u=m-(o=(c-h)/(p-d))*g,o<-1||1<o)if(h<c){if(s){if(s[1]>=i)return}else s=[(n-u)/o,n];a=[(i-u)/o,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/o,i];a=[(n-u)/o,n]}else if(d<p){if(s){if(s[0]>=r)return}else s=[t,o*t+u];a=[r,o*r+u]}else{if(s){if(s[0]<t)return}else s=[r,o*r+u];a=[t,o*t+u]}return e[0]=s,e[1]=a,!0}function dh(e,t){return t[+(t.left!==e.site)]}function hh(){rh(this),this.x=this.y=this.arc=this.site=this.cy=null}function ph(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i[0],u=i[1],s=r[0]-o,f=r[1]-u,l=a[0]-o,c=a[1]-u,d=2*(s*c-f*l);if(!(-aA<=d)){var h=s*s+f*f,p=l*l+c*c,g=(c*h-f*p)/d,m=(s*p-l*h)/d,v=nA.pop()||new hh;v.arc=e,v.site=i,v.x=g+o,v.y=(v.cy=m+u)+Math.sqrt(g*g+m*m),e.circle=v;for(var y=null,b=eA._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}eA.insert(y,v),y||(JS=v)}}}}function gh(e){var t=e.circle;t&&(t.P||(JS=t.N),eA.remove(t),nA.push(t),rh(t),e.circle=null)}function mh(){rh(this),this.edge=this.site=this.circle=null}function vh(e){var t=rA.pop()||new mh;return t.site=e,t}function yh(e){gh(e),QS.remove(e),rA.push(e),rh(e)}function bh(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],a=e.P,o=e.N,u=[e];yh(e);for(var s=a;s.circle&&Math.abs(n-s.circle.x)<iA&&Math.abs(r-s.circle.cy)<iA;)a=s.P,u.unshift(s),yh(s),s=a;u.unshift(s),gh(s);for(var f=o;f.circle&&Math.abs(n-f.circle.x)<iA&&Math.abs(r-f.circle.cy)<iA;)o=f.N,u.push(f),yh(f),f=o;u.push(f),gh(f);var l,c=u.length;for(l=1;l<c;++l)f=u[l],s=u[l-1],fh(f.edge,s.site,f.site,i);s=u[0],(f=u[c-1]).edge=uh(s.site,f.site,null,i),ph(s),ph(f)}function _h(e){for(var t,n,r,i,a,o=e[0],u=e[1],s=QS._;s;)if(r=xh(s,u)-o,iA<r)s=s.L;else{if(i=o-wh(s,u),!(iA<i)){-iA<r?(t=s.P,n=s):-iA<i?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}KS[(a=e).index]={site:a,halfedges:[]};var f=vh(e);if(QS.insert(t,f),t||n){if(t===n)return gh(t),n=vh(t.site),QS.insert(f,n),f.edge=n.edge=uh(t.site,f.site),ph(t),void ph(n);if(n){gh(t),gh(n);var l=t.site,c=l[0],d=l[1],h=e[0]-c,p=e[1]-d,g=n.site,m=g[0]-c,v=g[1]-d,y=2*(h*v-p*m),b=h*h+p*p,_=m*m+v*v,x=[(v*b-p*_)/y+c,(h*_-m*b)/y+d];fh(n.edge,l,g,x),f.edge=uh(l,e,null,x),n.edge=uh(e,g,null,x),ph(t),ph(n)}else f.edge=uh(t.site,f.site)}}function xh(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var u=(n=o.site)[0],s=n[1],f=s-t;if(!f)return u;var l=u-r,c=1/a-1/f,d=l/f;return c?(-d+Math.sqrt(d*d-2*c*(l*l/(-2*f)-s+f/2+i-a/2)))/c+r:(r+u)/2}function wh(e,t){var n=e.N;if(n)return xh(n,t);var r=e.site;return r[1]===t?r[0]:1/0}function kh(e,t){return t[1]-e[1]||t[0]-e[0]}function Mh(e,t){var n,r,i,a=e.sort(kh).pop();for(tA=[],KS=new Array(e.length),QS=new nh,eA=new nh;;)if(i=JS,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(_h(a),n=a[0],r=a[1]),a=e.pop();else{if(!i)break;bh(i.arc)}if(function(){for(var e,t,n,r,i=0,a=KS.length;i<a;++i)if((e=KS[i])&&(r=(t=e.halfedges).length)){var o=new Array(r),u=new Array(r);for(n=0;n<r;++n)o[n]=n,u[n]=(s=e,f=tA[t[n]],d=c=void 0,l=s.site,c=f.left,d=f.right,l===d&&(d=c,c=l),d?Math.atan2(d[1]-c[1],d[0]-c[0]):(l===c?(c=f[1],d=f[0]):(c=f[0],d=f[1]),Math.atan2(c[0]-d[0],d[1]-c[1])));for(o.sort(function(e,t){return u[t]-u[e]}),n=0;n<r;++n)u[n]=t[o[n]];for(n=0;n<r;++n)t[n]=u[n]}var s,f,l,c,d}(),t){var o=+t[0][0],u=+t[0][1],s=+t[1][0],f=+t[1][1];!function(e,t,n,r){for(var i,a=tA.length;a--;)ch(i=tA[a],e,t,n,r)&&lh(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>iA||Math.abs(i[0][1]-i[1][1])>iA)||delete tA[a]}(o,u,s,f),function(e,t,n,r){var i,a,o,u,s,f,l,c,d,h,p,g,m,v,y=KS.length,b=!0;for(i=0;i<y;++i)if(a=KS[i]){for(o=a.site,u=(s=a.halfedges).length;u--;)tA[s[u]]||s.splice(u,1);for(u=0,f=s.length;u<f;)m=a,p=(h=(v=tA[s[u]])[+(v.left===m.site)])[0],g=h[1],c=(l=dh(a,tA[s[++u%f]]))[0],d=l[1],(Math.abs(p-c)>iA||Math.abs(g-d)>iA)&&(s.splice(u,0,tA.push(sh(o,h,Math.abs(p-e)<iA&&iA<r-g?[e,Math.abs(c-e)<iA?d:r]:Math.abs(g-r)<iA&&iA<n-p?[Math.abs(d-r)<iA?c:n,r]:Math.abs(p-n)<iA&&iA<g-t?[n,Math.abs(c-n)<iA?d:t]:Math.abs(g-t)<iA&&iA<p-e?[Math.abs(d-t)<iA?c:e,t]:null))-1),++f);f&&(b=!1)}if(b){var _,x,w,k=1/0;for(i=0,b=null;i<y;++i)(a=KS[i])&&(w=(_=(o=a.site)[0]-e)*_+(x=o[1]-t)*x)<k&&(k=w,b=a);if(b){var M=[e,t],E=[e,r],O=[n,r],S=[n,t];b.halfedges.push(tA.push(sh(o=b.site,M,E))-1,tA.push(sh(o,E,O))-1,tA.push(sh(o,O,S))-1,tA.push(sh(o,S,M))-1)}}for(i=0;i<y;++i)(a=KS[i])&&(a.halfedges.length||delete KS[i])}(o,u,s,f)}this.edges=tA,this.cells=KS,QS=eA=tA=KS=null}function Eh(e){sn.call(this,null,e)}function Oh(){function e(e,t,n){for(var r,i,a,o,u,l=t.x,d=t.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=f(s),g=c()<.5?1:-1,m=-g;(r=p(m+=g))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=h));)if(t.x=l+i,t.y=d+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1]||n&&Ah(t,e,s[0])||n&&(u=n,!((o=t).x+o.x1>u[0].x&&o.x+o.x0<u[1].x&&o.y+o.y1>u[0].y&&o.y+o.y0<u[1].y)))){for(var v,y=t.sprite,b=t.width>>5,_=s[0]>>5,x=t.x-(b<<4),w=127&x,k=32-w,M=t.y1-t.y0,E=(t.y+t.y0)*_+(x>>5),O=0;O<M;O++){for(var S=v=0;S<=b;S++)e[E+S]|=v<<k|(S<b?(v=y[O*b+S])>>>w:0);E+=_}return!(t.sprite=null)}return!1}var t,n,r,i,a,o,u,s=[256,256],f=Rh,l=[],c=Math.random,d={};return d.layout=function(){for(var f=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(lA<<5)/t,e.height=cA/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(Nr()),d=function(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),h=null,p=l.length,g=-1,m=[],v=l.map(function(e){return{text:t(e),font:n(e),style:i(e),weight:a(e),rotate:o(e),size:~~r(e),padding:u(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size});++g<p;){var y=v[g];y.x=s[0]*(c()+.5)>>1,y.y=s[1]*(c()+.5)>>1,Sh(f,y,v,g),y.hasText&&e(d,y,h)&&(m.push(y),h?Ch(h,y):h=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=s[0]>>1,y.y-=s[1]>>1)}return m},d.words=function(e){return arguments.length?(l=e,d):l},d.size=function(e){return arguments.length?(s=[+e[0],+e[1]],d):s},d.font=function(e){return arguments.length?(n=Th(e),d):n},d.fontStyle=function(e){return arguments.length?(i=Th(e),d):i},d.fontWeight=function(e){return arguments.length?(a=Th(e),d):a},d.rotate=function(e){return arguments.length?(o=Th(e),d):o},d.text=function(e){return arguments.length?(t=Th(e),d):t},d.spiral=function(e){return arguments.length?(f=dA[e]||e,d):f},d.fontSize=function(e){return arguments.length?(r=Th(e),d):r},d.padding=function(e){return arguments.length?(u=Th(e),d):u},d.random=function(e){return arguments.length?(c=e,d):c},d}function Sh(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(lA<<5)/a,cA/a);var o,u,s,f,l,c=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,s=t.size<<1,t.rotate){var g=Math.sin(t.rotate*fA),m=Math.cos(t.rotate*fA),v=o*m,y=o*g,b=s*m,_=s*g;o=Math.max(Math.abs(v+_),Math.abs(v-_))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(h<s&&(h=s),lA<<5<=c+o&&(d+=h,h=c=0),cA<=d+s)break;i.translate((c+(o>>1))/a,(d+(s>>1))/a),t.rotate&&i.rotate(t.rotate*fA),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=s,t.xoff=c,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,c+=o}for(var x=i.getImageData(0,0,(lA<<5)/a,cA/a).data,w=[];0<=--r;)if((t=n[r]).hasText){for(u=(o=t.width)>>5,s=t.y1-t.y0,f=0;f<s*u;f++)w[f]=0;if(null==(c=t.xoff))return;d=t.yoff;var k=0,M=-1;for(l=0;l<s;l++){for(f=0;f<o;f++){var E=u*l+(f>>5),O=x[(d+l)*(lA<<5)+(c+f)<<2]?1<<31-f%32:0;w[E]|=O,k|=O}k?M=l:(t.y0++,s--,l--,d++)}t.y1=t.y0+M,t.sprite=w.slice(0,(t.y1-t.y0)*u)}}}function Ah(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),u=127&o,s=32-u,f=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c=0;c<f;c++){for(var d=r=0;d<=a;d++)if((r<<s|(d<a?(r=i[c*a+d])>>>u:0))&t[l+d])return!0;l+=n}return!1}function Ch(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Rh(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function Th(e){return"function"==typeof e?e:function(){return e}}function zh(e){sn.call(this,Oh(),e)}function Dh(e){return new Uint32Array(e)}function Nh(e,t,n){var r=(t<257?function(e){return new Uint8Array(e)}:t<65537?function(e){return new Uint16Array(e)}:Dh)(e);return n&&r.set(n),r}function Ph(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this.bisect(this.range,e.value),a=e.index,o=i[0],u=i[1],s=a.length;for(n=0;n<o;++n)t[a[n]]|=r;for(n=u;n<s;++n)t[a[n]]|=r;return this}}}function $h(){var e=Dh(0),t=[],n=0;return{insert:function(r,i,a){if(!i.length)return[];var o,u,s,f,l,c=n,d=i.length,h=Array(d),p=Dh(d);for(s=0;s<d;++s)h[s]=r(i[s]),p[s]=s;if(l=p,(f=h).sort.call(l,function(e,t){var n=f[e],r=f[t];return n<r?-1:r<n?1:0}),h=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r}(f,l),c)o=t,u=e,t=Array(c+d),e=Dh(c+d),function(e,t,n,r,i,a,o,u,s){var f,l=0,c=0;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(u[f]=t[l],s[f]=n[l++]):(u[f]=i[c],s[f]=a[c++]+e);for(;l<r;++l,++f)u[f]=t[l],s[f]=n[l];for(;c<o;++c,++f)u[f]=i[c],s[f]=a[c]+e}(a,o,u,c,h,p,d,t,e);else{if(0<a)for(s=0;s<d;++s)p[s]+=a;t=h,e=p}return n=c+d,{index:p,value:h}},remove:function(r,i){var a,o,u,s=n;for(o=0;!i[e[o]]&&o<s;++o);for(u=o;o<s;++o)i[a=e[o]]||(e[u]=a,t[u]=t[o],++u);n=s-r},bisect:function(e,r){var i;return r?i=r.length:(r=t,i=n),[Vy(r,e[0],0,i),Wy(r,e[1],0,i)]},reindex:function(t){for(var r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}}function Lh(e){var t,n,r,i,a;sn.call(this,(t=8,n=[],r=Dh(0),i=Nh(0,t),a=Nh(0,t),{data:function(){return n},seen:function(){return e=r,t=n.length,r=e.length>=t?e:((i=i||new e.constructor(t)).set(e),i);var e,t,i},add:function(e){for(var t,r=0,i=n.length,a=e.length;r<a;++r)(t=e[r])._index=i++,n.push(t)},remove:function(e,t){var r,o,u,s=n.length,f=Array(s-e),l=n;for(o=0;!t[o]&&o<s;++o)f[o]=n[o],l[o]=o;for(u=o;o<s;++o)r=n[o],t[o]?l[o]=-1:(l[o]=u,i[u]=i[o],a[u]=a[o],(f[u]=r)._index=u++),i[o]=0;return n=f,l},size:function(){return n.length},curr:function(){return i},prev:function(){return a},reset:function(e){a[e]=i[e]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(e,t){i[e]|=t},clear:function(e,t){i[e]&=~t},resize:function(e,n){(i.length<e||t<n)&&(t=Math.max(n,t),i=Nh(e,t,i),a=Nh(e,t))}}),e),this._indices=null,this._dims=null}function qh(e){sn.call(this,null,e)}function jh(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:kA,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var r=t.value,i=r?f(r)?r:r.user:kA,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),e.add(null,function(e){var t,n=e.cursor,r=this.value;return f(n)||(r=n.item,n=n.user),t=n&&n!==kA?n:r||n,"undefined"!=typeof document&&document.body&&(document.body.style.cursor=t),r},{cursor:t})}function Fh(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||o("Unrecognized data set: "+t),n[t]}function Uh(e,t){ae(t)||o("Second argument to changes must be a changeset.");var n=Fh(this,e);return n.modified=!0,this.pulse(n.input,t)}function Ih(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Bh(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Wh(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Vh(e,t,n){var r,i,a=e._renderer.canvas();return a&&(i=Wh(e),(r=Fa(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.vega=function(e,t,n){function r(e){var n,r=a;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(e){if(!e)return n;f(e)&&(e=r(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var a=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:R(e),item:R(t||{}),group:r,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}(e,n,r),t.item=n,t}function Hh(e){return e.item}function Yh(e){var t=e.item.mark.source;return t.source||t}function Gh(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Xh(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}function Zh(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&(i.source=!0,e.signal(r.signal,t).run())}},r.debounce&&(i.update=T(r.debounce,i.update))),function(e,t,n,r){var i=Xh("div",{class:EA});i.appendChild(Xh("span",{class:OA},n.name||n.signal)),t.appendChild(i);var a=Jh;switch(n.input){case"checkbox":a=Qh;break;case"select":a=Kh;break;case"radio":a=ep;break;case"range":a=tp}a(e,i,n,r)}(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,function(){i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}}function Jh(e,t,n,r){var i=Xh("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",function(){e.update(i.value)}),e.elements=[i],e.set=function(e){i.value=e}}function Qh(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=Xh("input",i);t.appendChild(a),a.addEventListener("change",function(){e.update(a.checked)}),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function Kh(e,t,n,r){var i=Xh("select",{name:n.signal});n.options.forEach(function(e){var t={value:e};np(e,r)&&(t.selected=!0),i.appendChild(Xh("option",t,e+""))}),t.appendChild(i),i.addEventListener("change",function(){e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(np(n.options[t],e))return void(i.selectedIndex=t)}}function ep(e,t,n,r){var i=Xh("span",{class:SA});t.appendChild(i),e.elements=n.options.map(function(t){var a=AA+n.signal+"-"+t,o={id:a,type:"radio",name:n.signal,value:t};np(t,r)&&(o.checked=!0);var u=Xh("input",o);return u.addEventListener("change",function(){e.update(t)}),i.appendChild(u),i.appendChild(Xh("label",{for:a},t+"")),u}),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)np(n[r].value,t)&&(n[r].checked=!0)}}function tp(e,t,n,r){function i(){f.textContent=s.value,e.update(+s.value)}r=void 0!==r?r:(+n.max+ +n.min)/2;var a=n.min||Math.min(0,+r)||0,o=n.max||Math.max(100,+r)||100,u=n.step||Sn(a,o,100),s=Xh("input",{type:"range",name:n.signal,min:a,max:o,step:u}),f=Xh("label",{},+(s.value=r));t.appendChild(s),t.appendChild(f),s.addEventListener("input",i),s.addEventListener("change",i),e.elements=[s],e.set=function(e){s.value=e,f.textContent=e}}function np(e,t){return e===t||e+""==t+""}function rp(e,t,n,r,i){return(t=t||new r(e.loader())).initialize(n,Ih(e),Bh(e),Wh(e),i).background(e._background)}function ip(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function ap(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}function op(e,t,n){var r=uo(t),i=r&&r.headless;return i?e.runAsync().then(function(){return rp(e,null,null,i,n).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)}function up(e){return+e||0}function sp(e,t){o(e+' for "outer" push: '+l(t))}function fp(e,t){var n=e.name;if(e.push===CA)t.signals[n]||sp("No prior signal definition",n),RA.forEach(function(t){void 0!==e[t]&&sp("Invalid property ",t)});else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function lp(e){this.type=e}function cp(e,t){if(!e)throw new Error("ASSERT: "+t)}function dp(e){return 48<=e&&e<=57}function hp(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function pp(e){return 0<="01234567".indexOf(e)}function gp(e){return 10===e||13===e||8232===e||8233===e}function mp(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||92===e||128<=e&&sC.test(String.fromCharCode(e))}function vp(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||92===e||128<=e&&fC.test(String.fromCharCode(e))}function yp(){for(var e,t;bA<_A&&(e=yA.charCodeAt(bA),32===(t=e)||9===t||11===t||12===t||160===t||5760<=t&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)||gp(e));)++bA}function bp(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)bA<_A&&hp(yA[bA])?(r=yA[bA++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):Np({},ZA,oC);return String.fromCharCode(i)}function _p(){var e,t,n,r;for(t=0,"}"===(e=yA[bA])&&Np({},ZA,oC);bA<_A&&hp(e=yA[bA++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(1114111<t||"}"!==e)&&Np({},ZA,oC),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function xp(){var e,t;for(e=yA.charCodeAt(bA++),t=String.fromCharCode(e),92===e&&(117!==yA.charCodeAt(bA)&&Np({},ZA,oC),++bA,(e=bp("u"))&&"\\"!==e&&mp(e.charCodeAt(0))||Np({},ZA,oC),t=e);bA<_A&&vp(e=yA.charCodeAt(bA));)++bA,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==yA.charCodeAt(bA)&&Np({},ZA,oC),++bA,(e=bp("u"))&&"\\"!==e&&vp(e.charCodeAt(0))||Np({},ZA,oC),t+=e);return t}function wp(){var e,t;return e=bA,{type:1===(t=92===yA.charCodeAt(bA)?xp():function(){var e,t;for(e=bA++;bA<_A;){if(92===(t=yA.charCodeAt(bA)))return bA=e,xp();if(!vp(t))break;++bA}return yA.slice(e,bA)}()).length?DA:lC.hasOwnProperty(t)?NA:"null"===t?PA:"true"===t||"false"===t?TA:DA,value:t,start:e,end:bA}}function kp(){var e,t,n,r,i=bA,a=yA.charCodeAt(bA),o=yA[bA];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++bA,{type:LA,value:String.fromCharCode(a),start:i,end:bA};default:if(61===(e=yA.charCodeAt(bA+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return bA+=2,{type:LA,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:bA};case 33:case 61:return bA+=2,61===yA.charCodeAt(bA)&&++bA,{type:LA,value:yA.slice(i,bA),start:i,end:bA}}}return">>>="===(r=yA.substr(bA,4))?{type:LA,value:r,start:i,end:bA+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:LA,value:n,start:i,end:bA+=3}:o===(t=n.substr(0,2))[1]&&0<="+-<>&|".indexOf(o)||"=>"===t?{type:LA,value:t,start:i,end:bA+=2}:0<="<>=!+-*%&|^/".indexOf(o)?{type:LA,value:o,start:i,end:++bA}:void Np({},ZA,oC)}function Mp(){var e,t,n;if(cp(dp((n=yA[bA]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=bA,e="","."!==n){if(e=yA[bA++],n=yA[bA],"0"===e){if("x"===n||"X"===n)return++bA,function(e){for(var t="";bA<_A&&hp(yA[bA]);)t+=yA[bA++];return 0===t.length&&Np({},ZA,oC),mp(yA.charCodeAt(bA))&&Np({},ZA,oC),{type:$A,value:parseInt("0x"+t,16),start:e,end:bA}}(t);if(pp(n))return function(e){for(var t="0"+yA[bA++];bA<_A&&pp(yA[bA]);)t+=yA[bA++];return(mp(yA.charCodeAt(bA))||dp(yA.charCodeAt(bA)))&&Np({},ZA,oC),{type:$A,value:parseInt(t,8),octal:!0,start:e,end:bA}}(t);n&&dp(n.charCodeAt(0))&&Np({},ZA,oC)}for(;dp(yA.charCodeAt(bA));)e+=yA[bA++];n=yA[bA]}if("."===n){for(e+=yA[bA++];dp(yA.charCodeAt(bA));)e+=yA[bA++];n=yA[bA]}if("e"===n||"E"===n)if(e+=yA[bA++],"+"!==(n=yA[bA])&&"-"!==n||(e+=yA[bA++]),dp(yA.charCodeAt(bA)))for(;dp(yA.charCodeAt(bA));)e+=yA[bA++];else Np({},ZA,oC);return mp(yA.charCodeAt(bA))&&Np({},ZA,oC),{type:$A,value:parseFloat(e),start:t,end:bA}}function Ep(){var e,t,n,r;return xA=null,yp(),e=bA,t=function(){var e,t,n,r;for(cp("/"===(e=yA[bA]),"Regular expression literal must start with a slash"),t=yA[bA++],r=n=!1;bA<_A;)if(t+=e=yA[bA++],"\\"===e)gp((e=yA[bA++]).charCodeAt(0))&&Np({},rC),t+=e;else if(gp(e.charCodeAt(0)))Np({},rC);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||Np({},rC),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(n=t="";bA<_A&&vp((e=yA[bA]).charCodeAt(0));)++bA,"\\"===e&&bA<_A?Np({},ZA,oC):(n+=e,t+=e);return 0<=n.search(/[^gimuy]/g)&&Np({},nC,n),{value:n,literal:t}}(),r=function(e,t){var n=e;0<=t.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void Np({},nC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:bA}}function Op(){var e;return yp(),_A<=bA?{type:zA,start:bA,end:bA}:mp(e=yA.charCodeAt(bA))?wp():40===e||41===e||59===e?kp():39===e||34===e?function(){var e,t,n,r,i="",a=!1;for(cp("'"===(e=yA[bA])||'"'===e,"String literal must starts with a quote"),t=bA,++bA;bA<_A;){if((n=yA[bA++])===e){e="";break}if("\\"===n)if((n=yA[bA++])&&gp(n.charCodeAt(0)))"\r"===n&&"\n"===yA[bA]&&++bA;else switch(n){case"u":case"x":"{"===yA[bA]?(++bA,i+=_p()):i+=bp(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:pp(n)?(0!==(r="01234567".indexOf(n))&&(a=!0),bA<_A&&pp(yA[bA])&&(a=!0,r=8*r+"01234567".indexOf(yA[bA++]),0<="0123".indexOf(n)&&bA<_A&&pp(yA[bA])&&(r=8*r+"01234567".indexOf(yA[bA++]))),i+=String.fromCharCode(r)):i+=n}else{if(gp(n.charCodeAt(0)))break;i+=n}}return""!==e&&Np({},ZA,oC),{type:qA,value:i,octal:a,start:t,end:bA}}():46===e?dp(yA.charCodeAt(bA+1))?Mp():kp():dp(e)?Mp():kp()}function Sp(){var e;return bA=(e=xA).end,xA=Op(),bA=e.end,e}function Ap(){var e;e=bA,xA=Op(),bA=e}function Cp(e,t,n){var r=new lp("||"===e||"&&"===e?VA:FA);return r.operator=e,r.left=t,r.right=n,r}function Rp(e){var t=new lp(BA);return t.name=e,t}function Tp(e){var t=new lp(WA);return t.value=e.value,t.raw=yA.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function zp(e,t,n){var r=new lp(HA);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function Dp(e,t,n){var r=new lp(GA);return r.key=t,r.value=n,r.kind=e,r}function Np(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return cp(t<r.length,"Message reference must be in range"),r[t]});throw(n=new Error(i)).index=bA,n.description=i,n}function Pp(e){e.type===zA&&Np(e,tC),e.type===$A&&Np(e,JA),e.type===qA&&Np(e,QA),e.type===DA&&Np(e,KA),e.type===NA&&Np(e,eC),Np(e,ZA,e.value)}function $p(e){var t=Sp();t.type===LA&&t.value===e||Pp(t)}function Lp(e){return xA.type===LA&&xA.value===e}function qp(e){return xA.type===NA&&xA.value===e}function jp(){var e,t,n=[];for(bA=xA.start,
$p("[");!Lp("]");)Lp(",")?(Sp(),n.push(null)):(n.push(Gp()),Lp("]")||$p(","));return Sp(),e=n,(t=new lp(jA)).elements=e,t}function Fp(){var e;return bA=xA.start,(e=Sp()).type===qA||e.type===$A?(e.octal&&Np(e,iC),Tp(e)):Rp(e.value)}function Up(){var e,t,n,r,i,a,o,u=[],s={},f=String;for(bA=xA.start,$p("{");!Lp("}");)i=r=n=void 0,bA=xA.start,t="$"+((e=(n=xA).type===DA?(i=Fp(),$p(":"),Dp("init",i,Gp())):n.type!==zA&&n.type!==LA?(r=Fp(),$p(":"),Dp("init",r,Gp())):void Pp(n)).key.type===BA?e.key.name:f(e.key.value)),Object.prototype.hasOwnProperty.call(s,t)?Np({},aC):s[t]=!0,u.push(e),Lp("}")||$p(",");return $p("}"),a=u,(o=new lp(YA)).properties=a,o}function Ip(){var e,t,n,r;if(Lp("("))return $p("("),r=Xp(),$p(")"),r;if(Lp("["))return jp();if(Lp("{"))return Up();if(e=xA.type,bA=xA.start,e===DA||cC[xA.value])n=Rp(Sp().value);else if(e===qA||e===$A)xA.octal&&Np(xA,iC),n=Tp(Sp());else{if(e===NA)throw new Error(uC);e===TA?((t=Sp()).value="true"===t.value,n=Tp(t)):e===PA?((t=Sp()).value=null,n=Tp(t)):Lp("/")||Lp("/=")?(n=Tp(Ep()),Ap()):Pp(Sp())}return n}function Bp(){var e=[];if($p("("),!Lp(")"))for(;bA<_A&&(e.push(Gp()),!Lp(")"));)$p(",");return $p(")"),e}function Wp(){var e,t;return bA=xA.start,e=Sp(),(t=e).type!==DA&&t.type!==NA&&t.type!==TA&&t.type!==PA&&Pp(e),Rp(e.value)}function Vp(){var e=function(){var e,t,n,r,i,a;for(e=Ip();;)if(Lp("."))$p("."),e=zp(".",e,Wp());else if(Lp("("))t=Bp(),r=e,i=t,a=void 0,(a=new lp(UA)).callee=r,a.arguments=i,e=a;else{if(!Lp("["))break;n=void 0,$p("["),n=Xp(),$p("]"),e=zp("[",e,n)}return e}();if(xA.type===LA&&(Lp("++")||Lp("--")))throw new Error(uC);return e}function Hp(){var e,t,n,r,i;if(xA.type!==LA&&xA.type!==NA)t=Vp();else{if(Lp("++")||Lp("--"))throw new Error(uC);if(Lp("+")||Lp("-")||Lp("~")||Lp("!"))e=Sp(),t=Hp(),n=e.value,r=t,(i=new lp(XA)).operator=n,i.argument=r,i.prefix=!0,t=i;else{if(qp("delete")||qp("void")||qp("typeof"))throw new Error(uC);t=Vp()}}return t}function Yp(e){var t=0;if(e.type!==LA&&e.type!==NA)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Gp(){var e,t,n,r,i,a,o;return e=function(){var e,t,n,r,i,a,o,u,s,f;if(e=xA,s=Hp(),0===(i=Yp(r=xA)))return s;for(r.prec=i,Sp(),t=[e,xA],a=[s,r,o=Hp()];0<(i=Yp(xA));){for(;2<a.length&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=Cp(u,s,o),a.push(n);(r=Sp()).prec=i,a.push(r),t.push(xA),n=Hp(),a.push(n)}for(n=a[f=a.length-1],t.pop();1<f;)t.pop(),n=Cp(a[f-1].value,a[f-2],n),f-=2;return n}(),Lp("?")&&(Sp(),t=Gp(),$p(":"),n=Gp(),r=e,i=t,a=n,(o=new lp(IA)).test=r,o.consequent=i,o.alternate=a,e=o),e}function Xp(){var e=Gp();if(Lp(","))throw new Error(uC);return e}function Zp(e){function t(t,n,r){return function(i){return a=t,u=n,s=r,f=e((o=i)[0]),u&&(f=u+"("+f+")",0===u.lastIndexOf("new ",0)&&(f="("+f+")")),f+"."+a+(s<0?"":0===s?"()":"("+o.slice(1).map(e).join(",")+")");var a,o,u,s,f}}var n="new Date",r="String";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&o("Missing arguments to clamp function."),3<t.length&&o("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),indexof:t("indexOf",null),lastindexof:t("lastIndexOf",null),slice:t("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),replace:t("replace",r),regexp:"RegExp",test:t("test","RegExp"),if:function(t){t.length<3&&o("Missing arguments to if function."),3<t.length&&o("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function Jp(e,t,n){var r=e+":"+n,i=hC[r];return i&&i[0]===t||(hC[r]=i=[t,t(n)]),i[1]}function Qp(e,t){return Jp("timeFormat",ky,t)(e)}function Kp(e,t,n){return pC.setMonth(e),pC.setDate(t),Qp(pC,n)}function eg(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function tg(e,t){var n;return A(e)?e:f(e)?(n=t.scales[e])&&n.value:void 0}function ng(e,t,n){var r=vC+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(e){}}function rg(e,t,n,r){if(t[0].type===mC)ng(n,r,t[0].value);else if("Identifier"===t[0].type)for(e in n.scales)ng(n,r,e)}function ig(e,t){return function(n,r,i){if(n){var a=tg(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}function ag(e){var t=this.context.data[e];return t?t.values.value:[]}function og(e,t,n,r){t[0].type!==mC&&o("First argument to data functions must be a string literal.");var i=t[0].value,a=yC+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function ug(e){return e.data}function sg(e,t){var n=ag.call(t,e);return n.root&&n.root.lookup||wC}function fg(e,t,n,r){var i,a=t[0],o=t[t.length-1];return o<a&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=e:a<e)&&(r?e<=o:e<o)}function lg(e,t){return e===t||e!=e&&t!=t||!(!xv(e)||!xv(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!lg(e[n],t[n]))return!1;return!0}(e,t)}function cg(e){return function(t){for(var n in e)if(!lg(t[n],e[n]))return!1;return!0}}function dg(e,t){for(var n,r=t.fields,i=t.values,a=t.getter||(t.getter=[]),o=r.length,u=0;u<o;++u)if(a[u]=a[u]||c(r[u]),L(n=a[u](e))&&(n=g(n)),L(i[u])&&(i[u]=g(i[u])),t[kC+r[u]]){if(L(i[u][0])&&(i[u]=i[u].map(g)),!fg(n,i[u],!0,!1))return!1}else if(n!==i[u])return!1;return!0}function hg(e,t){for(var n,r,i=t.intervals,a=i.length,o=0;o<a;++o){if(n=i[o].extent,r=(i[o].getter||(i[o].getter=c(i[o].field)))(e),!n||n[0]===n[1])return!1;if(L(r)&&(r=g(r)),L(n[0])&&(n=i[o].extent=n.map(g)),q(n[0])&&!fg(r,n))return!1;if(f(n[0])&&n.indexOf(r)<0)return!1}return!0}function pg(e,t,n,r){for(var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=f?f[OC]&&f[OC].value:void 0,d=n===MC,h=l.length,p=0;p<h;++p)if(i=l[p],c&&d){if(-1===(o=(a=a||{})[u=i.unit]||0))continue;if(s=r(t,i),a[u]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(u).count)return!1}else if(d^(s=r(t,i)))return s;return h&&d}function gg(e,t,n){return pg.call(this,e,t,n,dg)}function mg(e,t,n,r){t[0].type!==mC&&o("First argument to indata must be a string literal.");var i=t[0].value;(2<=t.length&&t[t.length-1].value)!==MC||r.hasOwnProperty("@unit")||(r["@unit"]=n.getData(i).indataRef(n,"unit")),og(0,t,n,r)}function vg(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=f?f[OC]&&f[OC].value:void 0,d=l[0],h=0;if(d){for(i=t?d.encodings.length:d.fields.length;h<i;++h)if(t&&d.encodings[h]===t||n&&d.fields[h]===n){a=h,u=d[kC+d.fields[h]];break}return c&&1===c.size&&(r=EC),c&&r===MC?(s=l.reduce(function(e,t){return(e[t.unit]||(e[t.unit]=[])).push({unit:t.unit,value:t.values[a]}),e},{}),o=Object.keys(s).map(function(e){return{unit:e,value:u?bg(s[e],EC):yg(s[e],EC)}})):o=l.map(function(e){return{unit:e.unit,value:e.values[a]}}),u?bg(o,r):yg(o,r)}}function yg(e,t){for(var n,r,i,a,o={},u=0,s={},f=[],l=0,c=e.length;l<c;++l)r=(n=e[l]).unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],t===MC&&i.count!==u||f.push(i.value);return f.length?f:void 0}function bg(e,t){for(var n,r,i,a,o=t===MC?xg:_g,u=0,s=e.length;u<s;++u)L((n=e[u].value)[0])&&(n=n.map(g)),i=n[0],(a=n[1])<i&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function _g(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function xg(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function wg(e,t,n){return 1===arguments.length?SC[e]:(SC[e]=t,n&&(CC[e]=n),DC&&(DC.functions[e]="this."+e),this)}function kg(e,t,n){var r,i,a={};try{r=function(e){bA=0,_A=(yA=e).length,xA=null,Ap();var t=Xp();if(xA.type!==zA)throw new Error("Unexpect token after expression.");return t}(e=f(e)?e:l(e)+"")}catch(n){o("Expression parse error: "+e)}return r.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,r=zC.visitors[n];r&&r(n,e.arguments,t,a)}}),(i=DC(r)).globals.forEach(function(e){var n=NC+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}}function Mg(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Eg(e,t,n,r){return new Mg(e,t,n,r)}function Og(e,t){return Eg("operator",e,t)}function Sg(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Ag(e,t){return t?{$field:e,$name:t}:{$field:e}}function Cg(e,t){return{$compare:e,$order:t}}function Rg(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function Tg(e){return e&&e.signal}function zg(e,t){return null!=e?e:t}function Dg(e){return e&&e.signal||e}function Ng(e,t){return(e.merge?Pg:e.stream?$g:e.type?Lg:o("Invalid stream specification: "+l(e)))(e,t)}function Pg(e,t){var n=qg({merge:e.merge.map(function(e){return Ng(e,t)})},e,t);return t.addStream(n).id}function $g(e,t){var n=qg({stream:Ng(e.stream,t)},e,t);return t.addStream(n).id}function Lg(e,t){var n,r,i;return e.type===FC?(n=t.event(FC,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((i=e.source)===qC?jC:i||jC,e.type),r=qg({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function qg(e,t,n){var r,i,a,u,s=t.between;return s&&(2!==s.length&&o('Stream "between" parameter must have 2 entries: '+l(t)),e.between=[Ng(s[0],n),Ng(s[1],n)]),s=t.filter?S(t.filter):[],(t.marktype||t.markname||t.markrole)&&s.push((r=t.marktype,i=t.markname,a=t.markrole,(u="event.item")+(r&&"*"!==r?"&&"+u+".mark.marktype==='"+r+"'":"")+(a?"&&"+u+".mark.role==='"+a+"'":"")+(i?"&&"+u+".mark.name==='"+i+"'":""))),t.source===qC&&s.push("inScope(event.item)"),s.length&&(e.filter=kg("("+s.join(")&&(")+")").$expr),null!=(s=t.throttle)&&(e.throttle=+s),null!=(s=t.debounce)&&(e.debounce=+s),t.consume&&(e.consume=!0),e}function jg(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&0<=i.indexOf(a)?--o:r&&0<=r.indexOf(a)&&++o}return t}function Fg(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=jg(e,i,YC,IC+WC,BC+VC),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function Ug(e){return"["===e[0]?function(e){var t,n,r=e.length,i=1;if((i=jg(e,i,BC,IC,BC))===r)throw"Empty between selector: "+e;if(2!==(t=Fg(e.substring(1,i))).length)throw"Between selector must have two elements: "+e;if((e=e.slice(i+1).trim())[0]!==XC)throw"Expected '>' after between selector: "+e;return t=t.map(Ug),(n=Ug(e.slice(1).trim())).between?{between:t,stream:n}:(n.between=t,n)}(e):function(e){var t,n,r={source:RC},i=[],a=[0,0],o=0,u=0,s=e.length,f=0;if(e[s-1]===VC){if(!(0<=(f=e.lastIndexOf(WC))))throw"Unmatched right brace: "+e;try{a=function(e){var t=e.split(YC);if(!e.length||2<t.length)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}(e.substring(f+1,s-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,f).trim(),s=e.length,f=0}if(!s)throw e;if(e[0]===GC&&(o=++f),(t=jg(e,f,HC))<s&&(i.push(e.substring(u,t).trim()),u=f=++t),(f=jg(e,f,IC))===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,f).trim()),n=[],(u=++f)===s)throw"Unmatched left bracket: "+e;for(;f<s;){if((f=jg(e,f,BC))===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,f).trim()),f<s-1&&e[++f]!==IC)throw"Expected left bracket: "+e;u=++f}if(!(s=i.length)||ZC.test(i[s-1]))throw"Invalid event selector: "+e;1<s?(r.type=i[1],o?r.markname=i[0].slice(1):(l=i[0],TC.hasOwnProperty(l)?r.marktype=i[0]:r.source=i[0])):r.type=i[0];var l;return"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}(e)}function Ig(e,t,n){var r,i,a,u,s,c=e.events,d=e.update,h=e.encode,p=[];c||o("Signal update missing events specification."),f(c)&&(a=c,u=t.isSubscope()?qC:jC,RC=u||UC,TC=s||JC,c=Fg(a.trim()).map(Ug)),(c=S(c).filter(function(e){return e.signal||e.scale?(p.push(e),0):1})).length&&p.push(1<c.length?{merge:c}:c[0]),null!=h&&(d&&o("Signal encode and update are mutually exclusive."),d="encode(item(),"+l(h)+")"),r=f(d)?kg(d,t,QC):null!=d.expr?kg(d.expr,t,QC):null!=d.value?d.value:null!=d.signal?{$expr:"_.value",$params:{value:t.signalRef(d.signal)}}:o("Invalid signal update specification."),i={target:n,update:r},e.force&&(i.options={force:!0}),p.forEach(function(e){var n,r;t.addUpdate(z((r=t,{source:(n=e).signal?r.signalRef(n.signal):n.scale?r.scaleRef(n.scale):Ng(n,r)}),i))})}function Bg(e){return function(t,n,r){return Eg(e,n,t||void 0,r)}}function Wg(e){return RR.hasOwnProperty(e)}function Vg(e){return AR.hasOwnProperty(e)}function Hg(e){return"quantile"===e}function Yg(e,t){var n,r,i,a,u=t.getScale(e.name).params;for(n in u.domain=Zg(e.domain,e,t),null!=e.range&&(u.range=function e(t,n,r){var i=t.range,a=n.config.range;if(i.signal)return n.signalRef(i.signal);if(f(i)){if(a&&a.hasOwnProperty(i))return t=z({},t,{range:a[i]}),e(t,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=Wg(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:o("Unrecognized scale range value: "+l(i))}else{if(i.scheme)return r.scheme=Gg(i.scheme,n),i.extent&&(r.schemeExtent=(u=i.extent,s=n,u.signal?s.signalRef(u.signal):u.map(function(e){return Gg(e,s)}))),void(i.count&&(r.schemeCount=Gg(i.count,n)));if(i.step)return void(r.rangeStep=Gg(i.step,n));if(Wg(t.type)&&!xv(i))return Zg(i,t,n);xv(i)||o("Unsupported range type: "+l(i))}var u,s;return i.map(function(e){return Gg(e,n)})}(e,t,u)),null!=e.interpolate&&(r=e.interpolate,(i=u).interpolate=Gg(r.type||r),null!=r.gamma&&(i.interpolateGamma=Gg(r.gamma))),null!=e.nice&&(a=e.nice,u.nice=s(a)?{interval:Gg(a.interval),step:Gg(a.step)}:Gg(a)),e)u.hasOwnProperty(n)||"name"===n||(u[n]=Gg(e[n],t))}function Gg(e,t){return s(e)?e.signal?t.signalRef(e.signal):o("Unsupported object: "+l(e)):e}function Xg(e){o("Can not find data set: "+l(e))}function Zg(e,t,n){return e?e.signal?n.signalRef(e.signal):(xv(e)?function(e,t,n){return e.map(function(e){return Gg(e,n)})}:e.fields?function(e,t,n){var r=e.data,i=e.fields.reduce(function(e,t){return t=f(t)?{data:r,field:t}:xv(t)||t.signal?function(e,t){var n="_:vega:_"+ER++,r=nR({});if(xv(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+l(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,xR({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e},[]);return(Wg(t.type)?function(e,t,n){var r,i,a;return r=n.map(function(e){var n=t.getData(e.data);return n||Xg(e.data),n.countsRef(t,e.field)}),i=t.add(KC({groupby:$C,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:r})),a=t.add(nR({pulse:Sg(i)})),Sg(t.add(MR({field:$C,sort:t.sortRef(Jg(e.sort,!0)),pulse:Sg(a)})))}:Hg(t.type)?function(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||Xg(e.data),n.domainRef(t,e.field)});return Sg(t.add(dR({values:r})))}:function(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||Xg(e.data),n.extentRef(t,e.field)});return Sg(t.add(cR({extents:r})))})(e,n,i)}:function(e,t,n){var r=n.getData(e.data);return r||Xg(e.data),Wg(t.type)?r.valuesRef(n,e.field,Jg(e.sort,!1)):Hg(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)})(e,t,n):void(null==t.domainMin&&null==t.domainMax||o("No scale domain defined for domainMin/domainMax to override."))}function Jg(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?o("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&o("Multiple domain scales support op count only."):o("No field provided for sort aggregate op: "+e.op):s(e)?e.field="key":e={field:"key"}),e}function Qg(e,t,n){return xv(e)?e.map(function(e){return Qg(e,t,n)}):s(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:o("Unsupported parameter object: "+l(e)):e}function Kg(e,t,n,r){var i=kg(e,t);return i.$fields.forEach(function(e){r[e]=1}),z(n,i.$params),i.$expr}function em(e,t,n,r){return function e(t,n,r,i){var a,s,c;if(t.signal)a="datum",c=Kg(t.signal,n,r,i);else if(t.group||t.parent){for(s=Math.max(1,t.level||1),a="item";0<s--;)a+=".mark.group";t.parent?(c=t.parent,a+=".datum"):c=t.group}else t.datum?(a="datum",c=t.datum):o("Invalid field reference: "+l(t));return t.signal||(f(c)?(i[c]=1,c=u(c).map(l).join("][")):c=e(c,n,r,i)),a+"["+c+"]"}(s(e)?e:{datum:e},t,n,r)}function tm(e,t,n,r,i){var a,o,u,s=nm(e.scale,n,r,i);return null!=e.range?(o=s+".range()",t=0===(a=+e.range)?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=s+"("+t+")"),e.band&&(u=function(e,t){if(!f(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}(e.scale,n))&&(a=(o=s+".bandwidth")+"()"+(1===(a=+e.band)?"":"*"+a),u<0&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+s+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t}function nm(e,t,n,r){var i;if(f(e))i=vC+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=l(i);else{for(i in t.scales)n[vC+i]=t.scaleRef(i);i=l(vC)+"+"+(e.signal?"("+Kg(e.signal,t,n,r)+")":em(e,t,n,r))}return"_["+i+"]"}function rm(e,t,n,r){return s(e)?"("+im(null,e,t,n,r)+")":e}function im(e,t,n,r,i){if(null!=t.gradient)return o=n,u=r,s=i,"this.gradient("+nm((a=t).gradient,o,u,s)+","+l(a.start)+","+l(a.stop)+","+l(a.count)+")";var a,o,u,s,f=t.signal?Kg(t.signal,n,r,i):t.color?function(e,t,n,r){function i(e,i,a,o){return"this."+e+"("+[im(null,i,t,n,r),im(null,a,t,n,r),im(null,o,t,n,r)].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null}(t.color,n,r,i):null!=t.field?em(t.field,n,r,i):void 0!==t.value?l(t.value):void 0;return null!=t.scale&&(f=tm(t,f,n,r,i)),void 0===f&&(f=null),null!=t.exponent&&(f="Math.pow("+f+","+rm(t.exponent,n,r,i)+")"),null!=t.mult&&(f+="*"+rm(t.mult,n,r,i)),null!=t.offset&&(f+="+"+rm(t.offset,n,r,i)),t.round&&(f="Math.round("+f+")"),f}function am(e,t,n){return e+"["+l(t)+"]="+n+";"}function om(e,t,n,r,i){var a="";return t.forEach(function(e){var t=im(0,e,n,r,i);a+=e.test?Kg(e.test,n,r,i)+"?"+t+":":t}),am("o",e,a)}function um(e,t,n,r){var i,a,o,u,s,f={},l="var o=item,datum=o.datum,$;";for(i in e)a=e[i],l+=xv(a)?om(i,a,r,n,f):am("o",i,im(0,a,r,n,f));return o=e,s="",JR[u=t]||(o.x2&&(o.x?(QR[u]&&(s+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),s+="o.width=o.x2-o.x;"):s+="o.x=o.x2-(o.width||0);"),o.xc&&(s+="o.x=o.xc-(o.width||0)/2;"),o.y2&&(o.y?(QR[u]&&(s+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),s+="o.height=o.y2-o.y;"):s+="o.y=o.y2-(o.height||0);"),o.yc&&(s+="o.y=o.yc-(o.height||0)/2;")),l+=s,{$expr:l+="return 1;",$fields:Object.keys(f),$output:Object.keys(e)}}function sm(e){return s(e)?z({},e):{value:e}}function fm(e,t,n){return null!=n?(e[t]=s(n)&&!xv(n)?n:{value:n},1):0}function lm(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=z(e[r]||{},t[r]));return e}function cm(e,t,n,r,i,a){var o,u;for(u in(a=a||{}).encoders={$encode:o={}},e=function(e,t,n,r,i){var a,o,u={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null);for(a in o=n===eT?i.group:n===KR?z({},i.mark,i[t]):null)hm(a,e)||("fill"===a||"stroke"===a)&&(hm("fill",e)||hm("stroke",e))||(u[a]=dm(o[a]));return S(r).forEach(function(t){var n=i.style&&i.style[t];for(var r in n)hm(r,e)||(u[r]=dm(n[r]))}),(e=z({},e)).enter=z(u,e.enter),e}(e,t,n,r,i.config))o[u]=um(e[u],t,a,i);return a}function dm(e){return e&&e.signal?{signal:e.signal}:{value:e}}function hm(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function pm(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:lm(a,o,ZR)}}function gm(e,t,n){return zg(t[e],n[e])}function mm(e,t){return zg(e.direction,t)===PR}function vm(e,t){return zg(e.gradientLength,t.gradientLength||t.gradientWidth)}function ym(e,t){return zg(e.gradientThickness,t.gradientThickness||t.gradientHeight)}function bm(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function _m(e,t,n,r){var i,a,o,u,s={value:0},f=mm(e,t.gradientDirection),l=sm(ym(e,t)),c=vm(e,t),d=gm("labelOverlap",e,t),h={},p="";return h.enter=i={opacity:s},fm(i,"fill",gm("labelColor",e,t)),fm(i,"font",gm("labelFont",e,t)),fm(i,"fontSize",gm("labelFontSize",e,t)),fm(i,"fontWeight",gm("labelFontWeight",e,t)),fm(i,"limit",zg(e.labelLimit,t.gradientLabelLimit)),h.exit={opacity:s},h.update=a={opacity:{value:1},text:{field:LR}},f?(i.align={value:"left"},i.baseline=a.baseline={signal:wT},o="y",u="x",p="1-"):(i.align=a.align={signal:xT},i.baseline={value:"top"},o="x",u="y"),i[o]=a[o]={signal:p+"datum."+jR,mult:c},i[u]=a[u]=l,l.offset=zg(e.labelOffset,t.gradientLabelOffset)||0,e=pm(_T,dT,BR,IR,r,h,n),d&&(e.overlap={method:d,order:"datum."+$R}),e}function xm(e,t,n,r,i,a,o,u){return{type:mT,name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:u}}function wm(e,t){return{align:gm("gridAlign",e,t),center:{row:!0,column:!1},columns:(n=e,r=t,zg(n.columns,zg(r.columns,+mm(n,r.symbolDirection)))),padding:{row:gm("rowPadding",e,t),column:gm("columnPadding",e,t)}};var n,r}function km(e){return s(e)&&e.signal?e.signal:l(e)}function Mm(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===mT?tT:t||KR:t}function Em(e,t){var n=fn(e.type);n||o("Unrecognized transform type: "+l(e.type));var r=Eg(n.type.toLowerCase(),null,Om(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Om(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)o[(r=e.params[i]).name]=Sm(r,t,n);return o}function Sm(e,t,n){var r,i,a,u=e.type,s=t[e.name];return"index"===u?function(e,t,n){return f(t.from)||o('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==s?"param"===u?(i=n,a=t[(r=e).name],r.array?(xv(a)||o("Expected an array of sub-parameters. Instead: "+l(a)),a.map(function(e){return Cm(r,e,i)})):Cm(r,a,i)):"projection"===u?n.projectionRef(t[e.name]):e.array&&!Tg(s)?s.map(function(t){return Am(e,t,n)}):Am(e,s,n):void(e.required&&o("Missing required "+l(t.type)+" parameter: "+l(e.name)))}function Am(e,t,n){var r=e.type;if(Tg(t))return Rm(r)?o("Expression references can not be signals."):Tm(r)?n.fieldRef(t):zm(r)?n.compareRef(t):n.signalRef(t.signal);var i,a,u=e.expr||Tm(r);return u&&(a=t)&&a.expr?kg(t.expr,n):u&&(i=t)&&i.field?Ag(t.field):Rm(r)?kg(t,n):"data"===r?Sg(n.getData(t).values):Tm(r)?Ag(t):zm(r)?n.compareRef(t):t}function Cm(e,t,n){var r,i,a,u,s;for(u=0,s=e.params.length;u<s;++u){for(a in(i=e.params[u]).key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||o("Unsupported parameter: "+l(t)),r=z(Om(i,t,n),i.key),Sg(n.add(pR(r)))}function Rm(e){return"expr"===e}function Tm(e){return"field"===e}function zm(e){return"compare"===e}function Dm(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Sg(t.getData(e.data).output)}function Nm(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function Pm(e){return f(e)?e:null}function $m(e,t,n){var r,i=Rg(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function Lm(e,t,n,r,i,a,o){var u,f,l,c=t[n]||(t[n]={}),d=s(l=a)?(l.order===LC?"-":"+")+Rg(l.op,l.field):"",h=Pm(i);if(null!=h&&(e=t.scope,u=c[h+=d?"|"+d:""]),!u){var p=a?{field:$C,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:Sg(t.output)};d&&(p.sort=e.sortRef(a)),f=e.add(Eg(r,void 0,p)),o&&(t.index[i]=f),u=Sg(f),null!=h&&(c[h]=u)}return u}function qm(e,t,n){var r,i=e.remove,a=e.insert,o=e.toggle,u=e.modify,s=e.values,f=t.add(Og());r=kg("if("+e.trigger+',modify("'+n+'",'+[a,i,o,u,s].map(function(e){return null==e?"null":e}).join(",")+"),0)",t),f.update=r.$expr,f.params=r.$params}function jm(e,t){var n,r,i,a,u,f,c,d,h,p,g,m,v,y,b,_,x,w,k,M,E,O,A,C,R,T,D,N,P,$,L,q,j,F,U,I,B,W,V,H,Y,G,X=Mm(e),Z=e.type===mT,J=e.from&&e.from.facet,Q=e.layout||X===tT||X===eT,K=X===KR||Q||J,ee=e.overlap;y=e.from,b=Z,_=t,y?(x=y.facet)&&(b||o("Only group marks can be faceted."),null!=x.field?M=E=Dm(x,_):(y.data?E=Sg(_.getData(y.data).aggregate):((k=Em(z({type:"aggregate",groupby:S(x.groupby)},x.aggregate),_)).params.key=_.keyRef(x.groupby),k.params.pulse=Dm(x,_),M=E=Sg(_.add(k))),w=_.keyRef(x.groupby,!0))):M=Sg(_.add(nR(null,[{}]))),M||(M=Dm(y,_)),i={key:w,pulse:M,parent:E},h=Sg(r=t.add(iR({key:i.key||(e.key?Ag(e.key):void 0),pulse:i.pulse,clean:!Z}))),r=a=t.add(nR({pulse:h})),p=Sg(r=t.add(lR({markdef:(D=e,{marktype:D.type,name:D.name||void 0,role:D.role||Mm(D),zindex:+D.zindex||void 0}),interactive:(R=e.interactive,T=t,R&&R.signal?T.signalRef(R.signal):!1!==R),clip:(O=e.clip,A=t,s(O)&&(O.signal?C=O.signal:O.path?C="pathShape("+km(O.path)+")":O.sphere&&(C="geoShape("+km(O.sphere)+', {type: "Sphere"})')),C?A.signalRef(C):!!O),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Sg(r)}))),(r=t.add(aR(cm(e.encode,e.type,X,e.style,t,{pulse:p})))).params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=Em(e,t);(n.metadata.generates||n.metadata.changes)&&o("Mark transforms should not generate new data."),n.params.pulse=Sg(r),t.add(r=n)}),e.sort&&(r=t.add(wR({sort:t.compareRef(e.sort,!0),pulse:Sg(r)}))),g=Sg(r),(J||Q)&&(m=Sg(Q=t.add(kR({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:p,pulse:g})))),v=Sg(u=t.add(tR({mark:p,pulse:m||g}))),Z&&(K&&((n=t.operators).pop(),Q&&n.pop()),t.pushState(g,m||v,h),J?(F=t,U=i,H=(j=e).from.facet,Y=H.name,G=Dm(H,F),H.name||o("Facet must have a name: "+l(H)),H.data||o("Facet must reference a data set: "+l(H)),H.field?V=F.add(gR({field:F.fieldRef(H.field),pulse:G})):H.groupby?V=F.add(oR({key:F.keyRef(H.groupby),group:Sg(F.proxy(U.parent)),pulse:G})):o("Facet must specify groupby or field: "+l(H)),B=(I=F.fork()).add(nR()),W=I.add(xR({pulse:Sg(B)})),I.addData(Y,new Nm(I,B,B,W)),I.addSignal("parent",null),V.params.subflow={$subflow:Gm(j,I).toRuntime()}):K?(N=e,$=i,L=(P=t).add(gR({pulse:$.pulse})),(q=P.fork()).add(xR()),q.addSignal("parent",null),L.params.subflow={$subflow:Gm(N,q).toRuntime()}):Gm(e,t),t.popState(),K&&(Q&&n.push(Q),n.push(u))),ee&&(r={method:!0===ee.method?"parity":ee.method,pulse:v},ee.order&&(r.sort=t.compareRef({field:ee.order})),ee.bound&&(r.boundScale=t.scaleRef(ee.bound.scale),r.boundOrient=ee.bound.orient,r.boundTolerance=ee.bound.tolerance),v=Sg(t.add(hR(r)))),f=t.add(bR({pulse:v})),c=t.add(xR({pulse:Sg(f)},void 0,t.parent())),null!=e.name&&(d=e.name,t.addData(d,new Nm(t,a,f,c)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&o("Marks only support modify triggers."),qm(e,t,d)}))}function Fm(e,t){var n,r,i,a,u,s,f,l,c,d,h,p,g,m,v,y,b,_,x,w,k,M,E,O,S,A,C,R,T,z,D,N,P,$,L,q,j,F,U,I,B,W,V,H,Y,G,X,Z,J,Q,K,ee,te,ne,re,ie,ae,oe,ue,se,fe,le,ce,de,he,pe,ge,me,ve,ye,be,_e,xe,we,ke,Me,Ee,Oe,Se,Ae,Ce,Re,Te,ze,De,Ne,Pe=t.config.legend,$e=e.encode||{},Le=$e.legend||{},qe=Le.name||void 0,je=Le.interactive,Fe=Le.style,Ue=XR.reduce(function(t,n){return t||e[n]},0);return Ue||o("Missing valid scale for legend."),u=function(e,t){var n=e.type||HR;e.type||1!==(i=e,XR.reduce(function(e,t){return e+(i[t]?1:0)},0))||!e.fill&&!e.stroke||(r=t,n=CR.hasOwnProperty(r)?YR:Vg(t)?GR:HR);var r,i;return n!==YR?n:Vg(t)?GR:YR}(e,t.scaleType(Ue)),s={orient:gm("orient",e,Pe),title:null!=e.title,type:u},f=Sg(t.add(nR(null,[s]))),Le=lm({enter:(d=e,h=Pe,p={},fm(p,"fill",gm("fillColor",d,h))+fm(p,"stroke",gm("strokeColor",d,h))+fm(p,"strokeWidth",gm("strokeWidth",d,h))+fm(p,"cornerRadius",gm("cornerRadius",d,h))+fm(p,"strokeDash",h.strokeDash)?p:void 0),update:{offset:sm(gm("offset",e,Pe)),padding:sm(gm("padding",e,Pe)),titlePadding:sm(gm("titlePadding",e,Pe))}},Le,ZR),n={enter:{x:{value:0},y:{value:0}}},l=Sg(t.add(fR(i={type:u,scale:t.scaleRef(Ue),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u===YR?(a=[(he=e,pe=Ue,ge=Pe,me=$e.gradient,ke={value:0},Me=mm(he,ge.gradientDirection),Ee=ym(he,ge),Oe=vm(he,ge),Se={},Me?(be=[0,1],_e=[0,0],xe=Ee,we=Oe):(be=[0,0],_e=[1,0],xe=Oe,we=Ee),Se.enter=ve={opacity:ke,x:ke,y:ke},fm(ve,"stroke",gm("gradientStrokeColor",he,ge)),fm(ve,"strokeWidth",gm("gradientStrokeWidth",he,ge)),Se.exit={opacity:ke},Se.update=ye={x:ke,y:ke,fill:{gradient:pe,start:be,stop:_e},opacity:{value:1}},ve.width=ye.width=sm(xe),ve.height=ye.height=sm(we),pm(vT,cT,null,void 0,void 0,Se,me)),_m(e,Pe,$e.labels,l)],i.count=i.count||t.signalRef("max(2,2*floor(("+Dg(vm(e,Pe))+")/100))")):u===GR?a=[(Z=e,J=Ue,Q=Pe,K=$e.gradient,ee=l,ue={value:0},se=mm(Z,Q.gradientDirection),fe=ym(Z,Q),le=vm(Z,Q),ce={},de="",se?(re="y",ae="y2",ie="x",oe="width",de="1-"):(re="x",ae="x2",ie="y",oe="height"),ce.enter=te={opacity:ue},fm(te,"stroke",gm("gradientStrokeColor",Z,Q)),fm(te,"strokeWidth",gm("gradientStrokeWidth",Z,Q)),ce.exit={opacity:ue},ce.update=ne={opacity:{value:1}},te.fill=ne.fill={scale:J,field:IR},te[re]=ne[re]={signal:de+"datum."+jR,mult:le},te[ie]=ne[ie]={value:0},te[ae]=ne[ae]={signal:de+"datum."+FR,mult:le},te[oe]=ne[oe]=sm(fe),pm(vT,fT,null,IR,ee,ce,K)),_m(e,Pe,$e.labels,l)]:(r=wm(e,Pe),a=[(S=e,A=Pe,C=$e,R=l,T=Dg(r.columns),j=C.entries,F=!(!j||!j.interactive),U=j?j.name:void 0,I=gm("clipHeight",S,A),B=gm("symbolOffset",S,A),W={data:"value"},V={},H=T+"?datum."+qR+":datum."+UR,Y=I?sm(I):{field:UR},G="datum."+$R,X="max(1,"+T+")",V={enter:z={opacity:kT},exit:{opacity:kT},update:D={opacity:{value:1}}},S.fill||(fm(z,"fill",A.symbolBaseFillColor),fm(z,"stroke",A.symbolBaseStrokeColor)),fm(z,"shape",gm("symbolType",S,A)),fm(z,"size",gm("symbolSize",S,A)),fm(z,"strokeWidth",gm("symbolStrokeWidth",S,A)),fm(z,"fill",gm("symbolFillColor",S,A)),fm(z,"stroke",gm("symbolStrokeColor",S,A)),z.x=D.x={signal:H,mult:.5,offset:B},Y.mult=.5,z.y=D.y=Y,XR.forEach(function(e){S[e]&&(D[e]=z[e]={scale:S[e],field:IR})}),P=pm(bT,hT,null,IR,W,V,C.symbols),I&&(P.clip=!0),V={enter:z={opacity:kT},exit:{opacity:kT},update:D={opacity:{value:1},text:{field:LR}}},fm(z,"align",gm("labelAlign",S,A)),fm(z,"baseline",gm("labelBaseline",S,A)),fm(z,"fill",gm("labelColor",S,A)),fm(z,"font",gm("labelFont",S,A)),fm(z,"fontSize",gm("labelFontSize",S,A)),fm(z,"fontWeight",gm("labelFontWeight",S,A)),fm(z,"limit",gm("labelLimit",S,A)),(N=sm(B)).offset=gm("labelOffset",S,A),z.x=D.x={signal:H,offset:N},z.y=D.y=Y,$=pm(_T,dT,BR,IR,W,V,C.labels),V={enter:{width:kT,height:I?sm(I):kT,opacity:kT},exit:{opacity:kT},update:D={opacity:{value:1},row:{signal:null},column:{signal:null}}},mm(S,A.symbolDirection)?(L="ceil(item.mark.items.length/"+X+")",D.row.signal=G+"%"+L,D.column.signal="floor("+G+"/"+L+")",q={field:["row",G]}):(D.row.signal="floor("+G+"/"+X+")",D.column.signal=G+"%"+X,q={field:G}),D.column.signal=T+"?"+D.column.signal+":"+G,(S=xm(tT,null,U,R={facet:{data:R,name:"value",groupby:$R}},F,lm(V,j,ZR),[P,$])).sort=q,S)],i.size=(g=e,m=t,v=a[0].marks,_=bm("strokeWidth",v[0].encode),b=g.size?'scale("'+g.size+'",datum)':bm("size",v[0].encode),
x=v[1].encode,w=m,k=BR,y=bm("fontSize",x)||(M="fontSize",E=k,(O=w.config.style[E])&&O[M]),kg("max(ceil(sqrt("+Dg(b)+")+"+Dg(_)+"),"+Dg(y)+")",m))),a=[xm(lT,null,null,f,je,n,a,r)],s.title&&a.push((Ae=e,Ce=Pe,Re=$e.title,Te=f,(Ne={}).enter=ze={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:De={value:0}},fm(ze,"align",gm("titleAlign",Ae,Ce)),fm(ze,"baseline",gm("titleBaseline",Ae,Ce)),fm(ze,"fill",gm("titleColor",Ae,Ce)),fm(ze,"font",gm("titleFont",Ae,Ce)),fm(ze,"fontSize",gm("titleFontSize",Ae,Ce)),fm(ze,"fontWeight",gm("titleFontWeight",Ae,Ce)),fm(ze,"limit",gm("titleLimit",Ae,Ce)),Ne.exit={opacity:De},Ne.update={opacity:{value:1},text:sm(Ae.title)},pm(_T,pT,WR,null,Te,Ne,Re))),c=xm(sT,Fe,qe,f,je,Le,a),e.zindex&&(c.zindex=e.zindex),jm(c,t)}function Um(e,t,n){return'item.anchor==="start"?'+e+':item.anchor==="end"?'+t+":"+n}function Im(e,t){e=f(e)?{text:e}:e;var n,r,i,a=t.config.title,o=z({},e.encode);return n={orient:gm("orient",e,a)},r=Sg(t.add(nR(null,[n]))),o.name=e.name,o.interactive=e.interactive,i=function(e,t,n,r){var i,a,o,u,s={value:0},f=e.text,l=gm("orient",e,t),c=gm("anchor",e,t),d=l===zR||l===TR?-1:1,h=l===TR||l===NR,p={group:h?"width":"height"},g={};return o={field:p,mult:{signal:OT}},u=d<0?s:h?{field:{group:"height"}}:{field:{group:"width"}},g.enter=i={opacity:s},fm(i,"fill",gm("color",e,t)),fm(i,"font",gm("font",e,t)),fm(i,"fontSize",gm("fontSize",e,t)),fm(i,"fontWeight",gm("fontWeight",e,t)),g.exit={opacity:s},g.update=a={opacity:{value:1},text:sm(f),anchor:sm(c),orient:sm(l),extent:{field:p},align:{signal:ET}},h?(a.x=o,a.y=u,a.angle=s,a.baseline={value:l===TR?NR:TR}):(a.x=u,a.y=o,a.angle={value:90*d},a.baseline={value:NR}),fm(a,"offset",gm("offset",e,t)||0),fm(a,"frame",gm("frame",e,t)),fm(a,"angle",gm("angle",e,t)),fm(a,"baseline",gm("baseline",e,t)),fm(a,"limit",gm("limit",e,t)),pm(_T,gT,e.style||VR,null,r,g,n)}(e,a,o,r),e.zindex&&(i.zindex=e.zindex),jm(i,t)}function Bm(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(Em(e,t))}),e.on&&e.on.forEach(function(n){qm(n,t,e.name)}),t.addDataPipeline(e.name,function(e,t,n){var r,i,a,o,u,s=[],f=null,l=!1,c=!1;for(e.values?s.push(f=Wm({$ingest:e.values,$format:e.format})):e.url?s.push(f=Wm({$request:e.url,$format:e.format})):e.source&&(f=r=S(e.source).map(function(e){return Sg(t.getData(e).output)}),s.push(null)),i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,f||u.source||s.push(f=Wm()),s.push(o),u.generates&&(c=!0),u.modifies&&!c&&(l=!0),u.source?f=o:u.changes&&(f=null);return r&&(a=r.length-1,s[0]=yR({derive:l,pulse:a?r:r[0]}),(l||a)&&s.splice(1,0,Wm())),f||s.push(Wm()),s.push(xR({})),s}(e,t,n))}function Wm(e){var t=nR({},e);return t.metadata={source:!0},t}function Vm(e,t){return{scale:e.scale,range:t}}function Hm(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Ym(e,t){var n,r,i,a,o,u,s,f,l,c,d,h,p,g,m,v,y,b,_,x,w,k,M,E,O,S,A,C,R,T,D,N,P,$,L,q,j,F,U,I,B,W,V,H,Y,G,X,Z,J,Q,K,ee,te,ne,re,ie,ae,oe,ue,se,fe,le,ce,de,he,pe,ge,me,ve,ye,be,_e,xe,we,ke,Me,Ee,Oe,Se,Ae,Ce,Re,Te,ze,De,Ne,Pe,$e,Le=(s=e,l=(f=t).config,c=s.orient,d=c===TR||c===NR?l.axisX:l.axisY,h=l["axis"+c[0].toUpperCase()+c.slice(1)],p="band"===f.scaleType(s.scale)&&l.axisBand,d||h||p?z({},l.axis,d,h,p):l.axis),qe=e.encode||{},je=qe.axis||{},Fe=je.name||void 0,Ue=je.interactive,Ie=je.style;return n={orient:e.orient,ticks:!!gm("ticks",e,Le),labels:!!gm("labels",e,Le),grid:!!gm("grid",e,Le),domain:!!gm("domain",e,Le),title:!!zg(e.title,!1)},r=Sg(t.add(nR({},[n]))),je=lm({update:{range:{signal:'abs(span(range("'+e.scale+'")))'},offset:sm(zg(e.offset,0)),position:sm(zg(e.position,0)),titlePadding:sm(gm("titlePadding",e,Le)),minExtent:sm(gm("minExtent",e,Le)),maxExtent:sm(gm("maxExtent",e,Le))}},qe.axis,ZR),i=Sg(t.add(eR({scale:t.scaleRef(e.scale),extra:t.property(gm("tickExtra",e,Le)),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u=[],n.grid&&u.push((g=e,m=Le,v=qe.grid,y=i,S=g.orient,A=g.gridScale,R=(C=S===zR||S===TR?1:-1)*g.offset||0,(D={}).enter=b={opacity:T={value:0}},fm(b,"stroke",gm("gridColor",g,m)),fm(b,"strokeWidth",gm("gridWidth",g,m)),fm(b,"strokeDash",gm("gridDash",g,m)),D.exit=_={opacity:T},D.update=x={},fm(x,"opacity",gm("gridOpacity",g,m)),w={scale:g.scale,field:IR,band:gm("bandPosition",g,m),round:gm("tickRound",g,m),extra:gm("tickExtra",g,m),offset:gm("tickOffset",g,m)},S===TR||S===NR?(k="x",M="y",O="height"):(k="y",M="x",O="width"),E=M+"2",x[k]=b[k]=_[k]=w,A?(b[M]={scale:A,range:0,mult:C,offset:R},x[E]=b[E]={scale:A,range:1,mult:C,offset:R}):(b[M]={value:R},x[E]=b[E]={signal:O,mult:C,offset:R}),pm(yT,iT,null,IR,y,D,v))),n.ticks&&(a=gm("tickSize",e,Le),u.push((N=e,P=Le,$=qe.ticks,L=i,q=a,W=N.orient,V=W===zR||W===TR?-1:1,(Y={}).enter=j={opacity:H={value:0}},fm(j,"stroke",gm("tickColor",N,P)),fm(j,"strokeWidth",gm("tickWidth",N,P)),Y.exit=F={opacity:H},Y.update=U={opacity:{value:1}},(I=sm(q)).mult=V,B={scale:N.scale,field:IR,band:gm("bandPosition",N,P),round:gm("tickRound",N,P),extra:gm("tickExtra",N,P),offset:gm("tickOffset",N,P)},W===TR||W===NR?(U.y=j.y=H,U.y2=j.y2=I,U.x=j.x=F.x=B):(U.x=j.x=H,U.x2=j.x2=I,U.y=j.y=F.y=B),pm(yT,oT,null,IR,L,Y,$)))),n.labels&&(a=n.ticks?a:0,u.push((G=e,X=Le,Z=qe.labels,J=i,Q=a,ie=G.orient,ae=ie===zR||ie===TR?-1:1,oe=G.scale,ue=gm("labelBound",G,X),se=gm("labelFlush",G,X),fe=null!=se&&!1!==se&&(se=+se)===se,le=+gm("labelFlushOffset",G,X),ce=gm("labelOverlap",G,X),(he={}).enter=K={opacity:de={value:0}},fm(K,"angle",gm("labelAngle",G,X)),fm(K,"fill",gm("labelColor",G,X)),fm(K,"font",gm("labelFont",G,X)),fm(K,"fontSize",gm("labelFontSize",G,X)),fm(K,"fontWeight",gm("labelFontWeight",G,X)),fm(K,"limit",gm("labelLimit",G,X)),he.exit=ee={opacity:de},he.update=te={opacity:{value:1},text:{field:LR}},(ne=sm(Q)).mult=ae,ne.offset=sm(gm("labelPadding",G,X)||0),ne.offset.mult=ae,re={scale:oe,field:IR,band:.5,offset:gm("tickOffset",G,X)},ie===TR||ie===NR?(te.y=K.y=ne,te.x=K.x=ee.x=re,fm(te,"align",fe?Hm(oe,se,'"left"','"right"','"center"'):"center"),fe&&le&&fm(te,"dx",Hm(oe,se,-le,le,0)),fm(te,"baseline",ie===TR?"bottom":"top")):(te.x=K.x=ne,te.y=K.y=ee.y=re,fm(te,"align",ie===DR?"left":"right"),fm(te,"baseline",fe?Hm(oe,se,'"bottom"','"top"','"middle"'):"middle"),fe&&le&&fm(te,"dy",Hm(oe,se,le,-le,0))),G=pm(_T,aT,BR,IR,J,he,Z),(ce||ue)&&(G.overlap={method:ce,order:"datum.index",bound:ue?{scale:oe,orient:ie,tolerance:+ue}:null}),G))),n.domain&&u.push((pe=e,ge=Le,me=qe.domain,ve=r,ke=pe.orient,(Ee={}).enter=ye={opacity:Me={value:0}},fm(ye,"stroke",gm("domainColor",pe,ge)),fm(ye,"strokeWidth",gm("domainWidth",pe,ge)),Ee.exit={opacity:Me},Ee.update=be={opacity:{value:1}},ke===TR||ke===NR?(_e="x",we="y"):(_e="y",we="x"),xe=_e+"2",ye[we]=Me,be[_e]=ye[_e]=Vm(pe,0),be[xe]=ye[xe]=Vm(pe,1),pm(yT,rT,null,null,ve,Ee,me))),n.title&&u.push((Oe=e,Se=Le,Ae=qe.title,Ce=r,De=Oe.orient,Ne=De===zR||De===TR?-1:1,Pe=De===TR||De===NR,($e={}).enter=Re={opacity:{value:0}},fm(Re,"align",gm("titleAlign",Oe,Se)),fm(Re,"fill",gm("titleColor",Oe,Se)),fm(Re,"font",gm("titleFont",Oe,Se)),fm(Re,"fontSize",gm("titleFontSize",Oe,Se)),fm(Re,"fontWeight",gm("titleFontWeight",Oe,Se)),fm(Re,"limit",gm("titleLimit",Oe,Se)),$e.exit={opacity:{value:0}},$e.update=Te={opacity:{value:1},text:sm(Oe.title)},ze={scale:Oe.scale,range:.5},Pe?(Te.x=ze,Te.angle={value:0},Te.baseline={value:De===TR?"bottom":"top"}):(Te.y=ze,Te.angle={value:90*Ne},Te.baseline={value:"bottom"}),fm(Te,"angle",gm("titleAngle",Oe,Se)),fm(Te,"baseline",gm("titleBaseline",Oe,Se)),!fm(Te,"x",gm("titleX",Oe,Se))&&Pe&&!hm("x",Ae)&&($e.enter.auto={value:!0}),!fm(Te,"y",gm("titleY",Oe,Se))&&!Pe&&!hm("y",Ae)&&($e.enter.auto={value:!0}),pm(_T,uT,WR,null,Ce,$e,Ae))),o=xm(nT,Ie,Fe,r,Ue,je,u),e.zindex&&(o.zindex=e.zindex),jm(o,t)}function Gm(e,t,n){var r=S(e.signals),i=S(e.scales);return n||r.forEach(function(e){fp(e,t)}),S(e.projections).forEach(function(e){!function(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=Qg(e[r],r,t));t.addProjection(e.name,n)}(e,t)}),i.forEach(function(e){var n,r,i;r=t,i=(n=e).type||"linear",SR.hasOwnProperty(i)||o("Unrecognized scale type: "+l(i)),r.addScale(n.name,{type:i,domain:void 0})}),S(e.data).forEach(function(e){Bm(e,t)}),i.forEach(function(e){Yg(e,t)}),r.forEach(function(e){!function(e,t){var n=t.getSignal(e.name);if(e.update){var r=kg(e.update,t);n.update=r.$expr,n.params=r.$params}e.on&&e.on.forEach(function(e){Ig(e,t,n.id)})}(e,t)}),S(e.axes).forEach(function(e){Ym(e,t)}),S(e.marks).forEach(function(e){jm(e,t)}),S(e.legends).forEach(function(e){Fm(e,t)}),e.title&&Im(e.title,t),t.parseLambdas(),t}function Xm(e,t){var n,r,i,a,o,u,f,l,c,d,h=t.config;return t.background=e.background||h.background,t.eventConfig=h.events,o=Sg(t.root=t.add(Og())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",(u=e.padding,f=h,s(u=u||f.padding)?{top:up(u.top),bottom:up(u.bottom),left:up(u.left),right:up(u.right)}:{top:l=up(u),bottom:l,left:l,right:l})),t.addSignal("autosize",(c=e.autosize,d=h,s(c=c||d.autosize)?c:{type:c=c||"pad"})),S(e.signals).forEach(function(e){ST[e.name]||fp(e,t)}),r=t.add(nR()),i=lm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(aR(cm(i,mT,eT,e.style,t,{pulse:Sg(r)}))),a=t.add(kR({layout:t.objectProperty(e.layout),legendMargin:h.legendMargin,autosize:t.signalRef("autosize"),mark:o,pulse:Sg(i)})),t.operators.pop(),t.pushState(Sg(i),Sg(a),null),Gm(e,t,!0),t.operators.push(a),n=t.add(tR({mark:o,pulse:Sg(a)})),n=t.add(bR({pulse:Sg(n)})),n=t.add(xR({pulse:Sg(n)})),t.addData("root",new Nm(t,r,r,n)),t}function Zm(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Jm(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function Qm(e){return(xv(e)?function(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(0<r?",":"")+(s(t)?t.signal||Qm(t):l(t));return n+"]"}:function(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(1<++i?",":"")+l(t)+":"+(s(n)?n.signal||Qm(n):l(n));return r+"}"})(e)}function Km(e){var t={padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:zT},area:{fill:zT},image:null,line:{stroke:zT,strokeWidth:TT},path:{stroke:zT},rect:{fill:zT},rule:{stroke:DT},shape:{stroke:zT},symbol:{fill:zT,size:64},text:{fill:DT,font:CT,fontSize:11},style:{"guide-label":{fill:DT,font:CT,fontSize:10},"guide-title":{fill:DT,font:CT,fontSize:11,fontWeight:"bold"},"group-title":{fill:DT,font:CT,fontSize:13,fontWeight:"bold"},point:{size:RT,strokeWidth:TT,shape:"circle"},circle:{size:RT,strokeWidth:TT},square:{size:RT,strokeWidth:TT,shape:"square"},cell:{fill:"transparent",stroke:PT}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:NT,grid:!1,gridWidth:1,gridColor:PT,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:NT,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:PT,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:NT,titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}};return(e||[]).forEach(function(e){var n,r,i;if(e)for(n in e)if("style"===n)for(n in i=t.style||(t.style={}),e.style)i[n]=z(i[n]||{},e.style[n]);else r=e[n],t[n]=s(r)&&!xv(r)?z(s(t[n])?t[n]:{},r):r}),t}function ev(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function tv(e,t){return ev(["event"],e,t)}function nv(e,t,n){var r,i;for(r in n=n||{},e)(i=e[r])&&i.$expr&&i.$params&&nv(i.$params,t,n),n[r]=xv(i)?i.map(function(e){return rv(e,t)}):rv(i,t);return n}function rv(e,t){if(!e||!s(e))return e;for(var n,r=0,i=$T.length;r<i;++r)if(n=$T[r],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function iv(e){return(e+"").toLowerCase()}function av(e,t){"operator"!==iv(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?ev(["_"],e.update,t):null)}function ov(e,t){var n=s(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,u=void 0;r||o("Source not defined: "+e.source),i=e.target&&e.target.$expr?tv(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(u=nv(a.$params,t)),a=ev(["_","event"],a.$expr,t)),t.update(e,r,i,a,u)}function uv(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){av(e,t)}),n.forEach(function(e){var n,r,i,a;r=t,(n=e).params&&((i=r.get(n.id))||o("Invalid operator id: "+n.id),a=nv(n.params,r),r.dataflow.connect(i,i.parameters(a)))}),(e.streams||[]).forEach(function(e){var n,r,i,a,u;r=t,a=null!=(n=e).filter?tv(n.filter,r):void 0,u=null!=n.stream?r.get(n.stream):void 0,n.source?u=r.events(n.source,n.type,a):n.merge&&(u=(i=n.merge.map(r.get.bind(r)))[0].merge.apply(i[0],i.slice(1))),n.between&&(i=n.between.map(r.get.bind(r)),u=u.between(i[0],i[1])),n.filter&&(u=u.filter(a)),null!=n.throttle&&(u=u.throttle(+n.throttle)),null!=n.debounce&&(u=u.debounce(+n.debounce)),null==u&&o("Invalid stream definition: "+JSON.stringify(n)),n.consume&&u.consume(!0),r.stream(n,u)}),(e.updates||[]).forEach(function(e){ov(e,t)}),t.resolve()}function sv(e,t,n){return new fv(e,t,n)}function fv(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function lv(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function cv(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===FT?r.left+r.right:0)}function dv(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===FT?r.top+r.bottom:0)}function hv(e,t){return t.modified&&xv(t.input.value)&&e.indexOf("_:vega:_")}function pv(e,t){return!("parent"===e||t instanceof Fy.proxy)}function gv(e,t,n,r){var i,a,o=e.element();o&&o.setAttribute("title",null==(i=r)?"":xv(i)?mv(i):s(i)&&!L(i)?(a=i,Object.keys(a).map(function(e){var t=a[e];return e+": "+(xv(t)?mv(t):vv(t))}).join("\n")):i+"")}function mv(e){return"["+e.map(vv).join(", ")+"]"}function vv(e){return xv(e)?"[]":s(e)&&!L(e)?"{}":e}function yv(e,t){var n=this;t=t||{},on.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||Nx.Canvas,n._scenegraph=new Da;var r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||gv,n._redraw=!0,n._handler=(new Wa).scene(r),n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[];var i,a,o,u,s,f=(i=n,a=e,o=t.functions,uv(a,sv(i,Fy,o||SC)));n._runtime=f,n._signals=f.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:z({},e)}}),f.root&&f.root.set(r),r.source=f.data.root.input,n.pulse(f.data.root.input,n.changeset().insert(r.items)),n._background=f.background||null,n._eventConfig=(u=f.eventConfig,(s=(u=z({},u)).defaults)&&(xv(s.prevent)&&(s.prevent=G(s.prevent)),xv(s.allow)&&(s.allow=G(s.allow))),u),n._width=n.width(),n._height=n.height(),n._viewWidth=cv(n,n._width),n._viewHeight=dv(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){function t(){e._autosize=e._resize=1}var n=e._signals,r=n[qT],i=n[jT],a=n[FT];e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=cv(e,n.size),t()},{size:r}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=dv(e,n.size),t()},{size:i});var o=e.add(null,t,{pad:a});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}(n),jh(n)}function bv(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:o("Unrecognized signal name: "+l(t))}function _v(e,t){var n=(e._targets||[]).filter(function(e){var n=e._update;return n&&n.handler===t});return n.length?n[0]:null}var xv=Array.isArray,wv=[],kv=c("id"),Mv=r(function(e){return e},wv,"identity"),Ev=r(function(){return 0},wv,"zero"),Ov=r(function(){return 1},wv,"one"),Sv=r(function(){return!0},wv,"true"),Av=r(function(){return!1},wv,"false"),Cv=0,Rv=1,Tv=2,zv=3,Dv=4,Nv={},Pv=Symbol("vega_id"),$v=1,Lv="_:mod:_";(uE=ue.prototype).set=function(e,t,n,r){var i=this[e],a=this[Lv];return null!=t&&0<=t?(i[t]!==n||r)&&(i[t]=n,a[t+":"+e]=-1,a[e]=-1):(i!==n||r)&&(this[e]=n,a[e]=xv(n)?1+n.length:-1),this},uE.modified=function(e,t){var n,r=this[Lv];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(xv(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&0<=t?t+1<r[e]||!!r[t+":"+e]:!!r[e]},uE.clear=function(){return this[Lv]={},this};var qv=0,jv=new ue,Fv=se.prototype;Fv.targets=function(){return this._targets||(this._targets=J(kv))},Fv.set=function(e){return this.value!==e?(this.value=e,1):0},Fv.skip=fe(1),Fv.modified=fe(2),Fv.parameters=function(e,t){function n(e,n,r){r instanceof se?(r!==s&&(t&&r.targets().add(s),c.push(r)),l.push({op:r,name:e,index:n})):f.set(e,n,r)}t=!1!==t;var r,i,a,u,s=this,f=s._argval=s._argval||new ue,l=s._argops=s._argops||[],c=[];for(r in e)if(i=e[r],"pulse"===r)S(i).forEach(function(e){e instanceof se?e!==s&&(e.targets().add(s),c.push(e)):o("Pulse parameters must be operator instances.")}),s.source=i;else if(xv(i))for(f.set(r,-1,Array(a=i.length)),u=0;u<a;++u)n(r,u,i[u]);else n(r,-1,i);return this.marshall().clear(),c},Fv.marshall=function(e){var t,n,r,i,a,o=this._argval||jv,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)a=(i=(t=u[n]).op).modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);return o},Fv.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},Fv.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,(this.pulse=t)||e);var t};var Uv=0,Iv=le.prototype;Iv._filter=Sv,Iv._apply=Mv,Iv.targets=function(){return this._targets||(this._targets=J(kv))},Iv.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},Iv.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},Iv.filter=function(e){var t=ce(e);return this.targets().add(t),t},Iv.apply=function(e){var t=ce(null,e);return this.targets().add(t),t},Iv.merge=function(){var e=ce();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},Iv.throttle=function(e){var t=-1;return this.filter(function(){var n=Date.now();return e<n-t?(t=n,1):0})},Iv.debounce=function(e){var t=ce();return this.targets().add(ce(null,null,T(e,function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()}))),t},Iv.between=function(e,t){var n=!1;return e.targets().add(ce(null,null,function(){n=!0})),t.targets().add(ce(null,null,function(){n=!1})),this.filter(function(){return n})};var Bv=/^([A-Za-z]+:)?\/\//,Wv="file://",Vv={boolean:W,integer:g,number:g,date:H,string:Y,unknown:Mv},Hv=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return xe(e)&&(e=+e)==~~e},xe,function(e){return!isNaN(Date.parse(e))}],Yv=["boolean","integer","number","date"],Gv={},Xv={},Zv=34,Jv=10,Qv=13;ke(","),ke("\t");var Kv={dsv:Ee,csv:Me(","),tsv:Me("\t"),json:Oe,topojson:function(e,t){var n,r,i;return e=Oe(e,t),n=t&&(i=t.feature)?Ae:t&&(i=t.mesh)?ze:o("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r):o("Invalid TopoJSON object: "+i))&&r.features||[r]}},ey=new Date,ty=new Date,ny=Ne(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});ny.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?Ne(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):ny:null};var ry=6e4,iy=36e5,ay=Ne(function(e){e.setTime(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),oy=Ne(function(e){e.setTime(Math.floor(e/ry)*ry)},function(e,t){e.setTime(+e+t*ry)},function(e,t){return(t-e)/ry},function(e){return e.getMinutes()}),uy=Ne(function(e){var t=e.getTimezoneOffset()*ry%iy;t<0&&(t+=iy),e.setTime(Math.floor((+e-t)/iy)*iy+t)},function(e,t){e.setTime(+e+t*iy)},function(e,t){return(t-e)/iy},function(e){return e.getHours()}),sy=Ne(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ry)/864e5},function(e){return e.getDate()-1}),fy=Pe(0),ly=Pe(1),cy=(Pe(2),Pe(3),Pe(4)),dy=(Pe(5),Pe(6),Ne(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),hy=Ne(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});hy.every=function(e){return isFinite(e=Math.floor(e))&&0<e?Ne(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var py=Ne(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*ry)},function(e,t){return(t-e)/ry},function(e){return e.getUTCMinutes()}),gy=Ne(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*iy)},function(e,t){return(t-e)/iy},function(e){return e.getUTCHours()}),my=Ne(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),vy=$e(0),yy=$e(1),by=($e(2),$e(3),$e(4)),_y=($e(5),$e(6),Ne(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()})),xy=Ne(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});xy.every=function(e){return isFinite(e=Math.floor(e))&&0<e?Ne(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var wy,ky,My,Ey,Oy,Sy={"-":"",_:" ",0:"0"},Ay=/^\s*\d+/,Cy=/^%/,Ry=/[\\^$*+?|[\]().{}]/g;Ht({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ty="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||Ey(Ty),+new Date("2000-01-01T00:00:00.000Z")||Oy(Ty);var zy={skip:!0},Dy={},Ny=Zt.prototype;Ny.StopPropagation=Dy,Ny.ADD=1,Ny.REM=2,Ny.MOD=4,Ny.ADD_REM=3,Ny.ADD_MOD=5,Ny.ALL=7,Ny.REFLOW=8,Ny.SOURCE=16,Ny.NO_SOURCE=32,Ny.NO_FIELDS=64,Ny.fork=function(e){return new Zt(this.dataflow).init(this,e)},Ny.clone=function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},Ny.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length&&((e=new Zt(this.dataflow).init(this)).add=e.source),e},Ny.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},Ny.runAfter=function(e){this.dataflow.runAfter(e)},Ny.changed=function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},Ny.reflow=function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,Kt(this,1))),this},Ny.modifies=function(e){var t=S(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},Ny.modified=function(e){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?xv(e)?e.some(function(e){return t[e]}):t[e]:!!t)},Ny.filter=function(e,t){var n=this;return 1&e&&(n.addF=Jt(n.addF,t)),2&e&&(n.remF=Jt(n.remF,t)),4&e&&(n.modF=Jt(n.modF,t)),16&e&&(n.srcF=Jt(n.srcF,t)),n},Ny.materialize=function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=Qt(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=Qt(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=Qt(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},Ny.visit=function(e,t){var n,r,i=this,a=t;return 16&e?Z(i.source,i.srcF,a):(1&e&&Z(i.add,i.addF,a),2&e&&Z(i.rem,i.remF,a),4&e&&Z(i.mod,i.modF,a),8&e&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||Z(n,r?Kt(i,5):i.srcF,a))),i};var Py=P(en,Zt);Py.fork=function(e){var t=new Zt(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,function(e){return t.add.push(e)}),e&t.REM&&this.visit(t.REM,function(e){return t.rem.push(e)}),e&t.MOD&&this.visit(t.MOD,function(e){return t.mod.push(e)})),t},Py.changed=function(e){return this.changes&e},Py.modified=function(e){var t=this.fields;return t&&this.changes&this.MOD?xv(e)?e.some(function(e){return t[e]}):t[e]:0},Py.filter=function(){o("MultiPulse does not support filtering.")},Py.materialize=function(){o("MultiPulse does not support materialization.")};var $y={skip:!(Py.visit=function(e,t){var n=this.pulses,r=n.length,i=0;if(e&this.SOURCE)for(;i<r;++i)n[i].visit(e,t);else for(;i<r;++i)n[i].stamp===this.stamp&&n[i].visit(e,t);return this}),force:!1},Ly=nn.prototype;Ly.size=function(){return this.nodes.length},Ly.clear=function(){return this.nodes=[],this},Ly.peek=function(){return this.nodes[0]},Ly.push=function(e){var t=this.nodes;return t.push(e),rn(t,0,t.length-1,this.cmp)},Ly.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,an(t,0,this.cmp)):e=n,e},Ly.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,an(t,0,this.cmp),n},Ly.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,an(t,0,this.cmp)),e};var qy=on.prototype;qy.stamp=function(){return this._clock},qy.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},qy.cleanThreshold=1e4,qy.add=function(e,t,n,r){var i,a=1;return e instanceof se?i=e:e&&e.prototype instanceof se?i=new e:A(e)?i=new se(null,e):(a=0,i=new se(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},qy.connect=function(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)},qy.rank=function(e){e.rank=++this._rank},qy.rerank=function(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;0<=--r;)i.push(t=n[r]),t===e&&o("Cycle detected in dataflow graph.")},qy.pulse=function(e,t,n){this.touch(e,n||$y);var r=new Zt(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._pulses[e.id]=t.pulse(r,i),this},qy.touch=function(e,t){var n=t||$y;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},qy.update=function(e,t,n){var r=n||$y;return(e.set(t)||r.force)&&this.touch(e,r),this},qy.changeset=oe,qy.ingest=function(e,t,n){return this.pulse(e,this.changeset().insert(Yt(t,n)))},qy.request=function(e,t,n){var r,i,a,o,u=this,s=u._pending||(r=u,(o=new Promise(function(e,t){i=e,a=t})).requests=0,o.done=function(){0==--o.requests&&r.runAfter(function(){e._pending=null;try{e.run(),i(e)}catch(e){a(e)}})},r._pending=o);s.requests+=1,u.loader().load(t,{context:"dataflow"}).then(function(t){u.ingest(e,t,n)},function(e){u.error("Loading failed",t,e)}).catch(function(e){u.error("Data ingestion failed",t,e)}).then(s.done,s.done)},qy.events=function(e,t,n,r){for(var i,a=this,o=ce(n,r),u=function(e){e.dataflow=a;try{o.receive(e)}catch(e){a.error(e)}finally{a.run()}},s=0,f=(i="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):S(e)).length;s<f;++s)i[s].addEventListener(t,u);return o},qy.on=function(e,t,n,r,i){return(e instanceof se?Xt:Gt)(this,e,t,n,r,i),this},qy.run=function(e){var t,n,r,i,a=this,o=0,u=a.logLevel();if(a._pending)return a.info("Awaiting requests, delaying dataflow run."),0;if(a._pulse)return a.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!a._touched.length)return a.info("Dataflow invoked, but nothing to do."),0;a._pulse=new Zt(a,(++a._clock),e),zv<=u&&(r=Date.now(),a.debug("-- START PROPAGATION ("+a._clock+") -----")),a._touched.forEach(function(e){a._enqueue(e,!0)}),a._touched=J(kv);try{for(;0<a._heap.size();)(t=a._heap.pop()).rank===t.qrank?(n=t.run(a._getPulse(t,e)),Dv<=u&&a.debug(t.id,n===Dy?"STOP":n,t),n!==Dy&&(a._pulse=n,t._targets&&t._targets.forEach(function(e){a._enqueue(e)})),++o):a._enqueue(t,!0)}catch(e){i=e}if(a._pulses={},a._pulse=null,zv<=u&&(r=Date.now()-r,a.info("> Pulse "+a._clock+": "+o+" operators; "+r+"ms")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,o,i)}catch(e){a.error(e)}if(a._postrun.length){var s=a._postrun;a._postrun=[],s.sort(function(e,t){return t.priority-e.priority}).forEach(function(e){tn(a,e.callback)})}return o},qy.runAsync=function(){return this._pending||Promise.resolve(this.run())},qy.runAfter=function(e,t,n){this._pulse||t?this._postrun.push({priority:n||0,callback:e}):tn(this,e)},qy._enqueue=function(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},qy._getPulse=function(e,t){var n,r=e.source,i=this._clock;return r&&xv(r)?new en(this,i,n=r.map(function(e){return e.pulse}),t):(n=this._pulses[e.id],r&&((r=r.pulse)&&r!==Dy?r.stamp===i&&n.target!==e?n=r:n.source=r.source:n.source=[]),n)},qy.error=un("error"),qy.warn=un("warn"),qy.info=un("info"),qy.debug=un("debug"),qy.logLevel=un("level");var jy=P(sn,se);jy.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e)!==e.StopPropagation&&(this.pulse=t),
this.stamp=e.stamp,t);var t},jy.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},jy.transform=function(){};var Fy={},Uy={values:pn({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:pn({name:"count",set:"cell.num"}),__count__:pn({name:"count",set:"this.missing + this.valid"}),missing:pn({name:"missing",set:"this.missing"}),valid:pn({name:"valid",set:"this.valid"}),sum:pn({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:pn({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:pn({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:pn({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:pn({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:pn({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:pn({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:pn({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:pn({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:pn({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:pn({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:pn({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:pn({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:pn({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:pn({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:pn({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:pn({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:pn({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Iy=Object.keys(Uy);t.random=Math.random;var By=xn(_n),Wy=By.right,Vy=By.left,Hy=Math.sqrt(50),Yy=Math.sqrt(10),Gy=Math.sqrt(2),Xy=qn.prototype;Xy.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Xy.add=function(e){this._add.push(e)},Xy.rem=function(e){this._rem.push(e)},Xy.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),f={};for(e=0;e<u;++e)f[a(i[e])]=1;for(t=e=0;e<o;++e)f[a(n=r[e])]?f[a(n)]=0:s[t++]=n;return this._rem=[],this._add=s},Xy.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;0<=--r;)t=e(n[r])+"",i.hasOwnProperty(t)||(i[t]=1,++a);return a},Xy.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=D(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Xy.argmin=function(e){return this.extent(e)[0]||{}},Xy.argmax=function(e){return this.extent(e)[1]||{}},Xy.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):1/0},Xy.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-1/0},Xy.quartile=function(e){return this._get===e&&this._q||(this._q=Dn(this.values(),e),this._get=e),this._q},Xy.q1=function(e){return this.quartile(e)[0]},Xy.q2=function(e){return this.quartile(e)[1]},Xy.q3=function(e){return this.quartile(e)[2]},Xy.ci=function(e){return this._get===e&&this._ci||(this._ci=zn(this.values(),1e3,.05,e),this._get=e),this._ci},Xy.ci0=function(e){return this.ci(e)[0]},Xy.ci1=function(e){return this.ci(e)[1]},jn.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Iy},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Zy=P(jn,sn);Zy.transform=function(e,t){var n,r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),i.modifies(this._outputs),r._drop=!1!==e.drop,e.cross&&1<r._dims.length&&(r._drop=!1,this.cross()),r.changes(i)},Zy.cross=function(){function e(e){var t,n,o,u;for(t in e)for(o=e[t].tuple,n=0;n<a;++n)i[n][u=o[r[n]]]=u}var t=this,n=t.value,r=t._dnames,i=r.map(function(){return{}}),a=r.length;e(t._prev),e(n),function e(o,u,s){var f,l,c=r[s],d=i[s++];for(f in d)u[c]=d[f],l=o?o+"|"+f:f,s<a?e(l,u,s):n[l]||t.cell(l,u)}("",{},0)},Zy.init=function(e){function t(e){for(var t,r=S(a(e)),i=0,o=r.length;i<o;++i)u[t=r[i]]||(u[t]=1,n.push(t))}var n=this._inputs=[],r=this._outputs=[],u={};this._dims=S(e.groupby),this._dnames=this._dims.map(function(e){var n=i(e);return t(e),r.push(n),n}),this.cellkey=e.key?e.key:cn(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var s,f,l,c,d,h,p=e.fields||[null],g=e.ops||["count"],m=e.as||[],v=p.length,y={};for(v!==g.length&&o("Unmatched number of fields and aggregate ops."),h=0;h<v;++h)s=p[h],f=g[h],null==s&&"count"!==f&&o("Null aggregate field specified."),d=dn(f,c=i(s),m[h]),r.push(d),"count"!==f?((l=y[c])||(t(s),(l=y[c]=[]).field=s,this._measures.push(l)),"count"!==f&&(this._countOnly=!1),l.push(hn(f,d))):this._counts.push(d);return this._measures=this._measures.map(function(e){return mn(e,e.field)}),{}},Zy.cellkey=cn(),Zy.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},Zy.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new qn),n},Zy.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?ie(t.tuple,o):te(o)},Zy.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].add(t[n].get(e),e)},Zy.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].rem(t[n].get(e),e)},Zy.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(n=0,r=(t=e.agg).length;n<r;++n)t[n].set(i);return i},Zy.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,f=e.add,l=e.rem,c=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||l.push(t.tuple);for(r=0,i=this._alen;r<i;++r)f.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(t=o[r]).num&&s?l:c).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e},Fn.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Jy=P(Fn,sn);Jy.transform=function(e,t){var n,r=this._bins(e),i=r.start,o=r.step,u=e.as||["bin0","bin1"],s=u[0],f=u[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(a(e.field))?t.ADD_MOD:t.ADD,t.visit(n,function(e){var t=r(e);e[s]=t,e[f]=null==t?null:i+o*(1+(t-i)/o)}),t.modifies(u)},Jy._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,o=e.field,u=vn(e),s=u.start,f=u.stop,l=u.step;null!=(t=e.anchor)&&(n=t-(s+l*Math.floor((t-s)/l)),s+=n,f+=n);var c=function(e){var t=o(e);return null==t?null:(t=Math.max(s,Math.min(+t,f-l)),s+l*Math.floor((t-s)/l))};return c.start=s,c.stop=f,c.step=l,this.value=r(c,a(o),e.name||"bin_"+i(o))},In.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},P(In,sn).transform=function(e,t){var n=t.fork(t.ALL),r=Un(K,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),t.source&&t.source.root&&(this.value.root=t.source.root),n},P(Bn,se),Vn.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Qy=P(Vn,sn);Qy.transform=function(e,t){function n(t){return function(n){for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(u(n),e.case,a)||[],s=0,f=i.length;s<f;++s)o.test(r=i[s])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],f=n(function(e){i[e]=1+(i[e]||0)}),l=n(function(e){i[e]-=1});return r?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,l)),this._finish(t,s)},Qy._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},Qy._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],f=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=te({}),r[u]=n,r[s]=i,f.add.push(r)):0===i?(r&&f.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,f.mod.push(r));return f.modifies(t)},Hn.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},P(Hn,sn).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1];return!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter")?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,a,o=[],u={},s=e.length,f=0;f<s;++f)for(u[t]=a=e[f],i=0;i<s;++i)u[n]=e[i],r(u)&&(o.push(te(u)),(u={})[t]=a);return o}(r,a,o,e.filter||Sv)):n.mod=r,n.source=this.value,n.modifies(i)};var Ky={kde:Pn,mixture:$n,normal:Nn,uniform:Ln},eb="distributions",tb="function",nb="field",rb=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ib={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:rb},{name:"weights",type:"number",array:!0}]};Yn.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:rb.concat(ib)},{name:"as",type:"string",array:!0,default:["value","density"]}]},P(Yn,sn).transform=function(e,t){var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var i=function e(t,n){var r=t[tb];Ky.hasOwnProperty(r)||o("Unknown distribution function: "+r);var i=Ky[r]();for(var a in t)a===nb?i.data((t.from||n()).map(t[a])):a===eb?i[a](t[a].map(function(t){return e(t,n)})):typeof i[a]===tb&&i[a](t[a]);return i}(e.distribution,(n=t,function(){return n.materialize(n.SOURCE).source})),a=e.method||"pdf";"pdf"!==a&&"cdf"!==a&&o("Invalid density method: "+a),e.extent||i.data||o("Missing density extent parameter."),a=i[a];var u=e.as||["value","density"],s=e.extent||kn(i.data()),f=(s[1]-s[0])/(e.steps||100),l=Mn(s[0],s[1]+f/2,f).map(function(e){var t={};return t[u[0]]=e,t[u[1]]=a(e),te(t)});this.value&&(r.rem=this.value),this.value=r.add=r.source=l}return r},Gn.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},P(Gn,sn).transform=function(e,t){var n=this.value,r=e.field,i=n[0],a=n[1],o=t.ADD;(t.changed()||t.modified(r.fields)||e.modified("field"))&&(o=t.SOURCE,i=1/0,a=-1/0),t.visit(o,function(e){var t=r(e);null!=t&&((t=+t)<i&&(i=t),a<t&&(a=t))}),this.value=[i,a]};var ab=P(Xn,se);ab.connect=function(e){return this.targets().add(e),e.source=this},ab.add=function(e){this.value.add.push(e)},ab.rem=function(e){this.value.rem.push(e)},ab.mod=function(e){this.value.mod.push(e)},ab.init=function(e){this.value.init(e,e.NO_SOURCE)},ab.evaluate=function(){return this.value};var ob=P(Zn,sn);ob.activate=function(e){this._targets[this._targets.active++]=e},ob.subflow=function(e,t,n,r){var i,a,o=this.value,u=o.hasOwnProperty(e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[e])&&a.tuple,u=(i=n.dataflow).add(new Xn(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=u,this.activate(u)),u},ob.transform=function(e,t){function n(e){return i.subflow(e,o,t)}var r=t.dataflow,i=this,a=e.key,o=e.subflow,u=this._keys,s=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=K(e),r=u.get(t);void 0!==r&&(u.delete(t),n(r).rem(e))}),t.visit(t.ADD,function(e){var t=a(e);u.set(K(e),t),n(t).add(e)}),s||t.modified(a.fields)?t.visit(t.MOD,function(e){var t=K(e),r=u.get(t),i=a(e);r===i?n(i).mod(e):(u.set(t,i),n(r).rem(e),n(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(u.get(K(e))).mod(e)}),s&&t.visit(t.REFLOW,function(e){var t=K(e),r=u.get(t),i=a(e);r!==i&&(u.set(t,i),n(r).rem(e),n(i).add(e))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),t},P(Jn,se),Kn.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},P(Kn,sn).transform=function(e,t){function n(t){var n=K(t),r=f(t,e),a=i.get(n);r&&a?(i.delete(n),o.push(t)):r||a?l&&r&&!a&&s.push(t):(i.set(n,1),u.push(t))}var r=t.dataflow,i=this.value,a=t.fork(),o=a.add,u=a.rem,s=a.mod,f=e.expr,l=!0;return t.visit(t.REM,function(e){var t=K(e);i.has(t)?i.delete(t):u.push(e)}),t.visit(t.ADD,function(t){f(t,e)?o.push(t):i.set(K(t),1)}),t.visit(t.MOD,n),e.modified()&&(l=!1,t.visit(t.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},tr.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},P(tr,sn).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=er(r,e.as||[]),a=i.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,o,u,s=r.map(function(t){return t(e)}),f=s.reduce(function(e,t){return Math.max(e,t.length)},0),l=0;l<f;++l){for(o=ne(e),t=0;t<a;++t)o[i[t]]=null==(u=s[t][l])?null:u;n.add.push(o)}}),this.value=n.source=n.add,n.modifies(i)},nr.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},P(nr,sn).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,a=r.map(i),o=e.as||["key","value"],u=o[0],s=o[1],f=r.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,i=0;i<f;++i)(t=ne(e))[u]=a[i],t[s]=r[i](e),n.add.push(t)}),this.value=n.source=n.add,n.modifies(o)},rr.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},P(rr,sn).transform=function(e,t){var n=e.expr,r=e.as,i=e.modified(),a=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(a,function(t){t[r]=n(t,e)})},P(ir,sn).transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),u=e.size-a.length,s=e.generator;if(0<u){for(n=[];0<=--u;)n.push(i=te(s(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var ub={value:"value",median:function(e,t){var n,r=e.length,i=-1,a=[];if(null==t)for(;++i<r;)isNaN(n=wn(e[i]))||a.push(n);else for(;++i<r;)isNaN(n=wn(t(e[i],i,e)))||a.push(n);return Cn(a.sort(_n),.5)},mean:function(e,t){var n,r=e.length,i=r,a=-1,o=0;if(null==t)for(;++a<r;)isNaN(n=wn(e[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=wn(t(e[a],a,e)))?--i:o+=n;if(i)return o/i},min:function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n<=n)for(r=n;++a<i;)null!=(n=e[a])&&n<r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n<=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n<r&&(r=n);return r},max:Rn},sb=[];ar.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},P(ar,sn).transform=function(e,t){var n,r,a,u,s,f,l,c,d,h,p,g=t.fork(t.ALL),m=function(e){var t,n=e.method||ub.value;return null!=ub[n]?n===ub.value?(t=void 0!==e.value?e.value:0,function(){return t}):ub[n]:void o("Unrecognized imputation method: "+n)}(e),v=(p=e.field,function(e){return e?p(e):NaN}),y=i(e.field),b=i(e.key),_=(e.groupby||[]).map(i),x=function(e,t,n,r){var i,a,o,u,s,f,l,c,d=function(e){return e(c)},h=[],p=r?r.slice():[],g={},m={};for(p.forEach(function(e,t){g[e]=t+1}),u=0,l=e.length;u<l;++u)c=e[u],f=n(c),s=g[f]||(g[f]=p.push(f)),a=(i=t?t.map(d):sb)+"",(o=m[a])||(o=m[a]=[],h.push(o),o.values=i),o[s-1]=c;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),w=[],k=this.value,M=x.domain.length;for(s=0,c=x.length;s<c;++s)for(a=(n=x[s]).values,r=NaN,l=0;l<M;++l)if(null==n[l]){for(u=x.domain[l],h={_impute:!0},f=0,d=a.length;f<d;++f)h[_[f]]=a[f];h[b]=u,h[y]=isNaN(r)?r=m(n,v):r,w.push(te(h))}return w.length&&(g.add=g.materialize(g.ADD).add.concat(w)),k.length&&(g.rem=g.materialize(g.REM).rem.concat(k)),this.value=w,g},or.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Iy},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var fb=P(or,jn);fb.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(n=r.value=r.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),r.changes(),t.visit(t.SOURCE,function(e){z(e,n[r.cellkey(e)].tuple)}),t.reflow(i).modifies(this._outputs)},fb.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},P(ur,se),fr.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},P(fr,sn).transform=function(e,t){var n,r,a=t,u=e.as,s=e.fields,f=e.index,l=e.values,c=null==e.default?null:e.default,d=e.modified(),h=d?t.SOURCE:t.ADD,p=s.length;return l?(r=l.length,1<p&&!u&&o('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==p*r&&o('The "as" parameter has too few output field names.'),u=u||l.map(i),n=function(e){for(var t,n,i=0,a=0;i<p;++i)if(null==(n=f.get(s[i](e))))for(t=0;t<r;++t,++a)e[u[a]]=c;else for(t=0;t<r;++t,++a)e[u[a]]=l[t](n)}):(u||o("Missing output field names."),n=function(e){for(var t,n=0;n<p;++n)t=f.get(s[n](e)),e[u[n]]=null==t?c:t}),d?a=t.reflow(!0):h|=s.some(function(e){return t.modified(e.fields)})?t.MOD:0,t.visit(h,n),a.modifies(u)},P(lr,se),P(dr,se),P(pr,sn),pr.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},gr.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Iy,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var lb=P(gr,jn);lb._transform=lb.transform,lb.transform=function(e,t){return this._transform((i=t,o=(n=e).field,u=n.value,s=("count"===n.op?"__count__":n.op)||"sum",f=a(o).concat(a(u)),c=o,d=n.limit||0,p={},g=[],(h=i).visit(h.SOURCE,function(e){var t=c(e);p[t]||(p[t]=1,g.push(t))}),g.sort(function(e,t){return(e<t||null==e)&&null!=t?-1:(t<e||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0)}),l=d?g.slice(0,d):g,{key:n.key,groupby:n.groupby,ops:l.map(function(){return s}),fields:l.map(function(e){return n=o,i=u,r(function(e){return n(e)===t?i(e):NaN},f,(t=e)+"");var t,n,i}),as:l.map(function(e){return e+""}),modified:n.modified.bind(n)}),t);var n,i,o,u,s,f,l,c,d,h,p,g},P(mr,Zn).transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(a(i)))&&o("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.mod(e)}):a.mod(e)}),t.visit(t.ADD,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.add(te(e))}):a.add(e)}),t.visit(t.REM,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.rem(e)}):a.rem(e)}),t},vr.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},P(vr,sn).transform=function(e,t){var n,r,i=e.fields,a=er(e.fields,e.as||[]),o=i?function(e,t){return function(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}(e,t,i,a)}:re;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=K(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=o(e,te({}));r[K(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(o(e,r[K(e)]))}),n},P(yr,sn).transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},P(br,sn).transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=K(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=ne(e);r[K(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(re(e,r[K(e)]))})),n},_r.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},P(_r,sn).transform=function(e,n){function r(e){var n,r;u.length<o?u.push(e):(r=~~((s+1)*t.random()))<u.length&&f<=r&&(n=u[r],l[K(n)]&&i.rem.push(n),u[r]=e),++s}var i=n.fork(n.NO_SOURCE),a=e.modified("size"),o=e.size,u=this.value,s=this.count,f=0,l=u.reduce(function(e,t){return e[K(t)]=1,e},{});if(n.rem.length&&(n.visit(n.REM,function(e){var t=K(e);l[t]&&(l[t]=-1,i.rem.push(e)),--s}),u=u.filter(function(e){return-1!==l[K(e)]})),(n.rem.length||a)&&u.length<o&&n.source&&(f=s=u.length,n.visit(n.SOURCE,function(e){l[K(e)]||r(e)}),f=-1),a&&u.length>o){for(var c=0,d=u.length-o;c<d;++c)l[K(u[c])]=-1,i.rem.push(u[c]);u=u.slice(d)}return n.mod.length&&n.visit(n.MOD,function(e){l[K(e)]&&i.mod.push(e)}),n.add.length&&n.visit(n.ADD,r),(n.add.length||f<0)&&(i.add=u.filter(function(e){return!l[K(e)]})),this.count=s,this.value=i.source=u,i},xr.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]},P(xr,sn).transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Mn(e.start,e.stop,e.step||1).map(te),n.add=t.add.concat(this.value),n}},P(wr,sn).transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},P(kr,sn).transform=function(e,t){function n(e){a.set(i(e),e)}var r=t.dataflow,i=e.field,a=this.value,o=!0;return e.modified("field")||t.modified(i.fields)?(a.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){a.delete(i(e))}),t.visit(t.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),t.fork()},P(Mr,sn).transform=function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var cb={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=cb.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){0<(t=+t)||o("ntile num must be greater than zero.");var n=cb.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return 0<=r?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return 0<(t=+t)||o("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},db=Object.keys(cb),hb=Er.prototype;hb.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},hb.update=function(e,t){var n,r=this.cell,i=this.windows,a=e.data,o=i&&i.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(a[n]);for(n=e.p1;n<e.i1;++n)r.add(a[n]);r.set(t)}for(n=0;n<o;++n)i[n].update(e,t)},Or.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:db.concat(Iy)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var pb=P(Or,sn);pb.transform=function(e,t){function n(e){return a.group(s(e))}var r,i,a=this,o=a.state,u=e.modified();this.stamp=t.stamp,o&&!u||(o=a.state=new Er(e));var s=cn(e.groupby);for(u||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,function(e){n(e).add(e)})):(t.visit(t.REM,function(e){n(e).remove(e)}),t.visit(t.ADD,function(e){n(e).add(e)})),r=0,i=a._mlen;r<i;++r)Sr(a._mods[r],o,e);return a._mlen=0,a._mods=[],t.reflow(u).modifies(o.outputs)},pb.group=function(e){var t=this.value[e];return t||((t=this.value[e]=Un(K)).stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t};var gb=Object.freeze({aggregate:jn,bin:Fn,collect:In,compare:Bn,countpattern:Vn,cross:Hn,density:Yn,extent:Gn,facet:Zn,field:Jn,filter:Kn,flatten:tr,fold:nr,formula:rr,generate:ir,impute:ar,joinaggregate:or,key:ur,lookup:fr,multiextent:lr,multivalues:dr,params:pr,pivot:gr,prefacet:mr,project:vr,proxy:yr,relay:br,sample:_r,sequence:xr,sieve:wr,subflow:Xn,tupleindex:kr,values:Mr,window:Or}),mb="top",vb="left",yb="right",bb="bottom",_b="top-left",xb="top-right",wb="bottom-left",kb="bottom-right",Mb="start",Eb="end",Ob="group",Sb="axis",Ab="legend",Cb="row-header",Rb="row-footer",Tb="row-title",zb="column-header",Db="column-footer",Nb="column-title",Pb="padding",$b="symbol",Lb="fit",qb="fit-x",jb="fit-y",Fb="pad",Ub="none",Ib="all",Bb="column",Wb="row",Vb=Rr.prototype;Vb.clone=function(){return new Rr(this)},Vb.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Vb.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Vb.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},Vb.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},Vb.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},Vb.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Vb.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},Vb.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,u=this.x1,s=this.x2,f=this.y1,l=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*l+a,i*u+r*l+o).add(r*s-i*f+a,i*s+r*f+o).add(r*s-i*l+a,i*s+r*l+o)},Vb.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},Vb.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},Vb.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},Vb.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},Vb.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},Vb.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},Vb.width=function(){return this.x2-this.x1},Vb.height=function(){return this.y2-this.y1};var Hb,Yb=0;P(Dr,zr),["canvas","canvas-prebuilt"].some(function(e){try{"function"!=typeof(Hb=n(17)(e))&&(Hb=null)}catch(e){Hb=null}return Hb});var Gb=$r.prototype;Gb.pending=function(){return this._pending},Gb.sanitizeURL=function(e){var t=this;return Lr(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return qr(t),e}).catch(function(){return qr(t),null})},Gb.loadImage=function(e){var t=this,n=Pr();return Lr(t),
t._loader.sanitize(e,{context:"image"}).then(function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){qr(t),i.loaded=!0},i.onerror=function(){qr(t),i.loaded=!1},i.src=r,i}).catch(function(e){return qr(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}})},Gb.ready=function(){var e=this;return new Promise(function(t){!function n(r){e.pending()?setTimeout(function(){n(!0)},10):t(r)}(!1)})};var Xb=Math.PI,Zb=2*Xb,Jb=1e-6,Qb=Zb-Jb;jr.prototype=Fr.prototype={constructor:jr,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,u=n-e,s=r-t,f=a-e,l=o-t,c=f*f+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(Jb<c)if(Math.abs(l*u-s*f)>Jb&&i){var d=n-a,h=r-o,p=u*u+s*s,g=d*d+h*h,m=Math.sqrt(p),v=Math.sqrt(c),y=i*Math.tan((Xb-Math.acos((p+c-g)/(2*m*v)))/2),b=y/v,_=y/m;Math.abs(b-1)>Jb&&(this._+="L"+(e+b*f)+","+(t+b*l)),this._+="A"+i+","+i+",0,0,"+ +(f*h<l*d)+","+(this._x1=e+_*u)+","+(this._y1=t+_*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,i,a){e=+e,t=+t;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=e+o,f=t+u,l=1^a,c=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+f:(Math.abs(this._x1-s)>Jb||Math.abs(this._y1-f)>Jb)&&(this._+="L"+s+","+f),n&&(c<0&&(c=c%Zb+Zb),Qb<c?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=f):Jb<c&&(this._+="A"+n+","+n+",0,"+ +(Xb<=c)+","+l+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Kb=Math.abs,e_=Math.atan2,t_=Math.cos,n_=Math.max,r_=Math.min,i_=Math.sin,a_=Math.sqrt,o_=1e-12,u_=Math.PI,s_=u_/2,f_=2*u_;Xr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var l_={draw:function(e,t){var n=Math.sqrt(t/u_);e.moveTo(n,0),e.arc(0,0,n,0,f_)}};ri.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ni(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ni(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ii.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ni(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ai.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ni(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},oi.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(0<n)for(var r,i=e[0],a=t[0],o=e[n]-i,u=t[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+r*o),this._beta*t[s]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var c_=function e(t){function n(e){return 1===t?new ri(e):new oi(e,t)}return n.beta=function(t){return e(+t)},n}(.85);si.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ui(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ui(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var d_=function e(t){function n(e){return new si(e,t)}return n.tension=function(t){return e(+t)},n}(0);fi.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ui(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var h_=function e(t){function n(e){return new fi(e,t)}return n.tension=function(t){return e(+t)},n}(0);li.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ui(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var p_=function e(t){function n(e){return new li(e,t)}return n.tension=function(t){return e(+t)},n}(0);di.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ci(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var g_=function e(t){function n(e){return t?new di(e,t):new si(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);hi.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ci(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var m_=function e(t){function n(e){return t?new hi(e,t):new fi(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);pi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ci(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var v_=function e(t){function n(e){return t?new pi(e,t):new li(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);gi.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},_i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bi(this,this._t0,yi(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bi(this,yi(this,n=vi(this,e,t)),n);break;default:bi(this,this._t0,n=vi(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(xi.prototype=Object.create(_i.prototype)).point=function(e,t){_i.prototype.point.call(this,t,e)},wi.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},ki.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Mi(e),i=Mi(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Ei.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var y_,b_={basis:{curve:function(e){return new ri(e)}},"basis-closed":{curve:function(e){return new ii(e)}},"basis-open":{curve:function(e){return new ai(e)}},bundle:{curve:c_,tension:"beta",value:.85},cardinal:{curve:d_,tension:"tension",value:0},"cardinal-open":{curve:p_,tension:"tension",value:0},"cardinal-closed":{curve:h_,tension:"tension",value:0},"catmull-rom":{curve:g_,tension:"alpha",value:.5},"catmull-rom-closed":{curve:m_,tension:"alpha",value:.5},"catmull-rom-open":{curve:v_,tension:"alpha",value:.5},linear:{curve:Zr},"linear-closed":{curve:function(e){return new gi(e)}},monotone:{horizontal:function(e){return new xi(e)},vertical:function(e){return new _i(e)}},natural:{curve:function(e){return new ki(e)}},step:{curve:function(e){return new Ei(e,.5)}},"step-after":{curve:function(e){return new Ei(e,1)}},"step-before":{curve:function(e){return new Ei(e,0)}}},__={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},x_=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],w_={},k_={},M_=[].join,E_=["l",0,0,0,0,0,0,0],O_=2*Math.PI,S_=Math.sqrt(3)/2,A_={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,O_)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=S_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=S_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=S_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=S_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}}},C_={},R_=Math.PI,T_=function(){function e(){var e,f,l,c,d,h,p,g,m,v,y,b,_=+t.apply(this,arguments),x=+n.apply(this,arguments),w=a.apply(this,arguments)-s_,k=o.apply(this,arguments)-s_,M=Kb(k-w),E=w<k;if(s||(s=e=Fr()),x<_&&(f=x,x=_,_=f),o_<x)if(f_-o_<M)s.moveTo(x*t_(w),x*i_(w)),s.arc(0,0,x,w,k,!E),o_<_&&(s.moveTo(_*t_(k),_*i_(k)),s.arc(0,0,_,k,w,E));else{var O,S,A=w,C=k,R=w,T=k,z=M,D=M,N=u.apply(this,arguments)/2,P=o_<N&&(i?+i.apply(this,arguments):a_(_*_+x*x)),$=r_(Kb(x-_)/2,+r.apply(this,arguments)),L=$,q=$;if(o_<P){var j=Ir(P/_*i_(N)),F=Ir(P/x*i_(N));(z-=2*j)>o_?(R+=j*=E?1:-1,T-=j):(z=0,R=T=(w+k)/2),(D-=2*F)>o_?(A+=F*=E?1:-1,C-=F):(D=0,A=C=(w+k)/2)}var U=x*t_(A),I=x*i_(A),B=_*t_(T),W=_*i_(T);if(o_<$){var V=x*t_(C),H=x*i_(C),Y=_*t_(R),G=_*i_(R);if(M<u_){var X=o_<z?[(c=U)+(b=((v=B-(h=V))*((d=I)-(p=H))-(y=W-p)*(c-h))/(y*(g=Y-c)-v*(m=G-d)))*g,d+b*m]:[B,W],Z=U-X[0],J=I-X[1],Q=V-X[0],K=H-X[1],ee=1/i_((1<(l=(Z*Q+J*K)/(a_(Z*Z+J*J)*a_(Q*Q+K*K)))?0:l<-1?u_:Math.acos(l))/2),te=a_(X[0]*X[0]+X[1]*X[1]);L=r_($,(_-te)/(ee-1)),q=r_($,(x-te)/(ee+1))}}o_<D?o_<q?(O=Gr(Y,G,U,I,x,q,E),S=Gr(V,H,B,W,x,q,E),s.moveTo(O.cx+O.x01,O.cy+O.y01),q<$?s.arc(O.cx,O.cy,q,e_(O.y01,O.x01),e_(S.y01,S.x01),!E):(s.arc(O.cx,O.cy,q,e_(O.y01,O.x01),e_(O.y11,O.x11),!E),s.arc(0,0,x,e_(O.cy+O.y11,O.cx+O.x11),e_(S.cy+S.y11,S.cx+S.x11),!E),s.arc(S.cx,S.cy,q,e_(S.y11,S.x11),e_(S.y01,S.x01),!E))):(s.moveTo(U,I),s.arc(0,0,x,A,C,!E)):s.moveTo(U,I),o_<_&&o_<z?o_<L?(O=Gr(B,W,V,H,_,-L,E),S=Gr(U,I,Y,G,_,-L,E),s.lineTo(O.cx+O.x01,O.cy+O.y01),L<$?s.arc(O.cx,O.cy,L,e_(O.y01,O.x01),e_(S.y01,S.x01),!E):(s.arc(O.cx,O.cy,L,e_(O.y01,O.x01),e_(O.y11,O.x11),!E),s.arc(0,0,_,e_(O.cy+O.y11,O.cx+O.x11),e_(S.cy+S.y11,S.cx+S.x11),E),s.arc(S.cx,S.cy,L,e_(S.y11,S.x11),e_(S.y01,S.x01),!E))):s.arc(0,0,_,T,R,E):s.lineTo(B,W)}else s.moveTo(0,0);if(s.closePath(),e)return s=null,e+""||null}var t=Br,n=Wr,r=Ur(0),i=null,a=Vr,o=Hr,u=Yr,s=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-u_/2;return[t_(r)*e,i_(r)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Ur(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Ur(+t),e):n},e.cornerRadius=function(t){return arguments.length?(r="function"==typeof t?t:Ur(+t),e):r},e.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Ur(+t),e):i},e.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:Ur(+t),e):a},e.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Ur(+t),e):o},e.padAngle=function(t){return arguments.length?(u="function"==typeof t?t:Ur(+t),e):u},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}().startAngle(function(e){return e.startAngle||0}).endAngle(function(e){return e.endAngle||0}).padAngle(function(e){return e.padAngle||0}).innerRadius(function(e){return e.innerRadius||0}).outerRadius(function(e){return e.outerRadius||0}).cornerRadius(Ii),z_=ei().x(Fi).y1(Ui).y0(function(e){return(e.y||0)+(e.height||0)}).defined(Bi),D_=ei().y(Ui).x1(Fi).x0(function(e){return(e.x||0)+(e.width||0)}).defined(Bi),N_=Kr().x(Fi).y(Ui).defined(Bi),P_=qi().x(Fi).y(Ui).width(function(e){return e.width||0}).height(function(e){return e.height||0}).cornerRadius(Ii),$_=function(){function e(){var e;if(r||(r=e=Fr()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),e)return r=null,e+""||null}var t=Ur(l_),n=Ur(64),r=null;return e.type=function(n){return arguments.length?(t="function"==typeof n?n:Ur(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:Ur(+t),e):n},e.context=function(t){return arguments.length?(r=null==t?null:t,e):r},e}().type(function(e){return zi(e.shape||"circle")}).size(function(e){return null==e.size?64:e.size}),L_=ji().x(Fi).y(Ui).defined(Bi).size(function(e){return e.size||1}),q_=2*Math.PI,j_=q_/4,F_=q_-1e-8;Hi.beginPath=Yi,Hi.closePath=Yi,Hi.moveTo=Gi,Hi.lineTo=Gi,Hi.rect=function(e,t,n,r){Gi(e,t),Gi(e+n,t+r)},Hi.quadraticCurveTo=function(e,t,n,r){Gi(e,t),Gi(n,r)},Hi.bezierCurveTo=function(e,t,n,r,i,a){Gi(e,t),Gi(n,r),Gi(i,a)},Hi.arc=function(e,t,n,r,i,a){function o(e){f=n*Math.cos(e),l=n*Math.sin(e),f<c&&(c=f),d<f&&(d=f),l<h&&(h=l),p<l&&(p=l)}if(Math.abs(i-r)>F_)return Gi(e-n,t-n),void Gi(e+n,t+n);var u,s,f,l,c=1/0,d=-1/0,h=1/0,p=-1/0;if(o(r),o(i),i!==r)if((r%=q_)<0&&(r+=q_),(i%=q_)<0&&(i+=q_),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=q_,u=r-r%j_,s=0;s<4&&i<u;++s,u-=j_)o(u);else for(u=r-r%j_+j_,s=0;s<4&&u<i;++s,u+=j_)o(u);Gi(e+c,t+h),Gi(e+d,t+p)};var U_,I_,B_=[],W_=function(){return!0},V_=fa("arc",function(e,t){return T_.context(e)(t)}),H_=la("area",function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?D_:z_).curve(Oi(r,n.orient,n.tension)).context(e)(t)},function(e,t){var n="horizontal"===e[0].orient?t[1]:t[0],r="horizontal"===e[0].orient?"y":"x",i=0,a=e.length;if(1===a)return e[0];for(;i<a;){var o=i+a>>>1;e[o][r]<n?i=o+1:a=o}return i=Math.max(0,i-1),a=Math.min(e.length-1,a),n-e[i][r]<e[a][r]-n?e[i]:e[a]}),Y_=1,G_=.5,X_=aa(da),Z_={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",sa(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&Vi(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;ea(t,function(t){var i,a=t.x||0,o=t.y||0,u=t.width||0,s=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&0<(i=null==t.opacity?1:t.opacity)&&(da(e,t),t.fill&&Zi(e,t,i)&&e.fill(),t.stroke&&Ji(e,t,i)&&e.stroke()),t.clip&&(e.beginPath(),e.rect(0,0,u,s),e.clip()),n&&n.translate(-a,-o),ea(t,function(t){r.draw(e,t,n)}),n&&n.translate(a,o),e.restore()})},pick:function(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,u=n*e.pixelRatio,s=r*e.pixelRatio;return ta(t,function(f){var l,c,d,h;if(!(h=f.bounds)||h.contains(i,a))return c=f.x||0,d=f.y||0,e.save(),e.translate(c,d),c=i-c,d=a-d,!(l=ta(f,function(e){return i=c,a=d,(!1!==(t=e).interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(i,a)?o.pick(e,n,r,c,d):null;var t,i,a}))&&!1!==t.interactive&&(f.fill||f.stroke)&&X_(e,f,u,s)&&(l=f),e.restore(),l||null})},background:function(e,t){var n=t.stroke?G_:0;e("class","background"),e("d",Wi(null,t,n,n))},foreground:function(e,t,n){e("clip-path",t.clip?ca(n,t,t):null)}},J_={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=ha(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,u=(null!=t.height?t.height:r.height)||0,s=!1===t.aspect?"none":"xMidYMid";i-=pa(t.align,o),a-=ga(t.baseline,u),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",ua(i,a)),e("width",o),e("height",u),e("preserveAspectRatio",s)},bound:function(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=pa(t.align,a),i-=ga(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function(e,t,n){var r=this;ea(t,function(t){if(!n||n.intersects(t.bounds)){var i,a,o,u,s=ha(t,r),f=t.x||0,l=t.y||0,c=(null!=t.width?t.width:s.width)||0,d=(null!=t.height?t.height:s.height)||0;f-=pa(t.align,c),l-=ga(t.baseline,d),!1!==t.aspect&&(a=s.width/s.height,o=t.width/t.height,a==a&&o==o&&a!==o&&(o<a?(l+=(d-(u=c/a))/2,d=u):(f+=(c-(u=d*a))/2,c=u))),s.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(s,f,l,c,d))}})},pick:ia(),get:ha,xOffset:pa,yOffset:ga},Q_=la("line",function(e,t){var n=t[0],r=n.interpolate||"linear";return N_.curve(Oi(r,n.orient,n.tension)).context(e)(t)},function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),a=e.length;0<=--a;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null}),K_={type:"path",tag:"path",nested:!1,attr:function(e,t){e("transform",sa(t)),e("d",t.path)},bound:function(e,t){return ma(Hi(e),t)?e.set(0,0,0,0):Vi(e,t)},draw:na(ma),pick:oa(ma)},ex={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Wi(null,t))},bound:function(e,t){var n,r;return Vi(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:na(va),pick:oa(va)},tx={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",sa(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return Vi(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){ea(t,function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&ya(e,t,r)&&e.stroke()}})},pick:ia(function(e,t,n,r){return!!e.isPointInStroke&&ya(e,t,1)&&e.isPointInStroke(n,r)})},nx=fa("shape",function(e,t){return(t.mark.shape||t.shape).context(e)(t)}),rx=fa("symbol",function(e,t){return $_.context(e)(t)}),ix={height:ka,measureWidth:xa,estimateWidth:ba,width:ba,canvas:Ma};Ma(!0);var ax={left:"start",center:"middle",right:"end"},ox=new Rr,ux={arc:V_,area:H_,group:Z_,image:J_,line:Q_,path:K_,rect:ex,rule:tx,shape:nx,symbol:rx,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+Sa(t),a=t.x||0,o=t.y||0,u=t.angle||0,s=t.radius||0;s&&(n=(t.theta||0)-Math.PI/2,a+=s*Math.cos(n),o+=s*Math.sin(n)),e("text-anchor",ax[t.align]||"start"),u?(n=ua(a,o)+" rotate("+u+")",(r||i)&&(n+=" "+ua(r,i))):n=ua(a+r,o+i),e("transform",n)},bound:Aa,draw:function(e,t,n){ea(t,function(t){var r,i,a,o,u,s;n&&!n.intersects(t.bounds)||(s=Ea(t))&&0!==(r=null==t.opacity?1:t.opacity)&&(e.font=Oa(t),e.textAlign=t.align||"left",i=t.x||0,a=t.y||0,(o=t.radius)&&(u=(t.theta||0)-Math.PI/2,i+=o*Math.cos(u),a+=o*Math.sin(u)),t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*Math.PI/180),i=a=0),i+=t.dx||0,a+=(t.dy||0)+Sa(t),t.fill&&Zi(e,t,r)&&e.fillText(s,i,a),t.stroke&&Ji(e,t,r)&&e.strokeText(s,i,a),t.angle&&e.restore())})},pick:ia(function(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Aa(ox,t,!0),u=-t.angle*Math.PI/180,s=Math.cos(u),f=Math.sin(u),l=t.x,c=t.y,d=s*i-f*a+(l-l*s+c*f),h=f*i+s*a+(c-l*f-c*s);return o.contains(d,h)})},trail:la("trail",function(e,t){return L_.context(e)(t)},function(e,t){for(var n,r,i=e.length;0<=--i;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null})},sx={mark:null},fx=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],lx=Da.prototype;lx.toJSON=function(e){return Ta(this.root,e||0)},lx.mark=function(e,t,n){var r=Na(e,t=t||this.root.items[0]);return(t.items[n]=r).zindex&&(r.group.zdirty=!0),r};var cx=Ua.prototype;cx.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},cx.element=function(){return this._el},cx.canvas=function(){return this._el&&this._el.firstChild},cx.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},cx.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},cx.on=function(){},cx.off=function(){},cx._handlerIndex=function(e,t,n){for(var r=e?e.length:0;0<=--r;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},cx.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},cx.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},cx.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then(function(t){var n=new MouseEvent(e.type,e),r=Pa(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)}).catch(function(){})},cx.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=ux[o.marktype]).tip){for((a=Fa(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},cx.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,u=i.width(),s=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:u,height:s,left:a,top:o,right:a+u,bottom:o+s}}};var dx=Ba.prototype;dx.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},dx.element=function(){return this._el},dx.canvas=function(){return this._el&&this._el.firstChild},dx.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},dx.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dx.dirty=function(){},dx.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},dx._render=function(){},dx.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},dx._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return r},dx.sanitizeURL=function(e){return this._load("sanitizeURL",e)},dx.loadImage=function(e){return this._load("loadImage",e)};var hx="mousemove",px="mouseout",gx="click",mx=P(Wa,Ua);mx.initialize=function(e,t,n){var r=this._canvas=e&&$a(e,"canvas");if(r){var i=this;this.events.forEach(function(e){r.addEventListener(e,function(t){mx[e]?mx[e].call(i,t):i.fire(e,t)})})}return Ua.prototype.initialize.call(this,e,t,n)},mx.canvas=function(){return this._canvas},mx.context=function(){return this._canvas.getContext("2d")},mx.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],mx.DOMMouseScroll=function(e){this.fire("mousewheel",e)},mx.mousemove=Va("mousemove","mouseover","mouseout"),mx.dragover=Va("dragover","dragenter","dragleave"),mx.mouseout=Ha("mouseout"),mx.dragleave=Ha("dragleave"),mx.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},mx.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},mx.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},mx.touchmove=function(e){this.fire("touchmove",e,!0)},mx.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},mx.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if((t.vegaType=e)===gx&&a&&a.href?this.handleHref(t,a,a.href):e!==hx&&e!==px||this.handleTooltip(t,a,e!==px),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},mx.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},mx.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return 0<=i&&r.splice(i,1),this},mx.pickEvent=function(e){var t=Fa(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},mx.pick=function(e,t,n,r,i){var a=this.context();return ux[e.marktype].pick.call(this,a,e,t,n,r,i)};var vx="undefined"!=typeof window&&window.devicePixelRatio||1,yx=P(Ya,Ba),bx=Ba.prototype,_x=new Rr;yx.initialize=function(e,t,n,r,i){return this._canvas=Nr(1,1),e&&(qa(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),bx.initialize.call(this,e,t,n,r,i);
},yx.resize=function(e,t,n,r){var i,a,o,u,s,f,l,c;return bx.resize.call(this,e,t,n,r),i=this._canvas,a=this._width,o=this._height,u=this._origin,s=this._scale,f="undefined"!=typeof HTMLElement&&i instanceof HTMLElement&&null!=i.parentNode,l=i.getContext("2d"),c=f?vx:s,i.width=a*c,i.height=o*c,f&&1!==c&&(i.style.width=a+"px",i.style.height=o+"px"),l.pixelRatio=c,l.setTransform(c,0,0,c,c*u[0],c*u[1]),this._redraw=!0,this},yx.canvas=function(){return this._canvas},yx.context=function(){return this._canvas?this._canvas.getContext("2d"):null},yx.dirty=function(e){var t=function(e,t){if(null==t)return e;for(var n=_x.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},yx._render=function(e){var t,n,r,i=this.context(),a=this._origin,o=this._width,u=this._height,s=this._dirty;return i.save(),this._redraw||s.empty()?(this._redraw=!1,s=null):(t=i,r=a,(n=s).expand(1).round(),n.translate(-r[0]%1,-r[1]%1),t.beginPath(),t.rect(n.x1,n.y1,n.width(),n.height()),t.clip(),s=n),this.clear(-a[0],-a[1],o,u),this.draw(i,e,s),i.restore(),this._dirty.clear(),this},yx.draw=function(e,t,n){var r=ux[t.marktype];t.clip&&function(e,t){var n=t.clip;if(e.save(),e.beginPath(),A(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},yx.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var xx=P(Ga,Ua);xx.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(gx,this._hrefHandler),r.removeEventListener(hx,this._tooltipHandler),r.removeEventListener(px,this._tooltipHandler)),this._svg=r=e&&$a(e,"svg"),r&&(r.addEventListener(gx,this._hrefHandler),r.addEventListener(hx,this._tooltipHandler),r.addEventListener(px,this._tooltipHandler)),Ua.prototype.initialize.call(this,e,t,n)},xx.canvas=function(){return this._svg},xx.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:Xa(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},xx.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return 0<=i&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var wx={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},kx={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Mx=Object.keys(kx),Ex=wx.xmlns,Ox=P(Qa,Ba),Sx=Ba.prototype;Ox.initialize=function(e,t,n,r){return e&&(this._svg=La(e,0,"svg",Ex),this._svg.setAttribute("class","marks"),qa(e,1),this._root=La(this._svg,0,"g",Ex),qa(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Sx.initialize.call(this,e,t,n,r)},Ox.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Sx.background.apply(this,arguments)},Ox.resize=function(e,t,n,r){return Sx.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Ox.canvas=function(){return this._svg},Ox.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in wx)e[t]=wx[t];var n=this._bgcolor?Za("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+Ja("rect"):"";return Za("svg",e)+n+this._svg.innerHTML+Ja("svg")},Ox._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),qa(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Ox.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=La(t,0,"defs",Ex)),Ka(r,n.gradient[e],i++);for(e in n.clipping)r||(n.el=r=La(t,0,"defs",Ex)),eo(r,n.clipping[e],i++);r&&(0===i?(t.removeChild(r),n.el=null):qa(r,i))},Ox._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},Ox.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},Ox.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},Ox._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=e.length;a<o;++a)(n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=ux[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,to(t,s),n.items.forEach(function(e){e.dirty=s})),n.zdirty||(t.exit?(i.nested&&n.items.length?(u=n.items[0])._svg&&this._update(i,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=i.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,to(t,s)),t._update=s));return!this._dirtyAll},Ox.draw=function(e,t,n){function r(e){var t=a.isDirty(e),n=no(e,i,l,u.tag,o);t&&(a._update(u,n,e),f&&function(e,t,n){t=t.lastChild;var r,i=0;ea(n,function(n){r=e.draw(t,n,r),++i}),qa(t,1+i)}(a,n,e)),l=n,++c}if(!this.isDirty(t))return t._svg;var i,a=this,o=this._svg,u=ux[t.marktype],s=!1===t.interactive?"none":null,f="g"===u.tag,l=null,c=0;return(i=no(t,e,n,"g",o)).setAttribute("class",ja(t)),f||i.style.setProperty("pointer-events",s),t.clip?i.setAttribute("clip-path",ca(a,t,t.group)):i.removeAttribute("clip-path"),u.nested?t.items.length&&r(t.items[0]):ea(t,r),qa(i,c),i};var Ax=null,Cx=null,Rx={group:function(e,t,n){Cx=t.__values__,Ax=t.childNodes[1],e.foreground(ro,n,this),Ax=t.childNodes[0],e.background(ro,n,this);var r=!1===n.mark.interactive?"none":null;r!==Cx.events&&(Ax.style.setProperty("pointer-events",r),Cx.events=r)},text:function(e,t,n){var r=Ea(n);r!==Cx.text&&(t.textContent=r,Cx.text=r),(r=Oa(n))!==Cx.font&&(t.style.setProperty("font",r),Cx.font=r)}};Ox._update=function(e,t,n){Cx=(Ax=t).__values__,e.attr(ro,n,this);var r=Rx[e.type];r&&r.call(this,e,t,n),this.style(Ax,n)},Ox.style=function(e,t){var n,r,i,a,o,u;if(null!=t)for(n=0,r=Mx.length;n<r;++n)(o=t[i=Mx[n]])!==Cx[i]&&(a=kx[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+(u=void 0,"undefined"==typeof window?"":(u=window.location).hash?u.href.slice(0,-u.hash.length):u.href)+"#"+o.id+")"),e.style.setProperty(a,o+"")),Cx[i]=o)};var Tx,zx=P(io,Ba),Dx=Ba.prototype;zx.resize=function(e,t,n,r){Dx.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in wx)o[u]=wx[u];a.head=Za("svg",o);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),a.bg=s?Za("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+Ja("rect"):"",a.root=Za("g",{transform:"translate("+i+")"}),a.foot=Ja("g")+Ja("svg"),this},zx.background=function(){var e=Dx.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},zx.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},zx._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},zx.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(r=(n=i.gradient[t]).stops,a+=Za("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=Za("stop",{offset:r[e].offset,"stop-color":r[e].color})+Ja("stop");a+=Ja("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=Za("clipPath",{id:t}),a+=n.path?Za("path",{d:n.path})+Ja("path"):Za("rect",{x:0,y:0,width:n.width,height:n.height})+Ja("rect"),a+=Ja("clipPath");return 0<a.length?Za("defs")+a+Ja("defs"):""},zx.attributes=function(e,t){return Tx={},e(ao,t,this),Tx},zx.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then(function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e})}return null},zx.mark=function(e){function t(t){var s=r.href(t);s&&(u+=Za("a",s)),n="g"!==a?oo(t,e,a,o):null,u+=Za(a,r.attributes(i.attr,t),n),"text"===a?u+=Ea(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===a&&(u+=Za("path",r.attributes(i.background,t),oo(t,e,"bgrect",o))+Ja("path"),u+=Za("g",r.attributes(i.foreground,t))+r.markGroup(t)+Ja("g")),u+=Ja(a),s&&(u+=Ja("a"))}var n,r=this,i=ux[e.marktype],a=i.tag,o=this._defs,u="";return"g"!==a&&!1===e.interactive&&(n='style="pointer-events: none;"'),u+=Za("g",{class:ja(e),"clip-path":e.clip?ca(r,e,e.group):null},n),i.nested?e.items&&e.items.length&&t(e.items[0]):ea(e,t),u+Ja("g")},zx.markGroup=function(e){var t=this,n="";return ea(e,function(e){n+=t.mark(e)}),n};var Nx={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},Px={};Px.canvas=Px.png={renderer:Ya,headless:Ya,handler:Wa},Px.svg={renderer:Qa,headless:io,handler:Ga},Px.none={};var $x=new Rr,Lx=1e-9;P(co,sn).transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=ux[a],u=o.bound,s=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),s=ho(i,u),i.items.forEach(function(e){e.bounds.clear().union(s)})):a===Ob||e.modified()?(t.visit(t.MOD,function(e){r.dirty(e)}),s.clear(),i.items.forEach(function(e){s.union(ho(e,u))}),i.role===Ab&&t.reflow()):(n=t.changed(t.REM),t.visit(t.ADD,function(e){s.union(ho(e,u))}),t.visit(t.MOD,function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(ho(e,u))}),n&&(s.clear(),i.items.forEach(function(e){s.union(e.bounds)}))),so(i),t.modifies("bounds")};var qx=":vega_identifier:";po.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},P(po,sn).transform=function(e,t){var n=function(e){var t=e._signals[qx];return t||(e._signals[qx]=t=e.add(0)),t}(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++r)}),n.set(this.value=r),t},P(go,sn).transform=function(e,t){var n,r,i,a=this.value;a||((a=t.dataflow.scenegraph().mark(e.markdef,(r=(n=e).groups,i=n.parent,r&&1===r.size?r.get(Object.keys(r.object)[0]):r&&i?r.lookup(i):null),e.index)).group.context=e.context,e.context.group||(e.context.group=a.group),a.source=this,a.clip=e.clip,a.interactive=e.interactive,this.value=a);var o=a.marktype===Ob?Dr:zr;return t.visit(t.ADD,function(e){o.call(e,a)}),(e.modified("clip")||e.modified("interactive"))&&(a.clip=e.clip,a.interactive=!!e.interactive,a.zdirty=!0,t.reflow()),a.items=t.source,t};var jx=P(mo,sn),Fx={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&vo(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};jx.transform=function(e,t){var n=Fx[e.method]||Fx.parity,r=t.materialize(t.SOURCE).source;if(r){e.sort&&(r=r.slice().sort(e.sort)),"greedy"===e.method&&(r=r.filter(bo)),r.forEach(function(e){e.opacity=1});var i,a,o,u,s,f=r;if(3<=f.length&&yo(f)){for(t=t.reflow(e.modified()).modifies("opacity");3<=(f=n(f)).length&&yo(f););f.length<3&&!p(r).opacity&&(1<f.length&&(p(f).opacity=0),p(r).opacity=1)}if(e.boundScale){var l=(i=e.boundScale,a=e.boundOrient,o=e.boundTolerance,u=i.range(),s=new Rr,a===mb||a===bb?s.set(u[0],-1/0,u[1],1/0):s.set(-1/0,u[0],1/0,u[1]),s.expand(o||1),function(e){return s.encloses(e.bounds)});r.forEach(function(e){l(e)||(e.opacity=0)})}return t}},P(_o,sn).transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var Ux=.5,Ix=new Rr;P(To,sn).transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&Ao(n,t,e.layout),function(e,t,n){var r,i,a,o,u,s,f=t.items,l=Math.max(0,t.width||0),c=Math.max(0,t.height||0),d=(new Rr).set(0,0,l,c),h=d.clone(),p=d.clone(),g=[];for(u=0,s=f.length;u<s;++u)switch((i=f[u]).role){case Sb:m=i.items[0].datum.orient,(o=m===vb||m===yb?h:p).union(Do(e,i,l,c));break;case"title":r=i;break;case Ab:g.push(i);break;case"frame":case"scope":case Cb:case Rb:case Tb:case zb:case Db:case Nb:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}var m;if(g.length)for(a={leftWidth:(y=e,b=g,b.reduce(function(e,t){var n=t.items[0];if(function(e,t,n){var r=t.padding-n.x,i=t.padding-n.y;if(t.datum.title){var a=t.items[1].items[0];i+=t.titlePadding+a.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),e.dirty(n))}(y,n,n.items[0].items[0]),n.datum.orient===vb){var r=Ix.clear();n.items.forEach(function(e){r.union(e.bounds)}),e=Math.max(e,Math.round(r.width())+2*n.padding-1)}return e},0)),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},u=0,s=g.length;u<s;++u)if(o=Po(e,g[u],a,h,p,l,c),n.autosize&&n.autosize.type===Lb){var v=g[u].items[0].datum.orient;v===vb||v===yb?d.add(o.x1,0).add(o.x2,0):v!==mb&&v!==bb||d.add(0,o.y1).add(0,o.y2)}else d.union(o);var y,b;d.union(h).union(p),r&&d.union(function(e,t,n,r,i){var a,o=t.items[0],u=o.orient,s=o.frame,f=o.anchor,l=o.offset,c=o.bounds,d=0,h=u===vb||u===yb?r:n,p=0,g=0;switch(s!==Ob?u===vb?(d=i.y2,h=i.y1):u===yb?(d=i.y1,h=i.y2):(d=i.x1,h=i.x2):u===vb&&(d=r,h=0),a=f===Mb?d:f===Eb?h:(d+h)/2,Ix.clear().union(c),u){case mb:p=a,g=i.y1-l;break;case vb:p=i.x1-l,g=a;break;case yb:p=i.x2+l,g=a;break;case bb:p=a,g=i.y2+l;break;default:p=o.x,g=o.y}return c.translate(p-o.x,g-o.y),zo(o,"x",p)|zo(o,"y",g)&&(o.bounds=Ix,e.dirty(o),o.bounds=c,e.dirty(o)),t.bounds.clear().union(c)}(e,r,l,c,d)),!function(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,u=e._height,s=e.padding();if(!(e._autosize<1)&&a){var f=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,Math.ceil(n.x2-f)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===Pb&&(o-=s.left+s.right,u-=s.top+s.bottom),a===Ub?(h=l=0,f=o,d=u):a===Lb?(f=Math.max(0,o-l-c),d=Math.max(0,u-h-p)):a===qb?(f=Math.max(0,o-l-c),u=d+h+p):a===jb?(o=f+l+c,d=Math.max(0,u-h-p)):a===Fb&&(o=f+l+c,u=d+h+p),e._resizeView(o,u,f,d,[l,h],i.resize)}}(e,t,d,n)}(n,t,e)}),e.modified()&&t.reflow(),t};var Bx=Object.freeze({bound:co,identifier:po,mark:go,overlap:mo,render:_o,viewlayout:To}),Wx="log",Vx="pow",Hx="sqrt",Yx="band",Gx="point",Xx="linear",Zx="ordinal",Jx="quantile",Qx="quantize",Kx="threshold",ew="bin-ordinal",tw="sequential",nw="$";Lo.prototype=qo.prototype={constructor:Lo,has:function(e){return nw+e in this},get:function(e){return this[nw+e]},set:function(e,t){return this[nw+e]=t,this},remove:function(e){var t=nw+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===nw&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===nw&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===nw&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===nw&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===nw&&++e;return e},empty:function(){for(var e in this)if(e[0]===nw)return!1;return!0},each:function(e){for(var t in this)t[0]===nw&&e(this[t],t.slice(1),this)}};var rw=qo.prototype;Wo.prototype=function(e,t){var n=new Wo;if(e instanceof Wo)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}.prototype={constructor:Wo,has:rw.has,add:function(e){return this[nw+(e+="")]=e,this},remove:rw.remove,clear:rw.clear,values:rw.keys,size:rw.size,empty:rw.empty,each:rw.each};var iw=Array.prototype,aw=iw.map,ow=iw.slice,uw={name:"implicit"},sw=1/.7,fw="\\s*([+-]?\\d+)\\s*",lw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",cw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dw=/^#([0-9a-f]{3})$/,hw=/^#([0-9a-f]{6})$/,pw=new RegExp("^rgb\\("+[fw,fw,fw]+"\\)$"),gw=new RegExp("^rgb\\("+[cw,cw,cw]+"\\)$"),mw=new RegExp("^rgba\\("+[fw,fw,fw,lw]+"\\)$"),vw=new RegExp("^rgba\\("+[cw,cw,cw,lw]+"\\)$"),yw=new RegExp("^hsl\\("+[lw,cw,cw]+"\\)$"),bw=new RegExp("^hsla\\("+[lw,cw,cw,lw]+"\\)$"),_w={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ho(Go,Xo,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Ho(eu,Ko,Yo(Go,{brighter:function(e){return e=null==e?sw:Math.pow(sw,e),new eu(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new eu(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+tu(this.r)+tu(this.g)+tu(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),Ho(iu,ru,Yo(Go,{brighter:function(e){return e=null==e?sw:Math.pow(sw,e),new iu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new iu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new eu(au(240<=e?e-240:e+120,i,r),au(e,i,r),au(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var xw=Math.PI/180,ww=180/Math.PI,kw=.96422,Mw=1,Ew=.82521,Ow=4/29,Sw=6/29,Aw=3*Sw*Sw,Cw=Sw*Sw*Sw;Ho(su,uu,Yo(Go,{brighter:function(e){return new su(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new su(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new eu(cu(3.1338561*(t=kw*lu(t))-1.6168667*(e=Mw*lu(e))-.4906146*(n=Ew*lu(n))),cu(-.9787684*t+1.9161415*e+.033454*n),cu(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Ho(pu,hu,Yo(Go,{brighter:function(e){return new pu(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new pu(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return ou(this).rgb()}}));var Rw=1.78277,Tw=-.29227,zw=-.90649,Dw=1.97294,Nw=Dw*zw,Pw=Dw*Rw,$w=Rw*Tw- -.14861*zw;Ho(mu,gu,Yo(Go,{brighter:function(e){return e=null==e?sw:Math.pow(sw,e),new mu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new mu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*xw,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new eu(255*(t+n*(-.14861*r+Rw*i)),255*(t+n*(Tw*r+zw*i)),255*(t+n*(Dw*r)),this.opacity)}}));var Lw,qw,jw,Fw,Uw,Iw=function e(t){function n(e,t){var n=r((e=Ko(e)).r,(t=Ko(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),o=Mu(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}var r=ku(t);return n.gamma=e,n}(1),Bw=Eu(yu),Ww=Eu(bu),Vw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hw=new RegExp(Vw.source,"g"),Yw=180/Math.PI,Gw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Xw=Nu(function(e){return"none"===e?Gw:(Lw||(Lw=document.createElement("DIV"),qw=document.documentElement,jw=document.defaultView),Lw.style.transform=e,e=jw.getComputedStyle(qw.appendChild(Lw),null).getPropertyValue("transform"),qw.removeChild(Lw),Du(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),Zw=Nu(function(e){return null==e?Gw:(Fw||(Fw=document.createElementNS("http://www.w3.org/2000/svg","g")),Fw.setAttribute("transform",e),(e=Fw.transform.baseVal.consolidate())?Du((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Gw)},", ",")",")"),Jw=Math.SQRT2,Qw=$u(wu),Kw=$u(Mu),ek=Lu(wu),tk=Lu(Mu),nk=qu(wu),rk=qu(Mu),ik=Object.freeze({interpolate:Tu,interpolateArray:Ou,interpolateBasis:yu,interpolateBasisClosed:bu,interpolateDate:Su,interpolateNumber:Au,interpolateObject:Cu,interpolateRound:zu,interpolateString:Ru,interpolateTransformCss:Xw,interpolateTransformSvg:Zw,interpolateZoom:function(e,t){var n,r,i=e[0],a=e[1],o=e[2],u=t[0],s=t[1],f=t[2],l=u-i,c=s-a,d=l*l+c*c;if(d<1e-12)r=Math.log(f/o)/Jw,n=function(e){return[i+e*l,a+e*c,o*Math.exp(Jw*e*r)]};else{var h=Math.sqrt(d),p=(f*f-o*o+4*d)/(2*o*2*h),g=(f*f-o*o-4*d)/(2*f*2*h),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/Jw,n=function(e){var t,n,u=e*r,s=Pu(m),f=o/(2*h)*(s*(n=Jw*u+m,((n=Math.exp(2*n))-1)/(n+1))-(t=m,((t=Math.exp(t))-1/t)/2));return[i+f*l,a+f*c,o*s/Pu(Jw*u+m)]}}return n.duration=1e3*r,n},interpolateRgb:Iw,interpolateRgbBasis:Bw,interpolateRgbBasisClosed:Ww,interpolateHsl:Qw,interpolateHslLong:Kw,interpolateLab:function(e,t){var n=Mu((e=uu(e)).l,(t=uu(t)).l),r=Mu(e.a,t.a),i=Mu(e.b,t.b),a=Mu(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}},interpolateHcl:ek,interpolateHclLong:tk,interpolateCubehelix:nk,interpolateCubehelixLong:rk,piecewise:function(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}},quantize:function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}}),ak=[0,1],ok=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Gu.prototype=Xu.prototype,Xu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var uk,sk,fk,lk={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Zu(100*e,t)},r:Zu,s:function(e,t){var n=Hu(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Uw=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:o<a?r+new Array(a-o+1).join("0"):0<a?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Hu(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},ck=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];Ku({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var dk=1e3,hk=60*dk,pk=60*hk,gk=24*pk,mk=7*gk,vk=30*gk,yk=365*gk,bk=Array.prototype.map,_k=Array.prototype.slice,xk={identity:function e(){function t(e){return+e}var n=[0,1];return(t.invert=t).domain=t.range=function(e){return arguments.length?(n=aw.call(e,Fu),t):n.slice()},t.copy=function(){return e().domain(n)},ts(t)},linear:ns,log:function e(){function t(){return a=ss(i),o=us(i),r()[0]<0&&(a=fs(a),o=fs(o)),n}var n=Vu(is,as).domain([1,10]),r=n.domain,i=10,a=ss(10),o=us(10);return n.base=function(e){return arguments.length?(i=+e,t()):i},n.domain=function(e){return arguments.length?(r(e),t()):r()},n.ticks=function(e){var t,n=r(),u=n[0],s=n[n.length-1];(t=s<u)&&(d=u,u=s,s=d);var f,l,c,d=a(u),h=a(s),p=null==e?10:+e,g=[];if(!(i%1)&&h-d<p){if(d=Math.round(d)-1,h=Math.round(h)+1,0<u){for(;d<h;++d)for(l=1,f=o(d);l<i;++l)if(!((c=f*l)<u)){if(s<c)break;g.push(c)}}else for(;d<h;++d)for(l=i-1,f=o(d);1<=l;--l)if(!((c=f*l)<u)){if(s<c)break;g.push(c)}}else g=En(d,h,Math.min(h-d,p)).map(o);return t?g.reverse():g},n.tickFormat=function(e,t){if(null==t&&(t=10===i?".0e":","),"function"!=typeof t&&(t=sk(t)),e===1/0)return t;null==e&&(e=10);var r=Math.max(1,i*e/n.ticks().length);return function(e){var n=e/o(Math.round(a(e)));return n*i<i-.5&&(n*=i),n<=r?t(e):""}},n.nice=function(){return r(rs(r(),{floor:function(e){return o(Math.floor(a(e)))},ceil:function(e){return o(Math.ceil(a(e)))}}))},n.copy=function(){return Wu(n,e().base(i))},n},ordinal:Vo,pow:cs,sqrt:function(){return cs().exponent(.5)},quantile:function e(){function t(){var e=0,t=Math.max(1,i.length);for(a=new Array(t-1);++e<t;)a[e-1]=Cn(r,e/t);return n}function n(e){if(!isNaN(e=+e))return i[Wy(a,e)]}var r=[],i=[],a=[];return n.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:[0<t?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},n.domain=function(e){if(!arguments.length)return r.slice();r=[];for(var n,i=0,a=e.length;i<a;++i)null==(n=e[i])||isNaN(n=+n)||r.push(n);return r.sort(_n),t()},n.range=function(e){return arguments.length?(i=ow.call(e),t()):i.slice()},n.quantiles=function(){return a.slice()},n.copy=function(){return e().domain(r).range(i)},n},quantize:function e(){function t(e){if(e<=e)return u[Wy(o,e,0,a)]}function n(){var e=-1;for(o=new Array(a);++e<a;)o[e]=((e+1)*i-(e-a)*r)/(a+1);return t}var r=0,i=1,a=1,o=[.5],u=[0,1];return t.domain=function(e){return arguments.length?(r=+e[0],i=+e[1],n()):[r,i]},t.range=function(e){return arguments.length?(a=(u=ow.call(e)).length-1,n()):u.slice()},t.invertExtent=function(e){var t=u.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,o[0]]:a<=t?[o[a-1],i]:[o[t-1],o[t]]},t.copy=function(){return e().domain([r,i]).range(u)},ts(t)},threshold:function e(){function t(e){if(e<=e)return r[Wy(n,e,0,i)]}var n=[.5],r=[0,1],i=1;return t.domain=function(e){return arguments.length?(n=ow.call(e),i=Math.min(n.length,r.length-1),t):n.slice()},t.range=function(e){return arguments.length?(r=ow.call(e),i=Math.min(n.length,r.length-1),t):r.slice()},t.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},t.copy=function(){return e().domain(n).range(r)},t},time:function(){return ps(hy,dy,fy,sy,uy,oy,ay,ny,ky).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return ps(xy,_y,vy,my,gy,py,ay,ny,Ey).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:gs,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(gs().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=p(e)-a}function r(e){var n=(e-a)/o;return t(u?Math.max(0,Math.min(1,n)):n)}var i=ns(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return n(e)}var n=ns(),r=[];return t.domain=function(e){return arguments.length?(r=ms(e),n.domain([r[0],p(r)]),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(e){return n.invert(e)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(e,t){return!(t%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(Wy(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=ms(e),t):n.slice()},t.range=function(e){return arguments.length?(r=_k.call(e),t):r.slice()},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var wk in xk)vs(wk,xk[wk]);var kk=ys("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Mk=ys("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Ek=ys("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Ok=ys("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),Sk=ys("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),Ak=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(ys),Ck=bs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Rk=bs("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Tk=bs("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),zk=bs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Dk=bs("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Nk=bs("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Pk=bs("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),$k=bs("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Lk=bs("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),qk=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(bs),jk=_s(qk),Fk=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(bs),Uk=_s(Fk),Ik=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(bs),Bk=_s(Ik),Wk=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(bs),Vk=_s(Wk),Hk=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(bs),Yk=_s(Hk),Gk=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(bs),Xk=_s(Gk),Zk=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(bs),Jk=_s(Zk),Qk=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(bs),Kk=_s(Qk),eM=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(bs),tM=_s(eM),nM=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(bs),rM=_s(nM),iM=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(bs),aM=_s(iM),oM=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(bs),uM=_s(oM),sM=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(bs),fM=_s(sM),lM=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(bs),cM=_s(lM),dM=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(bs),hM=_s(dM),pM=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(bs),gM=_s(pM),mM=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(bs),vM=_s(mM),yM=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(bs),bM=_s(yM),_M=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(bs),xM=_s(_M),wM=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(bs),kM=_s(wM),MM=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(bs),EM=_s(MM),OM=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(bs),SM=_s(OM),AM=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(bs),CM=_s(AM),RM=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(bs),TM=_s(RM),zM=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(bs),DM=_s(zM),NM=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(bs),PM=_s(NM),$M=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(bs),LM=_s($M),qM=rk(gu(300,.5,0),gu(-240,.5,1)),jM=rk(gu(-100,.75,.35),gu(80,1.5,.8)),FM=rk(gu(260,.75,.35),gu(80,1.5,.8)),UM=gu(),IM=Ko(),BM=Math.PI/3,WM=2*Math.PI/3,VM=ks(bs("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),HM=ks(bs("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),YM=ks(bs("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),GM=ks(bs("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),XM=Object.freeze({
schemeCategory10:Ck,schemeAccent:Rk,schemeDark2:Tk,schemePaired:zk,schemePastel1:Dk,schemePastel2:Nk,schemeSet1:Pk,schemeSet2:$k,schemeSet3:Lk,interpolateBrBG:jk,schemeBrBG:qk,interpolatePRGn:Uk,schemePRGn:Fk,interpolatePiYG:Bk,schemePiYG:Ik,interpolatePuOr:Vk,schemePuOr:Wk,interpolateRdBu:Yk,schemeRdBu:Hk,interpolateRdGy:Xk,schemeRdGy:Gk,interpolateRdYlBu:Jk,schemeRdYlBu:Zk,interpolateRdYlGn:Kk,schemeRdYlGn:Qk,interpolateSpectral:tM,schemeSpectral:eM,interpolateBuGn:rM,schemeBuGn:nM,interpolateBuPu:aM,schemeBuPu:iM,interpolateGnBu:uM,schemeGnBu:oM,interpolateOrRd:fM,schemeOrRd:sM,interpolatePuBuGn:cM,schemePuBuGn:lM,interpolatePuBu:hM,schemePuBu:dM,interpolatePuRd:gM,schemePuRd:pM,interpolateRdPu:vM,schemeRdPu:mM,interpolateYlGnBu:bM,schemeYlGnBu:yM,interpolateYlGn:xM,schemeYlGn:_M,interpolateYlOrBr:kM,schemeYlOrBr:wM,interpolateYlOrRd:EM,schemeYlOrRd:MM,interpolateBlues:SM,schemeBlues:OM,interpolateGreens:CM,schemeGreens:AM,interpolateGreys:TM,schemeGreys:RM,interpolatePurples:DM,schemePurples:zM,interpolateReds:PM,schemeReds:NM,interpolateOranges:LM,schemeOranges:$M,interpolateCubehelixDefault:qM,interpolateRainbow:xs,interpolateWarm:jM,interpolateCool:FM,interpolateSinebow:ws,interpolateViridis:VM,interpolateMagma:HM,interpolateInferno:YM,interpolatePlasma:GM}),ZM={blueorange:Ak},JM={category10:Ck,accent:Rk,dark2:Tk,paired:zk,pastel1:Dk,pastel2:Nk,set1:Pk,set2:$k,set3:Lk,category20:kk,category20b:Mk,category20c:Ek,tableau10:Ok,tableau20:Sk,viridis:VM,magma:HM,inferno:YM,plasma:GM,rainbow:xs,sinebow:ws,blueorange:Bw(p(Ak))};Ms("blues","Blues"),Ms("greens","Greens"),Ms("greys","Greys"),Ms("purples","Purples"),Ms("reds","Reds"),Ms("oranges","Oranges"),Ms("brownbluegreen","BrBG"),Ms("purplegreen","PRGn"),Ms("pinkyellowgreen","PiYG"),Ms("purpleorange","PuOr"),Ms("redblue","RdBu"),Ms("redgrey","RdGy"),Ms("redyellowblue","RdYlBu"),Ms("redyellowgreen","RdYlGn"),Ms("spectral","Spectral"),Ms("bluegreen","BuGn"),Ms("bluepurple","BuPu"),Ms("greenblue","GnBu"),Ms("orangered","OrRd"),Ms("purplebluegreen","PuBuGn"),Ms("purpleblue","PuBu"),Ms("purplered","PuRd"),Ms("redpurple","RdPu"),Ms("yellowgreenblue","YlGnBu"),Ms("yellowgreen","YlGn"),Ms("yelloworangebrown","YlOrBr"),Ms("yelloworangered","YlOrRd");var QM={millisecond:ny,second:ay,minute:oy,hour:uy,day:sy,week:fy,month:dy,year:hy},KM={millisecond:ny,second:ay,minute:py,hour:gy,day:my,week:vy,month:_y,year:xy};P($s,sn).transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=null==e.count?e.values?e.values.length:10:zs(i,e.count),o=e.format||Ps(i,a,e.formatSpecifier),u=e.values?Ds(i,e.values,a):Ns(i,a);return r&&(n.rem=r),r=u.map(function(e,t){return te({index:t/(u.length-1),value:e,label:o(e)})}),e.extra&&r.push(te({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},P(Ls,sn).transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||qs,a=e.key||K,u=this.value;return xv(r.encode)&&(r.encode=null),u&&(e.modified("key")||t.modified(a))&&o("DataJoin does not support modified key function or fields."),u||(t=t.addAll(),this.value=u=N().test(js),u.lookup=function(e){return u.get(a(e))}),t.visit(t.ADD,function(e){var t=a(e),n=u.get(t);n?n.exit?(u.empty--,r.add.push(n)):r.mod.push(n):(u.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=a(e),n=u.get(t);n&&(n.datum=e,r.mod.push(n))}),t.visit(t.REM,function(e){var t=a(e),n=u.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++u.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&u.empty>n.cleanThreshold&&n.runAfter(u.clean),r},P(Fs,sn).transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,i=t.encode;if(xv(i)){if(!n.changed()&&!i.every(function(e){return r[e]}))return t.StopPropagation;i=i[0],n.encode=null}var a="enter"===i,o=r.update||Av,u=r.enter||Av,s=r.exit||Av,f=(i&&!a?r[i]:o)||Av;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(t){u(t,e),o(t,e),f!==Av&&f!==o&&f(t,e)}),n.modifies(u.output),n.modifies(o.output),f!==Av&&f!==o&&n.modifies(f.output)),t.changed(t.REM)&&s!==Av&&(t.visit(t.REM,function(t){s(t,e)}),n.modifies(s.output)),a||f!==Av){var l=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(l,function(t){var r=u(t,e);(f(t,e)||r)&&n.mod.push(t)}),n.mod.length&&n.modifies(u.output)):t.visit(l,function(t){f(t,e)&&n.mod.push(t)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation};var eE="symbol",tE={};tE[Jx]=function(e){var t=[-1/0].concat(e.quantiles());return t.max=1/0,t},tE[Qx]=function(e){var t=e.domain(),n=t[0],r=p(t),i=e.range().length,a=new Array(i),o=0;for(a[0]=-1/0;++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=1/0,a},tE[Kx]=function(e){var t=[-1/0].concat(e.domain());return t.max=1/0,t},tE["bin-linear"]=tE[ew]=function(e){var t=e.domain();return t.max=t.pop(),t},P(Bs,sn).transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o,u,s,f=t.fork(t.NO_SOURCE|t.NO_FIELDS),l=this.value,c=e.type||eE,d=e.scale,h=null==e.count?5:zs(d,e.count),g=e.format||Ps(d,h,e.formatSpecifier),m=e.values||(u=h,(s=tE[(o=d).type])?s(o):Ns(o,u));return g=Us(d,g,c),l&&(f.rem=l),c===eE?(A(i=e.size)?(e.values||0!==d(m[0])||(m=m.slice(1)),a=m.reduce(function(t,n){return Math.max(t,i(n,e))},0)):i=R(a=i||8),l=m.map(function(t,n){return te({index:n,label:g(t,n,m),value:t,offset:a,size:i(t,e)})})):"gradient"===c?(n=e.values?d.domain():m,r=Ss(d,n[0],p(n)),l=m.map(function(e,t){return te({index:t,label:g(e,t,m),value:e,perc:r(e)})})):(i=m.length-1,r=function(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+p(t),a=i-r;if(e.type===Kx){var o=n?a/n:.1;a=(i+=o)-(r-=o)}return function(e){return(e-r)/a}}(d),l=m.map(function(e,t){return te({index:t,label:g(e,t,m),value:e,perc:t?r(e):0,perc2:t===i?1:r(m[t+1])})})),f.source=l,f.add=l,this.value=l,f};var nE=N({line:Xs,"line-radial":function(e,t,n,r){return Xs(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:Zs,"arc-radial":function(e,t,n,r){return Zs(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:Js,"curve-radial":function(e,t,n,r){return Js(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:e<n;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*i+","+t*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}});Gs.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]},P(Gs,sn).transform=function(e,t){var n=e.sourceX||Ws,r=e.sourceY||Vs,i=e.targetX||Hs,a=e.targetY||Ys,u=e.as||"path",s=e.orient||"vertical",f=e.shape||"line",l=nE.get(f+"-"+s)||nE.get(f);return l||o("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[u]=l(n(e),r(e),i(e),a(e))}),t.reflow(e.modified()).modifies(u)},Qs.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},P(Qs,sn).transform=function(e,t){var n,r,i,a=e.as||["startAngle","endAngle"],o=a[0],u=a[1],s=e.field||Ov,f=e.startAngle||0,l=null!=e.endAngle?e.endAngle:2*Math.PI,c=t.source,d=c.map(s),h=d.length,p=f,g=(l-f)/function(e,t){var n,r=e.length,i=-1,a=0;if(null==t)for(;++i<r;)(n=+e[i])&&(a+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(a+=n);return a}(d),m=Mn(h);for(e.sort&&m.sort(function(e,t){return d[e]-d[t]}),n=0;n<h;++n)i=d[m[n]],(r=c[m[n]])[o]=p,r[u]=p+=i*g;return this.value=d,t.reflow(e.modified()).modifies(a)};var rE=5,iE=G([Xx,Vx,Hx]),aE=G([Xx,Wx,Vx,Hx,"time","utc"]),oE=G(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);P(Ks,sn).transform=function(e,t){var n,r=t.dataflow,i=this.value;for(n in i&&!e.modified("type")||(this.value=i=vs((e.type||Xx).toLowerCase())()),e)if(!oE[n]){if("padding"===n&&aE[i.type])continue;A(i[n])?i[n](e[n]):r.warn("Unsupported scale property: "+n)}return function(e,t,n){var r=t.round||!1,i=t.range;if(null!=t.rangeStep)i=function(e,t,n){e!==Yx&&e!==Gx&&o("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===Gx?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*$o(n,i,r)]}(e.type,t,n);else if(t.scheme){if(A(i=function(e,t,n){var r,i=t.scheme.toLowerCase(),a=Es(i),u=t.schemeExtent;return a||o("Unrecognized scheme name: "+t.scheme),n=e===Kx?n+1:e===ew?n-1:e===Jx||e===Qx?+t.schemeCount||rE:n,e===tw?ef(a,u,t.reverse):!u&&(r=Es(i+"-"+n))?r:A(a)?function(e,t){for(var n=new Array(t),r=t+2,i=0;i<t;)n[i]=e(++i/r);return n}(ef(a,u),n):e===Zx?a:a.slice(0,n)}(e.type,t,n)))return e.interpolator(i)}else if(i&&e.type===tw)return e.interpolator(Bw(tf(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate(Cs(t.interpolate,t.interpolateGamma)):A(e.round)?e.round(r):A(e.rangeRound)&&e.interpolate(r?zu:Tu),i&&e.range(tf(i,t.reverse))}(i,e,function(e,t,n){var r,i,a=(r=e,i=t.domainRaw,i?(r.domain(i),i.length):-1);if(-1<a)return a;var o,u,s=t.domain,f=e.type,l=t.zero||void 0===t.zero&&iE[f];if(!s)return 0;aE[f]&&t.padding&&s[0]!==p(s)&&(c=f,d=s,h=t.range,g=t.padding,m=t.exponent,v=Math.abs(p(h)-h[0]),y=v/(v-2*g),b=c===Wx?E(d,null,y):c===Hx?O(d,null,y,.5):c===Vx?O(d,null,y,m):M(d,null,y),(d=d.slice())[0]=b[0],d[d.length-1]=b[1],s=d);var c,d,h,g,m,v,y,b;return(l||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(o=(s=s.slice()).length-1||1,l&&(0<s[0]&&(s[0]=0),s[o]<0&&(s[o]=0)),null!=t.domainMin&&(s[0]=t.domainMin),null!=t.domainMax&&(s[o]=t.domainMax),null!=t.domainMid&&(((u=t.domainMid)<s[0]||u>s[o])&&n.warn("Scale domainMid exceeds domain min or max.",u),s.splice(o,0,u))),e.domain(s),f===Zx&&e.unknown(void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&zs(e,t.nice)||null),s.length}(i,e,r)),t.fork(t.NO_SOURCE|t.NO_FIELDS)},P(nf,sn).transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};var uE;rf.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]},(uE=P(rf,sn)).transform=function(e,t){var n,r,i,a,o=e.as||["y0","y1"],u=o[0],s=o[1],f=e.field||Ov,l="center"===e.offset?af:"normalize"===e.offset?of:uf;for(r=0,i=(n=function(e,t,n,r){var i,a,o,u,s,f,l,c,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)s=e[a],f=t.map(p),(l=i[f])||(i[f]=l=[],h.push(l)),l.push(s);for(d=f=0,u=h.length;f<u;++f){for(l=h[f],c=a=0,o=l.length;a<o;++a)c+=Math.abs(r(l[a]));l.sum=c,d<c&&(d=c),n&&l.sort(n)}return h.max=d,h}(t.source,e.groupby,e.sort,f)).length,a=n.max;r<i;++r)l(n[r],a,f,u,s);return t.reflow(e.modified()).modifies(o)};var sE=Object.freeze({axisticks:$s,datajoin:Ls,encode:Fs,legendentries:Bs,linkpath:Gs,pie:Qs,scale:Ks,sortitems:nf,stack:rf,validTicks:Ds}),fE=Array.prototype.slice,lE=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],cE=["size","smooth"],dE=["x","y","size","cellSize","bandwidth"];yf.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]},P(yf,sn).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i,a,o=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=e.count||10;return e.values?(n=hf(),r=cE,i=e.values):(n=function(){function e(e){var n=new Float32Array(h*p),r=new Float32Array(h*p);e.forEach(function(e,t,r){var i=o(e,t,r)+d>>c,a=u(e,t,r)+d>>c;0<=i&&i<h&&0<=a&&a<p&&++n[i+a*h]}),pf({width:h,height:p,data:n},{width:h,height:p,data:r},l>>c),gf({width:h,height:p,data:r},{width:h,height:p,data:n},l>>c),pf({width:h,height:p,data:n},{width:h,height:p,data:r},l>>c),gf({width:h,height:p,data:r},{width:h,height:p,data:n},l>>c),pf({width:h,height:p,data:n},{width:h,height:p,data:r},l>>c),gf({width:h,height:p,data:r},{width:h,height:p,data:n},l>>c);var i=g(n);if(!Array.isArray(i)){var a=Rn(n);i=Sn(0,a,i),(i=Mn(0,Math.floor(a/i)*i,i)).shift()}return hf().thresholds(i).size([h,p])(n).map(t)}function t(e){return e.value*=Math.pow(2,-2*c),e.coordinates.forEach(n),e}function n(e){e.forEach(r)}function r(e){e.forEach(i)}function i(e){e[0]=e[0]*Math.pow(2,c)-d,e[1]=e[1]*Math.pow(2,c)-d}function a(){return h=s+2*(d=3*l)>>c,p=f+2*d>>c,e}var o=mf,u=vf,s=960,f=500,l=20,c=2,d=3*l,h=s+2*d>>c,p=f+2*d>>c,g=ff(20);return e.x=function(t){return arguments.length?(o="function"==typeof t?t:ff(+t),e):o},e.y=function(t){return arguments.length?(u="function"==typeof t?t:ff(+t),e):u},e.size=function(e){if(!arguments.length)return[s,f];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(0<=t||0<=t))throw new Error("invalid size");return s=t,f=n,a()},e.cellSize=function(e){if(!arguments.length)return 1<<c;if(!(1<=(e=+e)))throw new Error("invalid cell size");return c=Math.floor(Math.log(e)/Math.LN2),a()},e.thresholds=function(t){return arguments.length?(g="function"==typeof t?t:ff(Array.isArray(t)?fE.call(t):t),e):g},e.bandwidth=function(e){if(!arguments.length)return Math.sqrt(l*(l+1));if(!(0<=(e=+e)))throw new Error("invalid bandwidth");return l=Math.round((Math.sqrt(4*e*e+1)-1)/2),a()},e}(),r=dE,i=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?u:(a=u,function(e){for(var t=kn(e),n=t[0],r=t[1]-n,i=[],o=1;o<=a;++o)i.push(n+r*o/(a+1));return i}))),r.forEach(function(t){null!=e[t]&&n[t](e[t])}),this.value&&(o.rem=this.value),i=i&&i.length?n(i).map(te):[],this.value=o.source=o.add=i,o};var hE="FeatureCollection";bf.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},P(bf,sn).transform=function(e,t){var n,r=this._features,i=this._points,o=e.fields,u=o&&o[0],s=o&&o[1],f=e.geojson,l=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(a(f))||u&&t.modified(a(u))||s&&t.modified(a(s)),this.value&&!n||(l=t.SOURCE,this._features=r=[],this._points=i=[]),f&&t.visit(l,function(e){r.push(f(e))}),u&&s&&(t.visit(l,function(e){var t=u(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])}),r=r.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:hE,features:r}},xf.prototype={constructor:xf,reset:function(){this.s=this.t=0},add:function(e){wf(VE,e,this.t),wf(this,VE.s,this.s),this.s?this.t+=VE.t:this.s=VE.t},valueOf:function(){return this.s}};var pE,gE,mE,vE,yE,bE,_E,xE,wE,kE,ME,EE,OE,SE,AE,CE,RE,TE,zE,DE,NE,PE,$E,LE,qE,jE,FE,UE,IE,BE,WE,VE=new xf,HE=1e-6,YE=Math.PI,GE=YE/2,XE=YE/4,ZE=2*YE,JE=180/YE,QE=YE/180,KE=Math.abs,eO=Math.atan,tO=Math.atan2,nO=Math.cos,rO=Math.ceil,iO=Math.exp,aO=Math.log,oO=Math.pow,uO=Math.sin,sO=Math.sign||function(e){return 0<e?1:e<0?-1:0},fO=Math.sqrt,lO=Math.tan,cO={Feature:function(e,t){Of(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Of(n[r].geometry,t)}},dO={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Sf(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Sf(n[r],t,0)},Polygon:function(e,t){Af(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Af(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Of(n[r],t)}},hO=_f(),pO=_f(),gO={point:Ef,lineStart:Ef,lineEnd:Ef,polygonStart:function(){hO.reset(),gO.lineStart=Rf,gO.lineEnd=Tf},polygonEnd:function(){var e=+hO;pO.add(e<0?ZE+e:e),this.lineStart=this.lineEnd=this.point=Ef},sphere:function(){pO.add(ZE)}},mO=_f(),vO={point:Uf,lineStart:Bf,lineEnd:Wf,polygonStart:function(){vO.point=Vf,vO.lineStart=Hf,vO.lineEnd=Yf,mO.reset(),gO.polygonStart()},polygonEnd:function(){gO.polygonEnd(),vO.point=Uf,vO.lineStart=Bf,vO.lineEnd=Wf,hO<0?(bE=-(xE=180),_E=-(wE=90)):HE<mO?wE=90:mO<-HE&&(_E=-90),AE[0]=bE,AE[1]=xE}},yO={sphere:Ef,point:Jf,lineStart:Kf,lineEnd:nl,polygonStart:function(){yO.lineStart=rl,yO.lineEnd=il},polygonEnd:function(){yO.lineStart=Kf,yO.lineEnd=nl}};sl.invert=sl;var bO=_f(),_O=bl(function(){return!0},function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var u,s,f,l,c,d,h,p=0<a?YE:-YE,g=KE(a-n);KE(g-YE)<HE?(e.point(n,r=0<(r+o)/2?GE:-GE),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(p,r),e.point(a,r),t=0):i!==p&&YE<=g&&(KE(n-i)<HE&&(n-=i*HE),KE(a-p)<HE&&(a-=p*HE),s=r,l=o,h=uO((u=n)-(f=a)),r=KE(h)>HE?eO((uO(s)*(d=nO(l))*uO(f)-uO(l)*(c=nO(s))*uO(u))/(c*d*h)):(s+l)/2,e.point(i,r),e.lineEnd(),e.lineStart(),e.point(p,r),t=0),e.point(n=a,r=o),i=p},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}},function(e,t,n,r){var i;if(null==e)i=n*GE,r.point(-YE,i),r.point(0,i),r.point(YE,i),r.point(YE,0),r.point(YE,-i),r.point(0,-i),r.point(-YE,-i),r.point(-YE,0),r.point(-YE,i);else if(KE(e[0]-t[0])>HE){var a=e[0]<t[0]?YE:-YE;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])},[-YE,-GE]),xO=1e9,wO=-xO;_f();var kO,MO,EO,OO,SO,AO,CO,RO,TO=_f(),zO=_f(),DO={point:Ef,lineStart:Ef,lineEnd:Ef,polygonStart:function(){DO.lineStart=Sl,DO.lineEnd=Rl},polygonEnd:function(){DO.lineStart=DO.lineEnd=DO.point=Ef,TO.add(KE(zO)),zO.reset()},result:function(){var e=TO/2;return TO.reset(),e}},NO=1/0,PO=NO,$O=-NO,LO=$O,qO={point:function(e,t){e<NO&&(NO=e),$O<e&&($O=e),t<PO&&(PO=t),LO<t&&(LO=t)},lineStart:Ef,lineEnd:Ef,polygonStart:Ef,polygonEnd:Ef,result:function(){var e=[[NO,PO],[$O,LO]];return $O=LO=-(PO=NO=1/0),e}},jO=0,FO=0,UO=0,IO=0,BO=0,WO=0,VO=0,HO=0,YO=0,GO={point:Tl,lineStart:zl,lineEnd:Pl,polygonStart:function(){GO.lineStart=$l,GO.lineEnd=Ll},polygonEnd:function(){GO.point=Tl,GO.lineStart=zl,GO.lineEnd=Pl},result:function(){var e=YO?[VO/YO,HO/YO]:WO?[IO/WO,BO/WO]:UO?[jO/UO,FO/UO]:[NaN,NaN];return jO=FO=UO=IO=BO=WO=VO=HO=YO=0,e}};Fl.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ZE)}},result:Ef};var XO,ZO,JO,QO,KO,eS=_f(),tS={point:Ef,lineStart:function(){tS.point=Ul},lineEnd:function(){XO&&Il(ZO,JO),tS.point=Ef},polygonStart:function(){XO=!0},polygonEnd:function(){XO=null},result:function(){var e=+eS;return eS.reset(),e}};Bl.prototype={_radius:4.5,_circle:Wl(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Wl(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},Yl.prototype={constructor:Yl,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var nS=16,rS=nO(30*QE),iS=Hl({point:function(e,t){this.stream.point(e*QE,t*QE)}}),aS=uc(function(e){return fO(2/(1+e))});aS.invert=sc(function(e){return 2*Mf(e/2)});var oS=uc(function(e){return(e=kf(e))&&e/uO(e)});oS.invert=sc(function(e){return e}),fc.invert=function(e,t){return[e,2*eO(iO(t))-GE]},hc.invert=hc,gc.invert=sc(eO),vc.invert=sc(Mf),yc.invert=sc(function(e){return 2*eO(e)}),bc.invert=function(e,t){return[-t,2*eO(iO(e))-GE]};var uS=Vl(),sS=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],fS={albers:oc,albersusa:function(){function e(e){var t=e[0],n=e[1];return u=null,i.point(t,n),u||(a.point(t,n),u)||(o.point(t,n),u)}function t(){return n=r=null,e}var n,r,i,a,o,u,s=oc(),f=ac().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=ac().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){u=[e,t]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(.12<=i&&i<.234&&-.425<=r&&r<-.214?f:.166<=i&&i<.234&&-.214<=r&&r<-.115?l:s).invert(e)},e.stream=function(e){return n&&r===e?n:(t=[s.stream(r=e),f.stream(e),l.stream(e)],i=t.length,n={point:function(e,n){for(var r=-1;++r<i;)t[r].point(e,n)},sphere:function(){for(var e=-1;++e<i;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)t[e].polygonEnd()}});var t,i},e.precision=function(e){return arguments.length?(s.precision(e),f.precision(e),l.precision(e),t()):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),f.scale(.35*t),l.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(e){if(!arguments.length)return s.translate();var n=s.scale(),r=+e[0],u=+e[1];return i=s.translate(e).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(c),a=f.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+HE,u+.12*n+HE],[r-.214*n-HE,u+.234*n-HE]]).stream(c),o=l.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+HE,u+.166*n+HE],[r-.115*n-HE,u+.234*n-HE]]).stream(c),t()},e.fitExtent=function(t,n){return Xl(e,t,n)},e.fitSize=function(t,n){return Zl(e,t,n)},e.fitWidth=function(t,n){return Jl(e,t,n)},e.fitHeight=function(t,n){return Ql(e,t,n)},e.scale(1070)},azimuthalequalarea:function(){return tc(aS).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return tc(oS).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return rc(dc).scale(109.5).parallels([30,30])},conicequalarea:ac,conicequidistant:function(){return rc(pc).scale(131.154).center([0,13.9389])},equirectangular:function(){return tc(hc).scale(152.63)},gnomonic:function(){return tc(gc).scale(144.049).clipAngle(60)},identity:function(){function e(){return i=a=null,o}var t,n,r,i,a,o,u=1,s=0,f=0,l=1,c=1,d=Ol,h=null,p=Ol;return o={stream:function(e){return i&&a===e?i:i=d(p(a=e))},postclip:function(i){return arguments.length?(p=i,h=t=n=r=null,e()):p},clipExtent:function(i){return arguments.length?(p=null==i?(h=t=n=r=null,Ol):kl(h=+i[0][0],t=+i[0][1],n=+i[1][0],r=+i[1][1]),e()):null==h?null:[[h,t],[n,r]]},scale:function(t){return arguments.length?(d=mc((u=+t)*l,u*c,s,f),e()):u},translate:function(t){return arguments.length?(d=mc(u*l,u*c,s=+t[0],f=+t[1]),e()):[s,f]},reflectX:function(t){return arguments.length?(d=mc(u*(l=t?-1:1),u*c,s,f),e()):l<0},reflectY:function(t){return arguments.length?(d=mc(u*l,u*(c=t?-1:1),s,f),e()):c<0},fitExtent:function(e,t){return Xl(o,e,t)},fitSize:function(e,t){return Zl(o,e,t)},fitWidth:function(e,t){return Jl(o,e,t)},fitHeight:function(e,t){return Ql(o,e,t)}}},mercator:function(){return lc(fc).scale(961/ZE)},orthographic:function(){return tc(vc).scale(249.5).clipAngle(90+HE)},stereographic:function(){return tc(yc).scale(250).clipAngle(142)},transversemercator:function(){var e=lc(bc),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(var lS in fS)_c(lS,fS[lS]);wc.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},P(wc,sn).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Mv,a=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=xc(e.projection),n.materialize().reflow()):o=i===Mv||t.modified(i.fields)?n.ADD_MOD:n.ADD;var u=function(e,t){var n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}(r,e.pointRadius);return n.visit(o,function(e){e[a]=r(i(e))}),r.pointRadius(u),n.modifies(a)},kc.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},P(kc,sn).transform=function(e,t){function n(e){var t=i([a(e),o(e)]);t?(e[s]=t[0],e[f]=t[1]):(e[s]=void 0,e[f]=void 0)}var r,i=e.projection,a=e.fields[0],o=e.fields[1],u=e.as||["x","y"],s=u[0],f=u[1];return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(r=t.modified(a.fields)||t.modified(o.fields),t.visit(r?t.ADD_MOD:t.ADD,n)),t.modifies(u)},Mc.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},P(Mc,sn).transform=function(e,t){var n,r,i,a,o=t.fork(t.ALL),u=this.value,s=e.field||c("datum"),f=e.as||"shape",l=o.ADD_MOD;return u&&!e.modified()||(this.value=(n=xc(e.projection),r=s,i=e.pointRadius,(a=null==i?function(e){return n(r(e))}:function(e){var t=n.pointRadius(),a=n.pointRadius(i)(r(e));return n.pointRadius(t),a}).context=function(e){return n.context(e),a},u=a),o.materialize().reflow(),l=o.SOURCE),o.visit(l,function(e){e[f]=u}),o.modifies(f)},Ec.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},P(Ec,sn).transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)A(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(ie(r[0],n)):t.add.push(te(n)),r[0]=n,t},P(Oc,sn).transform=function(e,t){var n,r,i,a,u=this.value;return!u||e.modified("type")?(this.value=u=function(e){var t=_c((e||"mercator").toLowerCase());return t||o("Unrecognized projection type: "+e),t()}(e.type),sS.forEach(function(t){null!=e[t]&&Sc(u,t,e[t])})):sS.forEach(function(t){e.modified(t)&&Sc(u,t,e[t])}),null!=e.pointRadius&&u.path.pointRadius(e.pointRadius),e.fit&&(n=u,a=(r=e).fit,i=1===(a=S(a)).length?a[0]:{type:hE,features:a.reduce(function(e,t){return t&&t.type===hE?e.push.apply(e,t.features):xv(t)?e.push.apply(e,t):e.push(t),e},[])},r.extent?n.fitExtent(r.extent,i):r.size&&n.fitSize(r.size,i)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var cS=Object.freeze({contour:yf,geojson:bf,geopath:wc,geopoint:kc,geoshape:Mc,graticule:Ec,projection:Oc}),dS=Nc.prototype=Pc.prototype;dS.copy=function(){var e,t,n=new Pc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=$c(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=$c(t));return n},dS.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Rc(this.cover(t,n),t,n,e)},dS.addAll=function(e){var t,n,r,i,a=e.length,o=new Array(a),u=new Array(a),s=1/0,f=1/0,l=-1/0,c=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||((o[n]=r)<s&&(s=r),l<r&&(l=r),(u[n]=i)<f&&(f=i),c<i&&(c=i));for(l<s&&(s=this._x0,l=this._x1),c<f&&(f=this._y0,c=this._y1),this.cover(s,f).cover(l,c),n=0;n<a;++n)Rc(this,o[n],u[n],e[n]);return this},dS.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{if(!(e<n||i<e||t<r||a<t))return this;var o,u,s=i-n,f=this._root;switch(u=(t<(r+a)/2)<<1|e<(n+i)/2){case 0:for(;(o=new Array(4))[u]=f,f=o,a=r+(s*=2),(i=n+s)<e||a<t;);break;case 1:for(;(o=new Array(4))[u]=f,f=o,a=r+(s*=2),e<(n=i-s)||a<t;);break;case 2:for(;(o=new Array(4))[u]=f,f=o,r=a-(s*=2),(i=n+s)<e||t<r;);break;case 3:for(;(o=new Array(4))[u]=f,f=o,r=a-(s*=2),e<(n=i-s)||t<r;);}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},dS.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},dS.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},dS.find=function(e,t,n){var r,i,a,o,u,s,f,l=this._x0,c=this._y0,d=this._x1,h=this._y1,p=[],g=this._root;for(g&&p.push(new Tc(g,l,c,d,h)),null==n?n=1/0:(l=e-n,c=t-n,d=e+n,h=t+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(i=s.x0)>d||(a=s.y0)>h||(o=s.x1)<l||(u=s.y1)<c))if(g.length){var m=(i+o)/2,v=(a+u)/2;p.push(new Tc(g[3],m,v,o,u),new Tc(g[2],i,v,m,u),new Tc(g[1],m,a,o,v),new Tc(g[0],i,a,m,v)),(f=(v<=t)<<1|m<=e)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=s)}else{var y=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);l=e-x,c=t-x,d=e+x,h=t+x,r=g.data}}return r},dS.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,u,s,f,l,c,d,h=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((f=a>=(u=(p+m)/2))?p=u:m=u,(l=o>=(s=(g+v)/2))?g=s:v=s,!(h=(t=h)[c=l<<1|f]))return this;if(!h.length)break;(t[c+1&3]||t[c+2&3]||t[c+3&3])&&(n=t,
d=c)}for(;h.data!==e;)if(!(h=(r=h).next))return this;return(i=h.next)&&delete h.next,r?i?r.next=i:delete r.next:t?(i?t[c]=i:delete t[c],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h)):this._root=i,this},dS.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},dS.root=function(){return this._root},dS.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},dS.visit=function(e){var t,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new Tc(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&s.length){var f=(r+a)/2,l=(i+o)/2;(n=s[3])&&u.push(new Tc(n,f,l,a,o)),(n=s[2])&&u.push(new Tc(n,r,l,f,o)),(n=s[1])&&u.push(new Tc(n,f,i,a,l)),(n=s[0])&&u.push(new Tc(n,r,i,f,l))}return this},dS.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Tc(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,u=t.y0,s=t.x1,f=t.y1,l=(o+s)/2,c=(u+f)/2;(a=i[0])&&n.push(new Tc(a,o,u,l,c)),(a=i[1])&&n.push(new Tc(a,l,u,s,c)),(a=i[2])&&n.push(new Tc(a,o,c,l,f)),(a=i[3])&&n.push(new Tc(a,l,c,s,f))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},dS.x=function(e){return arguments.length?(this._x=e,this):this._x},dS.y=function(e){return arguments.length?(this._y=e,this):this._y};var hS={value:function(){}};Ic.prototype=Uc.prototype={constructor:Ic,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),o=-1,u=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<u;)if(n=(e=a[o]).type)i[n]=Wc(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Wc(i[n],e.name,null);return this}for(;++o<u;)if((n=(e=a[o]).type)&&(n=Bc(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ic(e)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var pS,gS,mS=0,vS=0,yS=0,bS=1e3,_S=0,xS=0,wS=0,kS="object"==typeof performance&&performance.now?performance:Date,MS="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};Yc.prototype=Gc.prototype={constructor:Yc,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Vc():+n)+(null==t?0:+t),this._next||gS===this||(gS?gS._next=this:pS=this,gS=this),this._call=e,this._time=n,Jc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jc())}};var ES=10,OS=Math.PI*(3-Math.sqrt(5)),SS={center:function(e,t){function n(){var n,i,a=r.length,o=0,u=0;for(n=0;n<a;++n)o+=(i=r[n]).x,u+=i.y;for(o=o/a-e,u=u/a-t,n=0;n<a;++n)(i=r[n]).x-=o,i.y-=u}var r;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){r=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n},collide:function(e){function t(){function e(e,t,n,r,i){var a=e.data,u=e.r,h=c+u;if(!a)return f+h<t||r<f-h||l+h<n||i<l-h;if(a.index>s.index){var p=f-a.x-a.vx,g=l-a.y-a.vy,m=p*p+g*g;m<h*h&&(0===p&&(m+=(p=Cc())*p),0===g&&(m+=(g=Cc())*g),m=(h-(m=Math.sqrt(m)))/m*o,s.vx+=(p*=m)*(h=(u*=u)/(d+u)),s.vy+=(g*=m)*h,a.vx-=p*(h=1-h),a.vy-=g*h)}}for(var t,r,s,f,l,c,d,h=i.length,p=0;p<u;++p)for(r=Nc(i,Lc,qc).visitAfter(n),t=0;t<h;++t)s=i[t],c=a[s.index],d=c*c,f=s.x+s.vx,l=s.y+s.vy,r.visit(e)}function n(e){if(e.data)return e.r=a[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function r(){if(i){var t,n,r=i.length;for(a=new Array(r),t=0;t<r;++t)n=i[t],a[n.index]=+e(n,t,i)}}var i,a,o=1,u=1;return"function"!=typeof e&&(e=Ac(null==e?1:+e)),t.initialize=function(e){i=e,r()},t.iterations=function(e){return arguments.length?(u=+e,t):u},t.strength=function(e){return arguments.length?(o=+e,t):o},t.radius=function(n){return arguments.length?(e="function"==typeof n?n:Ac(+n),r(),t):e},t},nbody:function(){function e(e){var t,u=i.length,s=Nc(i,Qc,Kc).visitAfter(n);for(o=e,t=0;t<u;++t)a=i[t],s.visit(r)}function t(){if(i){var e,t,n=i.length;for(u=new Array(n),e=0;e<n;++e)t=i[e],u[t.index]=+s(t,e,i)}}function n(e){var t,n,r,i,a,o=0,s=0;if(e.length){for(r=i=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(o+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else for((t=e).x=t.data.x,t.y=t.data.y;o+=u[t.data.index],t=t.next;);e.value=o}function r(e,t,n,r){if(!e.value)return!0;var i=e.x-a.x,s=e.y-a.y,d=r-t,h=i*i+s*s;if(d*d/c<h)return h<l&&(0===i&&(h+=(i=Cc())*i),0===s&&(h+=(s=Cc())*s),h<f&&(h=Math.sqrt(f*h)),a.vx+=i*e.value*o/h,a.vy+=s*e.value*o/h),!0;if(!(e.length||l<=h))for((e.data!==a||e.next)&&(0===i&&(h+=(i=Cc())*i),0===s&&(h+=(s=Cc())*s),h<f&&(h=Math.sqrt(f*h)));e.data!==a&&(d=u[e.data.index]*o/h,a.vx+=i*d,a.vy+=s*d),e=e.next;);}var i,a,o,u,s=Ac(-30),f=1,l=1/0,c=.81;return e.initialize=function(e){i=e,t()},e.strength=function(n){return arguments.length?(s="function"==typeof n?n:Ac(+n),t(),e):s},e.distanceMin=function(t){return arguments.length?(f=t*t,e):Math.sqrt(f)},e.distanceMax=function(t){return arguments.length?(l=t*t,e):Math.sqrt(l)},e.theta=function(t){return arguments.length?(c=t*t,e):Math.sqrt(c)},e},link:function(e){function t(t){for(var n=0,r=e.length;n<h;++n)for(var i,u,s,l,c,d,p,g=0;g<r;++g)u=(i=e[g]).source,l=(s=i.target).x+s.vx-u.x-u.vx||Cc(),c=s.y+s.vy-u.y-u.vy||Cc(),l*=d=((d=Math.sqrt(l*l+c*c))-o[g])/d*t*a[g],c*=d,s.vx-=l*(p=f[g]),s.vy-=c*p,u.vx+=l*(p=1-p),u.vy+=c*p}function n(){if(u){var t,n,c=u.length,d=e.length,h=qo(u,l);for(t=0,s=new Array(c);t<d;++t)(n=e[t]).index=t,"object"!=typeof n.source&&(n.source=Fc(h,n.source)),"object"!=typeof n.target&&(n.target=Fc(h,n.target)),s[n.source.index]=(s[n.source.index]||0)+1,s[n.target.index]=(s[n.target.index]||0)+1;for(t=0,f=new Array(d);t<d;++t)n=e[t],f[t]=s[n.source.index]/(s[n.source.index]+s[n.target.index]);a=new Array(d),r(),o=new Array(d),i()}}function r(){if(u)for(var t=0,n=e.length;t<n;++t)a[t]=+c(e[t],t,e)}function i(){if(u)for(var t=0,n=e.length;t<n;++t)o[t]=+d(e[t],t,e)}var a,o,u,s,f,l=jc,c=function(e){return 1/Math.min(s[e.source.index],s[e.target.index])},d=Ac(30),h=1;return null==e&&(e=[]),t.initialize=function(e){u=e,n()},t.links=function(r){return arguments.length?(e=r,n(),t):e},t.id=function(e){return arguments.length?(l=e,t):l},t.iterations=function(e){return arguments.length?(h=+e,t):h},t.strength=function(e){return arguments.length?(c="function"==typeof e?e:Ac(+e),r(),t):c},t.distance=function(e){return arguments.length?(d="function"==typeof e?e:Ac(+e),i(),t):d},t},x:function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)(t=r[n]).vx+=(a[n]-t.x)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=Ac(.1);return"function"!=typeof e&&(e=Ac(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:Ac(+e),n(),t):o},t.x=function(r){return arguments.length?(e="function"==typeof r?r:Ac(+r),n(),t):e},t},y:function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)(t=r[n]).vy+=(a[n]-t.y)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=Ac(.1);return"function"!=typeof e&&(e=Ac(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:Ac(+e),n(),t):o},t.y=function(r){return arguments.length?(e="function"==typeof r?r:Ac(+r),n(),t):e},t}},AS="forces",CS=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],RS=["static","iterations"],TS=["x","y","vx","vy"];ed.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:TS}]};var zS=P(ed,sn);zS.transform=function(e,t){var n,r,i,a,o,u,s,f,l=this.value,c=t.changed(t.ADD_REM),d=e.modified(CS),h=e.iterations||300;if(l?(c&&(t.modifies("index"),l.nodes(t.source)),(d||t.changed(t.MOD))&&td(l,e,0,t)):(this.value=(i=t.source,a=e,o=function(e){function t(){n(),h.call("tick",a),o<u&&(d.stop(),h.call("end",a))}function n(){var t,n,r=e.length;for(o+=(f-o)*s,c.each(function(e){e(o)}),t=0;t<r;++t)null==(n=e[t]).fx?n.x+=n.vx*=l:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=l:(n.y=n.fy,n.vy=0)}function r(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,isNaN(t.x)||isNaN(t.y)){var i=ES*Math.sqrt(n),a=n*OS;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function i(t){return t.initialize&&t.initialize(e),t}var a,o=1,u=.001,s=1-Math.pow(u,1/300),f=0,l=.6,c=qo(),d=Gc(t),h=Uc("tick","end");return null==e&&(e=[]),r(),a={tick:n,restart:function(){return d.restart(t),a},stop:function(){return d.stop(),a},nodes:function(t){return arguments.length?(e=t,r(),c.each(i),a):e},alpha:function(e){return arguments.length?(o=+e,a):o},alphaMin:function(e){return arguments.length?(u=+e,a):u},alphaDecay:function(e){return arguments.length?(s=+e,a):+s},alphaTarget:function(e){return arguments.length?(f=+e,a):f},velocityDecay:function(e){return arguments.length?(l=1-e,a):1-l},force:function(e,t){return 1<arguments.length?(null==t?c.remove(e):c.set(e,i(t)),a):c.get(e)},find:function(t,n,r){var i,a,o,u,s,f=0,l=e.length;for(null==r?r=1/0:r*=r,f=0;f<l;++f)(o=(i=t-(u=e[f]).x)*i+(a=n-u.y)*a)<r&&(s=u,r=o);return s},on:function(e,t){return 1<arguments.length?(h.on(e,t),a):h.on(e)}}}(i),u=!1,s=o.stop,f=o.restart,o.stopped=function(){return u},o.restart=function(){return u=!1,f()},o.stop=function(){return u=!0,s()},l=td(o,a,!0).on("end",function(){u=!0})),l.on("tick",(n=t.dataflow,r=this,function(){n.touch(r).run()})),e.static||(c=!0,l.tick()),t.modifies("index")),d||c||e.modified(RS)||t.changed()&&e.restart)if(l.alpha(Math.max(l.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(l.alphaMin(),1/h)),e.static)for(l.stop();0<=--h;)l.tick();else if(l.stopped()&&l.restart(),!c)return t.StopPropagation;return this.finish(e,t)},zS.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===AS&&"link"===n.op._argval.force)for(var u,s=n.op._argops,f=0,l=s.length;f<l;++f)if("links"===s[f].name&&(u=s[f].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(TS)};var DS=Object.freeze({force:ed});pd.prototype=ld.prototype={constructor:pd,count:function(){return this.eachAfter(fd)},each:function(e){var t,n,r,i,a=this,o=[a];do for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);while(o.length);return this},eachAfter:function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;0<=n;--n)i.push(t[n]);return this},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;0<=--i;)n+=r[i].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return ld(this).eachBefore(dd)}};var NS=Array.prototype.slice,PS={depth:-1},$S={};Ud.prototype=Object.create(pd.prototype);var LS=(1+Math.sqrt(5))/2,qS=function e(t){function n(e,n,r,i,a){Bd(t,e,n,r,i,a)}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(LS),jS=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,f,l,c=-1,d=o.length,h=e.value;++c<d;){for(s=(u=o[c]).children,f=u.value=0,l=s.length;f<l;++f)u.value+=s[f].value;u.dice?Pd(u,n,r,i,r+=(a-r)*u.value/h):Id(u,n,r,n+=(i-n)*u.value/h,a),h-=u.value}else e._squarify=o=Bd(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(LS);Wd.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},P(Wd,sn).transform=function(e,t){t.source||o("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each(function(e){e.children&&Q(e.data)&&i.rem.push(e.data)}),this.value=a=ld({values:S(e.keys).reduce(function(e,t){return e.key(t),e},jo()).entries(i.source)},Vd),n&&a.each(function(e){e.children&&(e=te(e.data),i.add.push(e),i.source.push(e))}),ad(a,K,K)),i.source.root=a,i},P(Hd,sn).transform=function(e,t){t.source&&t.source.root||o(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),function(e,t,n){for(var r,i=0,a=t.length;i<a;++i)(r=t[i])in n&&e[r](n[r])}(n,this.params,e);try{this.value=n(i)}catch(e){o(e)}return i.each(function(e){!function(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,a)}),t.reflow(e.modified()).modifies(a).modifies("leaf")};var FS=["x","y","r","depth","children"];Yd.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:FS}]};var US=P(Yd,Hd);US.layout=function(){function e(e){return e.x=n/2,e.y=r/2,t?e.eachBefore(Td(t)).eachAfter(zd(i,.5)).eachBefore(Dd(1)):e.eachBefore(Td(Rd)).eachAfter(zd(Ad,1)).eachAfter(zd(i,e.r/Math.min(n,r))).eachBefore(Dd(Math.min(n,r)/(2*e.r))),e}var t=null,n=1,r=1,i=Ad;return e.radius=function(n){return arguments.length?(t=null==(r=n)?null:Sd(r),e):t;var r},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i="function"==typeof t?t:Cd(+t),e):i},e},US.params=["size","padding"],US.fields=FS;var IS=["x0","y0","x1","y1","depth","children"];Gd.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:IS}]};var BS=P(Gd,Hd);BS.layout=function(){function e(e){var a,o,u=e.height+1;return e.x0=e.y0=r,e.x1=t,e.y1=n/u,e.eachBefore((a=n,o=u,function(e){e.children&&Pd(e,e.x0,a*(e.depth+1)/o,e.x1,a*(e.depth+2)/o);var t=e.x0,n=e.y0,i=e.x1-r,u=e.y1-r;i<t&&(t=i=(t+i)/2),u<n&&(n=u=(n+u)/2),e.x0=t,e.y0=n,e.x1=i,e.y1=u})),i&&e.eachBefore(Nd),e}var t=1,n=1,r=0,i=!1;return e.round=function(t){return arguments.length?(i=!!t,e):i},e.size=function(r){return arguments.length?(t=+r[0],n=+r[1],e):[t,n]},e.padding=function(t){return arguments.length?(r=+t,e):r},e},BS.params=["size","round","padding"],BS.fields=IS,Xd.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},P(Xd,sn).transform=function(e,t){t.source||o("Stratify transform requires an upstream data source.");var n=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),i=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),i&&(this.value=ad(function(){function e(e){var r,i,a,o,u,s,f,l=e.length,c=new Array(l),d={};for(i=0;i<l;++i)r=e[i],u=c[i]=new pd(r),null!=(s=t(r,i,e))&&(s+="")&&(d[f="$"+(u.id=s)]=f in d?$S:u);for(i=0;i<l;++i)if(u=c[i],null!=(s=n(e[i],i,e))&&(s+="")){if(!(o=d["$"+s]))throw new Error("missing: "+s);if(o===$S)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error("multiple roots");a=u}if(!a)throw new Error("no root");if(a.parent=PS,a.eachBefore(function(e){e.depth=e.parent.depth+1,--l}).eachBefore(hd),a.parent=null,0<l)throw new Error("cycle");return a}var t=$d,n=Ld;return e.id=function(n){return arguments.length?(t=Sd(n),e):t},e.parentId=function(t){return arguments.length?(n=Sd(t),e):n},e}().id(e.key).parentId(e.parentKey)(r.source),e.key,Sv)),r.source.root=this.value,r};var WS={tidy:function(){function e(e){var s=function(e){for(var t,n,r,i,a,o=new Ud(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;0<=i;--i)u.push(n=t.children[i]=new Ud(r[i],i)),n.parent=t;return(o.parent=new Ud(null,0)).children=[o],o}(e);if(s.eachAfter(t),s.parent.m=-s.z,s.eachBefore(n),u)e.eachBefore(r);else{var f=e,l=e,c=e;e.eachBefore(function(e){e.x<f.x&&(f=e),e.x>l.x&&(l=e),e.depth>c.depth&&(c=e)});var d=f===l?1:i(f,l)/2,h=d-f.x,p=a/(l.x+d+h),g=o/(c.depth||1);e.eachBefore(function(e){e.x=(e.x+h)*p,e.y=e.depth*g})}return e}function t(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;0<=--a;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+i(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+i(e._,r._));e.parent.A=function(e,t,n){if(t){for(var r,a=e,o=e,u=t,s=a.parent.children[0],f=a.m,l=o.m,c=u.m,d=s.m;u=Fd(u),a=jd(a),u&&a;)s=jd(s),(o=Fd(o)).a=e,0<(r=u.z+c-a.z-f+i(u._,a._))&&(y=e,b=n,h=(v=u).a.parent===y.parent?v.a:b,m=(g=r)/((p=e).i-h.i),p.c-=m,p.s+=g,h.c+=m,p.z+=g,p.m+=g,f+=r,l+=r),c+=u.m,f+=a.m,d+=s.m,l+=o.m;u&&!Fd(o)&&(o.t=u,o.m+=c-l),a&&!jd(s)&&(s.t=a,s.m+=f-d,n=e)}var h,p,g,m,v,y,b;return n}(e,r,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e){e.x*=a,e.y=e.depth*o}var i=qd,a=1,o=1,u=null;return e.separation=function(t){return arguments.length?(i=t,e):i},e.size=function(t){return arguments.length?(u=!1,a=+t[0],o=+t[1],e):u?null:[a,o]},e.nodeSize=function(t){return arguments.length?(u=!0,a=+t[0],o=+t[1],e):u?[a,o]:null},e},cluster:function(){function e(e){var a,o=0;e.eachAfter(function(e){var n,r=e.children;r?(e.x=(n=r).reduce(ud,0)/n.length,e.y=1+r.reduce(sd,0)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)});var u=function(e){for(var t;t=e.children;)e=t[0];return e}(e),s=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(e),f=u.x-t(u,s)/2,l=s.x+t(s,u)/2;return e.eachAfter(i?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*r}:function(t){t.x=(t.x-f)/(l-f)*n,t.y=(1-(e.y?t.y/e.y:1))*r})}var t=od,n=1,r=1,i=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(i=!1,n=+t[0],r=+t[1],e):i?null:[n,r]},e.nodeSize=function(t){return arguments.length?(i=!0,n=+t[0],r=+t[1],e):i?[n,r]:null},e}},VS=["x","y","depth","children"];Zd.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:VS}]};var HS=P(Zd,Hd);HS.layout=function(e){var t=e||"tidy";return WS.hasOwnProperty(t)?WS[t]():void o("Unrecognized Tree layout method: "+t)},HS.params=["size","nodeSize","separation"],HS.fields=VS,Jd.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},P(Jd,sn).transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||o("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,function(e){a[K(e)]=1}),r.each(function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[K(t)]&&a[K(n)]&&i.add.push(te({source:n,target:t}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,function(e){a[K(e)]=1}),n.forEach(function(e){(a[K(e.source)]||a[K(e.target)])&&i.mod.push(e)})),i};var YS={binary:function(e,t,n,r,i){var a,o,u=e.children,s=u.length,f=new Array(s+1);for(f[0]=o=a=0;a<s;++a)f[a+1]=o+=u[a].value;!function e(t,n,r,i,a,o,s){if(n-1<=t){var l=u[t];return l.x0=i,l.y0=a,l.x1=o,void(l.y1=s)}for(var c=f[t],d=r/2+c,h=t+1,p=n-1;h<p;){var g=h+p>>>1;f[g]<d?h=g+1:p=g}d-f[h-1]<f[h]-d&&t+1<h&&--h;var m=f[h]-c,v=r-m;if(s-a<o-i){var y=(i*v+o*m)/r;e(t,h,m,i,a,y,s),e(h,n,v,y,a,o,s)}else{var b=(a*v+s*m)/r;e(t,h,m,i,a,o,b),e(h,n,v,i,b,o,s)}}(0,s,e.value,t,n,r,i)},dice:Pd,slice:Id,slicedice:function(e,t,n,r,i){(1&e.depth?Id:Pd)(e,t,n,r,i)},squarify:qS,resquarify:jS},GS=["x0","y0","x1","y1","depth","children"];Qd.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:GS}]};var XS=P(Qd,Hd);XS.layout=function(){var e=function(){function e(e){return e.x0=e.y0=0,e.x1=i,e.y1=a,e.eachBefore(t),o=[0],r&&e.eachBefore(Nd),e}function t(e){var t=o[e.depth],r=e.x0+t,i=e.y0+t,a=e.x1-t,d=e.y1-t;a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),e.x0=r,e.y0=i,e.x1=a,e.y1=d,e.children&&(t=o[e.depth+1]=u(e)/2,r+=c(e)-t,i+=s(e)-t,(a-=f(e)-t)<r&&(r=a=(r+a)/2),(d-=l(e)-t)<i&&(i=d=(i+d)/2),n(e,r,i,a,d))}var n=qS,r=!1,i=1,a=1,o=[0],u=Ad,s=Ad,f=Ad,l=Ad,c=Ad;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(i=+t[0],a=+t[1],e):[i,a]},e.tile=function(t){return arguments.length?(n=Sd(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(u="function"==typeof t?t:Cd(+t),e):u},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:Cd(+t),e):s},e.paddingRight=function(t){return arguments.length?(f="function"==typeof t?t:Cd(+t),e):f},e.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:Cd(+t),e):l},e.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Cd(+t),e):c},e}();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){YS.hasOwnProperty(t)?e.tile(YS[t]):o("Unrecognized Treemap layout method: "+t)},e},XS.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],XS.fields=GS;var ZS=Object.freeze({nest:Wd,pack:Yd,partition:Gd,stratify:Xd,tree:Zd,treelinks:Jd,treemap:Qd});nh.prototype={constructor:nh,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=oh(this._),t.P=null,(t.N=e).P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ih(this,n),n=(e=n).U),n.C=!1,r.C=!0,ah(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ah(this,n),n=(e=n).U),n.C=!1,r.C=!0,ih(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?oh(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,((n.L=a).U=n)!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,(n.R=o).U=n):(n.U=i,e=(i=n).R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,ih(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ah(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ih(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,ah(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ih(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ah(this,i),e=this._;break}t.C=!0,i=(e=i).U}while(!e.C);e&&(e.C=!1)}}};var JS,QS,KS,eA,tA,nA=[],rA=[],iA=1e-6,aA=1e-12;Mh.prototype={constructor:Mh,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return dh(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,u,s,f,l=n.site,c=-1,d=t[i[a-1]],h=d.left===l?d.right:d.left;++c<a;)o=h,h=(d=t[i[c]]).left===l?d.right:d.left,o&&h&&r<o.index&&r<h.index&&(s=o,f=h,((u=l)[0]-f[0])*(s[1]-u[1])-(u[0]-s[0])*(f[1]-u[1])<0)&&e.push([l.data,o.data,h.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,u=a.cells.length;!(i=a.cells[o]);)if(++o>=u)return null;for(var s=e-i.site[0],f=t-i.site[1],l=s*s+f*f;i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=e-u[0],f=t-u[1],c=s*s+f*f;c<l&&(l=c,o=u.index)}}),null!==o;);return a._found=r,null==n||l<=n*n?i.site:null}},Eh.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var oA=P(Eh,sn),uA=[[-1e5,-1e5],[1e5,1e5]];oA.transform=function(e,t){var n,r,i,a,o=e.as||"path",u=t.source;for(n=function(){function e(e){return new Mh(e.map(function(r,i){var a=[Math.round(t(r,i,e)/iA)*iA,Math.round(n(r,i,e)/iA)*iA];return a.index=i,a.data=r,a}),r)}var t=eh,n=th,r=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(n){return arguments.length?(t="function"==typeof n?n:Kd(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Kd(+t),e):n},e.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},e.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],e):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},e}().x(e.x).y(e.y),e.size?n.size(e.size):n.extent(e.extent||uA),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return t.reflow(e.modified()).modifies(o)};var sA=Object.freeze({voronoi:Eh}),fA=Math.PI/180,lA=64,cA=2048,dA={archimedean:Rh,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},hA=["x","y","font","fontSize","fontStyle","fontWeight","angle"],pA=["text","font","rotate","fontSize","fontStyle","fontWeight"];zh.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:hA}]},P(zh,sn).transform=function(e,n){var r=e.modified();if(r||n.changed(n.ADD_REM)||pA.some(function(t){var r=e[t];return A(r)&&n.modified(r.fields)})){var i,a=n.materialize(n.SOURCE).source,o=this.value,u=e.as||hA,s=e.fontSize||14;if(A(s)?i=e.fontSizeRange:s=R(s),i){var f=s,l=vs("sqrt")().domain(function(e,t){for(var n,r=1/0,i=-1/0,a=0,o=t.length;a<o;++a)(n=e(t[a]))<r&&(r=n),i<n&&(i=n);return[r,i]}(f,a)).range(i);s=function(e){return l(f(e))}}a.forEach(function(e){e[u[0]]=NaN,e[u[1]]=NaN,e[u[3]]=0});for(var c,d,h=o.words(a).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(t.random).layout(),p=o.size(),g=p[0]>>1,m=p[1]>>1,v=0,y=h.length;v<y;++v)(d=(c=h[v]).datum)[u[0]]=c.x+g,d[u[1]]=c.y+m,d[u[2]]=c.font,d[u[3]]=c.size,d[u[4]]=c.style,d[u[5]]=c.weight,d[u[6]]=c.rotate;return n.reflow(r).modifies(u)}};var gA=Object.freeze({wordcloud:zh});Lh.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var mA=P(Lh,sn);mA.transform=function(e,t){return this._dims?e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)})?this.reinit(e,t):this.eval(e,t):this.init(e,t)},mA.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},u=this._dims=[],s=a.length,f=0;f<s;++f)r=o[n=i[f].fname]||(o[n]=$h()),u.push(Ph(r,f,a[f]));return this.eval(e,t)},mA.reinit=function(e,t){var n,r,i,a,o,u,s,f,l,c=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,g=this._dims,m=this.value,v=m.curr(),y=m.prev(),b=m.all(),_=c.rem=c.add,x=c.mod,w=h.length,k={};if(y.set(v),t.rem.length&&(o=this.remove(e,t,c)),t.add.length&&m.add(t.add),t.mod.length)for(u={},s=0,f=(a=t.mod).length;s<f;++s)u[a[s]._index]=1;for(s=0;s<w;++s)l=d[s],(!g[s]||e.modified("fields",s)||t.modified(l.fields))&&((n=k[i=l.fname])||(p[i]=r=$h(),k[i]=n=r.insert(l,t.source,0)),g[s]=Ph(r,s,h[s]).onAdd(n,v));for(s=0,f=m.data().length;s<f;++s)o[s]||(y[s]!==v[s]?_.push(s):u[s]&&v[s]!==b&&x.push(s));return m.mask=(1<<w)-1,
c},mA.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},mA.insert=function(e,t,n){var r,i,a,o=t.add,u=this.value,s=this._dims,f=this._indices,l=e.fields,c={},d=n.add,h=u.size(),p=h+o.length,g=s.length;u.resize(p,g),u.add(o);var m=u.curr(),v=u.prev(),y=u.all();for(r=0;r<g;++r)a=c[i=l[r].fname]||(c[i]=f[i].insert(l[r],o,h)),s[r].onAdd(a,m);for(;h<p;++h)v[h]=y,m[h]!==y&&d.push(h)},mA.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,u=o.curr(),s=o.all(),f=e.mod;for(n=0,r=f.length;n<r;++n)u[i=f[n]._index]!==s&&a.push(i)},mA.remove=function(e,t,n){var r,i,a,o,u=this._indices,s=this.value,f=s.curr(),l=s.prev(),c=s.all(),d={},h=n.rem,p=t.rem;for(r=0,i=p.length;r<i;++r)d[a=p[r]._index]=1,l[a]=o=f[a],o!==(f[a]=c)&&h.push(a);for(a in u)u[a].remove(i,d);return this.reindex(t,i,d),d},mA.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)})},mA.update=function(e,t,n){var r,i,a=this._dims,o=e.query,u=t.stamp,s=a.length,f=0;for(i=n.filters=0;i<s;++i)e.modified("query",i)&&(r=i,++f);if(1===f)f=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(f=i=0;i<s;++i)e.modified("query",i)&&(f|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return f},mA.incrementAll=function(e,t,n,r){var i,a,o,u=this.value,s=u.seen(),f=u.curr(),l=u.prev(),c=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],g=h[1],m=d[0],v=d[1],y=e.one;if(p<m)for(i=p,a=Math.min(m,g);i<a;++i)s[o=c[i]]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(m<p)for(i=m,a=Math.min(p,v);i<a;++i)s[o=c[i]]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;if(v<g)for(i=Math.max(p,v),a=g;i<a;++i)s[o=c[i]]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(g<v)for(i=Math.max(m,g),a=v;i<a;++i)s[o=c[i]]!==n&&(l[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;e.range=t.slice()},mA.incrementOne=function(e,t,n,r){var i,a,o,u=this.value.curr(),s=e.index(),f=e.bisect(e.range),l=e.bisect(t),c=l[0],d=l[1],h=f[0],p=f[1],g=e.one;if(c<h)for(i=c,a=Math.min(h,d);i<a;++i)u[o=s[i]]^=g,n.push(o);else if(h<c)for(i=h,a=Math.min(c,p);i<a;++i)u[o=s[i]]^=g,r.push(o);if(p<d)for(i=Math.max(c,p),a=d;i<a;++i)u[o=s[i]]^=g,n.push(o);else if(d<p)for(i=Math.max(h,d),a=p;i<a;++i)u[o=s[i]]^=g,r.push(o);e.range=t.slice()},qh.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},P(qh,sn).transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),f=function(e){return u[e]&n?null:o[e]};return a.filter(a.MOD,f),i&i-1?(a.filter(a.ADD,function(e){var t=u[e]&n;return!t&&t^s[e]&n?o[e]:null}),a.filter(a.REM,function(e){var t=u[e]&n;return!t||t^t^s[e]&n?null:o[e]})):(a.filter(a.ADD,f),a.filter(a.REM,function(e){return(u[e]&n)===i?o[e]:null})),a.filter(a.SOURCE,function(e){return f(e._index)})};var vA,yA,bA,_A,xA,wA=Object.freeze({crossfilter:Lh,resolvefilter:qh}),kA="default",MA={trap:!1},EA="vega-bind",OA="vega-bind-name",SA="vega-bind-radio",AA="vega-option-",CA="outer",RA=["value","update","react","bind"];lp.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};var TA=1,zA=2,DA=3,NA=4,PA=5,$A=6,LA=7,qA=8;(vA={})[TA]="Boolean",vA[zA]="<end>",vA[DA]="Identifier",vA[NA]="Keyword",vA[PA]="Null",vA[$A]="Numeric",vA[LA]="Punctuator",vA[qA]="String",vA[9]="RegularExpression";var jA="ArrayExpression",FA="BinaryExpression",UA="CallExpression",IA="ConditionalExpression",BA="Identifier",WA="Literal",VA="LogicalExpression",HA="MemberExpression",YA="ObjectExpression",GA="Property",XA="UnaryExpression",ZA="Unexpected token %0",JA="Unexpected number",QA="Unexpected string",KA="Unexpected identifier",eC="Unexpected reserved word",tC="Unexpected end of input",nC="Invalid regular expression",rC="Invalid regular expression: missing /",iC="Octal literals are not allowed in strict mode.",aC="Duplicate data property in object literal not allowed in strict mode",oC="ILLEGAL",uC="Disabled.",sC=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),fC=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),lC={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},cC={if:1,this:1},dC={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},hC={},pC=new Date(2e3,0,1),gC="undefined"!=typeof window&&window||null,mC="Literal",vC="%",yC=":",bC=ig("area",function(e){return pO.reset(),Cf(e,gO),2*pO}),_C=ig("bounds",function(e){var t,n,r,i,a,o,u;if(wE=xE=-(bE=_E=1/0),SE=[],Cf(e,vO),n=SE.length){for(SE.sort(Xf),t=1,a=[r=SE[0]];t<n;++t)Zf(r,(i=SE[t])[0])||Zf(r,i[1])?(Gf(r[0],i[1])>Gf(r[0],r[1])&&(r[1]=i[1]),Gf(i[0],r[1])>Gf(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,t=0,r=a[n=a.length-1];t<=n;r=i,++t)i=a[t],(u=Gf(r[1],i[0]))>o&&(o=u,bE=i[0],xE=r[1])}return SE=AE=null,bE===1/0||_E===1/0?[[NaN,NaN],[NaN,NaN]]:[[bE,_E],[xE,wE]]}),xC=ig("centroid",function(e){CE=RE=TE=zE=DE=NE=PE=$E=LE=qE=jE=0,Cf(e,yO);var t=LE,n=qE,r=jE,i=t*t+n*n+r*r;return i<1e-12&&(t=NE,n=PE,r=$E,RE<HE&&(t=TE,n=zE,r=DE),(i=t*t+n*n+r*r)<1e-12)?[NaN,NaN]:[tO(n,t)*JE,Mf(r/fO(i))*JE]}),wC={},kC="bin_",MC="intersect",EC="union",OC="index:unit",SC={random:function(){return t.random()},isArray:xv,isBoolean:$,isDate:L,isNumber:q,isObject:s,isRegExp:j,isString:f,isTuple:Q,toBoolean:W,toDate:H,toNumber:g,toString:Y,pad:B,peek:p,truncate:X,rgb:Ko,lab:uu,hcl:hu,hsl:ru,sequence:Mn,format:function(e,t){return Jp("format",sk,t)(e)},utcFormat:function(e,t){return Jp("utcFormat",Ey,t)(e)},utcParse:function(e,t){return Jp("utcParse",Oy,t)(e)},timeFormat:Qp,timeParse:function(e,t){return Jp("timeParse",My,t)(e)},monthFormat:function(e){return Kp(e,1,"%B")},monthAbbrevFormat:function(e){return Kp(e,1,"%b")},dayFormat:function(e){return Kp(0,2+e,"%A")},dayAbbrevFormat:function(e){return Kp(0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},warn:function(){return eg(this.context.dataflow,"warn",arguments)},info:function(){return eg(this.context.dataflow,"info",arguments)},debug:function(){return eg(this.context.dataflow,"debug",arguments)},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},clampRange:function(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),n-t<=(r=a-i)?[t,n]:[Math.min(Math.max(i,t),n-r),Math.min(Math.max(a,r),n)]},pinchDistance:function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){return gC?gC.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){return gC?[gC.innerWidth,gC.innerHeight]:[void 0,void 0]},span:function(e){return e[e.length-1]-e[0]||0},merge:function(){var e=[].slice.call(arguments);return e.unshift({}),z.apply(null,e)},flush:function(e,t,n,r,i,a){var o,u,s=e[0],f=p(e);return f<s&&(o=s,s=f,f=o),(o=Math.abs(t-s))<(u=Math.abs(f-t))&&o<=n?r:u<=n?i:a},bandspace:function(e,t,n){return $o(e||0,t||0,n||0)},inrange:fg,setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(Sv).insert(t)),1},pathShape:function(e){var t=null;return function(n){return n?Ri(n,t=t||Si(e)):e}},panLinear:_,panLog:x,panPow:w,zoomLinear:M,zoomLog:E,zoomPow:O,encode:function(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,a){var o,u,s=this.context.dataflow,f=this.context.data[e],l=f.input,c=f.changes,d=s.stamp();if(!1===s._trigger||!(l.value.length||t||r))return 0;if((!c||c.stamp<d)&&(f.changes=c=s.changeset(),c.stamp=d,s.runAfter(function(){f.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(o=!0===n?Sv:xv(n)||Q(n)?n:cg(n),c.remove(o)),t&&c.insert(t),r&&(o=cg(r),l.value.some(o)?c.remove(o):c.insert(r)),i)for(u in a)c.modify(i,u,a[u]);return 1}},AC=["view","item","group","xy","x","y"],CC={};wg("bandwidth",function(e,t){var n=tg(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},rg),wg("copy",function(e,t){var n=tg(e,(t||this).context);return n?n.copy():void 0},rg),wg("domain",function(e,t){var n=tg(e,(t||this).context);return n?n.domain():[]},rg),wg("range",function(e,t){var n=tg(e,(t||this).context);return n&&n.range?n.range():[]},rg),wg("invert",function(e,t,n){var r=tg(e,(n||this).context);return r?xv(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0},rg),wg("scale",function(e,t,n){var r=tg(e,(n||this).context);return r?r(t):void 0},rg),wg("gradient",function(e,t,n,r,i){e=tg(e,(i||this).context);var a=Tr(t,n),o=e.domain(),u=o[0],s=o[o.length-1],f=Ss(e,u,s);e.ticks&&(u!==(o=e.ticks(+r||15))[0]&&o.unshift(u),s!==o[o.length-1]&&o.push(s));for(var l=0,c=o.length;l<c;++l)a.stop(f(o[l]),e(o[l]));return a},rg),wg("geoArea",bC,rg),wg("geoBounds",_C,rg),wg("geoCentroid",xC,rg),wg("geoShape",function(e,t,n){var r=tg(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}},rg),wg("indata",function(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i},function(e,t,n,r){t[0].type!==mC&&o("First argument to indata must be a string literal."),t[1].type!==mC&&o("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,u="@"+a;r.hasOwnProperty(u)||(r[u]=n.getData(i).indataRef(n,a))}),wg("data",ag,og),wg("vlSingle",gg,og),wg("vlSingleDomain",vg,og),wg("vlMulti",gg,mg),wg("vlMultiDomain",vg,mg),wg("vlInterval",function(e,t,n){return pg.call(this,e,t,n,hg)},og),wg("vlIntervalDomain",function(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],l=f?f.values.value:[],c=l[0],d=0;if(c){for(i=c.intervals.length;d<i;++d)if(a=c.intervals[d],t&&a.encoding===t||n&&a.field===n){if(!a.extent)return;o=d,s=2<a.extent.length;break}return u=l.reduce(function(e,t){var n=t.intervals[o].extent,r=s?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return s?e.push.apply(e,r):e.push(r),e},[]),s?yg(u,r):bg(u,r)}},og),wg("treePath",function(e,t,n){var r=sg(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(ug):void 0},og),wg("treeAncestors",function(e,t){var n=sg(e,this)[t];return n?n.ancestors().map(ug):void 0},og);var RC,TC,zC={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+l("$"+e)+"]"},functions:function(e){var t=Zp(e);for(var n in AC.forEach(function(e){t[e]="event.vega."+e}),SC)t[n]="this."+n;return t},constants:dC,visitors:CC},DC=function(e){function t(e){if(f(e))return e;var t=g[e.type];return null==t&&o("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(c),fields:Object.keys(d)};return c={},d={},n}var r=(e=e||{}).whitelist?G(e.whitelist):{},i=e.blacklist?G(e.blacklist):{},a=e.constants||dC,u=(e.functions||Zp)(t),s=e.globalvar,l=e.fieldvar,c={},d={},h=0,p=A(s)?s:function(e){return s+'["'+e+'"]'},g={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return 0<h?t:i.hasOwnProperty(t)?o("Illegal identifier: "+t):a.hasOwnProperty(t)?a[t]:r.hasOwnProperty(t)?t:(c[t]=1,p(t))},MemberExpression:function(e){var n=!e.computed,r=t(e.object);n&&(h+=1);var i=t(e.property);return r===l&&(d[i]=1),n&&(h-=1),r+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&o("Illegal callee type: "+e.callee.type);var n=e.callee.name,r=e.arguments,i=u.hasOwnProperty(n)&&u[n];return i||o("Unrecognized function: "+n),A(i)?i(r):i+"("+r.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){h+=1;var n=t(e.key);return h-=1,n+":"+t(e.value)}};return n.functions=u,n.constants=a,n}(zC),NC="$",PC={$tupleid:1,toString:function(){return":_tupleid_:"}},$C=Ag("key"),LC="descending",qC="scope",jC="view",FC="timer",UC="view",IC="[",BC="]",WC="{",VC="}",HC=":",YC=",",GC="@",XC=">",ZC=/[[\]{}]/,JC={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},QC="var datum=event.item&&event.item.datum;",KC=Bg("aggregate"),eR=Bg("axisticks"),tR=Bg("bound"),nR=Bg("collect"),rR=Bg("compare"),iR=Bg("datajoin"),aR=Bg("encode"),oR=Bg("facet"),uR=Bg("field"),sR=Bg("key"),fR=Bg("legendentries"),lR=Bg("mark"),cR=Bg("multiextent"),dR=Bg("multivalues"),hR=Bg("overlap"),pR=Bg("params"),gR=Bg("prefacet"),mR=Bg("projection"),vR=Bg("proxy"),yR=Bg("relay"),bR=Bg("render"),_R=Bg("scale"),xR=Bg("sieve"),wR=Bg("sortitems"),kR=Bg("viewlayout"),MR=Bg("values"),ER=0,OR=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],SR=G(OR),AR=G(OR.slice(4,9)),CR=G(OR.slice(9)),RR=G(OR.slice(1,6)),TR="top",zR="left",DR="right",NR="bottom",PR="vertical",$R="index",LR="label",qR="offset",jR="perc",FR="perc2",UR="size",IR="value",BR="guide-label",WR="guide-title",VR="group-title",HR="symbol",YR="gradient",GR="discrete",XR=["size","shape","fill","stroke","strokeDash","opacity"],ZR={name:1,interactive:1},JR=G(["rule"]),QR=G(["group","image","rect"]),KR="mark",eT="frame",tT="scope",nT="axis",rT="axis-domain",iT="axis-grid",aT="axis-label",oT="axis-tick",uT="axis-title",sT="legend",fT="legend-band",lT="legend-entry",cT="legend-gradient",dT="legend-label",hT="legend-symbol",pT="legend-title",gT="title",mT="group",vT="rect",yT="rule",bT="symbol",_T="text",xT="datum."+jR+'<=0?"left":datum.'+jR+'>=1?"right":"center"',wT="datum."+jR+'<=0?"bottom":datum.'+jR+'>=1?"top":"middle"',kT={value:0};Nm.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],u=null;for(e.add(t[0]);r<n;++r)t[r].params.pulse=Sg(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(u=t[r]);return new Nm(e,i,o,a,u)};var MT=Nm.prototype;MT.countsRef=function(e,t,n){var r,i,a,o=this.counts||(this.counts={}),u=Pm(t);return null!=u&&(e=this.scope,r=o[u]),r?n&&n.field&&$m(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:Sg(this.output)},n&&n.field&&$m(e,a,n),r={agg:i=e.add(KC(a)),ref:Sg(r=e.add(nR({pulse:Sg(i)})))},null!=u&&(o[u]=r)),r.ref},MT.tuplesRef=function(){return Sg(this.values)},MT.extentRef=function(e,t){return Lm(e,this,"extent","extent",t,!1)},MT.domainRef=function(e,t){return Lm(e,this,"domain","values",t,!1)},MT.valuesRef=function(e,t,n){return Lm(e,this,"vals","values",t,n||!0)},MT.lookupRef=function(e,t){return Lm(e,this,"lookup","tupleindex",t,!1)},MT.indataRef=function(e,t){return Lm(e,this,"indata","tupleindex",t,!0,!0)};var ET=Um(l(zR),l(DR),l("center")),OT=Um('+(item.orient==="'+DR+'")','+(item.orient!=="'+zR+'")',"0.5"),ST=G(["width","height","padding","autosize"]),AT=Zm.prototype=Jm.prototype;AT.fork=function(){return new Jm(this)},AT.isSubscope=function(){return 0<this._subid},AT.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},AT.id=function(){return(this._subid?this._subid+":":0)+this._id++},AT.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},AT.proxy=function(e){var t=e instanceof Mg?Sg(e):e;return this.add(vR({value:t}))},AT.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},AT.addUpdate=function(e){return this.updates.push(e),e},AT.finish=function(){function e(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}var t,n;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data)for(var r in e((n=this.data[t]).input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values"),n.index)e(n.index[r],t,"index:"+r);return this},AT.pushState=function(e,t,n){this._encode.push(Sg(this.add(xR({pulse:e})))),this._parent.push(t),this._lookup.push(n?Sg(this.proxy(n)):null),this._markpath.push(-1)},AT.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},AT.parent=function(){return p(this._parent)},AT.encode=function(){return p(this._encode)},AT.lookup=function(){return p(this._lookup)},AT.markpath=function(){var e=this._markpath;return++e[e.length-1]},AT.fieldRef=function(e,t){if(f(e))return Ag(e,t);e.signal||o("Unsupported field reference: "+l(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=Sg(this.add(uR(n)))),i},AT.compareRef=function(e,t){function n(e){return Tg(e)?(i=!0,Sg(r[e.signal])):e}var r=this.signals,i=!1,a=S(e.field).map(n),o=S(e.order).map(n);return t&&a.push(PC),i?Sg(this.add(rR({fields:a,orders:o}))):Cg(a,o)},AT.keyRef=function(e,t){var n,r=this.signals,i=!1;return e=S(e).map(function(e){return Tg(e)?(i=!0,Sg(r[e.signal])):e}),i?Sg(this.add(sR({fields:e,flat:t}))):(n={$key:e},t&&(n.$flat=!0),n)},AT.sortRef=function(e){if(!e)return e;var t=[Rg(e.op,e.field),PC],n=e.order||"ascending";return n.signal?Sg(this.add(rR({fields:t,orders:[n=this.signalRef(n.signal),n]}))):Cg(t,[n,n])},AT.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},AT.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&o("Duplicate signal name: "+l(e));var n=t instanceof Mg?t:this.add(Og(t));return this.signals[e]=n},AT.getSignal=function(e){return this.signals[e]||o("Unrecognized signal name: "+l(e)),this.signals[e]},AT.signalRef=function(e){return this.signals[e]?Sg(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(Og(null))),Sg(this.lambdas[e]))},AT.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=kg(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},AT.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},AT.objectProperty=function(e){return e&&s(e)?this.signalRef(e.signal||Qm(e)):e},AT.addBinding=function(e,t){this.bindings||o("Nested signals do not support binding: "+l(e)),this.bindings.push(z({signal:e},t))},AT.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&o("Duplicate scale or projection name: "+l(e)),this.scales[e]=this.add(t)},AT.addScale=function(e,t){this.addScaleProj(e,_R(t))},AT.addProjection=function(e,t){this.addScaleProj(e,mR(t))},AT.getScale=function(e){return this.scales[e]||o("Unrecognized scale name: "+l(e)),this.scales[e]},AT.projectionRef=AT.scaleRef=function(e){return Sg(this.getScale(e))},AT.projectionType=AT.scaleType=function(e){return this.getScale(e).params.type},AT.addData=function(e,t){return this.data.hasOwnProperty(e)&&o("Duplicate data set name: "+l(e)),this.data[e]=t},AT.getData=function(e){return this.data[e]||o("Undefined data set name: "+l(e)),this.data[e]},AT.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&o("Duplicate data set name: "+l(e)),this.addData(e,Nm.fromEntries(this,t))};var CT="sans-serif",RT=30,TT=2,zT="#4c78a8",DT="#000",NT="#888",PT="#ddd",$T=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||o("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=F(e.$key,e.$flat))}},{key:"$expr",parse:function(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=r((i=e.$expr,a=t,ev(["datum","_"],i,a)),e.$fields,e.$name));var i,a}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=c(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n,i,a=e.$encode,o={};for(n in a)i=a[n],o[n]=r(ev(["item","_"],i.$expr,t),i.$fields),o[n].output=i.$output;return o}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=S(e.$compare).map(function(e){return e&&e.$tupleid?K:e});return t.fn[n]||(t.fn[n]=C(r,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,i){var a=uv(n,t.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}},{key:"$tupleid",parse:function(){return K}}],LT={skip:!0};fv.prototype=lv.prototype={fork:function(){var e=new lv(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),"collect"===iv(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.request(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach(function(e){n[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[iv(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(function(e){n.update(t.signals[e],i[e],LT)}),Object.keys(r||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(Sv).insert(r[e]))}),(e.subcontext||[]).forEach(function(e,n){var r=t.subcontext[n];r&&r.setState(e)})}};var qT="width",jT="height",FT="padding",UT={skip:!0},IT=P(yv,on);IT.run=function(e){if(on.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(e){this.error(e)}return this},IT.render=function(){var e,t,n,r;return this._renderer&&(this._resize&&(this._resize=0,t=Wh(e=this),n=Ih(e),r=Bh(e),e._renderer.background(e._background),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(function(t){try{t(n,r)}catch(t){e.error(t)}})),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},IT.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},IT.container=function(){return this._el},IT.scenegraph=function(){return this._scenegraph},IT.origin=function(){return this._origin.slice()},IT.signal=function(e,t,n){var r=bv(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},IT.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},IT.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},IT.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},IT.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},IT.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},IT.renderer=function(e){return arguments.length?(uo(e)||o("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},IT.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},IT.loader=function(e){return arguments.length?(e!==this._loader&&(on.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},IT.resize=function(){return this._autosize=1,this},IT._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},IT._resizeView=function(e,t,n,r,i,a){this.runAfter(function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(qT,n,UT),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(jT,r,UT),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter(function(){o.resize()})},!1,1)},IT.addEventListener=function(e,t,n){var r=t;return n&&!1===n.trap||((r=ip(this,t)).raw=t),this._handler.on(e,r),this},IT.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;0<=--a;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},IT.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},IT.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return 0<=n&&t.splice(n,1),this},IT.addSignalListener=function(e,t){var n=bv(this,e),r=_v(n,t);return r||((r=ip(this,function(){t(e,n.value)})).handler=t,this.on(n,null,r)),this},IT.removeSignalListener=function(e,t){var n=bv(this,e),r=_v(n,t);return r&&n._targets.remove(r),this},IT.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},IT.timer=function(e,t){var n,r,i,a,o;this._timers.push((n=function(t){e({timestamp:Date.now(),elapsed:t})},r=t,a=new Yc,null==(o=r)?a.restart(n,r,i):(r=+r,i=null==i?Vc():+i,a.restart(function e(t){t+=o,a.restart(e,o+=r,i),n(t)},r,i)),a))},IT.events=function(e,t,n){var r,i=this,a=new le(n),o=function(n,r){var o,u,s,f,l;"view"!==e||(u=t,s=(o=i)._eventConfig.defaults,f=s&&s.prevent,l=s&&s.allow,!1===f||!0===l||!0!==f&&!1!==l&&(f?!f[u]:l?l[u]:!o.preventDefault()))||n.preventDefault();try{a.receive(Vh(i,n,r))}catch(n){i.error(n)}finally{i.run()}};if("timer"===e)i.timer(o,t);else if("view"===e)i.addEventListener(t,o,MA);else if("window"===e?"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a},IT.finalize=function(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;0<=--e;)i[e].stop();for(e=a.length;0<=--e;)for(t=(n=a[e]).sources.length;0<=--t;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},IT.hover=function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",Hh),Yh,Gh(e)),this.on(this.events("view","mouseout",Hh),Yh,Gh(t)),this},IT.data=function(e){return Fh(this,e).values.value},IT.change=Uh,IT.insert=function(e,t){return Uh.call(this,e,oe().insert(t))},IT.remove=function(e,t){return Uh.call(this,e,oe().remove(t))},IT.initialize=function(e,t){var n,r,i,a,o,u,s=this,f=s._renderType,l=uo(f);return e=s._el=e?ap(s,e):null,l||s.error("Unrecognized renderer type: "+f),n=l.handler||Wa,r=e?l.renderer:l.headless,s._renderer=r?rp(s,s._renderer,e,r):null,s._handler=(a=(i=s)._handler,o=e,u=new n(i.loader(),ip(i,i.tooltip())).scene(i.scenegraph().root).initialize(o,Wh(i),i),a&&a.handlers().forEach(function(e){u.on(e.type,e.handler)}),u),s._redraw=!0,e&&(t=t?ap(s,t):e.appendChild(Xh("div",{class:"vega-bindings"})),s._bind.forEach(function(e){e.param.element&&(e.element=ap(s,e.param.element))}),s._bind.forEach(function(e){Zh(s,e.element||t,e)})),s},IT.toImageURL=function(e,t){return e!==Nx.Canvas&&e!==Nx.SVG&&e!==Nx.PNG?Promise.reject("Unrecognized image type: "+e):op(this,e,t).then(function(t){return e===Nx.SVG?(n=t.svg(),r=new Blob([n],{type:"image/svg+xml"}),window.URL.createObjectURL(r)):t.canvas().toDataURL("image/png");var n,r})},IT.toCanvas=function(e){return op(this,Nx.Canvas,e).then(function(e){return e.canvas()})},IT.toSVG=function(e){return op(this,Nx.SVG,e).then(function(e){return e.svg()})},IT.getState=function(e){return this._runtime.getState(e||{data:hv,signals:pv,recurse:!0})},IT.setState=function(e){var t=this;return t.runAfter(function(){t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0})}),this},z(Fy,gb,Bx,sE,cS,DS,ZS,sA,gA,wA),t.version="4.0.0-rc.2",
t.Dataflow=on,t.EventStream=le,t.Parameters=ue,t.Pulse=Zt,t.MultiPulse=en,t.Operator=se,t.Transform=sn,t.changeset=oe,t.ingest=te,t.isTuple=Q,t.definition=fn,t.transform=ln,t.transforms=Fy,t.tupleid=K,t.scale=vs,t.scheme=Es,t.interpolate=Cs,t.interpolateRange=Os,t.timeInterval=Rs,t.utcInterval=Ts,t.projection=_c,t.View=yv,t.parse=function(e,t){return s(e)||o("Input Vega specification must be an object."),Xm(e,new Zm(Km([t,e.config]))).toRuntime()},t.expressionFunction=wg,t.formatLocale=Ku,t.timeFormatLocale=Ht,t.runtime=uv,t.runtimeContext=sv,t.bin=vn,t.bootstrapCI=zn,t.quartiles=Dn,t.setRandom=function(e){t.random=e},t.randomInteger=function(e,n){null==n&&(n=e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(a=i-(r=e||0),o):r},o.max=function(e){return arguments.length?(a=(i=e||0)-r,o):i},o.sample=function(){return r+Math.floor(a*t.random())},o.pdf=function(e){return e===Math.floor(e)&&r<=e&&e<i?1/a:0},o.cdf=function(e){var t=Math.floor(e);return t<r?0:i<=t?1:(t-r+1)/a},o.icdf=function(e){return 0<=e&&e<=1?r-1+Math.floor(e*a):NaN},o.min(e).max(n)},t.randomKDE=Pn,t.randomMixture=$n,t.randomNormal=Nn,t.randomUniform=Ln,t.accessor=r,t.accessorName=i,t.accessorFields=a,t.id=kv,t.identity=Mv,t.zero=Ev,t.one=Ov,t.truthy=Sv,t.falsy=Av,t.logger=h,t.None=Cv,t.Error=Rv,t.Warn=Tv,t.Info=zv,t.Debug=Dv,t.panLinear=_,t.panLog=x,t.panPow=w,t.zoomLinear=M,t.zoomLog=E,t.zoomPow=O,t.array=S,t.compare=C,t.constant=R,t.debounce=T,t.error=o,t.extend=z,t.extentIndex=D,t.fastmap=N,t.field=c,t.inherits=P,t.isArray=xv,t.isBoolean=$,t.isDate=L,t.isFunction=A,t.isNumber=q,t.isObject=s,t.isRegExp=j,t.isString=f,t.key=F,t.merge=U,t.pad=B,t.peek=p,t.repeat=I,t.splitAccessPath=u,t.stringValue=l,t.toBoolean=W,t.toDate=H,t.toNumber=g,t.toString=Y,t.toSet=G,t.truncate=X,t.visitArray=Z,t.loader=de,t.read=Yt,t.inferType=be,t.inferTypes=_e,t.typeParsers=Vv,t.formats=De,t.Bounds=Rr,t.Gradient=Tr,t.GroupItem=Dr,t.ResourceLoader=$r,t.Item=zr,t.Scenegraph=Da,t.Handler=Ua,t.Renderer=Ba,t.CanvasHandler=Wa,t.CanvasRenderer=Ya,t.SVGHandler=Ga,t.SVGRenderer=Qa,t.SVGStringRenderer=io,t.RenderType=Nx,t.renderModule=uo,t.Marks=ux,t.boundClip=so,t.boundContext=Hi,t.boundStroke=Vi,t.boundItem=Ca,t.boundMark=Ra,t.pathCurves=Oi,t.pathSymbols=zi,t.pathRectangle=qi,t.pathTrail=ji,t.pathParse=Si,t.pathRender=Ri,t.point=Fa,t.domCreate=Pa,t.domFind=$a,t.domChild=La,t.domClear=qa,t.openTag=Za,t.closeTag=Ja,t.font=Oa,t.textMetrics=ix,t.resetSVGClipId=function(){Y_=1},t.sceneEqual=fo,t.pathEqual=lo,t.sceneToJSON=Ta,t.sceneFromJSON=za,t.sceneZOrder=Ki,t.sceneVisit=ea,t.scenePickVisit=ta,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,n(1).Buffer)},function(e,t,n){!function(){function e(e){this.message=e}var n=t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",n.btoa||(n.btoa=function(t){for(var n,i,a=0,o=r,u="";t.charAt(0|a)||(o="=",a%1);u+=o.charAt(63&n>>8-a%1*8)){if(i=t.charCodeAt(a+=.75),i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|i}return u}),n.atob||(n.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,a=0,o=0,u="";i=t.charAt(o++);~i&&(n=a%4?64*n+i:i,a++%4)?u+=String.fromCharCode(255&n>>(-2*a&6)):0)i=r.indexOf(i);return u})}()},function(e,t){(function(t){"use strict";function n(e){u.length||(o(),s=!0),u[u.length]=e}function r(){for(;f<u.length;){var e=f;if(f+=1,u[e].call(),f>l){for(var t=0,n=u.length-f;t<n;t++)u[t]=u[t+f];u.length-=f,f=0}}u.length=0,f=0,s=!1}function i(e){var t=1,n=new d(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function a(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,u=[],s=!1,f=0,l=1024,c="undefined"!=typeof t?t:self,d=c.MutationObserver||c.WebKitMutationObserver;o="function"==typeof d?i(r):a(r),n.requestFlush=o,n.makeRequestCallFromTimer=a}).call(t,function(){return this}())},function(e,t,n){(function(t){"use strict";function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function a(e){return Object.prototype.toString.call(e)}function o(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function u(e){if(_.isFunction(e)){if(k)return e.name;var t=e.toString(),n=t.match(E);return n&&n[1]}}function s(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function f(e){if(k||!_.isFunction(e))return _.inspect(e);var t=u(e),n=t?": "+t:"";return"[Function"+n+"]"}function l(e){return s(f(e.actual),128)+" "+e.operator+" "+s(f(e.expected),128)}function c(e,t,n,r,i){throw new M.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function d(e,t){e||c(e,!0,t,"==",M.ok)}function h(e,t,n,u){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(_.isDate(e)&&_.isDate(t))return e.getTime()===t.getTime();if(_.isRegExp(e)&&_.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(o(e)&&o(t)&&a(e)===a(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;u=u||{actual:[],expected:[]};var s=u.actual.indexOf(e);return s!==-1&&s===u.expected.indexOf(t)||(u.actual.push(e),u.expected.push(t),g(e,t,n,u))}return n?e===t:e==t}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function g(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(_.isPrimitive(e)||_.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=p(e),a=p(t);if(i&&!a||!i&&a)return!1;if(i)return e=w.call(e),t=w.call(t),h(e,t,n);var o,u,s=O(e),f=O(t);if(s.length!==f.length)return!1;for(s.sort(),f.sort(),u=s.length-1;u>=0;u--)if(s[u]!==f[u])return!1;for(u=s.length-1;u>=0;u--)if(o=s[u],!h(e[o],t[o],n,r))return!1;return!0}function m(e,t,n){h(e,t,!0)&&c(e,t,n,"notDeepStrictEqual",m)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&t.call({},e)===!0}function y(e){var t;try{e()}catch(n){t=n}return t}function b(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=y(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&c(i,n,"Missing expected exception"+r);var a="string"==typeof r,o=!e&&_.isError(i),u=!e&&i&&!n;if((o&&a&&v(i,n)||u)&&c(i,n,"Got unwanted exception"+r),e&&i&&n&&!v(i,n)||!e&&i)throw i}var _=n(62),x=Object.prototype.hasOwnProperty,w=Array.prototype.slice,k=function(){return"foo"===function(){}.name}(),M=e.exports=d,E=/\s*function\s+([^\(\s]*)\s*/;M.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=e.stackStartFunction||c;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=u(t),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},_.inherits(M.AssertionError,Error),M.fail=c,M.ok=d,M.equal=function(e,t,n){e!=t&&c(e,t,n,"==",M.equal)},M.notEqual=function(e,t,n){e==t&&c(e,t,n,"!=",M.notEqual)},M.deepEqual=function(e,t,n){h(e,t,!1)||c(e,t,n,"deepEqual",M.deepEqual)},M.deepStrictEqual=function(e,t,n){h(e,t,!0)||c(e,t,n,"deepStrictEqual",M.deepStrictEqual)},M.notDeepEqual=function(e,t,n){h(e,t,!1)&&c(e,t,n,"notDeepEqual",M.notDeepEqual)},M.notDeepStrictEqual=m,M.strictEqual=function(e,t,n){e!==t&&c(e,t,n,"===",M.strictEqual)},M.notStrictEqual=function(e,t,n){e===t&&c(e,t,n,"!==",M.notStrictEqual)},M.throws=function(e,t,n){b(!0,e,t,n)},M.doesNotThrow=function(e,t,n){b(!1,e,t,n)},M.ifError=function(e){if(e)throw e};var O=Object.keys||function(e){var t=[];for(var n in e)x.call(e,n)&&t.push(n);return t}}).call(t,function(){return this}())},4,function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},[143,61,60],function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(68),s=r(u),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(29);n(75);var d=n(65),h=r(d),p=n(119),g=r(p),m=n(120),v=r(m),y=(0,c.h)("div",{className:"row"},(0,c.h)("div",{className:"col"},(0,c.h)("div",{className:"App-header"},(0,c.h)("h2",null,"Simple Crypto Charts")),(0,c.h)("p",null,"This is a snapshot of the last hour of 10 leading cryptocurrencies according to the"," ",(0,c.h)("a",{target:"_blank",href:"https://data.bloomberglp.com/professional/sites/10/BGCI-Factsheet-6-4-18-FINAL2.pdf"},"Bloomberg Galaxy Crypto Index (BGCI)"),"."),(0,c.h)("p",null,"This is a simple Preact app which uses the same API of React at a fraction of the size. It uses the CryptoCompare API and the chart itself is rendered through Vega, which is built by much of the same team behind D3.js."))),b=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.currencies=v.default,n.barchart=g.default,n.state={currencies:v.default,barchart:g.default},n}return o(t,e),l(t,[{key:"getCurrencies",value:function(){var e,t,n=this;return s.default.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.currencies.map(function(e){return n.getCurrency(e.symbol)}),r.next=3,s.default.awrap(Promise.all(e));case 3:return t=r.sent,r.abrupt("return",t.map(function(e,t){return e.map(function(e){return{price:e.open.toFixed(2),timestamp:1e3*e.time}})}));case 5:case"end":return r.stop()}},null,this)}},{key:"getCurrency",value:function(e){return fetch("https://min-api.cryptocompare.com/data/histominute?fsym="+e+"&tsym=USD&limit=60").then(function(e){return e.json()}).then(function(e){return e.Data})}},{key:"setCurrency",value:function(e){var t=this.currencies.findIndex(function(t){return t.name===e.name}),n=f({},this.state.barchart,{data:[f({},this.state.barchart.data[0],{values:this.chartData?this.chartData[t]:null})]});this.setState({barchart:n,currency:e})}},{key:"componentDidMount",value:function(){var e=this;this.getCurrencies().then(function(t){e.chartData=t,e.setCurrency(e.currencies[0])})}},{key:"render",value:function(){var e=this;return(0,c.h)("div",{className:"App container"},y,(0,c.h)("div",{className:"row"},(0,c.h)("div",{className:"col"},(0,c.h)(h.default,{vegaSpec:this.state.barchart,renderer:"svg"}))),(0,c.h)("div",{className:"row"},(0,c.h)("div",{className:"col"},(0,c.h)("div",{class:"btn-group",role:"group","aria-label":"Basic example"},this.state.currencies.map(function(t){return(0,c.h)("button",{type:"button",onClick:function(){return e.setCurrency(t)},className:"btn "+(e.state.currency===t?"btn-primary":"btn-secondary")},t.name)})))))}}]),t}(c.Component);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(29),a=n(63),o=r(a);n(76),(0,i.render)((0,i.h)(o.default,null),document.getElementById("root"))},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(29),l=n(124),c=i(l),d=n(33),h=r(d),p=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"renderVega",value:function(e){console.log("rendering vega");var t=void 0,n=void 0;try{t=h.parse(e.vegaSpec),n=new h.View(t).logLevel(h.Warn).initialize(this.chart).renderer(e.renderer),n.hover(),n.run()}catch(r){throw r}this.chart.style.width="100%"}},{key:"componentDidMount",value:function(){this.renderVega(this.props)}},{key:"componentDidUpdate",value:function(){console.log("UPDATE"),this.renderVega(this.props)}},{key:"renderChart",value:function(){var e=this;return(0,f.h)("div",{className:"chart-container"},(0,f.h)("div",{className:"chart"},(0,f.h)("div",{ref:function(t){e.chart=t}})))}},{key:"render",value:function(){return this.renderChart()}}]),t}(f.Component);p.propTypes={vegaSpec:c.default.object,renderer:c.default.string},t.default=p},function(e,t,n){(function(t){var r="object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this,i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(67),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(o){r.regeneratorRuntime=void 0}}).call(t,function(){return this}())},function(e,t,n){(function(t,n){!function(t){"use strict";function r(e,t,n,r){var i=t&&t.prototype instanceof a?t:a,o=Object.create(i.prototype),u=new p(r||[]);return o._invoke=c(e,n,u),o}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function a(){}function o(){}function u(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function f(e){this.arg=e}function l(e){function t(n,r,a,o){var u=i(e[n],e,r);if("throw"!==u.type){var s=u.arg,l=s.value;return l instanceof f?Promise.resolve(l.arg).then(function(e){t("next",e,a,o)},function(e){t("throw",e,a,o)}):Promise.resolve(l).then(function(e){s.value=e,a(s)},o)}o(u.arg)}function r(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return a=a?a.then(r,r):r()}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var a;this._invoke=r}function c(e,t,n){var r=M;return function(a,o){if(r===O)throw new Error("Generator is already running");if(r===S){if("throw"===a)throw o;return m()}for(;;){var u=n.delegate;if(u){if("return"===a||"throw"===a&&u.iterator[a]===v){n.delegate=null;var s=u.iterator.return;if(s){var f=i(s,u.iterator,o);if("throw"===f.type){a="throw",o=f.arg;continue}}if("return"===a)continue}var f=i(u.iterator[a],u.iterator,o);if("throw"===f.type){n.delegate=null,a="throw",o=f.arg;continue}a="next",o=v;var l=f.arg;if(!l.done)return r=E,l;n[u.resultName]=l.value,n.next=u.nextLoc,n.delegate=null}if("next"===a)n.sent=n._sent=o;else if("throw"===a){if(r===M)throw r=S,o;n.dispatchException(o)&&(a="next",o=v)}else"return"===a&&n.abrupt("return",o);r=O;var f=i(e,t,n);if("normal"===f.type){r=n.done?S:E;var l={value:f.arg,done:n.done};if(f.arg!==A)return l;n.delegate&&"next"===a&&(o=v)}else"throw"===f.type&&(r=S,a="throw",o=f.arg)}}}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function g(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:m}}function m(){return{value:v,done:!0}}var v,y=Object.prototype.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",x=b.toStringTag||"@@toStringTag",w="object"==typeof e,k=t.regeneratorRuntime;if(k)return void(w&&(e.exports=k));k=t.regeneratorRuntime=w?e.exports:{},k.wrap=r;var M="suspendedStart",E="suspendedYield",O="executing",S="completed",A={},C=u.prototype=a.prototype;o.prototype=C.constructor=u,u.constructor=o,u[x]=o.displayName="GeneratorFunction",k.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},k.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,x in e||(e[x]="GeneratorFunction")),e.prototype=Object.create(C),e},k.awrap=function(e){return new f(e)},s(l.prototype),k.async=function(e,t,n,i){var a=new l(r(e,t,n,i));return k.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},s(C),C[_]=function(){return this},C[x]="Generator",C.toString=function(){return"[object Generator]"},k.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},k.values=g,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return a.type="throw",a.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=y.call(i,"catchLoc"),u=y.call(i,"finallyLoc");if(o&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?this.next=i.finallyLoc:this.complete(a),A},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),h(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:g(e),resultName:t,nextLoc:n},A}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}(),n(2))},function(e,t,n){e.exports=n(66)},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function r(e){var t=n(e),r=t[0],i=t[1];return 3*(r+i)/4-i}function i(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t,r=n(e),a=r[0],o=r[1],u=new c(i(e,a,o)),s=0,f=o>0?a-4:a,d=0;d<f;d+=4)t=l[e.charCodeAt(d)]<<18|l[e.charCodeAt(d+1)]<<12|l[e.charCodeAt(d+2)]<<6|l[e.charCodeAt(d+3)],u[s++]=t>>16&255,u[s++]=t>>8&255,u[s++]=255&t;return 2===o&&(t=l[e.charCodeAt(d)]<<2|l[e.charCodeAt(d+1)]>>4,u[s++]=255&t),1===o&&(t=l[e.charCodeAt(d)]<<10|l[e.charCodeAt(d+1)]<<4|l[e.charCodeAt(d+2)]>>2,u[s++]=t>>8&255,u[s++]=255&t),u}function o(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function u(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(o(r));return i.join("")}function s(e){for(var t,n=e.length,r=n%3,i=[],a=16383,o=0,s=n-r;o<s;o+=a)i.push(u(e,o,o+a>s?s:o+a));return 1===r?(t=e[n-1],i.push(f[t>>2]+f[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")),i.join("")}t.byteLength=r,t.toByteArray=a,t.fromByteArray=s;for(var f=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=d.length;h<p;++h)f[h]=d[h],l[d.charCodeAt(h)]=h;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(e,t,n){(function(e,r){function i(e){if(e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function a(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}var o=n(46),u=n(112),s=n(107),f=n(109),l=n(106);for(var c in l)t[c]=l[c];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,i.prototype.init=function(e,n,r,i,a){switch(this.windowBits=e,this.level=n,this.memLevel=r,this.strategy=i,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new u,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var o=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:var o=f.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}return o!==t.Z_OK?void this._error(o):(this.write_in_progress=!1,void(this.init_done=!0))},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===t.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},i.prototype.write=function(t,n,r,i,a,o,u){this._writeCheck(),this.write_in_progress=!0;var s=this;return e.nextTick(function(){s.write_in_progress=!1;var e=s._write(t,n,r,i,a,o,u);s.callback(e[0],e[1]),s.pending_close&&s.close()}),this},i.prototype.writeSync=function(e,t,n,r,i,a,o){return this._writeCheck(),this._write(e,t,n,r,i,a,o)},i.prototype._write=function(e,n,i,o,u,l,c){if(this.write_in_progress=!0,e!==t.Z_NO_FLUSH&&e!==t.Z_PARTIAL_FLUSH&&e!==t.Z_SYNC_FLUSH&&e!==t.Z_FULL_FLUSH&&e!==t.Z_FINISH&&e!==t.Z_BLOCK)throw new Error("Invalid flush value");null==n&&(n=new r(0),o=0,i=0),u._set?u.set=u._set:u.set=a;var d=this.strm;switch(d.avail_in=o,d.input=n,d.next_in=i,d.avail_out=c,d.output=u,d.next_out=l,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var h=s.deflate(d,e);break;case t.UNZIP:case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:var h=f.inflate(d,e);break;default:throw new Error("Unknown mode "+this.mode)}return h!==t.Z_STREAM_END&&h!==t.Z_OK&&this._error(h),this.write_in_progress=!1,[d.avail_in,d.avail_out]},i.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):(this.pending_close=!1,this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):f.inflateEnd(this.strm),void(this.mode=t.NONE))},i.prototype.reset=function(){switch(this.mode){case t.DEFLATE:case t.DEFLATERAW:var e=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:var e=f.inflateReset(this.strm)}e!==t.Z_OK&&this._error(e)},i.prototype._error=function(e){this.onerror(o[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},t.Zlib=i}).call(t,n(2),n(1).Buffer)},function(e,t,n){(function(e,r){function i(t,n,r){function i(){for(var e;null!==(e=t.read());)u.push(e),s+=e.length;t.once("readable",i)}function a(e){t.removeListener("end",o),t.removeListener("readable",i),r(e)}function o(){var n=e.concat(u,s);u=[],r(null,n),t.close()}var u=[],s=0;t.on("error",a),t.on("end",o),t.end(n),i()}function a(t,n){if("string"==typeof n&&(n=new e(n)),!e.isBuffer(n))throw new TypeError("Not a string or buffer");var r=g.Z_FINISH;return t._processChunk(n,r)}function o(e){return this instanceof o?void h.call(this,e,g.DEFLATE):new o(e)}function u(e){return this instanceof u?void h.call(this,e,g.INFLATE):new u(e)}function s(e){return this instanceof s?void h.call(this,e,g.GZIP):new s(e)}function f(e){return this instanceof f?void h.call(this,e,g.GUNZIP):new f(e)}function l(e){return this instanceof l?void h.call(this,e,g.DEFLATERAW):new l(e)}function c(e){return this instanceof c?void h.call(this,e,g.INFLATERAW):new c(e)}function d(e){return this instanceof d?void h.call(this,e,g.UNZIP):new d(e)}function h(n,r){if(this._opts=n=n||{},this._chunkSize=n.chunkSize||t.Z_DEFAULT_CHUNK,p.call(this,n),n.flush&&n.flush!==g.Z_NO_FLUSH&&n.flush!==g.Z_PARTIAL_FLUSH&&n.flush!==g.Z_SYNC_FLUSH&&n.flush!==g.Z_FULL_FLUSH&&n.flush!==g.Z_FINISH&&n.flush!==g.Z_BLOCK)throw new Error("Invalid flush flag: "+n.flush);if(this._flushFlag=n.flush||g.Z_NO_FLUSH,n.chunkSize&&(n.chunkSize<t.Z_MIN_CHUNK||n.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+n.chunkSize);if(n.windowBits&&(n.windowBits<t.Z_MIN_WINDOWBITS||n.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+n.windowBits);if(n.level&&(n.level<t.Z_MIN_LEVEL||n.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+n.level);if(n.memLevel&&(n.memLevel<t.Z_MIN_MEMLEVEL||n.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+n.memLevel);if(n.strategy&&n.strategy!=t.Z_FILTERED&&n.strategy!=t.Z_HUFFMAN_ONLY&&n.strategy!=t.Z_RLE&&n.strategy!=t.Z_FIXED&&n.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+n.strategy);if(n.dictionary&&!e.isBuffer(n.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new g.Zlib(r);var i=this;this._hadError=!1,this._binding.onerror=function(e,n){i._binding=null,i._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],i.emit("error",r)};var a=t.Z_DEFAULT_COMPRESSION;"number"==typeof n.level&&(a=n.level);var o=t.Z_DEFAULT_STRATEGY;"number"==typeof n.strategy&&(o=n.strategy),this._binding.init(n.windowBits||t.Z_DEFAULT_WINDOWBITS,a,n.memLevel||t.Z_DEFAULT_MEMLEVEL,o,n.dictionary),this._buffer=new e(this._chunkSize),this._offset=0,this._closed=!1,this._level=a,this._strategy=o,this.once("end",this.close)}var p=n(104),g=n(70),m=n(32),v=n(59).ok;g.Z_MIN_WINDOWBITS=8,g.Z_MAX_WINDOWBITS=15,g.Z_DEFAULT_WINDOWBITS=15,g.Z_MIN_CHUNK=64,g.Z_MAX_CHUNK=1/0,g.Z_DEFAULT_CHUNK=16384,g.Z_MIN_MEMLEVEL=1,g.Z_MAX_MEMLEVEL=9,g.Z_DEFAULT_MEMLEVEL=8,g.Z_MIN_LEVEL=-1,g.Z_MAX_LEVEL=9,g.Z_DEFAULT_LEVEL=g.Z_DEFAULT_COMPRESSION,Object.keys(g).forEach(function(e){e.match(/^Z/)&&(t[e]=g[e])}),t.codes={Z_OK:g.Z_OK,Z_STREAM_END:g.Z_STREAM_END,Z_NEED_DICT:g.Z_NEED_DICT,Z_ERRNO:g.Z_ERRNO,Z_STREAM_ERROR:g.Z_STREAM_ERROR,Z_DATA_ERROR:g.Z_DATA_ERROR,Z_MEM_ERROR:g.Z_MEM_ERROR,Z_BUF_ERROR:g.Z_BUF_ERROR,Z_VERSION_ERROR:g.Z_VERSION_ERROR},Object.keys(t.codes).forEach(function(e){t.codes[t.codes[e]]=e}),t.Deflate=o,t.Inflate=u,t.Gzip=s,t.Gunzip=f,t.DeflateRaw=l,t.InflateRaw=c,t.Unzip=d,t.createDeflate=function(e){return new o(e)},t.createInflate=function(e){return new u(e)},t.createDeflateRaw=function(e){return new l(e)},t.createInflateRaw=function(e){return new c(e)},t.createGzip=function(e){return new s(e)},t.createGunzip=function(e){return new f(e)},t.createUnzip=function(e){return new d(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new o(t),e,n)},t.deflateSync=function(e,t){return a(new o(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new s(t),e,n)},t.gzipSync=function(e,t){return a(new s(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new l(t),e,n)},t.deflateRawSync=function(e,t){return a(new l(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new d(t),e,n)},t.unzipSync=function(e,t){return a(new d(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new u(t),e,n)},t.inflateSync=function(e,t){return a(new u(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new f(t),e,n)},t.gunzipSync=function(e,t){return a(new f(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new c(t),e,n)},t.inflateRawSync=function(e,t){return a(new c(t),e)},m.inherits(h,p),h.prototype.params=function(e,n,i){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=t.Z_FILTERED&&n!=t.Z_HUFFMAN_ONLY&&n!=t.Z_RLE&&n!=t.Z_FIXED&&n!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var a=this;this.flush(g.Z_SYNC_FLUSH,function(){a._binding.params(e,n),a._hadError||(a._level=e,a._strategy=n,i&&i())})}else r.nextTick(i)},h.prototype.reset=function(){return this._binding.reset()},h.prototype._flush=function(t){this._transform(new e(0),"",t)},h.prototype.flush=function(t,n){var i=this._writableState;if(("function"==typeof t||void 0===t&&!n)&&(n=t,t=g.Z_FULL_FLUSH),i.ended)n&&r.nextTick(n);else if(i.ending)n&&this.once("end",n);else if(i.needDrain){var a=this;this.once("drain",function(){a.flush(n)})}else this._flushFlag=t,this.write(new e(0),"",n)},h.prototype.close=function(e){if(e&&r.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;r.nextTick(function(){t.emit("close")})}},h.prototype._transform=function(t,n,r){var i,a=this._writableState,o=a.ending||a.ended,u=o&&(!t||a.length===t.length);if(null===!t&&!e.isBuffer(t))return r(new Error("invalid input"));u?i=g.Z_FINISH:(i=this._flushFlag,t.length>=a.length&&(this._flushFlag=this._opts.flush||g.Z_NO_FLUSH));this._processChunk(t,i,r)},h.prototype._processChunk=function(t,n,r){function i(l,h){if(!s._hadError){var p=o-h;if(v(p>=0,"have should not go down"),p>0){var g=s._buffer.slice(s._offset,s._offset+p);s._offset+=p,f?s.push(g):(c.push(g),d+=g.length)}if((0===h||s._offset>=s._chunkSize)&&(o=s._chunkSize,s._offset=0,s._buffer=new e(s._chunkSize)),
0===h){if(u+=a-l,a=l,!f)return!0;var m=s._binding.write(n,t,u,a,s._buffer,s._offset,s._chunkSize);return m.callback=i,void(m.buffer=t)}return!!f&&void r()}}var a=t&&t.length,o=this._chunkSize-this._offset,u=0,s=this,f="function"==typeof r;if(!f){var l,c=[],d=0;this.on("error",function(e){l=e});do var h=this._binding.writeSync(n,t,u,a,this._buffer,this._offset,o);while(!this._hadError&&i(h[0],h[1]));if(this._hadError)throw l;var p=e.concat(c,d);return this.close(),p}var g=this._binding.write(n,t,u,a,this._buffer,this._offset,o);g.buffer=t,g.callback=i},m.inherits(o,h),m.inherits(u,h),m.inherits(s,h),m.inherits(f,h),m.inherits(l,h),m.inherits(c,h),m.inherits(d,h)}).call(t,n(1).Buffer,n(2))},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){for(var e,t=0,r=arguments.length,i={};t<r;++t){if(!(e=arguments[t]+"")||e in i)throw new Error("illegal type: "+e);i[e]=[]}return new n(i)}function n(e){this._=e}function r(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function i(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function a(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=o,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}var o={value:function(){}};n.prototype=t.prototype={constructor:n,on:function(e,t){var n,o=this._,u=r(e+"",o),s=-1,f=u.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<f;)if(n=(e=u[s]).type)o[n]=a(o[n],e.name,t);else if(null==t)for(n in o)o[n]=a(o[n],e.name,null);return this}for(;++s<f;)if((n=(e=u[s]).type)&&(n=i(o[n],e.name)))return n}},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new n(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],a=0,n=r.length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}},e.dispatch=t,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,u,s,f,l,c,d,h=e._root,p={data:r},g=e._x0,m=e._y0,v=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((f=t>=(a=(g+v)/2))?g=a:v=a,(l=n>=(o=(m+y)/2))?m=o:y=o,i=h,!(h=h[c=l<<1|f]))return i[c]=p,e;if(u=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===u&&n===s)return p.next=h,i?i[c]=p:e._root=p,e;do i=i?i[c]=new Array(4):e._root=new Array(4),(f=t>=(a=(g+v)/2))?g=a:v=a,(l=n>=(o=(m+y)/2))?m=o:y=o;while((c=l<<1|f)===(d=(s>=o)<<1|u>=a));return i[d]=h,i[c]=p,e}function n(e){var n,r,i,a,o=e.length,u=new Array(o),s=new Array(o),f=1/0,l=1/0,c=-(1/0),d=-(1/0);for(r=0;r<o;++r)isNaN(i=+this._x.call(null,n=e[r]))||isNaN(a=+this._y.call(null,n))||(u[r]=i,s[r]=a,i<f&&(f=i),i>c&&(c=i),a<l&&(l=a),a>d&&(d=a));for(c<f&&(f=this._x0,c=this._x1),d<l&&(l=this._y0,d=this._y1),this.cover(f,l).cover(c,d),r=0;r<o;++r)t(this,u[r],s[r],e[r]);return this}function r(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function i(e){return e[0]}function a(e){return e[1]}function o(e,t,n){var r=new u(null==t?i:t,null==n?a:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function u(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function s(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var f=function(e){var n=+this._x.call(null,e),r=+this._y.call(null,e);return t(this.cover(n,r),n,r,e)},l=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{if(!(n>e||e>i||r>t||t>a))return this;var o,u,s=i-n,f=this._root;switch(u=(t<(r+a)/2)<<1|e<(n+i)/2){case 0:do o=new Array(4),o[u]=f,f=o;while(s*=2,i=n+s,a=r+s,e>i||t>a);break;case 1:do o=new Array(4),o[u]=f,f=o;while(s*=2,n=i-s,a=r+s,n>e||t>a);break;case 2:do o=new Array(4),o[u]=f,f=o;while(s*=2,i=n+s,r=a-s,e>i||r>t);break;case 3:do o=new Array(4),o[u]=f,f=o;while(s*=2,n=i-s,r=a-s,n>e||r>t)}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},c=function(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e},d=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},h=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i},p=function(e,t,n){var r,i,a,o,u,s,f,l=this._x0,c=this._y0,d=this._x1,p=this._y1,g=[],m=this._root;for(m&&g.push(new h(m,l,c,d,p)),null==n?n=1/0:(l=e-n,c=t-n,d=e+n,p=t+n,n*=n);s=g.pop();)if(!(!(m=s.node)||(i=s.x0)>d||(a=s.y0)>p||(o=s.x1)<l||(u=s.y1)<c))if(m.length){var v=(i+o)/2,y=(a+u)/2;g.push(new h(m[3],v,y,o,u),new h(m[2],i,y,v,u),new h(m[1],v,a,o,y),new h(m[0],i,a,v,y)),(f=(t>=y)<<1|e>=v)&&(s=g[g.length-1],g[g.length-1]=g[g.length-1-f],g[g.length-1-f]=s)}else{var b=e-+this._x.call(null,m.data),_=t-+this._y.call(null,m.data),x=b*b+_*_;if(x<n){var w=Math.sqrt(n=x);l=e-w,c=t-w,d=e+w,p=t+w,r=m.data}}return r},g=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,u,s,f,l,c,d,h=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((f=a>=(u=(p+m)/2))?p=u:m=u,(l=o>=(s=(g+v)/2))?g=s:v=s,t=h,!(h=h[c=l<<1|f]))return this;if(!h.length)break;(t[c+1&3]||t[c+2&3]||t[c+3&3])&&(n=t,d=c)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[c]=i:delete t[c],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},m=function(){return this._root},v=function(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e},y=function(e){var t,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new h(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&s.length){var f=(r+a)/2,l=(i+o)/2;(n=s[3])&&u.push(new h(n,f,l,a,o)),(n=s[2])&&u.push(new h(n,r,l,f,o)),(n=s[1])&&u.push(new h(n,f,i,a,l)),(n=s[0])&&u.push(new h(n,r,i,f,l))}return this},b=function(e){var t,n=[],r=[];for(this._root&&n.push(new h(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,u=t.y0,s=t.x1,f=t.y1,l=(o+s)/2,c=(u+f)/2;(a=i[0])&&n.push(new h(a,o,u,l,c)),(a=i[1])&&n.push(new h(a,l,u,s,c)),(a=i[2])&&n.push(new h(a,o,c,l,f)),(a=i[3])&&n.push(new h(a,l,c,s,f))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},_=function(e){return arguments.length?(this._x=e,this):this._x},x=function(e){return arguments.length?(this._y=e,this):this._y},w=o.prototype=u.prototype;w.copy=function(){var e,t,n=new u(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=s(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=s(t));return n},w.add=f,w.addAll=n,w.cover=l,w.data=c,w.extent=d,w.find=p,w.remove=g,w.removeAll=r,w.root=m,w.size=v,w.visit=y,w.visitAfter=b,w.x=_,w.y=x,e.quadtree=o,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){function r(e){return n(i(e))}function i(e){return a[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var a={"./encoding":23,"./encoding.js":23,"./iconv-loader":24,"./iconv-loader.js":24};r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=74},function(e,t){},75,function(e,t){"use strict";function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,a,o,u,s){if(i(t),!e){var f;if(void 0===t)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,o,u,s],c=0;f=new Error(t.replace(/%s/g,function(){return l[c++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}}var i=function(e){};e.exports=r},function(e,t,n){var r=n(3),i=n(80),a=n(57),o=n(4),u=e.exports=function(e,t){var n=this;n.writable=!0,n.xhr=e,n.body=[],n.uri=(t.protocol||"http:")+"//"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),"undefined"==typeof t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials}catch(r){}if(t.responseType)try{e.responseType=t.responseType}catch(r){}if(e.open(t.method||"GET",n.uri,!0),e.onerror=function(e){n.emit("error",new Error("Network error"))},n._headers={},t.headers)for(var o=s(t.headers),u=0;u<o.length;u++){var f=o[u];if(n.isSafeRequestHeader(f)){var l=t.headers[f];n.setHeader(f,l)}}t.auth&&this.setHeader("Authorization","Basic "+a.btoa(t.auth));var c=new i;c.on("close",function(){n.emit("close")}),c.on("ready",function(){n.emit("response",c)}),c.on("error",function(e){n.emit("error",e)}),e.onreadystatechange=function(){e.__aborted||c.handle(e)}};o(u,r),u.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},u.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},u.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},u.prototype.write=function(e){this.body.push(e)},u.prototype.destroy=function(e){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},u.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=s(this._headers),n=0;n<t.length;n++){var r=t[n],i=this._headers[r];if(f(i))for(var a=0;a<i.length;a++)this.xhr.setRequestHeader(r,i[a]);else this.xhr.setRequestHeader(r,i)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(f(this.body[0])){for(var o=[],n=0;n<this.body.length;n++)o.push.apply(o,this.body[n]);this.xhr.send(o)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var u=0,n=0;n<this.body.length;n++)u+=this.body[n].length;for(var o=new this.body[0].constructor(u),l=0,n=0;n<this.body.length;n++)for(var d=this.body[n],a=0;a<d.length;a++)o[l++]=d[a];this.xhr.send(o)}else if(c(this.body[0]))this.xhr.send(this.body[0]);else{for(var o="",n=0;n<this.body.length;n++)o+=this.body[n].toString();this.xhr.send(o)}},u.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],u.prototype.isSafeRequestHeader=function(e){return!!e&&l(u.unsafeHeaders,e.toLowerCase())===-1};var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},c=function(e){return"undefined"!=typeof Blob&&e instanceof Blob||("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||("undefined"!=typeof FormData&&e instanceof FormData||void 0))}},function(e,t,n){function r(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),n={},r=0;r<t.length;r++){var i=t[r];if(""!==i){var a=i.match(/^([^:]+):\s*(.*)/);if(a){var o=a[1].toLowerCase(),u=a[2];void 0!==n[o]?s(n[o])?n[o].push(u):n[o]=[n[o],u]:n[o]=u}else n[i]=!0}}return n}var i=n(3),a=n(32),o=e.exports=function(e){this.offset=0,this.readable=!0};a.inherits(o,i);var u={streaming:!0,status2:!0};o.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText},o.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},o.prototype.handle=function(e){if(2===e.readyState&&u.status2){try{this.statusCode=e.status,this.headers=r(e)}catch(t){u.status2=!1}u.status2&&this.emit("ready")}else if(u.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=r(e),this.emit("ready"))}catch(t){}try{this._emitData(e)}catch(t){u.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},o.prototype._emitData=function(e){var t=this.getResponse(e);return t.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength)):void(t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length))};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=n(25),i=e.exports;for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);i.request=function(e,t){return e||(e={}),e.scheme="https",r.request.call(this,e,t)}},function(e,t,n){"use strict";function r(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=e.table();this.decodeTables=[],this.decodeTables[0]=d.slice(0),this.decodeTableSeq=[];for(var r=0;r<n.length;r++)this._addDecodeChunk(n[r]);this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var i={};if(e.encodeSkipVals)for(var r=0;r<e.encodeSkipVals.length;r++){var a=e.encodeSkipVals[r];if("number"==typeof a)i[a]=!0;else for(var o=a.from;o<=a.to;o++)i[o]=!0}if(this._fillEncodeTable(0,0,i),e.encodeAdd)for(var u in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,u)&&this._setEncodeChar(u.charCodeAt(0),e.encodeAdd[u]);if(this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===s&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===s&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof e.gb18030){this.gb18030=e.gb18030();for(var l=this.decodeTables.length,h=this.decodeTables[l]=d.slice(0),p=this.decodeTables.length,g=this.decodeTables[p]=d.slice(0),r=129;r<=254;r++)for(var m=c-this.decodeTables[0][r],v=this.decodeTables[m],o=48;o<=57;o++)v[o]=c-l;for(var r=129;r<=254;r++)h[r]=c-p;for(var r=48;r<=57;r++)g[r]=f}}function i(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function a(e,t){this.nodeIdx=0,this.prevBuf=new u(0),this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function o(e,t){if(e[0]>t)return-1;for(var n=0,r=e.length;n<r-1;){var i=n+Math.floor((r-n+1)/2);e[i]<=t?n=i:r=i}return n}var u=n(1).Buffer;t._dbcs=r;for(var s=-1,f=-2,l=-10,c=-1e3,d=new Array(256),h=-1,p=0;p<256;p++)d[p]=s;r.prototype.encoder=i,r.prototype.decoder=a,r.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>=8)t.push(255&e);0==t.length&&t.push(0);for(var n=this.decodeTables[0],r=t.length-1;r>0;r--){var i=n[t[r]];if(i==s)n[t[r]]=c-this.decodeTables.length,this.decodeTables.push(n=d.slice(0));else{if(!(i<=c))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));n=this.decodeTables[c-i]}}return n},r.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),n=this._getDecodeTrieNode(t);t=255&t;for(var r=1;r<e.length;r++){var i=e[r];if("string"==typeof i)for(var a=0;a<i.length;){var o=i.charCodeAt(a++);if(55296<=o&&o<56320){var u=i.charCodeAt(a++);if(!(56320<=u&&u<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);n[t++]=65536+1024*(o-55296)+(u-56320)}else if(4080<o&&o<=4095){for(var s=4095-o+2,f=[],c=0;c<s;c++)f.push(i.charCodeAt(a++));n[t++]=l-this.decodeTableSeq.length,this.decodeTableSeq.push(f)}else n[t++]=o}else{if("number"!=typeof i)throw new Error("Incorrect type '"+typeof i+"' given in "+this.encodingName+" at chunk "+e[0]);for(var d=n[t-1]+1,a=0;a<i;a++)n[t++]=d++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},r.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=d.slice(0)),this.encodeTable[t]},r.prototype._setEncodeChar=function(e,t){var n=this._getEncodeBucket(e),r=255&e;n[r]<=l?this.encodeTableSeq[l-n[r]][h]=t:n[r]==s&&(n[r]=t)},r.prototype._setEncodeSequence=function(e,t){var n,r=e[0],i=this._getEncodeBucket(r),a=255&r;i[a]<=l?n=this.encodeTableSeq[l-i[a]]:(n={},i[a]!==s&&(n[h]=i[a]),i[a]=l-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var o=1;o<e.length-1;o++){var u=n[r];"object"==typeof u?n=u:(n=n[r]={},void 0!==u&&(n[h]=u))}r=e[e.length-1],n[r]=t},r.prototype._fillEncodeTable=function(e,t,n){for(var r=this.decodeTables[e],i=0;i<256;i++){var a=r[i],o=t+i;n[o]||(a>=0?this._setEncodeChar(a,o):a<=c?this._fillEncodeTable(c-a,o<<8,n):a<=l&&this._setEncodeSequence(this.decodeTableSeq[l-a],o))}},i.prototype.write=function(e){for(var t=new u(e.length*(this.gb18030?4:3)),n=this.leadSurrogate,r=this.seqObj,i=-1,a=0,f=0;;){if(i===-1){if(a==e.length)break;var c=e.charCodeAt(a++)}else{var c=i;i=-1}if(55296<=c&&c<57344)if(c<56320){if(n===-1){n=c;continue}n=c,c=s}else n!==-1?(c=65536+1024*(n-55296)+(c-56320),n=-1):c=s;else n!==-1&&(i=c,c=s,n=-1);var d=s;if(void 0!==r&&c!=s){var p=r[c];if("object"==typeof p){r=p;continue}"number"==typeof p?d=p:void 0==p&&(p=r[h],void 0!==p&&(d=p,i=c)),r=void 0}else if(c>=0){var g=this.encodeTable[c>>8];if(void 0!==g&&(d=g[255&c]),d<=l){r=this.encodeTableSeq[l-d];continue}if(d==s&&this.gb18030){var m=o(this.gb18030.uChars,c);if(m!=-1){var d=this.gb18030.gbChars[m]+(c-this.gb18030.uChars[m]);t[f++]=129+Math.floor(d/12600),d%=12600,t[f++]=48+Math.floor(d/1260),d%=1260,t[f++]=129+Math.floor(d/10),d%=10,t[f++]=48+d;continue}}}d===s&&(d=this.defaultCharSingleByte),d<256?t[f++]=d:d<65536?(t[f++]=d>>8,t[f++]=255&d):(t[f++]=d>>16,t[f++]=d>>8&255,t[f++]=255&d)}return this.seqObj=r,this.leadSurrogate=n,t.slice(0,f)},i.prototype.end=function(){if(this.leadSurrogate!==-1||void 0!==this.seqObj){var e=new u(10),t=0;if(this.seqObj){var n=this.seqObj[h];void 0!==n&&(n<256?e[t++]=n:(e[t++]=n>>8,e[t++]=255&n)),this.seqObj=void 0}return this.leadSurrogate!==-1&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},i.prototype.findIdx=o,a.prototype.write=function(e){var t,n=new u(2*e.length),r=this.nodeIdx,i=this.prevBuf,a=this.prevBuf.length,d=-this.prevBuf.length;a>0&&(i=u.concat([i,e.slice(0,10)]));for(var h=0,p=0;h<e.length;h++){var g=h>=0?e[h]:i[h+a],t=this.decodeTables[r][g];if(t>=0);else if(t===s)h=d,t=this.defaultCharUnicode.charCodeAt(0);else if(t===f){var m=d>=0?e.slice(d,h+1):i.slice(d+a,h+1+a),v=12600*(m[0]-129)+1260*(m[1]-48)+10*(m[2]-129)+(m[3]-48),y=o(this.gb18030.gbChars,v);t=this.gb18030.uChars[y]+v-this.gb18030.gbChars[y]}else{if(t<=c){r=c-t;continue}if(!(t<=l))throw new Error("iconv-lite internal error: invalid decoding table value "+t+" at "+r+"/"+g);for(var b=this.decodeTableSeq[l-t],_=0;_<b.length-1;_++)t=b[_],n[p++]=255&t,n[p++]=t>>8;t=b[b.length-1]}if(t>65535){t-=65536;var x=55296+Math.floor(t/1024);n[p++]=255&x,n[p++]=x>>8,t=56320+t%1024}n[p++]=255&t,n[p++]=t>>8,r=0,d=h+1}return this.nodeIdx=r,this.prevBuf=d>=0?e.slice(d):i.slice(d+a),n.slice(0,p).toString("ucs2")},a.prototype.end=function(){for(var e="";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var t=this.prevBuf.slice(1);this.prevBuf=new u(0),this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.nodeIdx=0,e}},function(e,t,n){"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return n(118)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(116)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(28)}},gbk:{type:"_dbcs",table:function(){return n(28).concat(n(48))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(28).concat(n(48))},gb18030:function(){return n(117)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(115)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(47)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(47).concat(n(114))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(e,t,n){"use strict";for(var r=[n(85),n(89),n(90),n(86),n(88),n(87),n(82),n(83)],i=0;i<r.length;i++){var e=r[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}},function(e,t,n){"use strict";function r(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=o:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=u,""!==new f("eda0bdedb2a9","hex").toString()&&(this.decoder=s,this.defaultCharUnicode=t.defaultCharUnicode))}function i(e,t){l.call(this,t.enc)}function a(e,t){this.enc=t.enc}function o(e,t){this.prevStr=""}function u(e,t){}function s(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}var f=n(1).Buffer;e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:r},r.prototype.encoder=a,r.prototype.decoder=i;var l=n(136).StringDecoder;l.prototype.end||(l.prototype.end=function(){}),i.prototype=l.prototype,a.prototype.write=function(e){return new f(e,this.enc)},a.prototype.end=function(){},o.prototype.write=function(e){e=this.prevStr+e;var t=e.length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),new f(e,"base64")},o.prototype.end=function(){return new f(this.prevStr,"base64")},u.prototype.write=function(e){for(var t=new f(3*e.length),n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=192+(i>>>6),t[n++]=128+(63&i)):(t[n++]=224+(i>>>12),t[n++]=128+(i>>>6&63),t[n++]=128+(63&i))}return t.slice(0,n)},u.prototype.end=function(){},s.prototype.write=function(e){for(var t=this.acc,n=this.contBytes,r=this.accBytes,i="",a=0;a<e.length;a++){var o=e[a];128!==(192&o)?(n>0&&(i+=this.defaultCharUnicode,n=0),o<128?i+=String.fromCharCode(o):o<224?(t=31&o,n=1,r=1):o<240?(t=15&o,n=2,r=1):i+=this.defaultCharUnicode):n>0?(t=t<<6|63&o,n--,r++,0===n&&(i+=2===r&&t<128&&t>0?this.defaultCharUnicode:3===r&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):i+=this.defaultCharUnicode}return this.acc=t,this.contBytes=n,this.accBytes=r,i},s.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var n="",r=0;r<128;r++)n+=String.fromCharCode(r);e.chars=n+e.chars}this.decodeBuf=new o(e.chars,"ucs2");var i=new o(65536);i.fill(t.defaultCharSingleByte.charCodeAt(0));for(var r=0;r<e.chars.length;r++)i[e.chars.charCodeAt(r)]=r;this.encodeBuf=i}function i(e,t){this.encodeBuf=t.encodeBuf}function a(e,t){this.decodeBuf=t.decodeBuf}var o=n(1).Buffer;t._sbcs=r,r.prototype.encoder=i,r.prototype.decoder=a,i.prototype.write=function(e){for(var t=new o(e.length),n=0;n<e.length;n++)t[n]=this.encodeBuf[e.charCodeAt(n)];return t},i.prototype.end=function(){},a.prototype.write=function(e){for(var t=this.decodeBuf,n=new o(2*e.length),r=0,i=0,a=0;a<e.length;a++)r=2*e[a],i=2*a,n[i]=t[r],n[i+1]=t[r+1];return n.toString("ucs2")},a.prototype.end=function(){}},function(e,t){"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{
type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(e,t){"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",10000:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(e,t,n){"use strict";function r(){}function i(){}function a(){this.overflowByte=-1}function o(e,t){this.iconv=t}function u(e,t){e=e||{},void 0===e.addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function s(e,t){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=e||{},this.iconv=t.iconv}function f(e,t){var n=t||"utf-16le";if(e.length>=2)if(254==e[0]&&255==e[1])n="utf-16be";else if(255==e[0]&&254==e[1])n="utf-16le";else{for(var r=0,i=0,a=Math.min(e.length-e.length%2,64),o=0;o<a;o+=2)0===e[o]&&0!==e[o+1]&&i++,0!==e[o]&&0===e[o+1]&&r++;i>r?n="utf-16be":i<r&&(n="utf-16le")}return n}var l=n(1).Buffer;t.utf16be=r,r.prototype.encoder=i,r.prototype.decoder=a,r.prototype.bomAware=!0,i.prototype.write=function(e){for(var t=new l(e,"ucs2"),n=0;n<t.length;n+=2){var r=t[n];t[n]=t[n+1],t[n+1]=r}return t},i.prototype.end=function(){},a.prototype.write=function(e){if(0==e.length)return"";var t=new l(e.length+1),n=0,r=0;for(this.overflowByte!==-1&&(t[0]=e[0],t[1]=this.overflowByte,n=1,r=2);n<e.length-1;n+=2,r+=2)t[r]=e[n+1],t[r+1]=e[n];return this.overflowByte=n==e.length-1?e[e.length-1]:-1,t.slice(0,r).toString("ucs2")},a.prototype.end=function(){},t.utf16=o,o.prototype.encoder=u,o.prototype.decoder=s,u.prototype.write=function(e){return this.encoder.write(e)},u.prototype.end=function(){return this.encoder.end()},s.prototype.write=function(e){if(!this.decoder){if(this.initialBytes.push(e),this.initialBytesLen+=e.length,this.initialBytesLen<16)return"";var e=l.concat(this.initialBytes),t=f(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(e)},s.prototype.end=function(){if(!this.decoder){var e=l.concat(this.initialBytes),t=f(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var n=this.decoder.write(e),r=this.decoder.end();return r?n+r:n}return this.decoder.end()}},function(e,t,n){"use strict";function r(e,t){this.iconv=t}function i(e,t){this.iconv=t.iconv}function a(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}function o(e,t){this.iconv=t}function u(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=new f(6),this.base64AccumIdx=0}function s(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}var f=n(1).Buffer;t.utf7=r,t.unicode11utf7="utf7",r.prototype.encoder=i,r.prototype.decoder=a,r.prototype.bomAware=!0;var l=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;i.prototype.write=function(e){return new f(e.replace(l,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},i.prototype.end=function(){};for(var c=/[A-Za-z0-9\/+]/,d=[],h=0;h<256;h++)d[h]=c.test(String.fromCharCode(h));var p="+".charCodeAt(0),g="-".charCodeAt(0),m="&".charCodeAt(0);a.prototype.write=function(e){for(var t="",n=0,r=this.inBase64,i=this.base64Accum,a=0;a<e.length;a++)if(r){if(!d[e[a]]){if(a==n&&e[a]==g)t+="+";else{var o=i+e.slice(n,a).toString();t+=this.iconv.decode(new f(o,"base64"),"utf16-be")}e[a]!=g&&a--,n=a+1,r=!1,i=""}}else e[a]==p&&(t+=this.iconv.decode(e.slice(n,a),"ascii"),n=a+1,r=!0);if(r){var o=i+e.slice(n).toString(),u=o.length-o.length%8;i=o.slice(u),o=o.slice(0,u),t+=this.iconv.decode(new f(o,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=r,this.base64Accum=i,t},a.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(new f(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},t.utf7imap=o,o.prototype.encoder=u,o.prototype.decoder=s,o.prototype.bomAware=!0,u.prototype.write=function(e){for(var t=this.inBase64,n=this.base64Accum,r=this.base64AccumIdx,i=new f(5*e.length+10),a=0,o=0;o<e.length;o++){var u=e.charCodeAt(o);32<=u&&u<=126?(t&&(r>0&&(a+=i.write(n.slice(0,r).toString("base64").replace(/\//g,",").replace(/=+$/,""),a),r=0),i[a++]=g,t=!1),t||(i[a++]=u,u===m&&(i[a++]=g))):(t||(i[a++]=m,t=!0),t&&(n[r++]=u>>8,n[r++]=255&u,r==n.length&&(a+=i.write(n.toString("base64").replace(/\//g,","),a),r=0)))}return this.inBase64=t,this.base64AccumIdx=r,i.slice(0,a)},u.prototype.end=function(){var e=new f(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=g,this.inBase64=!1),e.slice(0,t)};var v=d.slice();v[",".charCodeAt(0)]=!0,s.prototype.write=function(e){for(var t="",n=0,r=this.inBase64,i=this.base64Accum,a=0;a<e.length;a++)if(r){if(!v[e[a]]){if(a==n&&e[a]==g)t+="&";else{var o=i+e.slice(n,a).toString().replace(/,/g,"/");t+=this.iconv.decode(new f(o,"base64"),"utf16-be")}e[a]!=g&&a--,n=a+1,r=!1,i=""}}else e[a]==m&&(t+=this.iconv.decode(e.slice(n,a),"ascii"),n=a+1,r=!0);if(r){var o=i+e.slice(n).toString().replace(/,/g,"/"),u=o.length-o.length%8;i=o.slice(u),o=o.slice(0,u),t+=this.iconv.decode(new f(o,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=r,this.base64Accum=i,t},s.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(new f(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},function(e,t){"use strict";function n(e,t){this.encoder=e,this.addBOM=!0}function r(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}var i="\ufeff";t.PrependBOM=n,n.prototype.write=function(e){return this.addBOM&&(e=i+e,this.addBOM=!1),this.encoder.write(e)},n.prototype.end=function(){return this.encoder.end()},t.StripBOM=r,r.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t?t:(t[0]===i&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0,t)},r.prototype.end=function(){return this.decoder.end()}},function(e,t,n){"use strict";var r=n(1).Buffer;e.exports=function(e){var t=void 0;e.supportsNodeEncodingsExtension=!(new r(0)instanceof Uint8Array),e.extendNodeEncodings=function(){if(!t){if(t={},!e.supportsNodeEncodingsExtension)return console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node"),void console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");var i={hex:!0,utf8:!0,"utf-8":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,"ucs-2":!0,utf16le:!0,"utf-16le":!0};r.isNativeEncoding=function(e){return e&&i[e.toLowerCase()]};var a=n(1).SlowBuffer;if(t.SlowBufferToString=a.prototype.toString,a.prototype.toString=function(n,i,a){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.SlowBufferToString.call(this,n,i,a):("undefined"==typeof i&&(i=0),"undefined"==typeof a&&(a=this.length),e.decode(this.slice(i,a),n))},t.SlowBufferWrite=a.prototype.write,a.prototype.write=function(n,i,a,o){if(isFinite(i))isFinite(a)||(o=a,a=void 0);else{var u=o;o=i,i=a,a=u}i=+i||0;var s=this.length-i;if(a?(a=+a,a>s&&(a=s)):a=s,o=String(o||"utf8").toLowerCase(),r.isNativeEncoding(o))return t.SlowBufferWrite.call(this,n,i,a,o);if(n.length>0&&(a<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var f=e.encode(n,o);return f.length<a&&(a=f.length),f.copy(this,i,0,a),a},t.BufferIsEncoding=r.isEncoding,r.isEncoding=function(t){return r.isNativeEncoding(t)||e.encodingExists(t)},t.BufferByteLength=r.byteLength,r.byteLength=a.byteLength=function(n,i){return i=String(i||"utf8").toLowerCase(),r.isNativeEncoding(i)?t.BufferByteLength.call(this,n,i):e.encode(n,i).length},t.BufferToString=r.prototype.toString,r.prototype.toString=function(n,i,a){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.BufferToString.call(this,n,i,a):("undefined"==typeof i&&(i=0),"undefined"==typeof a&&(a=this.length),e.decode(this.slice(i,a),n))},t.BufferWrite=r.prototype.write,r.prototype.write=function(n,i,a,o){var u=i,s=a,f=o;if(isFinite(i))isFinite(a)||(o=a,a=void 0);else{var l=o;o=i,i=a,a=l}if(o=String(o||"utf8").toLowerCase(),r.isNativeEncoding(o))return t.BufferWrite.call(this,n,u,s,f);i=+i||0;var c=this.length-i;if(a?(a=+a,a>c&&(a=c)):a=c,n.length>0&&(a<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var d=e.encode(n,o);return d.length<a&&(a=d.length),d.copy(this,i,0,a),a},e.supportsStreams){var o=n(3).Readable;t.ReadableSetEncoding=o.prototype.setEncoding,o.prototype.setEncoding=function(t,n){this._readableState.decoder=e.getDecoder(t,n),this._readableState.encoding=t},o.prototype.collect=e._collect}}},e.undoExtendNodeEncodings=function(){if(e.supportsNodeEncodingsExtension){if(!t)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete r.isNativeEncoding;var i=n(1).SlowBuffer;if(i.prototype.toString=t.SlowBufferToString,i.prototype.write=t.SlowBufferWrite,r.isEncoding=t.BufferIsEncoding,r.byteLength=t.BufferByteLength,r.prototype.toString=t.BufferToString,r.prototype.write=t.BufferWrite,e.supportsStreams){var a=n(3).Readable;a.prototype.setEncoding=t.ReadableSetEncoding,delete a.prototype.collect}t=void 0}}}},function(e,t,n){(function(t){"use strict";var r=n(1).Buffer,i=n(91),a=e.exports;a.encodings=null,a.defaultCharUnicode="",a.defaultCharSingleByte="?",a.encode=function(e,t,n){e=""+(e||"");var i=a.getEncoder(t,n),o=i.write(e),u=i.end();return u&&u.length>0?r.concat([o,u]):o},a.decode=function(e,t,n){"string"==typeof e&&(a.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),a.skipDecodeWarning=!0),e=new r(""+(e||""),"binary"));var i=a.getDecoder(t,n),o=i.write(e),u=i.end();return u?o+u:o},a.encodingExists=function(e){try{return a.getCodec(e),!0}catch(t){return!1}},a.toEncoding=a.encode,a.fromEncoding=a.decode,a._codecDataCache={},a.getCodec=function(e){a.encodings||(a.encodings=n(84));for(var t=(""+e).toLowerCase().replace(/[^0-9a-z]|:\d{4}$/g,""),r={};;){var i=a._codecDataCache[t];if(i)return i;var o=a.encodings[t];switch(typeof o){case"string":t=o;break;case"object":for(var u in o)r[u]=o[u];r.encodingName||(r.encodingName=t),t=o.type;break;case"function":return r.encodingName||(r.encodingName=t),i=new o(r,a),a._codecDataCache[r.encodingName]=i,i;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},a.getEncoder=function(e,t){var n=a.getCodec(e),r=new n.encoder(t,n);return n.bomAware&&t&&t.addBOM&&(r=new i.PrependBOM(r,t)),r},a.getDecoder=function(e,t){var n=a.getCodec(e),r=new n.decoder(t,n);return!n.bomAware||t&&t.stripBOM===!1||(r=new i.StripBOM(r,t)),r};var o="undefined"!=typeof t&&t.versions&&t.versions.node;if(o){var u=o.split(".").map(Number);(u[0]>0||u[1]>=10)&&n(94)(a),n(92)(a)}}).call(t,n(2))},function(e,t,n){"use strict";function r(e,t){this.conv=e,t=t||{},t.decodeStrings=!1,o.call(this,t)}function i(e,t){this.conv=e,t=t||{},t.encoding=this.encoding="utf8",o.call(this,t)}var a=n(1).Buffer,o=n(3).Transform;e.exports=function(e){e.encodeStream=function(t,n){return new r(e.getEncoder(t,n),n)},e.decodeStream=function(t,n){return new i(e.getDecoder(t,n),n)},e.supportsStreams=!0,e.IconvLiteEncoderStream=r,e.IconvLiteDecoderStream=i,e._collect=i.prototype.collect},r.prototype=Object.create(o.prototype,{constructor:{value:r}}),r.prototype._transform=function(e,t,n){if("string"!=typeof e)return n(new Error("Iconv encoding stream needs strings as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r),n()}catch(i){n(i)}},r.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(n){e(n)}},r.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",function(e){t.push(e)}),this.on("end",function(){e(null,a.concat(t))}),this},i.prototype=Object.create(o.prototype,{constructor:{value:i}}),i.prototype._transform=function(e,t,n){if(!a.isBuffer(e))return n(new Error("Iconv decoding stream needs buffers as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r,this.encoding),n()}catch(i){n(i)}},i.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(n){e(n)}},i.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",function(e){t+=e}),this.on("end",function(){e(null,t)}),this}},function(e,t){t.read=function(e,t,n,r,i){var a,o,u=8*i-r-1,s=(1<<u)-1,f=s>>1,l=-7,c=n?i-1:0,d=n?-1:1,h=e[t+c];for(c+=d,a=h&(1<<-l)-1,h>>=-l,l+=u;l>0;a=256*a+e[t+c],c+=d,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+c],c+=d,l-=8);if(0===a)a=1-f;else{if(a===s)return o?NaN:(h?-1:1)*(1/0);o+=Math.pow(2,r),a-=f}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,u,s,f=8*a-i-1,l=(1<<f)-1,c=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),t+=o+c>=1?d/s:d*Math.pow(2,1-c),t*s>=2&&(o++,s/=2),o+c>=l?(u=0,o=l):o+c>=1?(u=(t*s-1)*Math.pow(2,i),o+=c):(u=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&u,h+=p,u/=256,i-=8);for(o=o<<i|u,f+=i;f>0;e[n+h]=255&o,h+=p,o/=256,f-=8);e[n+h-p]|=128*g}},function(e,t){"use strict";var n=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};n.writable=function(e){return n(e)&&e.writable!==!1&&"function"==typeof e._write&&"object"==typeof e._writableState},n.readable=function(e){return n(e)&&e.readable!==!1&&"function"==typeof e._read&&"object"==typeof e._readableState},n.duplex=function(e){return n.writable(e)&&n.readable(e)},n.transform=function(e){return n.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){function r(e,t){var n,u;e instanceof r?(n=e.url,u=i(n)):(n=e,u=i(n),e={}),t=t||{},this.method=t.method||e.method||"GET",this.redirect=t.redirect||e.redirect||"follow",this.headers=new a(t.headers||e.headers||{}),this.url=n,this.follow=void 0!==t.follow?t.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==t.compress?t.compress:void 0===e.compress||e.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,o.call(this,t.body||this._clone(e),{timeout:t.timeout||e.timeout||0,size:t.size||e.size||0}),this.protocol=u.protocol,this.hostname=u.hostname,this.port=u.port,this.path=u.path,this.auth=u.auth}var i=n(16).parse,a=n(27),o=n(26);e.exports=r,r.prototype=Object.create(o.prototype),r.prototype.clone=function(){return new r(this)}},function(e,t,n){function r(e,t){t=t||{},this.url=t.url,this.status=t.status||200,this.statusText=t.statusText||i.STATUS_CODES[this.status],this.headers=new a(t.headers),this.ok=this.status>=200&&this.status<300,o.call(this,e,t)}var i=n(25),a=n(27),o=n(26);e.exports=r,r.prototype=Object.create(o.prototype),r.prototype.clone=function(){return new r(this._clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},[145,100,141,7,43,7,43],[146,7],[147,7,7],[148,102],function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(a){return!1}}var i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,o,u=n(e),s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var f in r)i.call(r,f)&&(u[f]=r[f]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(r);for(var l=0;l<o.length;l++)a.call(r,o[l])&&(u[o[l]]=r[o[l]])}}return u}},function(e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";function r(e,t){return e.msg=N[t],t}function i(e){return(e<<1)-(e>4?9:0)}function a(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(R.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function u(e,t){T._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function s(e,t){e.pending_buf[e.pending++]=t}function f(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function l(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,R.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=z(e.adler,t,i,n):2===e.state.wrap&&(e.adler=D(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function c(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,u=e.nice_match,s=e.strstart>e.w_size-ce?e.strstart-(e.w_size-ce):0,f=e.window,l=e.w_mask,c=e.prev,d=e.strstart+le,h=f[a+o-1],p=f[a+o];e.prev_length>=e.good_match&&(i>>=2),u>e.lookahead&&(u=e.lookahead);do if(n=t,f[n+o]===p&&f[n+o-1]===h&&f[n]===f[a]&&f[++n]===f[a+1]){a+=2,n++;do;while(f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&a<d);if(r=le-(d-a),a=d-le,r>o){if(e.match_start=t,o=r,r>=u)break;h=f[a+o-1],p=f[a+o]}}while((t=c[t&l])>s&&0!==--i);return o<=e.lookahead?o:e.lookahead}function d(e){var t,n,r,i,a,o=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-ce)){R.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=o?r-o:0;while(--n);n=o,t=n;do r=e.prev[--t],e.prev[t]=r>=o?r-o:0;while(--n);i+=o}if(0===e.strm.avail_in)break;if(n=l(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=fe)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+fe-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<fe)););}while(e.lookahead<ce&&0!==e.strm.avail_in)}function h(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===P)return _e;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,u(e,!1),0===e.strm.avail_out))return _e;if(e.strstart-e.block_start>=e.w_size-ce&&(u(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===q?(u(e,!0),0===e.strm.avail_out?we:ke):e.strstart>e.block_start&&(u(e,!1),0===e.strm.avail_out)?_e:_e}function p(e,t){for(var n,r;;){if(e.lookahead<ce){if(d(e),e.lookahead<ce&&t===P)return _e;if(0===e.lookahead)break}if(n=0,e.lookahead>=fe&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+fe-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ce&&(e.match_length=c(e,n)),e.match_length>=fe)if(r=T._tr_tally(e,e.strstart-e.match_start,e.match_length-fe),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=fe){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+fe-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=T._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(u(e,!1),0===e.strm.avail_out))return _e}return e.insert=e.strstart<fe-1?e.strstart:fe-1,t===q?(u(e,!0),0===e.strm.avail_out?we:ke):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?_e:xe}function g(e,t){for(var n,r,i;;){if(e.lookahead<ce){if(d(e),e.lookahead<ce&&t===P)return _e;if(0===e.lookahead)break}if(n=0,e.lookahead>=fe&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+fe-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=fe-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ce&&(e.match_length=c(e,n),e.match_length<=5&&(e.strategy===H||e.match_length===fe&&e.strstart-e.match_start>4096)&&(e.match_length=fe-1)),
e.prev_length>=fe&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-fe,r=T._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-fe),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+fe-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=fe-1,e.strstart++,r&&(u(e,!1),0===e.strm.avail_out))return _e}else if(e.match_available){if(r=T._tr_tally(e,0,e.window[e.strstart-1]),r&&u(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return _e}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=T._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<fe-1?e.strstart:fe-1,t===q?(u(e,!0),0===e.strm.avail_out?we:ke):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?_e:xe}function m(e,t){for(var n,r,i,a,o=e.window;;){if(e.lookahead<=le){if(d(e),e.lookahead<=le&&t===P)return _e;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=fe&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+le;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=le-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=fe?(n=T._tr_tally(e,1,e.match_length-fe),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=T._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(u(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===q?(u(e,!0),0===e.strm.avail_out?we:ke):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?_e:xe}function v(e,t){for(var n;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===P)return _e;break}if(e.match_length=0,n=T._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(u(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===q?(u(e,!0),0===e.strm.avail_out?we:ke):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?_e:xe}function y(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function b(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=C[e.level].max_lazy,e.good_match=C[e.level].good_length,e.nice_match=C[e.level].nice_length,e.max_chain_length=C[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=fe-1,e.match_available=0,e.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new R.Buf16(2*ue),this.dyn_dtree=new R.Buf16(2*(2*ae+1)),this.bl_tree=new R.Buf16(2*(2*oe+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new R.Buf16(se+1),this.heap=new R.Buf16(2*ie+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new R.Buf16(2*ie+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=J,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?he:ye,e.adler=2===t.wrap?0:1,t.last_flush=P,T._tr_init(t),F):r(e,I)}function w(e){var t=x(e);return t===F&&b(e.state),t}function k(e,t){return e&&e.state?2!==e.state.wrap?I:(e.state.gzhead=t,F):I}function M(e,t,n,i,a,o){if(!e)return I;var u=1;if(t===V&&(t=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16),a<1||a>K||n!==Q||i<8||i>15||t<0||t>9||o<0||o>X)return r(e,I);8===i&&(i=9);var s=new _;return e.state=s,s.strm=e,s.wrap=u,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+fe-1)/fe),s.window=new R.Buf8(2*s.w_size),s.head=new R.Buf16(s.hash_size),s.prev=new R.Buf16(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new R.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,w(e)}function E(e,t){return M(e,t,Q,ee,te,Z)}function O(e,t){var n,u,l,c;if(!e||!e.state||t>j||t<0)return e?r(e,I):I;if(u=e.state,!e.output||!e.input&&0!==e.avail_in||u.status===be&&t!==q)return r(e,0===e.avail_out?W:I);if(u.strm=e,n=u.last_flush,u.last_flush=t,u.status===he)if(2===u.wrap)e.adler=0,s(u,31),s(u,139),s(u,8),u.gzhead?(s(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),s(u,255&u.gzhead.time),s(u,u.gzhead.time>>8&255),s(u,u.gzhead.time>>16&255),s(u,u.gzhead.time>>24&255),s(u,9===u.level?2:u.strategy>=Y||u.level<2?4:0),s(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(s(u,255&u.gzhead.extra.length),s(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(e.adler=D(e.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=pe):(s(u,0),s(u,0),s(u,0),s(u,0),s(u,0),s(u,9===u.level?2:u.strategy>=Y||u.level<2?4:0),s(u,Me),u.status=ye);else{var d=Q+(u.w_bits-8<<4)<<8,h=-1;h=u.strategy>=Y||u.level<2?0:u.level<6?1:6===u.level?2:3,d|=h<<6,0!==u.strstart&&(d|=de),d+=31-d%31,u.status=ye,f(u,d),0!==u.strstart&&(f(u,e.adler>>>16),f(u,65535&e.adler)),e.adler=1}if(u.status===pe)if(u.gzhead.extra){for(l=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),o(e),l=u.pending,u.pending!==u.pending_buf_size));)s(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=ge)}else u.status=ge;if(u.status===ge)if(u.gzhead.name){l=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),o(e),l=u.pending,u.pending===u.pending_buf_size)){c=1;break}c=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,s(u,c)}while(0!==c);u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),0===c&&(u.gzindex=0,u.status=me)}else u.status=me;if(u.status===me)if(u.gzhead.comment){l=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),o(e),l=u.pending,u.pending===u.pending_buf_size)){c=1;break}c=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,s(u,c)}while(0!==c);u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),0===c&&(u.status=ve)}else u.status=ve;if(u.status===ve&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&o(e),u.pending+2<=u.pending_buf_size&&(s(u,255&e.adler),s(u,e.adler>>8&255),e.adler=0,u.status=ye)):u.status=ye),0!==u.pending){if(o(e),0===e.avail_out)return u.last_flush=-1,F}else if(0===e.avail_in&&i(t)<=i(n)&&t!==q)return r(e,W);if(u.status===be&&0!==e.avail_in)return r(e,W);if(0!==e.avail_in||0!==u.lookahead||t!==P&&u.status!==be){var p=u.strategy===Y?v(u,t):u.strategy===G?m(u,t):C[u.level].func(u,t);if(p!==we&&p!==ke||(u.status=be),p===_e||p===we)return 0===e.avail_out&&(u.last_flush=-1),F;if(p===xe&&(t===$?T._tr_align(u):t!==j&&(T._tr_stored_block(u,0,0,!1),t===L&&(a(u.head),0===u.lookahead&&(u.strstart=0,u.block_start=0,u.insert=0))),o(e),0===e.avail_out))return u.last_flush=-1,F}return t!==q?F:u.wrap<=0?U:(2===u.wrap?(s(u,255&e.adler),s(u,e.adler>>8&255),s(u,e.adler>>16&255),s(u,e.adler>>24&255),s(u,255&e.total_in),s(u,e.total_in>>8&255),s(u,e.total_in>>16&255),s(u,e.total_in>>24&255)):(f(u,e.adler>>>16),f(u,65535&e.adler)),o(e),u.wrap>0&&(u.wrap=-u.wrap),0!==u.pending?F:U)}function S(e){var t;return e&&e.state?(t=e.state.status,t!==he&&t!==pe&&t!==ge&&t!==me&&t!==ve&&t!==ye&&t!==be?r(e,I):(e.state=null,t===ye?r(e,B):F)):I}function A(e,t){var n,r,i,o,u,s,f,l,c=t.length;if(!e||!e.state)return I;if(n=e.state,o=n.wrap,2===o||1===o&&n.status!==he||n.lookahead)return I;for(1===o&&(e.adler=z(e.adler,t,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(a(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new R.Buf8(n.w_size),R.arraySet(l,t,c-n.w_size,n.w_size,0),t=l,c=n.w_size),u=e.avail_in,s=e.next_in,f=e.input,e.avail_in=c,e.next_in=0,e.input=t,d(n);n.lookahead>=fe;){r=n.strstart,i=n.lookahead-(fe-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+fe-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--i);n.strstart=r,n.lookahead=fe-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=fe-1,n.match_available=0,e.next_in=s,e.input=f,e.avail_in=u,n.wrap=o,F}var C,R=n(15),T=n(111),z=n(44),D=n(45),N=n(46),P=0,$=1,L=3,q=4,j=5,F=0,U=1,I=-2,B=-3,W=-5,V=-1,H=1,Y=2,G=3,X=4,Z=0,J=2,Q=8,K=9,ee=15,te=8,ne=29,re=256,ie=re+1+ne,ae=30,oe=19,ue=2*ie+1,se=15,fe=3,le=258,ce=le+fe+1,de=32,he=42,pe=69,ge=73,me=91,ve=103,ye=113,be=666,_e=1,xe=2,we=3,ke=4,Me=3;C=[new y(0,0,0,0,h),new y(4,4,8,4,p),new y(4,5,16,8,p),new y(4,6,32,32,p),new y(4,4,16,16,g),new y(8,16,32,32,g),new y(8,16,128,128,g),new y(8,32,128,256,g),new y(32,128,258,1024,g),new y(32,258,258,4096,g)],t.deflateInit=E,t.deflateInit2=M,t.deflateReset=w,t.deflateResetKeep=x,t.deflateSetHeader=k,t.deflate=O,t.deflateEnd=S,t.deflateSetDictionary=A,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t){"use strict";var n=30,r=12;e.exports=function(e,t){var i,a,o,u,s,f,l,c,d,h,p,g,m,v,y,b,_,x,w,k,M,E,O,S,A;i=e.state,a=e.next_in,S=e.input,o=a+(e.avail_in-5),u=e.next_out,A=e.output,s=u-(t-e.avail_out),f=u+(e.avail_out-257),l=i.dmax,c=i.wsize,d=i.whave,h=i.wnext,p=i.window,g=i.hold,m=i.bits,v=i.lencode,y=i.distcode,b=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;e:do{m<15&&(g+=S[a++]<<m,m+=8,g+=S[a++]<<m,m+=8),x=v[g&b];t:for(;;){if(w=x>>>24,g>>>=w,m-=w,w=x>>>16&255,0===w)A[u++]=65535&x;else{if(!(16&w)){if(0===(64&w)){x=v[(65535&x)+(g&(1<<w)-1)];continue t}if(32&w){i.mode=r;break e}e.msg="invalid literal/length code",i.mode=n;break e}k=65535&x,w&=15,w&&(m<w&&(g+=S[a++]<<m,m+=8),k+=g&(1<<w)-1,g>>>=w,m-=w),m<15&&(g+=S[a++]<<m,m+=8,g+=S[a++]<<m,m+=8),x=y[g&_];n:for(;;){if(w=x>>>24,g>>>=w,m-=w,w=x>>>16&255,!(16&w)){if(0===(64&w)){x=y[(65535&x)+(g&(1<<w)-1)];continue n}e.msg="invalid distance code",i.mode=n;break e}if(M=65535&x,w&=15,m<w&&(g+=S[a++]<<m,m+=8,m<w&&(g+=S[a++]<<m,m+=8)),M+=g&(1<<w)-1,M>l){e.msg="invalid distance too far back",i.mode=n;break e}if(g>>>=w,m-=w,w=u-s,M>w){if(w=M-w,w>d&&i.sane){e.msg="invalid distance too far back",i.mode=n;break e}if(E=0,O=p,0===h){if(E+=c-w,w<k){k-=w;do A[u++]=p[E++];while(--w);E=u-M,O=A}}else if(h<w){if(E+=c+h-w,w-=h,w<k){k-=w;do A[u++]=p[E++];while(--w);if(E=0,h<k){w=h,k-=w;do A[u++]=p[E++];while(--w);E=u-M,O=A}}}else if(E+=h-w,w<k){k-=w;do A[u++]=p[E++];while(--w);E=u-M,O=A}for(;k>2;)A[u++]=O[E++],A[u++]=O[E++],A[u++]=O[E++],k-=3;k&&(A[u++]=O[E++],k>1&&(A[u++]=O[E++]))}else{E=u-M;do A[u++]=A[E++],A[u++]=A[E++],A[u++]=A[E++],k-=3;while(k>2);k&&(A[u++]=A[E++],k>1&&(A[u++]=A[E++]))}break}}break}}while(a<o&&u<f);k=m>>3,a-=k,m-=k<<3,g&=(1<<m)-1,e.next_in=a,e.next_out=u,e.avail_in=a<o?5+(o-a):5-(a-o),e.avail_out=u<f?257+(f-u):257-(u-f),i.hold=g,i.bits=m}},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=L,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(ge),t.distcode=t.distdyn=new y.Buf32(me),t.sane=1,t.back=-1,C):z}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,a(e)):z}function u(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?z:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,o(e))):z}function s(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=u(e,t),n!==C&&(e.state=null),n):z}function f(e){return s(e,ye)}function l(e){if(be){var t;for(m=new y.Buf32(512),v=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(w(M,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;w(E,e.lens,0,32,v,0,e.work,{bits:5}),be=!1}e.lencode=m,e.lenbits=9,e.distcode=v,e.distbits=5}function c(e,t,n,r){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new y.Buf8(a.wsize)),r>=a.wsize?(y.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),y.arraySet(a.window,t,n-r,i,a.wnext),r-=i,r?(y.arraySet(a.window,t,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function d(e,t){var n,i,a,o,u,s,f,d,h,p,g,m,v,ge,me,ve,ye,be,_e,xe,we,ke,Me,Ee,Oe=0,Se=new y.Buf8(4),Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return z;n=e.state,n.mode===G&&(n.mode=X),u=e.next_out,a=e.output,f=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,d=n.hold,h=n.bits,p=s,g=f,ke=C;e:for(;;)switch(n.mode){case L:if(0===n.wrap){n.mode=X;break}for(;h<16;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(2&n.wrap&&35615===d){n.check=0,Se[0]=255&d,Se[1]=d>>>8&255,n.check=_(n.check,Se,2,0),d=0,h=0,n.mode=q;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((15&d)!==$){e.msg="unknown compression method",n.mode=de;break}if(d>>>=4,h-=4,we=(15&d)+8,0===n.wbits)n.wbits=we;else if(we>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<we,e.adler=n.check=1,n.mode=512&d?H:G,d=0,h=0;break;case q:for(;h<16;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(n.flags=d,(255&n.flags)!==$){e.msg="unknown compression method",n.mode=de;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Se[0]=255&d,Se[1]=d>>>8&255,n.check=_(n.check,Se,2,0)),d=0,h=0,n.mode=j;case j:for(;h<32;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&(Se[0]=255&d,Se[1]=d>>>8&255,Se[2]=d>>>16&255,Se[3]=d>>>24&255,n.check=_(n.check,Se,4,0)),d=0,h=0,n.mode=F;case F:for(;h<16;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(Se[0]=255&d,Se[1]=d>>>8&255,n.check=_(n.check,Se,2,0)),d=0,h=0,n.mode=U;case U:if(1024&n.flags){for(;h<16;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(Se[0]=255&d,Se[1]=d>>>8&255,n.check=_(n.check,Se,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=I;case I:if(1024&n.flags&&(m=n.length,m>s&&(m=s),m&&(n.head&&(we=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,i,o,m,we)),512&n.flags&&(n.check=_(n.check,i,m,o)),s-=m,o+=m,n.length-=m),n.length))break e;n.length=0,n.mode=B;case B:if(2048&n.flags){if(0===s)break e;m=0;do we=i[o+m++],n.head&&we&&n.length<65536&&(n.head.name+=String.fromCharCode(we));while(we&&m<s);if(512&n.flags&&(n.check=_(n.check,i,m,o)),s-=m,o+=m,we)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=W;case W:if(4096&n.flags){if(0===s)break e;m=0;do we=i[o+m++],n.head&&we&&n.length<65536&&(n.head.comment+=String.fromCharCode(we));while(we&&m<s);if(512&n.flags&&(n.check=_(n.check,i,m,o)),s-=m,o+=m,we)break e}else n.head&&(n.head.comment=null);n.mode=V;case V:if(512&n.flags){for(;h<16;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=de;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=G;break;case H:for(;h<32;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}e.adler=n.check=r(d),d=0,h=0,n.mode=Y;case Y:if(0===n.havedict)return e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=d,n.bits=h,T;e.adler=n.check=1,n.mode=G;case G:if(t===S||t===A)break e;case X:if(n.last){d>>>=7&h,h-=7&h,n.mode=fe;break}for(;h<3;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}switch(n.last=1&d,d>>>=1,h-=1,3&d){case 0:n.mode=Z;break;case 1:if(l(n),n.mode=ne,t===A){d>>>=2,h-=2;break e}break;case 2:n.mode=K;break;case 3:e.msg="invalid block type",n.mode=de}d>>>=2,h-=2;break;case Z:for(d>>>=7&h,h-=7&h;h<32;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=65535&d,d=0,h=0,n.mode=J,t===A)break e;case J:n.mode=Q;case Q:if(m=n.length){if(m>s&&(m=s),m>f&&(m=f),0===m)break e;y.arraySet(a,i,o,m,u),s-=m,o+=m,f-=m,u+=m,n.length-=m;break}n.mode=G;break;case K:for(;h<14;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(n.nlen=(31&d)+257,d>>>=5,h-=5,n.ndist=(31&d)+1,d>>>=5,h-=5,n.ncode=(15&d)+4,d>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;h<3;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.lens[Ae[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[Ae[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Me={bits:n.lenbits},ke=w(k,n.lens,0,19,n.lencode,0,n.work,Me),n.lenbits=Me.bits,ke){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;Oe=n.lencode[d&(1<<n.lenbits)-1],me=Oe>>>24,ve=Oe>>>16&255,ye=65535&Oe,!(me<=h);){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(ye<16)d>>>=me,h-=me,n.lens[n.have++]=ye;else{if(16===ye){for(Ee=me+2;h<Ee;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(d>>>=me,h-=me,0===n.have){e.msg="invalid bit length repeat",n.mode=de;break}we=n.lens[n.have-1],m=3+(3&d),d>>>=2,h-=2}else if(17===ye){for(Ee=me+3;h<Ee;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}d>>>=me,h-=me,we=0,m=3+(7&d),d>>>=3,h-=3}else{for(Ee=me+7;h<Ee;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}d>>>=me,h-=me,we=0,m=11+(127&d),d>>>=7,h-=7}if(n.have+m>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;m--;)n.lens[n.have++]=we}}if(n.mode===de)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,Me={bits:n.lenbits},ke=w(M,n.lens,0,n.nlen,n.lencode,0,n.work,Me),n.lenbits=Me.bits,ke){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,Me={bits:n.distbits},ke=w(E,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Me),n.distbits=Me.bits,ke){e.msg="invalid distances set",n.mode=de;break}if(n.mode=ne,t===A)break e;case ne:n.mode=re;case re:if(s>=6&&f>=258){e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=d,n.bits=h,x(e,g),u=e.next_out,a=e.output,f=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,d=n.hold,h=n.bits,n.mode===G&&(n.back=-1);break}for(n.back=0;Oe=n.lencode[d&(1<<n.lenbits)-1],me=Oe>>>24,ve=Oe>>>16&255,ye=65535&Oe,!(me<=h);){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(ve&&0===(240&ve)){for(be=me,_e=ve,xe=ye;Oe=n.lencode[xe+((d&(1<<be+_e)-1)>>be)],me=Oe>>>24,ve=Oe>>>16&255,ye=65535&Oe,!(be+me<=h);){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}d>>>=be,h-=be,n.back+=be}if(d>>>=me,h-=me,n.back+=me,n.length=ye,0===ve){n.mode=se;break}if(32&ve){n.back=-1,n.mode=G;break}if(64&ve){e.msg="invalid literal/length code",n.mode=de;break}n.extra=15&ve,n.mode=ie;case ie:if(n.extra){for(Ee=n.extra;h<Ee;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ae;case ae:for(;Oe=n.distcode[d&(1<<n.distbits)-1],me=Oe>>>24,ve=Oe>>>16&255,ye=65535&Oe,!(me<=h);){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(0===(240&ve)){for(be=me,_e=ve,xe=ye;Oe=n.distcode[xe+((d&(1<<be+_e)-1)>>be)],me=Oe>>>24,ve=Oe>>>16&255,ye=65535&Oe,!(be+me<=h);){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}d>>>=be,h-=be,n.back+=be}if(d>>>=me,h-=me,n.back+=me,64&ve){e.msg="invalid distance code",n.mode=de;break}n.offset=ye,n.extra=15&ve,n.mode=oe;case oe:if(n.extra){for(Ee=n.extra;h<Ee;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=ue;case ue:if(0===f)break e;if(m=g-f,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}m>n.wnext?(m-=n.wnext,v=n.wsize-m):v=n.wnext-m,m>n.length&&(m=n.length),ge=n.window}else ge=a,v=u-n.offset,m=n.length;m>f&&(m=f),f-=m,n.length-=m;do a[u++]=ge[v++];while(--m);0===n.length&&(n.mode=re);break;case se:if(0===f)break e;a[u++]=n.length,f--,n.mode=re;break;case fe:if(n.wrap){for(;h<32;){if(0===s)break e;s--,d|=i[o++]<<h,h+=8}if(g-=f,e.total_out+=g,n.total+=g,g&&(e.adler=n.check=n.flags?_(n.check,a,g,u-g):b(n.check,a,g,u-g)),g=f,(n.flags?d:r(d))!==n.check){e.msg="incorrect data check",n.mode=de;break}d=0,h=0}n.mode=le;case le:if(n.wrap&&n.flags){for(;h<32;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=de;break}d=0,h=0}n.mode=ce;case ce:ke=R;break e;case de:ke=D;break e;case he:return N;case pe:default:return z}return e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=d,n.bits=h,(n.wsize||g!==e.avail_out&&n.mode<de&&(n.mode<fe||t!==O))&&c(e,e.output,e.next_out,g-e.avail_out)?(n.mode=he,N):(p-=e.avail_in,g-=e.avail_out,e.total_in+=p,e.total_out+=g,n.total+=g,n.wrap&&g&&(e.adler=n.check=n.flags?_(n.check,a,g,e.next_out-g):b(n.check,a,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(n.mode===G?128:0)+(n.mode===ne||n.mode===J?256:0),(0===p&&0===g||t===O)&&ke===C&&(ke=P),ke)}function h(e){if(!e||!e.state)return z;var t=e.state;return t.window&&(t.window=null),e.state=null,C}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?z:(n.head=t,t.done=!1,C)):z}function g(e,t){var n,r,i,a=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==Y?z:n.mode===Y&&(r=1,r=b(r,t,a,0),r!==n.check)?D:(i=c(e,t,a,a))?(n.mode=he,N):(n.havedict=1,C)):z}var m,v,y=n(15),b=n(44),_=n(45),x=n(108),w=n(110),k=0,M=1,E=2,O=4,S=5,A=6,C=0,R=1,T=2,z=-2,D=-3,N=-4,P=-5,$=8,L=1,q=2,j=3,F=4,U=5,I=6,B=7,W=8,V=9,H=10,Y=11,G=12,X=13,Z=14,J=15,Q=16,K=17,ee=18,te=19,ne=20,re=21,ie=22,ae=23,oe=24,ue=25,se=26,fe=27,le=28,ce=29,de=30,he=31,pe=32,ge=852,me=592,ve=15,ye=ve,be=!0;t.inflateReset=o,t.inflateReset2=u,t.inflateResetKeep=a,t.inflateInit=f,t.inflateInit2=s,t.inflate=d,t.inflateEnd=h,t.inflateGetHeader=p,t.inflateSetDictionary=g,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";var r=n(15),i=15,a=852,o=592,u=0,s=1,f=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,p,g,m,v,y){var b,_,x,w,k,M,E,O,S,A=y.bits,C=0,R=0,T=0,z=0,D=0,N=0,P=0,$=0,L=0,q=0,j=null,F=0,U=new r.Buf16(i+1),I=new r.Buf16(i+1),B=null,W=0;for(C=0;C<=i;C++)U[C]=0;for(R=0;R<p;R++)U[t[n+R]]++;for(D=A,z=i;z>=1&&0===U[z];z--);if(D>z&&(D=z),0===z)return g[m++]=20971520,g[m++]=20971520,y.bits=1,0;for(T=1;T<z&&0===U[T];T++);for(D<T&&(D=T),$=1,C=1;C<=i;C++)if($<<=1,$-=U[C],$<0)return-1;if($>0&&(e===u||1!==z))return-1;for(I[1]=0,C=1;C<i;C++)I[C+1]=I[C]+U[C];for(R=0;R<p;R++)0!==t[n+R]&&(v[I[t[n+R]]++]=R);if(e===u?(j=B=v,M=19):e===s?(j=l,F-=257,B=c,W-=257,M=256):(j=d,B=h,M=-1),q=0,R=0,C=T,k=m,N=D,P=0,x=-1,L=1<<D,w=L-1,e===s&&L>a||e===f&&L>o)return 1;for(var V=0;;){V++,E=C-P,v[R]<M?(O=0,S=v[R]):v[R]>M?(O=B[W+v[R]],S=j[F+v[R]]):(O=96,S=0),b=1<<C-P,_=1<<N,T=_;do _-=b,g[k+(q>>P)+_]=E<<24|O<<16|S|0;while(0!==_);for(b=1<<C-1;q&b;)b>>=1;if(0!==b?(q&=b-1,q+=b):q=0,R++,0===--U[C]){if(C===z)break;C=t[n+v[R]]}if(C>D&&(q&w)!==x){for(0===P&&(P=D),k+=T,N=C-P,$=1<<N;N+P<z&&($-=U[N+P],!($<=0));)N++,$<<=1;if(L+=1<<N,e===s&&L>a||e===f&&L>o)return 1;x=q&w,g[x]=D<<24|N<<16|k-m|0}}return 0!==q&&(g[k+q]=C-P<<24|64<<16|0),y.bits=D,0}},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function a(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function o(e){return e<256?se[e]:se[256+(e>>>7)]}function u(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function s(e,t,n){e.bi_valid>X-n?(e.bi_buf|=t<<e.bi_valid&65535,u(e,e.bi_buf),e.bi_buf=t>>X-e.bi_valid,e.bi_valid+=n-X):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function f(e,t,n){s(e,n[2*t],n[2*t+1])}function l(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function c(e){16===e.bi_valid?(u(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function d(e,t){var n,r,i,a,o,u,s=t.dyn_tree,f=t.max_code,l=t.stat_desc.static_tree,c=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(a=0;a<=G;a++)e.bl_count[a]=0;for(s[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<Y;n++)r=e.heap[n],a=s[2*s[2*r+1]+1]+1,a>p&&(a=p,g++),s[2*r+1]=a,r>f||(e.bl_count[a]++,o=0,r>=h&&(o=d[r-h]),u=s[2*r],e.opt_len+=u*(a+o),c&&(e.static_len+=u*(l[2*r+1]+o)));if(0!==g){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(a=p;0!==a;a--)for(r=e.bl_count[a];0!==r;)i=e.heap[--n],i>f||(s[2*i+1]!==a&&(e.opt_len+=(a-s[2*i+1])*s[2*i],s[2*i+1]=a),r--)}}function h(e,t,n){var r,i,a=new Array(G+1),o=0;for(r=1;r<=G;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var u=e[2*i+1];0!==u&&(e[2*i]=l(a[u]++,u))}}function p(){var e,t,n,r,a,o=new Array(G+1);for(n=0,r=0;r<I-1;r++)for(le[r]=n,e=0;e<1<<te[r];e++)fe[n++]=r;for(fe[n-1]=r,a=0,r=0;r<16;r++)for(ce[r]=a,e=0;e<1<<ne[r];e++)se[a++]=r;for(a>>=7;r<V;r++)for(ce[r]=a<<7,e=0;e<1<<ne[r]-7;e++)se[256+a++]=r;for(t=0;t<=G;t++)o[t]=0;for(e=0;e<=143;)oe[2*e+1]=8,e++,o[8]++;for(;e<=255;)oe[2*e+1]=9,e++,o[9]++;for(;e<=279;)oe[2*e+1]=7,e++,o[7]++;for(;e<=287;)oe[2*e+1]=8,e++,o[8]++;for(h(oe,W+1,o),e=0;e<V;e++)ue[2*e+1]=5,ue[2*e]=l(e,5);de=new i(oe,te,B+1,W,G),he=new i(ue,ne,0,V,G),pe=new i(new Array(0),re,0,H,Z)}function g(e){var t;for(t=0;t<W;t++)e.dyn_ltree[2*t]=0;for(t=0;t<V;t++)e.dyn_dtree[2*t]=0;for(t=0;t<H;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*J]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function m(e){e.bi_valid>8?u(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){m(e),r&&(u(e,n),u(e,~n)),z.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function b(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function _(e,t,n){var r,i,a,u,l=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?f(e,i,t):(a=fe[i],f(e,a+B+1,t),u=te[a],0!==u&&(i-=le[a],s(e,i,u)),r--,a=o(r),f(e,a,n),u=ne[a],0!==u&&(r-=ce[a],s(e,r,u)));while(l<e.last_lit);f(e,J,t)}function x(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,u=t.stat_desc.has_stree,s=t.stat_desc.elems,f=-1;for(e.heap_len=0,e.heap_max=Y,n=0;n<s;n++)0!==a[2*n]?(e.heap[++e.heap_len]=f=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=f<2?++f:0,a[2*i]=1,e.depth[i]=0,e.opt_len--,u&&(e.static_len-=o[2*i+1]);for(t.max_code=f,n=e.heap_len>>1;n>=1;n--)b(e,a,n);i=s;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,b(e,a,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],d(e,t),h(a,f,e.bl_count)}function w(e,t,n){var r,i,a=-1,o=t[1],u=0,s=7,f=4;for(0===o&&(s=138,f=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++u<s&&i===o||(u<f?e.bl_tree[2*i]+=u:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*Q]++):u<=10?e.bl_tree[2*K]++:e.bl_tree[2*ee]++,u=0,a=i,0===o?(s=138,f=3):i===o?(s=6,f=3):(s=7,f=4))}function k(e,t,n){var r,i,a=-1,o=t[1],u=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++u<l&&i===o)){if(u<c)do f(e,i,e.bl_tree);while(0!==--u);else 0!==i?(i!==a&&(f(e,i,e.bl_tree),u--),f(e,Q,e.bl_tree),s(e,u-3,2)):u<=10?(f(e,K,e.bl_tree),s(e,u-3,3)):(f(e,ee,e.bl_tree),s(e,u-11,7));u=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}}function M(e){var t;for(w(e,e.dyn_ltree,e.l_desc.max_code),w(e,e.dyn_dtree,e.d_desc.max_code),x(e,e.bl_desc),t=H-1;t>=3&&0===e.bl_tree[2*ie[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function E(e,t,n,r){var i;for(s(e,t-257,5),s(e,n-1,5),s(e,r-4,4),i=0;i<r;i++)s(e,e.bl_tree[2*ie[i]+1],3);k(e,e.dyn_ltree,t-1),k(e,e.dyn_dtree,n-1)}function O(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return N;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return P;for(t=32;t<B;t++)if(0!==e.dyn_ltree[2*t])return P;return N}function S(e){ge||(p(),ge=!0),e.l_desc=new a(e.dyn_ltree,de),e.d_desc=new a(e.dyn_dtree,he),e.bl_desc=new a(e.bl_tree,pe),e.bi_buf=0,e.bi_valid=0,g(e)}function A(e,t,n,r){s(e,(L<<1)+(r?1:0),3),v(e,t,n,!0)}function C(e){s(e,q<<1,3),f(e,J,oe),c(e)}function R(e,t,n,r){var i,a,o=0;e.level>0?(e.strm.data_type===$&&(e.strm.data_type=O(e)),x(e,e.l_desc),x(e,e.d_desc),o=M(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&t!==-1?A(e,t,n,r):e.strategy===D||a===i?(s(e,(q<<1)+(r?1:0),3),_(e,oe,ue)):(s(e,(j<<1)+(r?1:0),3),E(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),_(e,e.dyn_ltree,e.dyn_dtree)),g(e),r&&m(e)}function T(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(fe[n]+B+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1}var z=n(15),D=4,N=0,P=1,$=2,L=0,q=1,j=2,F=3,U=258,I=29,B=256,W=B+1+I,V=30,H=19,Y=2*W+1,G=15,X=16,Z=7,J=256,Q=16,K=17,ee=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ne=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=512,oe=new Array(2*(W+2));r(oe);var ue=new Array(2*V);r(ue);var se=new Array(ae);r(se);var fe=new Array(U-F+1);r(fe);var le=new Array(I);r(le);var ce=new Array(V);r(ce);var de,he,pe,ge=!1;t._tr_init=S,t._tr_stored_block=A,t._tr_flush_block=R,t._tr_tally=T,t._tr_align=C},function(e,t){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},function(e,t,n){"undefined"==typeof Promise&&(n(122).enable(),window.Promise=n(121)),n(140),Object.assign=n(105)},function(e,t){e.exports=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]];
},function(e,t){e.exports=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]},function(e,t){e.exports=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]];
},function(e,t){e.exports={uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3]}},function(e,t){e.exports=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]},function(e,t){e.exports={$schema:"https://vega.github.io/schema/vega/v4.json",width:500,height:200,padding:5,signals:[{name:"interpolate",value:"linear"}],data:[{name:"table"}],scales:[{name:"timestamp",type:"time",range:"width",domain:{data:"table",field:"timestamp"}},{name:"price",type:"linear",range:"height",nice:!0,zero:!1,domain:{data:"table",field:"price"}}],axes:[{orient:"bottom",scale:"timestamp",format:"%I:%M"},{orient:"left",scale:"price",format:"$,.2f"}],marks:[{type:"line",from:{data:"table"},encode:{enter:{x:{scale:"timestamp",field:"timestamp"},y:{scale:"price",field:"price"},strokeWidth:{value:2}},update:{x:{scale:"timestamp",field:"timestamp"},y:{scale:"price",field:"price"}},hover:{fillOpacity:{value:.5}}}}]}},function(e,t){e.exports=[{name:"Bitcoin",symbol:"BTC"},{name:"Ethereum",symbol:"ETH"},{name:"Ripple",symbol:"XRP"},{name:"Bitcoin Cash",symbol:"BCH"},{name:"EOS",symbol:"EOS"},{name:"Litecoin",symbol:"LTC"},{name:"Dash",symbol:"DASH"},{name:"Monero",symbol:"XMR"},{name:"Ethereum Classic",symbol:"ETC"},{name:"Zcash",symbol:"ZEC"}]},function(e,t,n){"use strict";function r(e){var t=new i(i._61);return t._81=1,t._65=e,t}var i=n(50);e.exports=i;var a=r(!0),o=r(!1),u=r(null),s=r(void 0),f=r(0),l=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return u;if(void 0===e)return s;if(e===!0)return a;if(e===!1)return o;if(0===e)return f;if(""===e)return l;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(n){return new i(function(e,t){t(n)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(o,u){if(u&&("object"==typeof u||"function"==typeof u)){if(u instanceof i&&u.then===i.prototype.then){for(;3===u._81;)u=u._65;return 1===u._81?r(o,u._65):(2===u._81&&n(u._65),void u.then(function(e){r(o,e)},n))}var s=u.then;if("function"==typeof s){var f=new i(s.bind(u));return void f.then(function(e){r(o,e)},n)}}t[o]=u,0===--a&&e(t)}if(0===t.length)return e([]);for(var a=t.length,o=0;o<t.length;o++)r(o,t[o])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function r(){f=!1,u._10=null,u._97=null}function i(e){function t(t){(e.allRejections||o(c[t].error,e.whitelist||s))&&(c[t].displayId=l++,e.onUnhandled?(c[t].logged=!0,e.onUnhandled(c[t].displayId,c[t].error)):(c[t].logged=!0,a(c[t].displayId,c[t].error)))}function n(t){c[t].logged&&(e.onHandled?e.onHandled(c[t].displayId,c[t].error):c[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+c[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+c[t].displayId+".")))}e=e||{},f&&r(),f=!0;var i=0,l=0,c={};u._10=function(e){2===e._81&&c[e._72]&&(c[e._72].logged?n(e._72):clearTimeout(c[e._72].timeout),delete c[e._72])},u._97=function(e,n){0===e._45&&(e._72=i++,c[e._72]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._72),o(n,s)?100:2e3),logged:!1})}}function a(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):");var n=(t&&(t.stack||t))+"";n.split("\n").forEach(function(e){console.warn("  "+e)})}function o(e,t){return t.some(function(t){return e instanceof t})}var u=n(50),s=[ReferenceError,TypeError,RangeError],f=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";var r=n(77),i=n(78),a=n(125);e.exports=function(){function e(e,t,n,r,o,u){u!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){e.exports=n(123)()},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var s=e.length;u>0&&s>u&&(s=u);for(var f=0;f<s;++f){var l,c,d,h,p=e[f].replace(o,"%20"),g=p.indexOf(r);g>=0?(l=p.substr(0,g),c=p.substr(g+1)):(l=p,c=""),d=decodeURIComponent(l),h=decodeURIComponent(c),n(a,d)?Array.isArray(a[d])?a[d].push(h):a[d]=[a[d],h]:a[d]=h}return a}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(i){var a=encodeURIComponent(n(i))+r;return Array.isArray(e[i])?e[i].map(function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[i]))}).join(t):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(e)):""}},function(e,t,n){"use strict";t.decode=t.parse=n(126),t.encode=t.stringify=n(127)},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return o(e,t,n)}var a=n(1),o=a.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=a:(r(a,t),t.Buffer=i),r(o,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},100,function(e,t,n){e.exports=n(6)},function(e,t,n){e.exports=n(51)},function(e,t,n){(function(r){t=e.exports=n(52),t.Stream=n(3),t.Readable=t,t.Writable=n(31),t.Duplex=n(6),t.Transform=n(30),t.PassThrough=n(51),r.browser||"disable"!==r.env.READABLE_STREAM||(e.exports=n(3))}).call(t,n(2))},[148,30],function(e,t,n){e.exports=n(31)},function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(y.isEncoding===b||!b(e)))throw new Error("Unknown encoding: "+e);return t||e}function a(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=d,this.end=h,t=4;break;case"utf8":this.fillLast=f,t=4;break;case"base64":this.text=p,this.end=g,t=3;break;default:return this.write=m,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(t)}function o(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function u(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||i===-2?0:(i=o(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||i===-2?0:(i=o(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0))}function s(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,""}}function f(e){var t=this.lastTotal-this.lastNeed,n=s(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){var n=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function d(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function p(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function m(e){return e.toString(this.encoding)}function v(e){return e&&e.length?this.write(e):""}var y=n(129).Buffer,b=y.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=c,a.prototype.text=l,a.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},function(e,t,n){var r;(function(e,i){!function(a){function o(e){throw RangeError(z[e])}function u(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function s(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(T,".");var i=e.split("."),a=u(i,t).join(".");return r+a}function f(e){for(var t,n,r=[],i=0,a=e.length;i<a;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<a?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function l(e){return u(e,function(e){var t="";return e>65535&&(e-=65536,t+=P(e>>>10&1023|55296),e=56320|1023&e),t+=P(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:x}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?N(e/E):e>>1,e+=N(e/t);e>D*k>>1;r+=x)e=N(e/D);return N(r+(D+1)*e/(e+M))}function p(e){var t,n,r,i,a,u,s,f,d,p,g=[],m=e.length,v=0,y=S,b=O;for(n=e.lastIndexOf(A),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&o("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(a=v,u=1,s=x;i>=m&&o("invalid-input"),f=c(e.charCodeAt(i++)),(f>=x||f>N((_-v)/u))&&o("overflow"),v+=f*u,d=s<=b?w:s>=b+k?k:s-b,!(f<d);s+=x)p=x-d,u>N(_/p)&&o("overflow"),u*=p;t=g.length+1,b=h(v-a,t,0==a),N(v/t)>_-y&&o("overflow"),y+=N(v/t),v%=t,g.splice(v++,0,y)}return l(g)}function g(e){var t,n,r,i,a,u,s,l,c,p,g,m,v,y,b,M=[];for(e=f(e),m=e.length,t=S,n=0,a=O,u=0;u<m;++u)g=e[u],g<128&&M.push(P(g));for(r=i=M.length,i&&M.push(A);r<m;){for(s=_,u=0;u<m;++u)g=e[u],g>=t&&g<s&&(s=g);for(v=r+1,s-t>N((_-n)/v)&&o("overflow"),n+=(s-t)*v,t=s,u=0;u<m;++u)if(g=e[u],g<t&&++n>_&&o("overflow"),g==t){for(l=n,c=x;p=c<=a?w:c>=a+k?k:c-a,!(l<p);c+=x)b=l-p,y=x-p,M.push(P(d(p+b%y,0))),l=N(b/y);M.push(P(d(l,0))),a=h(n,v,r==i),n=0,++r}++n,++t}return M.join("")}function m(e){return s(e,function(e){return C.test(e)?p(e.slice(4).toLowerCase()):e})}function v(e){return s(e,function(e){return R.test(e)?"xn--"+g(e):e})}var y=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof i&&i);y.global!==y&&y.window!==y&&y.self!==y||(a=y);var b,_=2147483647,x=36,w=1,k=26,M=38,E=700,O=72,S=128,A="-",C=/^xn--/,R=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=x-w,N=Math.floor,P=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:f,encode:l},decode:p,encode:g,toASCII:v,toUnicode:m},r=function(){return b}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(139)(e),function(){return this}())},61,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function a(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function o(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function u(e){var t=new FileReader;return t.readAsArrayBuffer(e),o(t)}function s(e){var t=new FileReader;return t.readAsText(e),o(t)}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob?(this.blob=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(u)},this.text=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=a(this);return e?e:Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function c(e,t){t=t||{};var n=t.body;if(c.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function h(e){var t=new i,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();t.append(r,i)}),t}function p(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof i?t.headers:new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];i||(i=[],this.map[e]=i),i.push(r)},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},i.prototype.getAll=function(e){return this.map[t(e)]||[]},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},i.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},g.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},f.call(c.prototype),f.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];p.redirect=function(e,t){if(v.indexOf(t)===-1)throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=c,e.Response=p,e.fetch=function(e,t){return new Promise(function(n,r){function i(){return"responseURL"in o?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):void 0}var a;a=c.prototype.isPrototypeOf(e)&&!t?e:new c(e,t);var o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:h(o),url:i()},t="response"in o?o.response:o.responseText;n(new p(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(a.method,a.url,!0),"include"===a.credentials&&(o.withCredentials=!0),"responseType"in o&&g.blob&&(o.responseType="blob"),a.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},18,18,function(e,t,n,r,i){(function(e,a){function o(e,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),k(r.showHidden)&&(r.showHidden=!1),k(r.depth)&&(r.depth=2),k(r.colors)&&(r.colors=!1),k(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function s(e,t){return e}function f(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function l(e,n,r){if(e.customInspect&&n&&A(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return x(i)||(i=l(e,i,r)),i}var a=c(e,n);if(a)return a;var o=Object.keys(n),u=f(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),S(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(n);if(0===o.length){if(A(n)){var s=n.name?": "+n.name:"";return e.stylize("[Function"+s+"]","special")}if(M(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return d(n)}var v="",y=!1,b=["{","}"];if(m(n)&&(y=!0,b=["[","]"]),A(n)){var _=n.name?": "+n.name:"";v=" [Function"+_+"]"}if(M(n)&&(v=" "+RegExp.prototype.toString.call(n)),O(n)&&(v=" "+Date.prototype.toUTCString.call(n)),S(n)&&(v=" "+d(n)),0===o.length&&(!y||0==n.length))return b[0]+v+b[1];if(r<0)return M(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var w;return w=y?h(e,n,r,u,o):o.map(function(t){
return p(e,n,r,u,t,y)}),e.seen.pop(),g(w,v,b)}function c(e,t){if(k(t))return e.stylize("undefined","undefined");if(x(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return _(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i){for(var a=[],o=0,u=t.length;o<u;++o)D(t,String(o))?a.push(p(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(p(e,t,n,r,i,!0))}),a}function p(e,t,n,r,i,a){var o,u,s;if(s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},s.get?u=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(u=e.stylize("[Setter]","special")),D(r,i)||(o="["+i+"]"),u||(e.seen.indexOf(s.value)<0?(u=y(n)?l(e,s.value,null):l(e,s.value,n-1),u.indexOf("\n")>-1&&(u=a?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),k(o)){if(a&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function g(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function m(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function y(e){return null===e}function b(e){return null==e}function _(e){return"number"==typeof e}function x(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function k(e){return void 0===e}function M(e){return E(e)&&"[object RegExp]"===R(e)}function E(e){return"object"==typeof e&&null!==e}function O(e){return E(e)&&"[object Date]"===R(e)}function S(e){return E(e)&&("[object Error]"===R(e)||e instanceof Error)}function A(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function R(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}function z(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;t.format=function(e){if(!x(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(e).replace(N,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];n<i;u=r[++n])a+=y(u)||!E(u)?" "+u:" "+o(u);return a},t.deprecate=function(n,r){function i(){if(!o){if(a.throwDeprecation)throw new Error(r);a.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}if(k(e.process))return function(){return t.deprecate(n,r).apply(this,arguments)};if(a.noDeprecation===!0)return n;var o=!1;return i};var P,$={};t.debuglog=function(e){if(k(P)&&(P=a.env.NODE_DEBUG||""),e=e.toUpperCase(),!$[e])if(new RegExp("\\b"+e+"\\b","i").test(P)){var n=a.pid;$[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else $[e]=function(){};return $[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=m,t.isBoolean=v,t.isNull=y,t.isNullOrUndefined=b,t.isNumber=_,t.isString=x,t.isSymbol=w,t.isUndefined=k,t.isRegExp=M,t.isObject=E,t.isDate=O,t.isError=S,t.isFunction=A,t.isPrimitive=C,t.isBuffer=n(r);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",z(),t.format.apply(t,arguments))},t.inherits=n(i),t._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(2))},function(e,t,n,r,i){(function(t){function a(e){return this instanceof a?(l.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",o)):new a(e)}function o(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}function u(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}e.exports=a;var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},f=n(5);f.inherits=n(4);var l=n(r),c=n(i);f.inherits(a,l),u(s(c.prototype),function(e){a.prototype[e]||(a.prototype[e]=c.prototype[e])})}).call(t,n(2))},function(e,t,n,r,i,a,o,u,s){(function(t){function f(e,t){var r=n(a);e=e||{};var i=e.highWaterMark,u=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:u,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(N||(N=n(o).StringDecoder),this.decoder=new N(e.encoding),this.encoding=e.encoding)}function l(e){n(u);return this instanceof l?(this._readableState=new f(e,this),this.readable=!0,void z.call(this)):new l(e)}function c(e,t,n,r,i){var a=g(t,n);if(a)e.emit("error",a);else if(D.isNullOrUndefined(n))t.reading=!1,t.ended||m(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var o=new Error("stream.unshift() after end event");e.emit("error",o)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&v(e)),b(e,t);else i||(t.reading=!1);return d(t)}function d(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){if(e>=$)e=$;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function p(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||D.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=h(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function g(e,t){var n=null;return D.isBuffer(t)||D.isString(t)||D.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function m(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,v(e)}function v(e){var n=e._readableState;n.needReadable=!1,n.emittedReadable||(P("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?t.nextTick(function(){y(e)}):y(e))}function y(e){P("emit readable"),e.emit("readable"),M(e)}function b(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){_(e,n)}))}function _(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(P("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function x(e){return function(){var t=e._readableState;P("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T.listenerCount(e,"data")&&(t.flowing=!0,M(e))}}function w(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(function(){k(e,n)}))}function k(e,t){t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;if(P("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function E(e,t){var n,r=t.buffer,i=t.length,a=!!t.decoder,o=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(o)n=r.shift();else if(!e||e>=i)n=a?r.join(""):R.concat(r,i),r.length=0;else if(e<r[0].length){var u=r[0];n=u.slice(0,e),r[0]=u.slice(e)}else if(e===r[0].length)n=r.shift();else{n=a?"":new R(e);for(var s=0,f=0,l=r.length;f<l&&s<e;f++){var u=r[0],c=Math.min(e-s,u.length);a?n+=u.slice(0,c):u.copy(n,s,0,c),c<u.length?r[0]=u.slice(c):r.shift(),s+=c}}return n}function O(e){var n=e._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function S(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function A(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}e.exports=l;var C=n(r),R=n(1).Buffer;l.ReadableState=f;var T=n(13).EventEmitter;T.listenerCount||(T.listenerCount=function(e,t){return e.listeners(t).length});var z=n(3),D=n(5);D.inherits=n(4);var N,P=n(i);P=P&&P.debuglog?P.debuglog("stream"):function(){},D.inherits(l,z),l.prototype.push=function(e,t){var n=this._readableState;return D.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new R(e,t),t="")),c(this,n,e,t,!1)},l.prototype.unshift=function(e){var t=this._readableState;return c(this,t,e,"",!0)},l.prototype.setEncoding=function(e){return N||(N=n(s).StringDecoder),this._readableState.decoder=new N(e),this._readableState.encoding=e,this};var $=8388608;l.prototype.read=function(e){P("read",e);var t=this._readableState,n=e;if((!D.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return P("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):v(this),null;if(e=p(e,t),0===e&&t.ended)return 0===t.length&&O(this),null;var r=t.needReadable;P("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,P("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,P("reading or ended",r)),r&&(P("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=p(n,t));var i;return i=e>0?E(e,t):null,D.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&O(this),D.isNull(i)||this.emit("data",i),i},l.prototype._read=function(e){this.emit("error",new Error("not implemented"))},l.prototype.pipe=function(e,n){function r(e){P("onunpipe"),e===c&&a()}function i(){P("onend"),e.end()}function a(){P("cleanup"),e.removeListener("close",s),e.removeListener("finish",f),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",r),c.removeListener("end",i),c.removeListener("end",a),c.removeListener("data",o),!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function o(t){P("ondata");var n=e.write(t);!1===n&&(P("false write response, pause",c._readableState.awaitDrain),c._readableState.awaitDrain++,c.pause())}function u(t){P("onerror",t),l(),e.removeListener("error",u),0===T.listenerCount(e,"error")&&e.emit("error",t)}function s(){e.removeListener("finish",f),l()}function f(){P("onfinish"),e.removeListener("close",s),l()}function l(){P("unpipe"),c.unpipe(e)}var c=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,P("pipe count=%d opts=%j",d.pipesCount,n);var h=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,p=h?i:a;d.endEmitted?t.nextTick(p):c.once("end",p),e.on("unpipe",r);var g=x(c);return e.on("drain",g),c.on("data",o),e._events&&e._events.error?C(e._events.error)?e._events.error.unshift(u):e._events.error=[u,e._events.error]:e.on("error",u),e.once("close",s),e.once("finish",f),e.emit("pipe",c),d.flowing||(P("pipe resume"),c.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var i=A(t.pipes,e);return i===-1?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},l.prototype.on=function(e,n){var r=z.prototype.on.call(this,e,n);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&v(this,i);else{var a=this;t.nextTick(function(){P("readable nexttick read 0"),a.read(0)})}}return r},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(P("resume"),e.flowing=!0,e.reading||(P("resume read 0"),this.read(0)),w(this,e)),this},l.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this},l.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(P("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(P("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var a=r.push(i);a||(n=!0,e.pause())}});for(var i in e)D.isFunction(e[i])&&D.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return S(a,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){P("wrapped _read",t),n&&(n=!1,e.resume())},r},l._fromList=E}).call(t,n(2))},function(e,t,n,r){function i(e,t){this.afterTransform=function(e,n){return a(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function a(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,f.isNullOrUndefined(n)||e.push(n),i&&i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new i(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){f.isFunction(this._flush)?this._flush(function(e){u(t,e)}):u(t)})}function u(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=o;var s=n(r),f=n(5);f.inherits=n(4),f.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;f.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},function(e,t,n,r,i){(function(t){function a(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function o(e,t){var i=n(r);e=e||{};var a=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=a||0===a?a:o,this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var u=e.decodeStrings===!1;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){g(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function u(e){var t=n(i);return this instanceof u||this instanceof t?(this._writableState=new o(e,this),this.writable=!0,void E.call(this)):new u(e)}function s(e,n,r){var i=new Error("write after end");e.emit("error",i),t.nextTick(function(){r(i)})}function f(e,n,r,i){var a=!0;if(!(M.isBuffer(r)||M.isString(r)||M.isNullOrUndefined(r)||n.objectMode)){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),t.nextTick(function(){i(o)}),a=!1}return a}function l(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&M.isString(t)&&(t=new k(t,n)),t}function c(e,t,n,r,i){n=l(t,n,r),M.isBuffer(n)&&(r="buffer");var o=t.objectMode?1:n.length;t.length+=o;var u=t.length<t.highWaterMark;return u||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new a(n,r,i)):d(e,t,!1,o,n,r,i),u}function d(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function h(e,n,r,i,a){r?t.nextTick(function(){n.pendingcb--,a(i)}):(n.pendingcb--,a(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function g(e,n){var r=e._writableState,i=r.sync,a=r.writecb;if(p(r),n)h(e,r,i,n,a);else{var o=b(e,r);o||r.corked||r.bufferProcessing||!r.buffer.length||y(e,r),i?t.nextTick(function(){m(e,r,o,a)}):m(e,r,o,a)}}function m(e,t,n,r){n||v(e,t),t.pendingcb--,r(),x(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function y(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],r=0;r<t.buffer.length;r++)n.push(t.buffer[r].callback);t.pendingcb++,d(e,t,!0,t.length,t.buffer,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)}),t.buffer=[]}else{for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],a=i.chunk,o=i.encoding,u=i.callback,s=t.objectMode?1:a.length;if(d(e,t,!1,s,a,o,u),t.writing){r++;break}}r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}t.bufferProcessing=!1}function b(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function _(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function x(e,t){var n=b(e,t);return n&&(0===t.pendingcb?(_(e,t),t.finished=!0,e.emit("finish")):_(e,t)),n}function w(e,n,r){n.ending=!0,x(e,n),r&&(n.finished?t.nextTick(r):e.once("finish",r)),n.ended=!0}e.exports=u;var k=n(1).Buffer;u.WritableState=o;var M=n(5);M.inherits=n(4);var E=n(3);M.inherits(u,E),u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},u.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return M.isFunction(t)&&(n=t,t=null),M.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),M.isFunction(n)||(n=function(){}),r.ended?s(this,r,n):f(this,r,e,n)&&(r.pendingcb++,i=c(this,r,e,t,n)),i},u.prototype.cork=function(){var e=this._writableState;e.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||y(this,e))},u.prototype._write=function(e,t,n){n(new Error("not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,n){var r=this._writableState;M.isFunction(e)?(n=e,e=null,t=null):M.isFunction(t)&&(n=t,t=null),M.isNullOrUndefined(e)||this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(t,n(2))},function(e,t,n,r){e.exports=n(r)}]));
//# sourceMappingURL=main.bb858fa9.js.map